import{r as e,u as t,L as s,a,R as r,b as n,c as l,d as o,B as i,e as c,f as d,N as m}from"./router-Bj6MOJYF.js";import{r as u,a as x,g as h}from"./vendor-DOHx2j1n.js";import{E as g,a as p,B as f,C as b,A as y,U as j,M as v,P as N,b as w,c as k,d as S,e as C,f as E,S as A,Q as T,D as _,g as R,h as P,X as O,i as I,j as D,T as L,k as F,l as q,m as M,n as $,o as z,p as U,q as B,r as V,s as H,t as W,F as Q,u as J,v as G,w as K,x as Y,y as X,z as Z,G as ee,H as te,R as se,I as ae,J as re,K as ne,L as le,N as oe,O as ie,V as ce,W as de,Y as me,Z as ue,_ as xe,$ as he,a0 as ge,a1 as pe,a2 as fe,a3 as be,a4 as ye,a5 as je,a6 as ve,a7 as Ne,a8 as we,a9 as ke,aa as Se,ab as Ce,ac as Ee,ad as Ae,ae as Te,af as _e,ag as Re,ah as Pe,ai as Oe,aj as Ie,ak as De,al as Le,am as Fe,an as qe,ao as Me,ap as $e,aq as ze,ar as Ue,as as Be,at as Ve,au as He,av as We,aw as Qe,ax as Je,ay as Ge,az as Ke,aA as Ye}from"./icons-DhZuubAn.js";import{r as Xe,B as Ze}from"./qr-DFhDPuf6.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var et,tt,st={exports:{}},at={};var rt,nt,lt,ot,it=(tt||(tt=1,st.exports=function(){if(et)return at;et=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function s(t,s,a){var r=null;if(void 0!==a&&(r=""+a),void 0!==s.key&&(r=""+s.key),"key"in s)for(var n in a={},s)"key"!==n&&(a[n]=s[n]);else a=s;return s=a.ref,{$$typeof:e,type:t,key:r,ref:void 0!==s?s:null,props:a}}return at.Fragment=t,at.jsx=s,at.jsxs=s,at}()),st.exports),ct={exports:{}},dt={},mt={exports:{}},ut={};function xt(){return nt||(nt=1,mt.exports=(rt||(rt=1,function(e){function t(e,t){var s=e.length;e.push(t);e:for(;0<s;){var a=s-1>>>1,n=e[a];if(!(0<r(n,t)))break e;e[a]=t,e[s]=n,s=a}}function s(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],s=e.pop();if(s!==t){e[0]=s;e:for(var a=0,n=e.length,l=n>>>1;a<l;){var o=2*(a+1)-1,i=e[o],c=o+1,d=e[c];if(0>r(i,s))c<n&&0>r(d,i)?(e[a]=d,e[c]=s,a=c):(e[a]=i,e[o]=s,a=o);else{if(!(c<n&&0>r(d,s)))break e;e[a]=d,e[c]=s,a=c}}}return t}function r(e,t){var s=e.sortIndex-t.sortIndex;return 0!==s?s:e.id-t.id}if(e.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var n=performance;e.unstable_now=function(){return n.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var i=[],c=[],d=1,m=null,u=3,x=!1,h=!1,g=!1,p=!1,f="function"==typeof setTimeout?setTimeout:null,b="function"==typeof clearTimeout?clearTimeout:null,y="undefined"!=typeof setImmediate?setImmediate:null;function j(e){for(var r=s(c);null!==r;){if(null===r.callback)a(c);else{if(!(r.startTime<=e))break;a(c),r.sortIndex=r.expirationTime,t(i,r)}r=s(c)}}function v(e){if(g=!1,j(e),!h)if(null!==s(i))h=!0,w||(w=!0,N());else{var t=s(c);null!==t&&R(v,t.startTime-e)}}var N,w=!1,k=-1,S=5,C=-1;function E(){return!(!p&&e.unstable_now()-C<S)}function A(){if(p=!1,w){var t=e.unstable_now();C=t;var r=!0;try{e:{h=!1,g&&(g=!1,b(k),k=-1),x=!0;var n=u;try{t:{for(j(t),m=s(i);null!==m&&!(m.expirationTime>t&&E());){var l=m.callback;if("function"==typeof l){m.callback=null,u=m.priorityLevel;var o=l(m.expirationTime<=t);if(t=e.unstable_now(),"function"==typeof o){m.callback=o,j(t),r=!0;break t}m===s(i)&&a(i),j(t)}else a(i);m=s(i)}if(null!==m)r=!0;else{var d=s(c);null!==d&&R(v,d.startTime-t),r=!1}}break e}finally{m=null,u=n,x=!1}r=void 0}}finally{r?N():w=!1}}}if("function"==typeof y)N=function(){y(A)};else if("undefined"!=typeof MessageChannel){var T=new MessageChannel,_=T.port2;T.port1.onmessage=A,N=function(){_.postMessage(null)}}else N=function(){f(A,0)};function R(t,s){k=f(function(){t(e.unstable_now())},s)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return u},e.unstable_next=function(e){switch(u){case 1:case 2:case 3:var t=3;break;default:t=u}var s=u;u=t;try{return e()}finally{u=s}},e.unstable_requestPaint=function(){p=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var s=u;u=e;try{return t()}finally{u=s}},e.unstable_scheduleCallback=function(a,r,n){var l=e.unstable_now();switch(n="object"==typeof n&&null!==n&&"number"==typeof(n=n.delay)&&0<n?l+n:l,a){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return a={id:d++,callback:r,priorityLevel:a,startTime:n,expirationTime:o=n+o,sortIndex:-1},n>l?(a.sortIndex=n,t(c,a),null===s(i)&&a===s(c)&&(g?(b(k),k=-1):g=!0,R(v,n-l))):(a.sortIndex=o,t(i,a),h||x||(h=!0,w||(w=!0,N()))),a},e.unstable_shouldYield=E,e.unstable_wrapCallback=function(e){var t=u;return function(){var s=u;u=t;try{return e.apply(this,arguments)}finally{u=s}}}}(ut)),ut)),mt.exports}
/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function ht(){if(lt)return dt;lt=1;var e=xt(),t=u(),s=x();function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function n(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(s=t.return),e=t.return}while(e)}return 3===t.tag?s:null}function l(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function o(e){if(n(e)!==e)throw Error(a(188))}function i(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=i(e)))return t;e=e.sibling}return null}var c=Object.assign,d=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),h=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),y=Symbol.for("react.consumer"),j=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),w=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),E=Symbol.for("react.memo_cache_sentinel"),A=Symbol.iterator;function T(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=A&&e[A]||e["@@iterator"])?e:null}var _=Symbol.for("react.client.reference");function R(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===_?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case g:return"Fragment";case f:return"Profiler";case p:return"StrictMode";case N:return"Suspense";case w:return"SuspenseList";case C:return"Activity"}if("object"==typeof e)switch(e.$$typeof){case h:return"Portal";case j:return(e.displayName||"Context")+".Provider";case y:return(e._context.displayName||"Context")+".Consumer";case v:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case k:return null!==(t=e.displayName||null)?t:R(e.type)||"Memo";case S:t=e._payload,e=e._init;try{return R(e(t))}catch(s){}}return null}var P=Array.isArray,O=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D={pending:!1,data:null,method:null,action:null},L=[],F=-1;function q(e){return{current:e}}function M(e){0>F||(e.current=L[F],L[F]=null,F--)}function $(e,t){F++,L[F]=e.current,e.current=t}var z=q(null),U=q(null),B=q(null),V=q(null);function H(e,t){switch($(B,t),$(U,e),$(z,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?lm(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=om(t=lm(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}M(z),$(z,e)}function W(){M(z),M(U),M(B)}function Q(e){null!==e.memoizedState&&$(V,e);var t=z.current,s=om(t,e.type);t!==s&&($(U,e),$(z,s))}function J(e){U.current===e&&(M(z),M(U)),V.current===e&&(M(V),Km._currentValue=D)}var G=Object.prototype.hasOwnProperty,K=e.unstable_scheduleCallback,Y=e.unstable_cancelCallback,X=e.unstable_shouldYield,Z=e.unstable_requestPaint,ee=e.unstable_now,te=e.unstable_getCurrentPriorityLevel,se=e.unstable_ImmediatePriority,ae=e.unstable_UserBlockingPriority,re=e.unstable_NormalPriority,ne=e.unstable_LowPriority,le=e.unstable_IdlePriority,oe=e.log,ie=e.unstable_setDisableYieldValue,ce=null,de=null;function me(e){if("function"==typeof oe&&ie(e),de&&"function"==typeof de.setStrictMode)try{de.setStrictMode(ce,e)}catch(t){}}var ue=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(xe(e)/he|0)|0},xe=Math.log,he=Math.LN2;var ge=256,pe=4194304;function fe(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function be(e,t,s){var a=e.pendingLanes;if(0===a)return 0;var r=0,n=e.suspendedLanes,l=e.pingedLanes;e=e.warmLanes;var o=134217727&a;return 0!==o?0!==(a=o&~n)?r=fe(a):0!==(l&=o)?r=fe(l):s||0!==(s=o&~e)&&(r=fe(s)):0!==(o=a&~n)?r=fe(o):0!==l?r=fe(l):s||0!==(s=a&~e)&&(r=fe(s)),0===r?0:0!==t&&t!==r&&0===(t&n)&&((n=r&-r)>=(s=t&-t)||32===n&&4194048&s)?t:r}function ye(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function je(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ve(){var e=ge;return!(4194048&(ge<<=1))&&(ge=256),e}function Ne(){var e=pe;return!(62914560&(pe<<=1))&&(pe=4194304),e}function we(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function ke(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Se(e,t,s){e.pendingLanes|=t,e.suspendedLanes&=~t;var a=31-ue(t);e.entangledLanes|=t,e.entanglements[a]=1073741824|e.entanglements[a]|4194090&s}function Ce(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var a=31-ue(s),r=1<<a;r&t|e[a]&t&&(e[a]|=t),s&=~r}}function Ee(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ae(e){return 2<(e&=-e)?8<e?134217727&e?32:268435456:8:2}function Te(){var e=I.p;return 0!==e?e:void 0===(e=window.event)?32:mu(e.type)}var _e=Math.random().toString(36).slice(2),Re="__reactFiber$"+_e,Pe="__reactProps$"+_e,Oe="__reactContainer$"+_e,Ie="__reactEvents$"+_e,De="__reactListeners$"+_e,Le="__reactHandles$"+_e,Fe="__reactResources$"+_e,qe="__reactMarker$"+_e;function Me(e){delete e[Re],delete e[Pe],delete e[Ie],delete e[De],delete e[Le]}function $e(e){var t=e[Re];if(t)return t;for(var s=e.parentNode;s;){if(t=s[Oe]||s[Re]){if(s=t.alternate,null!==t.child||null!==s&&null!==s.child)for(e=vm(e);null!==e;){if(s=e[Re])return s;e=vm(e)}return t}s=(e=s).parentNode}return null}function ze(e){if(e=e[Re]||e[Oe]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function Ue(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(a(33))}function Be(e){var t=e[Fe];return t||(t=e[Fe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ve(e){e[qe]=!0}var He=new Set,We={};function Qe(e,t){Je(e,t),Je(e+"Capture",t)}function Je(e,t){for(We[e]=t,e=0;e<t.length;e++)He.add(t[e])}var Ge,Ke,Ye=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xe={},Ze={};function et(e,t,s){if(r=t,G.call(Ze,r)||!G.call(Xe,r)&&(Ye.test(r)?Ze[r]=!0:(Xe[r]=!0,0)))if(null===s)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var a=t.toLowerCase().slice(0,5);if("data-"!==a&&"aria-"!==a)return void e.removeAttribute(t)}e.setAttribute(t,""+s)}var r}function tt(e,t,s){if(null===s)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+s)}}function st(e,t,s,a){if(null===a)e.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(s)}e.setAttributeNS(t,s,""+a)}}function at(e){if(void 0===Ge)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);Ge=t&&t[1]||"",Ke=-1<s.stack.indexOf("\n    at")?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Ge+e+Ke}var rt=!1;function nt(e,t){if(!e||rt)return"";rt=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(t){var s=function(){throw Error()};if(Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(s,[])}catch(r){var a=r}Reflect.construct(e,[],s)}else{try{s.call()}catch(n){a=n}e.call(s.prototype)}}else{try{throw Error()}catch(l){a=l}(s=e())&&"function"==typeof s.catch&&s.catch(function(){})}}catch(o){if(o&&a&&"string"==typeof o.stack)return[o.stack,a.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var n=a.DetermineComponentFrameRoot(),l=n[0],o=n[1];if(l&&o){var i=l.split("\n"),c=o.split("\n");for(r=a=0;a<i.length&&!i[a].includes("DetermineComponentFrameRoot");)a++;for(;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;if(a===i.length||r===c.length)for(a=i.length-1,r=c.length-1;1<=a&&0<=r&&i[a]!==c[r];)r--;for(;1<=a&&0<=r;a--,r--)if(i[a]!==c[r]){if(1!==a||1!==r)do{if(a--,0>--r||i[a]!==c[r]){var d="\n"+i[a].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}}while(1<=a&&0<=r);break}}}finally{rt=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?at(s):""}function ot(e){switch(e.tag){case 26:case 27:case 5:return at(e.type);case 16:return at("Lazy");case 13:return at("Suspense");case 19:return at("SuspenseList");case 0:case 15:return nt(e.type,!1);case 11:return nt(e.type.render,!1);case 1:return nt(e.type,!0);case 31:return at("Activity");default:return""}}function it(e){try{var t="";do{t+=ot(e),e=e.return}while(e);return t}catch(s){return"\nError generating stack: "+s.message+"\n"+s.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function mt(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ut(e){e._valueTracker||(e._valueTracker=function(e){var t=mt(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==s&&"function"==typeof s.get&&"function"==typeof s.set){var r=s.get,n=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){a=""+e,n.call(this,e)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(e){a=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),a="";return e&&(a=mt(e)?e.checked?"true":"false":e.value),(e=a)!==s&&(t.setValue(e),!0)}function gt(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var pt=/[\n"\\]/g;function ft(e){return e.replace(pt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function bt(e,t,s,a,r,n,l,o){e.name="",null!=l&&"function"!=typeof l&&"symbol"!=typeof l&&"boolean"!=typeof l?e.type=l:e.removeAttribute("type"),null!=t?"number"===l?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==l&&"reset"!==l||e.removeAttribute("value"),null!=t?jt(e,l,ct(t)):null!=s?jt(e,l,ct(s)):null!=a&&e.removeAttribute("value"),null==r&&null!=n&&(e.defaultChecked=!!n),null!=r&&(e.checked=r&&"function"!=typeof r&&"symbol"!=typeof r),null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o?e.name=""+ct(o):e.removeAttribute("name")}function yt(e,t,s,a,r,n,l,o){if(null!=n&&"function"!=typeof n&&"symbol"!=typeof n&&"boolean"!=typeof n&&(e.type=n),null!=t||null!=s){if(("submit"===n||"reset"===n)&&null==t)return;s=null!=s?""+ct(s):"",t=null!=t?""+ct(t):s,o||t===e.value||(e.value=t),e.defaultValue=t}a="function"!=typeof(a=null!=a?a:r)&&"symbol"!=typeof a&&!!a,e.checked=o?e.checked:!!a,e.defaultChecked=!!a,null!=l&&"function"!=typeof l&&"symbol"!=typeof l&&"boolean"!=typeof l&&(e.name=l)}function jt(e,t,s){"number"===t&&gt(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function vt(e,t,s,a){if(e=e.options,t){t={};for(var r=0;r<s.length;r++)t["$"+s[r]]=!0;for(s=0;s<e.length;s++)r=t.hasOwnProperty("$"+e[s].value),e[s].selected!==r&&(e[s].selected=r),r&&a&&(e[s].defaultSelected=!0)}else{for(s=""+ct(s),t=null,r=0;r<e.length;r++){if(e[r].value===s)return e[r].selected=!0,void(a&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function Nt(e,t,s){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=s)?e.defaultValue=null!=s?""+ct(s):"":e.defaultValue!==t&&(e.defaultValue=t)}function wt(e,t,s,r){if(null==t){if(null!=r){if(null!=s)throw Error(a(92));if(P(r)){if(1<r.length)throw Error(a(93));r=r[0]}s=r}null==s&&(s=""),t=s}s=ct(t),e.defaultValue=s,(r=e.textContent)===s&&""!==r&&null!==r&&(e.value=r)}function kt(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&3===s.nodeType)return void(s.nodeValue=t)}e.textContent=t}var St=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ct(e,t,s){var a=0===t.indexOf("--");null==s||"boolean"==typeof s||""===s?a?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":a?e.setProperty(t,s):"number"!=typeof s||0===s||St.has(t)?"float"===t?e.cssFloat=s:e[t]=(""+s).trim():e[t]=s+"px"}function Et(e,t,s){if(null!=t&&"object"!=typeof t)throw Error(a(62));if(e=e.style,null!=s){for(var r in s)!s.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var n in t)r=t[n],t.hasOwnProperty(n)&&s[n]!==r&&Ct(e,n,r)}else for(var l in t)t.hasOwnProperty(l)&&Ct(e,l,t[l])}function At(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),_t=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Rt(e){return _t.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Pt=null;function Ot(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var It=null,Dt=null;function Lt(e){var t=ze(e);if(t&&(e=t.stateNode)){var s=e[Pe]||null;e:switch(e=t.stateNode,t.type){case"input":if(bt(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),t=s.name,"radio"===s.type&&null!=t){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+ft(""+t)+'"][type="radio"]'),t=0;t<s.length;t++){var r=s[t];if(r!==e&&r.form===e.form){var n=r[Pe]||null;if(!n)throw Error(a(90));bt(r,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name)}}for(t=0;t<s.length;t++)(r=s[t]).form===e.form&&ht(r)}break e;case"textarea":Nt(e,s.value,s.defaultValue);break e;case"select":null!=(t=s.value)&&vt(e,!!s.multiple,t,!1)}}}var Ft=!1;function qt(e,t,s){if(Ft)return e(t,s);Ft=!0;try{return e(t)}finally{if(Ft=!1,(null!==It||null!==Dt)&&(Bc(),It&&(t=It,e=Dt,Dt=It=null,Lt(t),e)))for(t=0;t<e.length;t++)Lt(e[t])}}function Mt(e,t){var s=e.stateNode;if(null===s)return null;var r=s[Pe]||null;if(null===r)return null;s=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(s&&"function"!=typeof s)throw Error(a(231,t,typeof s));return s}var $t=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),zt=!1;if($t)try{var Ut={};Object.defineProperty(Ut,"passive",{get:function(){zt=!0}}),window.addEventListener("test",Ut,Ut),window.removeEventListener("test",Ut,Ut)}catch(Du){zt=!1}var Bt=null,Vt=null,Ht=null;function Wt(){if(Ht)return Ht;var e,t,s=Vt,a=s.length,r="value"in Bt?Bt.value:Bt.textContent,n=r.length;for(e=0;e<a&&s[e]===r[e];e++);var l=a-e;for(t=1;t<=l&&s[a-t]===r[n-t];t++);return Ht=r.slice(e,1<t?1-t:void 0)}function Qt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Jt(){return!0}function Gt(){return!1}function Kt(e){function t(t,s,a,r,n){for(var l in this._reactName=t,this._targetInst=a,this.type=s,this.nativeEvent=r,this.target=n,this.currentTarget=null,e)e.hasOwnProperty(l)&&(t=e[l],this[l]=t?t(r):r[l]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?Jt:Gt,this.isPropagationStopped=Gt,this}return c(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Jt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Jt)},persist:function(){},isPersistent:Jt}),t}var Yt,Xt,Zt,es={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ts=Kt(es),ss=c({},es,{view:0,detail:0}),as=Kt(ss),rs=c({},ss,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gs,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zt&&(Zt&&"mousemove"===e.type?(Yt=e.screenX-Zt.screenX,Xt=e.screenY-Zt.screenY):Xt=Yt=0,Zt=e),Yt)},movementY:function(e){return"movementY"in e?e.movementY:Xt}}),ns=Kt(rs),ls=Kt(c({},rs,{dataTransfer:0})),os=Kt(c({},ss,{relatedTarget:0})),is=Kt(c({},es,{animationName:0,elapsedTime:0,pseudoElement:0})),cs=Kt(c({},es,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),ds=Kt(c({},es,{data:0})),ms={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},us={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xs={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hs(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xs[e])&&!!t[e]}function gs(){return hs}var ps=Kt(c({},ss,{key:function(e){if(e.key){var t=ms[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Qt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?us[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gs,charCode:function(e){return"keypress"===e.type?Qt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Qt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),fs=Kt(c({},rs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),bs=Kt(c({},ss,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gs})),ys=Kt(c({},es,{propertyName:0,elapsedTime:0,pseudoElement:0})),js=Kt(c({},rs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),vs=Kt(c({},es,{newState:0,oldState:0})),Ns=[9,13,27,32],ws=$t&&"CompositionEvent"in window,ks=null;$t&&"documentMode"in document&&(ks=document.documentMode);var Ss=$t&&"TextEvent"in window&&!ks,Cs=$t&&(!ws||ks&&8<ks&&11>=ks),Es=String.fromCharCode(32),As=!1;function Ts(e,t){switch(e){case"keyup":return-1!==Ns.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _s(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Rs=!1;var Ps={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Os(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ps[e.type]:"textarea"===t}function Is(e,t,s,a){It?Dt?Dt.push(a):Dt=[a]:It=a,0<(t=Wd(t,"onChange")).length&&(s=new ts("onChange","change",null,s,a),e.push({event:s,listeners:t}))}var Ds=null,Ls=null;function Fs(e){qd(e,0)}function qs(e){if(ht(Ue(e)))return e}function Ms(e,t){if("change"===e)return t}var $s=!1;if($t){var zs;if($t){var Us="oninput"in document;if(!Us){var Bs=document.createElement("div");Bs.setAttribute("oninput","return;"),Us="function"==typeof Bs.oninput}zs=Us}else zs=!1;$s=zs&&(!document.documentMode||9<document.documentMode)}function Vs(){Ds&&(Ds.detachEvent("onpropertychange",Hs),Ls=Ds=null)}function Hs(e){if("value"===e.propertyName&&qs(Ls)){var t=[];Is(t,Ls,e,Ot(e)),qt(Fs,t)}}function Ws(e,t,s){"focusin"===e?(Vs(),Ls=s,(Ds=t).attachEvent("onpropertychange",Hs)):"focusout"===e&&Vs()}function Qs(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return qs(Ls)}function Js(e,t){if("click"===e)return qs(t)}function Gs(e,t){if("input"===e||"change"===e)return qs(t)}var Ks="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function Ys(e,t){if(Ks(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;for(a=0;a<s.length;a++){var r=s[a];if(!G.call(t,r)||!Ks(e[r],t[r]))return!1}return!0}function Xs(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Zs(e,t){var s,a=Xs(e);for(e=0;a;){if(3===a.nodeType){if(s=e+a.textContent.length,e<=t&&s>=t)return{node:a,offset:t-e};e=s}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Xs(a)}}function ea(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ea(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ta(e){for(var t=gt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var s="string"==typeof t.contentWindow.location.href}catch(a){s=!1}if(!s)break;t=gt((e=t.contentWindow).document)}return t}function sa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var aa=$t&&"documentMode"in document&&11>=document.documentMode,ra=null,na=null,la=null,oa=!1;function ia(e,t,s){var a=s.window===s?s.document:9===s.nodeType?s:s.ownerDocument;oa||null==ra||ra!==gt(a)||("selectionStart"in(a=ra)&&sa(a)?a={start:a.selectionStart,end:a.selectionEnd}:a={anchorNode:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset},la&&Ys(la,a)||(la=a,0<(a=Wd(na,"onSelect")).length&&(t=new ts("onSelect","select",null,t,s),e.push({event:t,listeners:a}),t.target=ra)))}function ca(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var da={animationend:ca("Animation","AnimationEnd"),animationiteration:ca("Animation","AnimationIteration"),animationstart:ca("Animation","AnimationStart"),transitionrun:ca("Transition","TransitionRun"),transitionstart:ca("Transition","TransitionStart"),transitioncancel:ca("Transition","TransitionCancel"),transitionend:ca("Transition","TransitionEnd")},ma={},ua={};function xa(e){if(ma[e])return ma[e];if(!da[e])return e;var t,s=da[e];for(t in s)if(s.hasOwnProperty(t)&&t in ua)return ma[e]=s[t];return e}$t&&(ua=document.createElement("div").style,"AnimationEvent"in window||(delete da.animationend.animation,delete da.animationiteration.animation,delete da.animationstart.animation),"TransitionEvent"in window||delete da.transitionend.transition);var ha=xa("animationend"),ga=xa("animationiteration"),pa=xa("animationstart"),fa=xa("transitionrun"),ba=xa("transitionstart"),ya=xa("transitioncancel"),ja=xa("transitionend"),va=new Map,Na="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wa(e,t){va.set(e,t),Qe(t,[e])}Na.push("scrollEnd");var ka=new WeakMap;function Sa(e,t){if("object"==typeof e&&null!==e){var s=ka.get(e);return void 0!==s?s:(t={value:e,source:t,stack:it(t)},ka.set(e,t),t)}return{value:e,source:t,stack:it(t)}}var Ca=[],Ea=0,Aa=0;function Ta(){for(var e=Ea,t=Aa=Ea=0;t<e;){var s=Ca[t];Ca[t++]=null;var a=Ca[t];Ca[t++]=null;var r=Ca[t];Ca[t++]=null;var n=Ca[t];if(Ca[t++]=null,null!==a&&null!==r){var l=a.pending;null===l?r.next=r:(r.next=l.next,l.next=r),a.pending=r}0!==n&&Oa(s,r,n)}}function _a(e,t,s,a){Ca[Ea++]=e,Ca[Ea++]=t,Ca[Ea++]=s,Ca[Ea++]=a,Aa|=a,e.lanes|=a,null!==(e=e.alternate)&&(e.lanes|=a)}function Ra(e,t,s,a){return _a(e,t,s,a),Ia(e)}function Pa(e,t){return _a(e,null,null,t),Ia(e)}function Oa(e,t,s){e.lanes|=s;var a=e.alternate;null!==a&&(a.lanes|=s);for(var r=!1,n=e.return;null!==n;)n.childLanes|=s,null!==(a=n.alternate)&&(a.childLanes|=s),22===n.tag&&(null===(e=n.stateNode)||1&e._visibility||(r=!0)),e=n,n=n.return;return 3===e.tag?(n=e.stateNode,r&&null!==t&&(r=31-ue(s),null===(a=(e=n.hiddenUpdates)[r])?e[r]=[t]:a.push(t),t.lane=536870912|s),n):null}function Ia(e){if(50<Ic)throw Ic=0,Dc=null,Error(a(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Da={};function La(e,t,s,a){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fa(e,t,s,a){return new La(e,t,s,a)}function qa(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ma(e,t){var s=e.alternate;return null===s?((s=Fa(e.tag,t,e.key,e.mode)).elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=65011712&e.flags,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function $a(e,t){e.flags&=65011714;var s=e.alternate;return null===s?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,t=s.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function za(e,t,s,r,n,l){var o=0;if(r=e,"function"==typeof e)qa(e)&&(o=1);else if("string"==typeof e)o=function(e,t,s){if(1===s||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!=typeof t.precedence||"string"!=typeof t.href||""===t.href)break;return!0;case"link":if("string"!=typeof t.rel||"string"!=typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"==typeof t.precedence&&null==e);case"script":if(t.async&&"function"!=typeof t.async&&"symbol"!=typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"==typeof t.src)return!0}return!1}(e,s,z.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case C:return(e=Fa(31,s,t,n)).elementType=C,e.lanes=l,e;case g:return Ua(s.children,n,l,t);case p:o=8,n|=24;break;case f:return(e=Fa(12,s,t,2|n)).elementType=f,e.lanes=l,e;case N:return(e=Fa(13,s,t,n)).elementType=N,e.lanes=l,e;case w:return(e=Fa(19,s,t,n)).elementType=w,e.lanes=l,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case b:case j:o=10;break e;case y:o=9;break e;case v:o=11;break e;case k:o=14;break e;case S:o=16,r=null;break e}o=29,s=Error(a(130,null===e?"null":typeof e,"")),r=null}return(t=Fa(o,s,t,n)).elementType=e,t.type=r,t.lanes=l,t}function Ua(e,t,s,a){return(e=Fa(7,e,a,t)).lanes=s,e}function Ba(e,t,s){return(e=Fa(6,e,null,t)).lanes=s,e}function Va(e,t,s){return(t=Fa(4,null!==e.children?e.children:[],e.key,t)).lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ha=[],Wa=0,Qa=null,Ja=0,Ga=[],Ka=0,Ya=null,Xa=1,Za="";function er(e,t){Ha[Wa++]=Ja,Ha[Wa++]=Qa,Qa=e,Ja=t}function tr(e,t,s){Ga[Ka++]=Xa,Ga[Ka++]=Za,Ga[Ka++]=Ya,Ya=e;var a=Xa;e=Za;var r=32-ue(a)-1;a&=~(1<<r),s+=1;var n=32-ue(t)+r;if(30<n){var l=r-r%5;n=(a&(1<<l)-1).toString(32),a>>=l,r-=l,Xa=1<<32-ue(t)+r|s<<r|a,Za=n+e}else Xa=1<<n|s<<r|a,Za=e}function sr(e){null!==e.return&&(er(e,1),tr(e,1,0))}function ar(e){for(;e===Qa;)Qa=Ha[--Wa],Ha[Wa]=null,Ja=Ha[--Wa],Ha[Wa]=null;for(;e===Ya;)Ya=Ga[--Ka],Ga[Ka]=null,Za=Ga[--Ka],Ga[Ka]=null,Xa=Ga[--Ka],Ga[Ka]=null}var rr=null,nr=null,lr=!1,or=null,ir=!1,cr=Error(a(519));function dr(e){throw pr(Sa(Error(a(418,"")),e)),cr}function mr(e){var t=e.stateNode,s=e.type,a=e.memoizedProps;switch(t[Re]=e,t[Pe]=a,s){case"dialog":Md("cancel",t),Md("close",t);break;case"iframe":case"object":case"embed":Md("load",t);break;case"video":case"audio":for(s=0;s<Ld.length;s++)Md(Ld[s],t);break;case"source":Md("error",t);break;case"img":case"image":case"link":Md("error",t),Md("load",t);break;case"details":Md("toggle",t);break;case"input":Md("invalid",t),yt(t,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0),ut(t);break;case"select":Md("invalid",t);break;case"textarea":Md("invalid",t),wt(t,a.value,a.defaultValue,a.children),ut(t)}"string"!=typeof(s=a.children)&&"number"!=typeof s&&"bigint"!=typeof s||t.textContent===""+s||!0===a.suppressHydrationWarning||Xd(t.textContent,s)?(null!=a.popover&&(Md("beforetoggle",t),Md("toggle",t)),null!=a.onScroll&&Md("scroll",t),null!=a.onScrollEnd&&Md("scrollend",t),null!=a.onClick&&(t.onclick=Zd),t=!0):t=!1,t||dr(e)}function ur(e){for(rr=e.return;rr;)switch(rr.tag){case 5:case 13:return void(ir=!1);case 27:case 3:return void(ir=!0);default:rr=rr.return}}function xr(e){if(e!==rr)return!1;if(!lr)return ur(e),lr=!0,!1;var t,s=e.tag;if((t=3!==s&&27!==s)&&((t=5===s)&&(t=!("form"!==(t=e.type)&&"button"!==t)||im(e.type,e.memoizedProps)),t=!t),t&&nr&&dr(e),ur(e),13===s){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,s=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===s){nr=ym(e.nextSibling);break e}s--}else"$"!==t&&"$!"!==t&&"$?"!==t||s++;e=e.nextSibling}nr=null}}else 27===s?(s=nr,gm(e.type)?(e=jm,jm=null,nr=e):nr=s):nr=rr?ym(e.stateNode.nextSibling):null;return!0}function hr(){nr=rr=null,lr=!1}function gr(){var e=or;return null!==e&&(null===vc?vc=e:vc.push.apply(vc,e),or=null),e}function pr(e){null===or?or=[e]:or.push(e)}var fr=q(null),br=null,yr=null;function jr(e,t,s){$(fr,t._currentValue),t._currentValue=s}function vr(e){e._currentValue=fr.current,M(fr)}function Nr(e,t,s){for(;null!==e;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==a&&(a.childLanes|=t)):null!==a&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===s)break;e=e.return}}function wr(e,t,s,r){var n=e.child;for(null!==n&&(n.return=e);null!==n;){var l=n.dependencies;if(null!==l){var o=n.child;l=l.firstContext;e:for(;null!==l;){var i=l;l=n;for(var c=0;c<t.length;c++)if(i.context===t[c]){l.lanes|=s,null!==(i=l.alternate)&&(i.lanes|=s),Nr(l.return,s,e),r||(o=null);break e}l=i.next}}else if(18===n.tag){if(null===(o=n.return))throw Error(a(341));o.lanes|=s,null!==(l=o.alternate)&&(l.lanes|=s),Nr(o,s,e),o=null}else o=n.child;if(null!==o)o.return=n;else for(o=n;null!==o;){if(o===e){o=null;break}if(null!==(n=o.sibling)){n.return=o.return,o=n;break}o=o.return}n=o}}function kr(e,t,s,r){e=null;for(var n=t,l=!1;null!==n;){if(!l)if(524288&n.flags)l=!0;else if(262144&n.flags)break;if(10===n.tag){var o=n.alternate;if(null===o)throw Error(a(387));if(null!==(o=o.memoizedProps)){var i=n.type;Ks(n.pendingProps.value,o.value)||(null!==e?e.push(i):e=[i])}}else if(n===V.current){if(null===(o=n.alternate))throw Error(a(387));o.memoizedState.memoizedState!==n.memoizedState.memoizedState&&(null!==e?e.push(Km):e=[Km])}n=n.return}null!==e&&wr(t,e,s,r),t.flags|=262144}function Sr(e){for(e=e.firstContext;null!==e;){if(!Ks(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Cr(e){br=e,yr=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Er(e){return Tr(br,e)}function Ar(e,t){return null===br&&Cr(e),Tr(e,t)}function Tr(e,t){var s=t._currentValue;if(t={context:t,memoizedValue:s,next:null},null===yr){if(null===e)throw Error(a(308));yr=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else yr=yr.next=t;return s}var _r="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Rr=e.unstable_scheduleCallback,Pr=e.unstable_NormalPriority,Or={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ir(){return{controller:new _r,data:new Map,refCount:0}}function Dr(e){e.refCount--,0===e.refCount&&Rr(Pr,function(){e.controller.abort()})}var Lr=null,Fr=0,qr=0,Mr=null;function $r(){if(0===--Fr&&null!==Lr){null!==Mr&&(Mr.status="fulfilled");var e=Lr;Lr=null,qr=0,Mr=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var zr=O.S;O.S=function(e,t){"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===Lr){var s=Lr=[];Fr=0,qr=Rd(),Mr={status:"pending",value:void 0,then:function(e){s.push(e)}}}Fr++,t.then($r,$r)}(0,t),null!==zr&&zr(e,t)};var Ur=q(null);function Br(){var e=Ur.current;return null!==e?e:nc.pooledCache}function Vr(e,t){$(Ur,null===t?Ur.current:t.pool)}function Hr(){var e=Br();return null===e?null:{parent:Or._currentValue,pool:e}}var Wr=Error(a(460)),Qr=Error(a(474)),Jr=Error(a(542)),Gr={then:function(){}};function Kr(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Yr(){}function Xr(e,t,s){switch(void 0===(s=e[s])?e.push(t):s!==t&&(t.then(Yr,Yr),t=s),t.status){case"fulfilled":return t.value;case"rejected":throw tn(e=t.reason),e;default:if("string"==typeof t.status)t.then(Yr,Yr);else{if(null!==(e=nc)&&100<e.shellSuspendCounter)throw Error(a(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var s=t;s.status="fulfilled",s.value=e}},function(e){if("pending"===t.status){var s=t;s.status="rejected",s.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw tn(e=t.reason),e}throw Zr=t,Wr}}var Zr=null;function en(){if(null===Zr)throw Error(a(459));var e=Zr;return Zr=null,e}function tn(e){if(e===Wr||e===Jr)throw Error(a(483))}var sn=!1;function an(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rn(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function nn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ln(e,t,s){var a=e.updateQueue;if(null===a)return null;if(a=a.shared,2&rc){var r=a.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),a.pending=t,t=Ia(e),Oa(e,null,s),t}return _a(e,a,t,s),Ia(e)}function on(e,t,s){if(null!==(t=t.updateQueue)&&(t=t.shared,4194048&s)){var a=t.lanes;s|=a&=e.pendingLanes,t.lanes=s,Ce(e,s)}}function cn(e,t){var s=e.updateQueue,a=e.alternate;if(null!==a&&s===(a=a.updateQueue)){var r=null,n=null;if(null!==(s=s.firstBaseUpdate)){do{var l={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};null===n?r=n=l:n=n.next=l,s=s.next}while(null!==s);null===n?r=n=t:n=n.next=t}else r=n=t;return s={baseState:a.baseState,firstBaseUpdate:r,lastBaseUpdate:n,shared:a.shared,callbacks:a.callbacks},void(e.updateQueue=s)}null===(e=s.lastBaseUpdate)?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}var dn=!1;function mn(){if(dn){if(null!==Mr)throw Mr}}function un(e,t,s,a){dn=!1;var r=e.updateQueue;sn=!1;var n=r.firstBaseUpdate,l=r.lastBaseUpdate,o=r.shared.pending;if(null!==o){r.shared.pending=null;var i=o,d=i.next;i.next=null,null===l?n=d:l.next=d,l=i;var m=e.alternate;null!==m&&((o=(m=m.updateQueue).lastBaseUpdate)!==l&&(null===o?m.firstBaseUpdate=d:o.next=d,m.lastBaseUpdate=i))}if(null!==n){var u=r.baseState;for(l=0,m=d=i=null,o=n;;){var x=-536870913&o.lane,h=x!==o.lane;if(h?(oc&x)===x:(a&x)===x){0!==x&&x===qr&&(dn=!0),null!==m&&(m=m.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var g=e,p=o;x=t;var f=s;switch(p.tag){case 1:if("function"==typeof(g=p.payload)){u=g.call(f,u,x);break e}u=g;break e;case 3:g.flags=-65537&g.flags|128;case 0:if(null==(x="function"==typeof(g=p.payload)?g.call(f,u,x):g))break e;u=c({},u,x);break e;case 2:sn=!0}}null!==(x=o.callback)&&(e.flags|=64,h&&(e.flags|=8192),null===(h=r.callbacks)?r.callbacks=[x]:h.push(x))}else h={lane:x,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===m?(d=m=h,i=u):m=m.next=h,l|=x;if(null===(o=o.next)){if(null===(o=r.shared.pending))break;o=(h=o).next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}null===m&&(i=u),r.baseState=i,r.firstBaseUpdate=d,r.lastBaseUpdate=m,null===n&&(r.shared.lanes=0),gc|=l,e.lanes=l,e.memoizedState=u}}function xn(e,t){if("function"!=typeof e)throw Error(a(191,e));e.call(t)}function hn(e,t){var s=e.callbacks;if(null!==s)for(e.callbacks=null,e=0;e<s.length;e++)xn(s[e],t)}var gn=q(null),pn=q(0);function fn(e,t){$(pn,e=xc),$(gn,t),xc=e|t.baseLanes}function bn(){$(pn,xc),$(gn,gn.current)}function yn(){xc=pn.current,M(gn),M(pn)}var jn=0,vn=null,Nn=null,wn=null,kn=!1,Sn=!1,Cn=!1,En=0,An=0,Tn=null,_n=0;function Rn(){throw Error(a(321))}function Pn(e,t){if(null===t)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!Ks(e[s],t[s]))return!1;return!0}function On(e,t,s,a,r,n){return jn=n,vn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,O.H=null===e||null===e.memoizedState?Ql:Jl,Cn=!1,n=s(a,r),Cn=!1,Sn&&(n=Dn(t,s,a,r)),In(e),n}function In(e){O.H=Wl;var t=null!==Nn&&null!==Nn.next;if(jn=0,wn=Nn=vn=null,kn=!1,An=0,Tn=null,t)throw Error(a(300));null===e||To||null!==(e=e.dependencies)&&Sr(e)&&(To=!0)}function Dn(e,t,s,r){vn=e;var n=0;do{if(Sn&&(Tn=null),An=0,Sn=!1,25<=n)throw Error(a(301));if(n+=1,wn=Nn=null,null!=e.updateQueue){var l=e.updateQueue;l.lastEffect=null,l.events=null,l.stores=null,null!=l.memoCache&&(l.memoCache.index=0)}O.H=Gl,l=t(s,r)}while(Sn);return l}function Ln(){var e=O.H,t=e.useState()[0];return t="function"==typeof t.then?Un(t):t,e=e.useState()[0],(null!==Nn?Nn.memoizedState:null)!==e&&(vn.flags|=1024),t}function Fn(){var e=0!==En;return En=0,e}function qn(e,t,s){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s}function Mn(e){if(kn){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}kn=!1}jn=0,wn=Nn=vn=null,Sn=!1,An=En=0,Tn=null}function $n(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===wn?vn.memoizedState=wn=e:wn=wn.next=e,wn}function zn(){if(null===Nn){var e=vn.alternate;e=null!==e?e.memoizedState:null}else e=Nn.next;var t=null===wn?vn.memoizedState:wn.next;if(null!==t)wn=t,Nn=e;else{if(null===e){if(null===vn.alternate)throw Error(a(467));throw Error(a(310))}e={memoizedState:(Nn=e).memoizedState,baseState:Nn.baseState,baseQueue:Nn.baseQueue,queue:Nn.queue,next:null},null===wn?vn.memoizedState=wn=e:wn=wn.next=e}return wn}function Un(e){var t=An;return An+=1,null===Tn&&(Tn=[]),e=Xr(Tn,e,t),t=vn,null===(null===wn?t.memoizedState:wn.next)&&(t=t.alternate,O.H=null===t||null===t.memoizedState?Ql:Jl),e}function Bn(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return Un(e);if(e.$$typeof===j)return Er(e)}throw Error(a(438,String(e)))}function Vn(e){var t=null,s=vn.updateQueue;if(null!==s&&(t=s.memoCache),null==t){var a=vn.alternate;null!==a&&(null!==(a=a.updateQueue)&&(null!=(a=a.memoCache)&&(t={data:a.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===s&&(s={lastEffect:null,events:null,stores:null,memoCache:null},vn.updateQueue=s),s.memoCache=t,void 0===(s=t.data[t.index]))for(s=t.data[t.index]=Array(e),a=0;a<e;a++)s[a]=E;return t.index++,s}function Hn(e,t){return"function"==typeof t?t(e):t}function Wn(e){return Qn(zn(),Nn,e)}function Qn(e,t,s){var r=e.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=s;var n=e.baseQueue,l=r.pending;if(null!==l){if(null!==n){var o=n.next;n.next=l.next,l.next=o}t.baseQueue=n=l,r.pending=null}if(l=e.baseState,null===n)e.memoizedState=l;else{var i=o=null,c=null,d=t=n.next,m=!1;do{var u=-536870913&d.lane;if(u!==d.lane?(oc&u)===u:(jn&u)===u){var x=d.revertLane;if(0===x)null!==c&&(c=c.next={lane:0,revertLane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),u===qr&&(m=!0);else{if((jn&x)===x){d=d.next,x===qr&&(m=!0);continue}u={lane:0,revertLane:d.revertLane,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},null===c?(i=c=u,o=l):c=c.next=u,vn.lanes|=x,gc|=x}u=d.action,Cn&&s(l,u),l=d.hasEagerState?d.eagerState:s(l,u)}else x={lane:u,revertLane:d.revertLane,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},null===c?(i=c=x,o=l):c=c.next=x,vn.lanes|=u,gc|=u;d=d.next}while(null!==d&&d!==t);if(null===c?o=l:c.next=i,!Ks(l,e.memoizedState)&&(To=!0,m&&null!==(s=Mr)))throw s;e.memoizedState=l,e.baseState=o,e.baseQueue=c,r.lastRenderedState=l}return null===n&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Jn(e){var t=zn(),s=t.queue;if(null===s)throw Error(a(311));s.lastRenderedReducer=e;var r=s.dispatch,n=s.pending,l=t.memoizedState;if(null!==n){s.pending=null;var o=n=n.next;do{l=e(l,o.action),o=o.next}while(o!==n);Ks(l,t.memoizedState)||(To=!0),t.memoizedState=l,null===t.baseQueue&&(t.baseState=l),s.lastRenderedState=l}return[l,r]}function Gn(e,t,s){var r=vn,n=zn(),l=lr;if(l){if(void 0===s)throw Error(a(407));s=s()}else s=t();var o=!Ks((Nn||n).memoizedState,s);if(o&&(n.memoizedState=s,To=!0),n=n.queue,bl(2048,8,Xn.bind(null,r,n,e),[e]),n.getSnapshot!==t||o||null!==wn&&1&wn.memoizedState.tag){if(r.flags|=2048,gl(9,{destroy:void 0,resource:void 0},Yn.bind(null,r,n,s,t),null),null===nc)throw Error(a(349));l||124&jn||Kn(r,t,s)}return s}function Kn(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},null===(t=vn.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},vn.updateQueue=t,t.stores=[e]):null===(s=t.stores)?t.stores=[e]:s.push(e)}function Yn(e,t,s,a){t.value=s,t.getSnapshot=a,Zn(t)&&el(e)}function Xn(e,t,s){return s(function(){Zn(t)&&el(e)})}function Zn(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Ks(e,s)}catch(a){return!0}}function el(e){var t=Pa(e,2);null!==t&&qc(t,e,2)}function tl(e){var t=$n();if("function"==typeof e){var s=e;if(e=s(),Cn){me(!0);try{s()}finally{me(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hn,lastRenderedState:e},t}function sl(e,t,s,a){return e.baseState=s,Qn(e,Nn,"function"==typeof a?a:Hn)}function al(e,t,s,r,n){if(Bl(e))throw Error(a(485));if(null!==(e=t.action)){var l={payload:n,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){l.listeners.push(e)}};null!==O.T?s(!0):l.isTransition=!1,r(l),null===(s=t.pending)?(l.next=t.pending=l,rl(t,l)):(l.next=s.next,t.pending=s.next=l)}}function rl(e,t){var s=t.action,a=t.payload,r=e.state;if(t.isTransition){var n=O.T,l={};O.T=l;try{var o=s(r,a),i=O.S;null!==i&&i(l,o),nl(e,t,o)}catch(c){ol(e,t,c)}finally{O.T=n}}else try{nl(e,t,n=s(r,a))}catch(d){ol(e,t,d)}}function nl(e,t,s){null!==s&&"object"==typeof s&&"function"==typeof s.then?s.then(function(s){ll(e,t,s)},function(s){return ol(e,t,s)}):ll(e,t,s)}function ll(e,t,s){t.status="fulfilled",t.value=s,il(t),e.state=s,null!==(t=e.pending)&&((s=t.next)===t?e.pending=null:(s=s.next,t.next=s,rl(e,s)))}function ol(e,t,s){var a=e.pending;if(e.pending=null,null!==a){a=a.next;do{t.status="rejected",t.reason=s,il(t),t=t.next}while(t!==a)}e.action=null}function il(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function cl(e,t){return t}function dl(e,t){if(lr){var s=nc.formState;if(null!==s){e:{var a=vn;if(lr){if(nr){t:{for(var r=nr,n=ir;8!==r.nodeType;){if(!n){r=null;break t}if(null===(r=ym(r.nextSibling))){r=null;break t}}r="F!"===(n=r.data)||"F"===n?r:null}if(r){nr=ym(r.nextSibling),a="F!"===r.data;break e}}dr(a)}a=!1}a&&(t=s[0])}}return(s=$n()).memoizedState=s.baseState=t,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cl,lastRenderedState:t},s.queue=a,s=$l.bind(null,vn,a),a.dispatch=s,a=tl(!1),n=Ul.bind(null,vn,!1,a.queue),r={state:t,dispatch:null,action:e,pending:null},(a=$n()).queue=r,s=al.bind(null,vn,r,n,s),r.dispatch=s,a.memoizedState=e,[t,s,!1]}function ml(e){return ul(zn(),Nn,e)}function ul(e,t,s){if(t=Qn(e,t,cl)[0],e=Wn(Hn)[0],"object"==typeof t&&null!==t&&"function"==typeof t.then)try{var a=Un(t)}catch(l){if(l===Wr)throw Jr;throw l}else a=t;var r=(t=zn()).queue,n=r.dispatch;return s!==t.memoizedState&&(vn.flags|=2048,gl(9,{destroy:void 0,resource:void 0},xl.bind(null,r,s),null)),[a,n,e]}function xl(e,t){e.action=t}function hl(e){var t=zn(),s=Nn;if(null!==s)return ul(t,s,e);zn(),t=t.memoizedState;var a=(s=zn()).queue.dispatch;return s.memoizedState=e,[t,a,!1]}function gl(e,t,s,a){return e={tag:e,create:s,deps:a,inst:t,next:null},null===(t=vn.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},vn.updateQueue=t),null===(s=t.lastEffect)?t.lastEffect=e.next=e:(a=s.next,s.next=e,e.next=a,t.lastEffect=e),e}function pl(){return zn().memoizedState}function fl(e,t,s,a){var r=$n();a=void 0===a?null:a,vn.flags|=e,r.memoizedState=gl(1|t,{destroy:void 0,resource:void 0},s,a)}function bl(e,t,s,a){var r=zn();a=void 0===a?null:a;var n=r.memoizedState.inst;null!==Nn&&null!==a&&Pn(a,Nn.memoizedState.deps)?r.memoizedState=gl(t,n,s,a):(vn.flags|=e,r.memoizedState=gl(1|t,n,s,a))}function yl(e,t){fl(8390656,8,e,t)}function jl(e,t){bl(2048,8,e,t)}function vl(e,t){return bl(4,2,e,t)}function Nl(e,t){return bl(4,4,e,t)}function wl(e,t){if("function"==typeof t){e=e();var s=t(e);return function(){"function"==typeof s?s():t(null)}}if(null!=t)return e=e(),t.current=e,function(){t.current=null}}function kl(e,t,s){s=null!=s?s.concat([e]):null,bl(4,4,wl.bind(null,t,e),s)}function Sl(){}function Cl(e,t){var s=zn();t=void 0===t?null:t;var a=s.memoizedState;return null!==t&&Pn(t,a[1])?a[0]:(s.memoizedState=[e,t],e)}function El(e,t){var s=zn();t=void 0===t?null:t;var a=s.memoizedState;if(null!==t&&Pn(t,a[1]))return a[0];if(a=e(),Cn){me(!0);try{e()}finally{me(!1)}}return s.memoizedState=[a,t],a}function Al(e,t,s){return void 0===s||1073741824&jn?e.memoizedState=t:(e.memoizedState=s,e=Fc(),vn.lanes|=e,gc|=e,s)}function Tl(e,t,s,a){return Ks(s,t)?s:null!==gn.current?(e=Al(e,s,a),Ks(e,t)||(To=!0),e):42&jn?(e=Fc(),vn.lanes|=e,gc|=e,t):(To=!0,e.memoizedState=s)}function _l(e,t,s,a,r){var n=I.p;I.p=0!==n&&8>n?n:8;var l,o,i,c=O.T,d={};O.T=d,Ul(e,!1,t,s);try{var m=r(),u=O.S;if(null!==u&&u(d,m),null!==m&&"object"==typeof m&&"function"==typeof m.then)zl(e,t,(l=a,o=[],i={status:"pending",value:null,reason:null,then:function(e){o.push(e)}},m.then(function(){i.status="fulfilled",i.value=l;for(var e=0;e<o.length;e++)(0,o[e])(l)},function(e){for(i.status="rejected",i.reason=e,e=0;e<o.length;e++)(0,o[e])(void 0)}),i),Lc());else zl(e,t,a,Lc())}catch(x){zl(e,t,{then:function(){},status:"rejected",reason:x},Lc())}finally{I.p=n,O.T=c}}function Rl(){}function Pl(e,t,s,r){if(5!==e.tag)throw Error(a(476));var n=Ol(e).queue;_l(e,n,t,D,null===s?Rl:function(){return Il(e),s(r)})}function Ol(e){var t=e.memoizedState;if(null!==t)return t;var s={};return(t={memoizedState:D,baseState:D,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hn,lastRenderedState:D},next:null}).next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hn,lastRenderedState:s},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Il(e){zl(e,Ol(e).next.queue,{},Lc())}function Dl(){return Er(Km)}function Ll(){return zn().memoizedState}function Fl(){return zn().memoizedState}function ql(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var s=Lc(),a=ln(t,e=nn(s),s);return null!==a&&(qc(a,t,s),on(a,t,s)),t={cache:Ir()},void(e.payload=t)}t=t.return}}function Ml(e,t,s){var a=Lc();s={lane:a,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null},Bl(e)?Vl(t,s):null!==(s=Ra(e,t,s,a))&&(qc(s,e,a),Hl(s,t,a))}function $l(e,t,s){zl(e,t,s,Lc())}function zl(e,t,s,a){var r={lane:a,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null};if(Bl(e))Vl(t,r);else{var n=e.alternate;if(0===e.lanes&&(null===n||0===n.lanes)&&null!==(n=t.lastRenderedReducer))try{var l=t.lastRenderedState,o=n(l,s);if(r.hasEagerState=!0,r.eagerState=o,Ks(o,l))return _a(e,t,r,0),null===nc&&Ta(),!1}catch(i){}if(null!==(s=Ra(e,t,r,a)))return qc(s,e,a),Hl(s,t,a),!0}return!1}function Ul(e,t,s,r){if(r={lane:2,revertLane:Rd(),action:r,hasEagerState:!1,eagerState:null,next:null},Bl(e)){if(t)throw Error(a(479))}else null!==(t=Ra(e,s,r,2))&&qc(t,e,2)}function Bl(e){var t=e.alternate;return e===vn||null!==t&&t===vn}function Vl(e,t){Sn=kn=!0;var s=e.pending;null===s?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function Hl(e,t,s){if(4194048&s){var a=t.lanes;s|=a&=e.pendingLanes,t.lanes=s,Ce(e,s)}}var Wl={readContext:Er,use:Bn,useCallback:Rn,useContext:Rn,useEffect:Rn,useImperativeHandle:Rn,useLayoutEffect:Rn,useInsertionEffect:Rn,useMemo:Rn,useReducer:Rn,useRef:Rn,useState:Rn,useDebugValue:Rn,useDeferredValue:Rn,useTransition:Rn,useSyncExternalStore:Rn,useId:Rn,useHostTransitionStatus:Rn,useFormState:Rn,useActionState:Rn,useOptimistic:Rn,useMemoCache:Rn,useCacheRefresh:Rn},Ql={readContext:Er,use:Bn,useCallback:function(e,t){return $n().memoizedState=[e,void 0===t?null:t],e},useContext:Er,useEffect:yl,useImperativeHandle:function(e,t,s){s=null!=s?s.concat([e]):null,fl(4194308,4,wl.bind(null,t,e),s)},useLayoutEffect:function(e,t){return fl(4194308,4,e,t)},useInsertionEffect:function(e,t){fl(4,2,e,t)},useMemo:function(e,t){var s=$n();t=void 0===t?null:t;var a=e();if(Cn){me(!0);try{e()}finally{me(!1)}}return s.memoizedState=[a,t],a},useReducer:function(e,t,s){var a=$n();if(void 0!==s){var r=s(t);if(Cn){me(!0);try{s(t)}finally{me(!1)}}}else r=t;return a.memoizedState=a.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},a.queue=e,e=e.dispatch=Ml.bind(null,vn,e),[a.memoizedState,e]},useRef:function(e){return e={current:e},$n().memoizedState=e},useState:function(e){var t=(e=tl(e)).queue,s=$l.bind(null,vn,t);return t.dispatch=s,[e.memoizedState,s]},useDebugValue:Sl,useDeferredValue:function(e,t){return Al($n(),e,t)},useTransition:function(){var e=tl(!1);return e=_l.bind(null,vn,e.queue,!0,!1),$n().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,s){var r=vn,n=$n();if(lr){if(void 0===s)throw Error(a(407));s=s()}else{if(s=t(),null===nc)throw Error(a(349));124&oc||Kn(r,t,s)}n.memoizedState=s;var l={value:s,getSnapshot:t};return n.queue=l,yl(Xn.bind(null,r,l,e),[e]),r.flags|=2048,gl(9,{destroy:void 0,resource:void 0},Yn.bind(null,r,l,s,t),null),s},useId:function(){var e=$n(),t=nc.identifierPrefix;if(lr){var s=Za;t=""+t+"R"+(s=(Xa&~(1<<32-ue(Xa)-1)).toString(32)+s),0<(s=En++)&&(t+="H"+s.toString(32)),t+=""}else t=""+t+"r"+(s=_n++).toString(32)+"";return e.memoizedState=t},useHostTransitionStatus:Dl,useFormState:dl,useActionState:dl,useOptimistic:function(e){var t=$n();t.memoizedState=t.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=s,t=Ul.bind(null,vn,!0,s),s.dispatch=t,[e,t]},useMemoCache:Vn,useCacheRefresh:function(){return $n().memoizedState=ql.bind(null,vn)}},Jl={readContext:Er,use:Bn,useCallback:Cl,useContext:Er,useEffect:jl,useImperativeHandle:kl,useInsertionEffect:vl,useLayoutEffect:Nl,useMemo:El,useReducer:Wn,useRef:pl,useState:function(){return Wn(Hn)},useDebugValue:Sl,useDeferredValue:function(e,t){return Tl(zn(),Nn.memoizedState,e,t)},useTransition:function(){var e=Wn(Hn)[0],t=zn().memoizedState;return["boolean"==typeof e?e:Un(e),t]},useSyncExternalStore:Gn,useId:Ll,useHostTransitionStatus:Dl,useFormState:ml,useActionState:ml,useOptimistic:function(e,t){return sl(zn(),0,e,t)},useMemoCache:Vn,useCacheRefresh:Fl},Gl={readContext:Er,use:Bn,useCallback:Cl,useContext:Er,useEffect:jl,useImperativeHandle:kl,useInsertionEffect:vl,useLayoutEffect:Nl,useMemo:El,useReducer:Jn,useRef:pl,useState:function(){return Jn(Hn)},useDebugValue:Sl,useDeferredValue:function(e,t){var s=zn();return null===Nn?Al(s,e,t):Tl(s,Nn.memoizedState,e,t)},useTransition:function(){var e=Jn(Hn)[0],t=zn().memoizedState;return["boolean"==typeof e?e:Un(e),t]},useSyncExternalStore:Gn,useId:Ll,useHostTransitionStatus:Dl,useFormState:hl,useActionState:hl,useOptimistic:function(e,t){var s=zn();return null!==Nn?sl(s,0,e,t):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:Vn,useCacheRefresh:Fl},Kl=null,Yl=0;function Xl(e){var t=Yl;return Yl+=1,null===Kl&&(Kl=[]),Xr(Kl,e,t)}function Zl(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function eo(e,t){if(t.$$typeof===d)throw Error(a(525));throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function to(e){return(0,e._init)(e._payload)}function so(e){function t(t,s){if(e){var a=t.deletions;null===a?(t.deletions=[s],t.flags|=16):a.push(s)}}function s(s,a){if(!e)return null;for(;null!==a;)t(s,a),a=a.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function n(e,t){return(e=Ma(e,t)).index=0,e.sibling=null,e}function l(t,s,a){return t.index=a,e?null!==(a=t.alternate)?(a=a.index)<s?(t.flags|=67108866,s):a:(t.flags|=67108866,s):(t.flags|=1048576,s)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function i(e,t,s,a){return null===t||6!==t.tag?((t=Ba(s,e.mode,a)).return=e,t):((t=n(t,s)).return=e,t)}function c(e,t,s,a){var r=s.type;return r===g?u(e,t,s.props.children,a,s.key):null!==t&&(t.elementType===r||"object"==typeof r&&null!==r&&r.$$typeof===S&&to(r)===t.type)?(Zl(t=n(t,s.props),s),t.return=e,t):(Zl(t=za(s.type,s.key,s.props,null,e.mode,a),s),t.return=e,t)}function d(e,t,s,a){return null===t||4!==t.tag||t.stateNode.containerInfo!==s.containerInfo||t.stateNode.implementation!==s.implementation?((t=Va(s,e.mode,a)).return=e,t):((t=n(t,s.children||[])).return=e,t)}function u(e,t,s,a,r){return null===t||7!==t.tag?((t=Ua(s,e.mode,a,r)).return=e,t):((t=n(t,s)).return=e,t)}function x(e,t,s){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=Ba(""+t,e.mode,s)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case m:return Zl(s=za(t.type,t.key,t.props,null,e.mode,s),t),s.return=e,s;case h:return(t=Va(t,e.mode,s)).return=e,t;case S:return x(e,t=(0,t._init)(t._payload),s)}if(P(t)||T(t))return(t=Ua(t,e.mode,s,null)).return=e,t;if("function"==typeof t.then)return x(e,Xl(t),s);if(t.$$typeof===j)return x(e,Ar(e,t),s);eo(e,t)}return null}function p(e,t,s,a){var r=null!==t?t.key:null;if("string"==typeof s&&""!==s||"number"==typeof s||"bigint"==typeof s)return null!==r?null:i(e,t,""+s,a);if("object"==typeof s&&null!==s){switch(s.$$typeof){case m:return s.key===r?c(e,t,s,a):null;case h:return s.key===r?d(e,t,s,a):null;case S:return p(e,t,s=(r=s._init)(s._payload),a)}if(P(s)||T(s))return null!==r?null:u(e,t,s,a,null);if("function"==typeof s.then)return p(e,t,Xl(s),a);if(s.$$typeof===j)return p(e,t,Ar(e,s),a);eo(e,s)}return null}function f(e,t,s,a,r){if("string"==typeof a&&""!==a||"number"==typeof a||"bigint"==typeof a)return i(t,e=e.get(s)||null,""+a,r);if("object"==typeof a&&null!==a){switch(a.$$typeof){case m:return c(t,e=e.get(null===a.key?s:a.key)||null,a,r);case h:return d(t,e=e.get(null===a.key?s:a.key)||null,a,r);case S:return f(e,t,s,a=(0,a._init)(a._payload),r)}if(P(a)||T(a))return u(t,e=e.get(s)||null,a,r,null);if("function"==typeof a.then)return f(e,t,s,Xl(a),r);if(a.$$typeof===j)return f(e,t,s,Ar(t,a),r);eo(t,a)}return null}function b(i,c,d,u){if("object"==typeof d&&null!==d&&d.type===g&&null===d.key&&(d=d.props.children),"object"==typeof d&&null!==d){switch(d.$$typeof){case m:e:{for(var y=d.key;null!==c;){if(c.key===y){if((y=d.type)===g){if(7===c.tag){s(i,c.sibling),(u=n(c,d.props.children)).return=i,i=u;break e}}else if(c.elementType===y||"object"==typeof y&&null!==y&&y.$$typeof===S&&to(y)===c.type){s(i,c.sibling),Zl(u=n(c,d.props),d),u.return=i,i=u;break e}s(i,c);break}t(i,c),c=c.sibling}d.type===g?((u=Ua(d.props.children,i.mode,u,d.key)).return=i,i=u):(Zl(u=za(d.type,d.key,d.props,null,i.mode,u),d),u.return=i,i=u)}return o(i);case h:e:{for(y=d.key;null!==c;){if(c.key===y){if(4===c.tag&&c.stateNode.containerInfo===d.containerInfo&&c.stateNode.implementation===d.implementation){s(i,c.sibling),(u=n(c,d.children||[])).return=i,i=u;break e}s(i,c);break}t(i,c),c=c.sibling}(u=Va(d,i.mode,u)).return=i,i=u}return o(i);case S:return b(i,c,d=(y=d._init)(d._payload),u)}if(P(d))return function(a,n,o,i){for(var c=null,d=null,m=n,u=n=0,h=null;null!==m&&u<o.length;u++){m.index>u?(h=m,m=null):h=m.sibling;var g=p(a,m,o[u],i);if(null===g){null===m&&(m=h);break}e&&m&&null===g.alternate&&t(a,m),n=l(g,n,u),null===d?c=g:d.sibling=g,d=g,m=h}if(u===o.length)return s(a,m),lr&&er(a,u),c;if(null===m){for(;u<o.length;u++)null!==(m=x(a,o[u],i))&&(n=l(m,n,u),null===d?c=m:d.sibling=m,d=m);return lr&&er(a,u),c}for(m=r(m);u<o.length;u++)null!==(h=f(m,a,u,o[u],i))&&(e&&null!==h.alternate&&m.delete(null===h.key?u:h.key),n=l(h,n,u),null===d?c=h:d.sibling=h,d=h);return e&&m.forEach(function(e){return t(a,e)}),lr&&er(a,u),c}(i,c,d,u);if(T(d)){if("function"!=typeof(y=T(d)))throw Error(a(150));return function(n,o,i,c){if(null==i)throw Error(a(151));for(var d=null,m=null,u=o,h=o=0,g=null,b=i.next();null!==u&&!b.done;h++,b=i.next()){u.index>h?(g=u,u=null):g=u.sibling;var y=p(n,u,b.value,c);if(null===y){null===u&&(u=g);break}e&&u&&null===y.alternate&&t(n,u),o=l(y,o,h),null===m?d=y:m.sibling=y,m=y,u=g}if(b.done)return s(n,u),lr&&er(n,h),d;if(null===u){for(;!b.done;h++,b=i.next())null!==(b=x(n,b.value,c))&&(o=l(b,o,h),null===m?d=b:m.sibling=b,m=b);return lr&&er(n,h),d}for(u=r(u);!b.done;h++,b=i.next())null!==(b=f(u,n,h,b.value,c))&&(e&&null!==b.alternate&&u.delete(null===b.key?h:b.key),o=l(b,o,h),null===m?d=b:m.sibling=b,m=b);return e&&u.forEach(function(e){return t(n,e)}),lr&&er(n,h),d}(i,c,d=y.call(d),u)}if("function"==typeof d.then)return b(i,c,Xl(d),u);if(d.$$typeof===j)return b(i,c,Ar(i,d),u);eo(i,d)}return"string"==typeof d&&""!==d||"number"==typeof d||"bigint"==typeof d?(d=""+d,null!==c&&6===c.tag?(s(i,c.sibling),(u=n(c,d)).return=i,i=u):(s(i,c),(u=Ba(d,i.mode,u)).return=i,i=u),o(i)):s(i,c)}return function(e,t,s,a){try{Yl=0;var r=b(e,t,s,a);return Kl=null,r}catch(l){if(l===Wr||l===Jr)throw l;var n=Fa(29,l,null,e.mode);return n.lanes=a,n.return=e,n}}}var ao=so(!0),ro=so(!1),no=q(null),lo=null;function oo(e){var t=e.alternate;$(uo,1&uo.current),$(no,e),null===lo&&(null===t||null!==gn.current||null!==t.memoizedState)&&(lo=e)}function io(e){if(22===e.tag){if($(uo,uo.current),$(no,e),null===lo){var t=e.alternate;null!==t&&null!==t.memoizedState&&(lo=e)}}else co()}function co(){$(uo,uo.current),$(no,no.current)}function mo(e){M(no),lo===e&&(lo=null),M(uo)}var uo=q(0);function xo(e){for(var t=e;null!==t;){if(13===t.tag){var s=t.memoizedState;if(null!==s&&(null===(s=s.dehydrated)||"$?"===s.data||bm(s)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function ho(e,t,s,a){s=null==(s=s(a,t=e.memoizedState))?t:c({},t,s),e.memoizedState=s,0===e.lanes&&(e.updateQueue.baseState=s)}var go={enqueueSetState:function(e,t,s){e=e._reactInternals;var a=Lc(),r=nn(a);r.payload=t,null!=s&&(r.callback=s),null!==(t=ln(e,r,a))&&(qc(t,e,a),on(t,e,a))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var a=Lc(),r=nn(a);r.tag=1,r.payload=t,null!=s&&(r.callback=s),null!==(t=ln(e,r,a))&&(qc(t,e,a),on(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=Lc(),a=nn(s);a.tag=2,null!=t&&(a.callback=t),null!==(t=ln(e,a,s))&&(qc(t,e,s),on(t,e,s))}};function po(e,t,s,a,r,n,l){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(a,n,l):!t.prototype||!t.prototype.isPureReactComponent||(!Ys(s,a)||!Ys(r,n))}function fo(e,t,s,a){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(s,a),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(s,a),t.state!==e&&go.enqueueReplaceState(t,t.state,null)}function bo(e,t){var s=t;if("ref"in t)for(var a in s={},t)"ref"!==a&&(s[a]=t[a]);if(e=e.defaultProps)for(var r in s===t&&(s=c({},s)),e)void 0===s[r]&&(s[r]=e[r]);return s}var yo="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function jo(e){yo(e)}function vo(e){console.error(e)}function No(e){yo(e)}function wo(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function ko(e,t,s){try{(0,e.onCaughtError)(s.value,{componentStack:s.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(a){setTimeout(function(){throw a})}}function So(e,t,s){return(s=nn(s)).tag=3,s.payload={element:null},s.callback=function(){wo(e,t)},s}function Co(e){return(e=nn(e)).tag=3,e}function Eo(e,t,s,a){var r=s.type.getDerivedStateFromError;if("function"==typeof r){var n=a.value;e.payload=function(){return r(n)},e.callback=function(){ko(t,s,a)}}var l=s.stateNode;null!==l&&"function"==typeof l.componentDidCatch&&(e.callback=function(){ko(t,s,a),"function"!=typeof r&&(null===Cc?Cc=new Set([this]):Cc.add(this));var e=a.stack;this.componentDidCatch(a.value,{componentStack:null!==e?e:""})})}var Ao=Error(a(461)),To=!1;function _o(e,t,s,a){t.child=null===e?ro(t,null,s,a):ao(t,e.child,s,a)}function Ro(e,t,s,a,r){s=s.render;var n=t.ref;if("ref"in a){var l={};for(var o in a)"ref"!==o&&(l[o]=a[o])}else l=a;return Cr(t),a=On(e,t,s,l,n,r),o=Fn(),null===e||To?(lr&&o&&sr(t),t.flags|=1,_o(e,t,a,r),t.child):(qn(e,t,r),Yo(e,t,r))}function Po(e,t,s,a,r){if(null===e){var n=s.type;return"function"!=typeof n||qa(n)||void 0!==n.defaultProps||null!==s.compare?((e=za(s.type,null,a,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=n,Oo(e,t,n,a,r))}if(n=e.child,!Xo(e,r)){var l=n.memoizedProps;if((s=null!==(s=s.compare)?s:Ys)(l,a)&&e.ref===t.ref)return Yo(e,t,r)}return t.flags|=1,(e=Ma(n,a)).ref=t.ref,e.return=t,t.child=e}function Oo(e,t,s,a,r){if(null!==e){var n=e.memoizedProps;if(Ys(n,a)&&e.ref===t.ref){if(To=!1,t.pendingProps=a=n,!Xo(e,r))return t.lanes=e.lanes,Yo(e,t,r);131072&e.flags&&(To=!0)}}return Fo(e,t,s,a,r)}function Io(e,t,s){var a=t.pendingProps,r=a.children,n=null!==e?e.memoizedState:null;if("hidden"===a.mode){if(128&t.flags){if(a=null!==n?n.baseLanes|s:s,null!==e){for(r=t.child=e.child,n=0;null!==r;)n=n|r.lanes|r.childLanes,r=r.sibling;t.childLanes=n&~a}else t.childLanes=0,t.child=null;return Do(e,t,a,s)}if(!(536870912&s))return t.lanes=t.childLanes=536870912,Do(e,t,null!==n?n.baseLanes|s:s,s);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Vr(0,null!==n?n.cachePool:null),null!==n?fn(t,n):bn(),io(t)}else null!==n?(Vr(0,n.cachePool),fn(t,n),co(),t.memoizedState=null):(null!==e&&Vr(0,null),bn(),co());return _o(e,t,r,s),t.child}function Do(e,t,s,a){var r=Br();return r=null===r?null:{parent:Or._currentValue,pool:r},t.memoizedState={baseLanes:s,cachePool:r},null!==e&&Vr(0,null),bn(),io(t),null!==e&&kr(e,t,a,!0),null}function Lo(e,t){var s=t.ref;if(null===s)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!=typeof s&&"object"!=typeof s)throw Error(a(284));null!==e&&e.ref===s||(t.flags|=4194816)}}function Fo(e,t,s,a,r){return Cr(t),s=On(e,t,s,a,void 0,r),a=Fn(),null===e||To?(lr&&a&&sr(t),t.flags|=1,_o(e,t,s,r),t.child):(qn(e,t,r),Yo(e,t,r))}function qo(e,t,s,a,r,n){return Cr(t),t.updateQueue=null,s=Dn(t,a,s,r),In(e),a=Fn(),null===e||To?(lr&&a&&sr(t),t.flags|=1,_o(e,t,s,n),t.child):(qn(e,t,n),Yo(e,t,n))}function Mo(e,t,s,a,r){if(Cr(t),null===t.stateNode){var n=Da,l=s.contextType;"object"==typeof l&&null!==l&&(n=Er(l)),n=new s(a,n),t.memoizedState=null!==n.state&&void 0!==n.state?n.state:null,n.updater=go,t.stateNode=n,n._reactInternals=t,(n=t.stateNode).props=a,n.state=t.memoizedState,n.refs={},an(t),l=s.contextType,n.context="object"==typeof l&&null!==l?Er(l):Da,n.state=t.memoizedState,"function"==typeof(l=s.getDerivedStateFromProps)&&(ho(t,s,l,a),n.state=t.memoizedState),"function"==typeof s.getDerivedStateFromProps||"function"==typeof n.getSnapshotBeforeUpdate||"function"!=typeof n.UNSAFE_componentWillMount&&"function"!=typeof n.componentWillMount||(l=n.state,"function"==typeof n.componentWillMount&&n.componentWillMount(),"function"==typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount(),l!==n.state&&go.enqueueReplaceState(n,n.state,null),un(t,a,n,r),mn(),n.state=t.memoizedState),"function"==typeof n.componentDidMount&&(t.flags|=4194308),a=!0}else if(null===e){n=t.stateNode;var o=t.memoizedProps,i=bo(s,o);n.props=i;var c=n.context,d=s.contextType;l=Da,"object"==typeof d&&null!==d&&(l=Er(d));var m=s.getDerivedStateFromProps;d="function"==typeof m||"function"==typeof n.getSnapshotBeforeUpdate,o=t.pendingProps!==o,d||"function"!=typeof n.UNSAFE_componentWillReceiveProps&&"function"!=typeof n.componentWillReceiveProps||(o||c!==l)&&fo(t,n,a,l),sn=!1;var u=t.memoizedState;n.state=u,un(t,a,n,r),mn(),c=t.memoizedState,o||u!==c||sn?("function"==typeof m&&(ho(t,s,m,a),c=t.memoizedState),(i=sn||po(t,s,i,a,u,c,l))?(d||"function"!=typeof n.UNSAFE_componentWillMount&&"function"!=typeof n.componentWillMount||("function"==typeof n.componentWillMount&&n.componentWillMount(),"function"==typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount()),"function"==typeof n.componentDidMount&&(t.flags|=4194308)):("function"==typeof n.componentDidMount&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=c),n.props=a,n.state=c,n.context=l,a=i):("function"==typeof n.componentDidMount&&(t.flags|=4194308),a=!1)}else{n=t.stateNode,rn(e,t),d=bo(s,l=t.memoizedProps),n.props=d,m=t.pendingProps,u=n.context,c=s.contextType,i=Da,"object"==typeof c&&null!==c&&(i=Er(c)),(c="function"==typeof(o=s.getDerivedStateFromProps)||"function"==typeof n.getSnapshotBeforeUpdate)||"function"!=typeof n.UNSAFE_componentWillReceiveProps&&"function"!=typeof n.componentWillReceiveProps||(l!==m||u!==i)&&fo(t,n,a,i),sn=!1,u=t.memoizedState,n.state=u,un(t,a,n,r),mn();var x=t.memoizedState;l!==m||u!==x||sn||null!==e&&null!==e.dependencies&&Sr(e.dependencies)?("function"==typeof o&&(ho(t,s,o,a),x=t.memoizedState),(d=sn||po(t,s,d,a,u,x,i)||null!==e&&null!==e.dependencies&&Sr(e.dependencies))?(c||"function"!=typeof n.UNSAFE_componentWillUpdate&&"function"!=typeof n.componentWillUpdate||("function"==typeof n.componentWillUpdate&&n.componentWillUpdate(a,x,i),"function"==typeof n.UNSAFE_componentWillUpdate&&n.UNSAFE_componentWillUpdate(a,x,i)),"function"==typeof n.componentDidUpdate&&(t.flags|=4),"function"==typeof n.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof n.componentDidUpdate||l===e.memoizedProps&&u===e.memoizedState||(t.flags|=4),"function"!=typeof n.getSnapshotBeforeUpdate||l===e.memoizedProps&&u===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=x),n.props=a,n.state=x,n.context=i,a=d):("function"!=typeof n.componentDidUpdate||l===e.memoizedProps&&u===e.memoizedState||(t.flags|=4),"function"!=typeof n.getSnapshotBeforeUpdate||l===e.memoizedProps&&u===e.memoizedState||(t.flags|=1024),a=!1)}return n=a,Lo(e,t),a=!!(128&t.flags),n||a?(n=t.stateNode,s=a&&"function"!=typeof s.getDerivedStateFromError?null:n.render(),t.flags|=1,null!==e&&a?(t.child=ao(t,e.child,null,r),t.child=ao(t,null,s,r)):_o(e,t,s,r),t.memoizedState=n.state,e=t.child):e=Yo(e,t,r),e}function $o(e,t,s,a){return hr(),t.flags|=256,_o(e,t,s,a),t.child}var zo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Uo(e){return{baseLanes:e,cachePool:Hr()}}function Bo(e,t,s){return e=null!==e?e.childLanes&~s:0,t&&(e|=bc),e}function Vo(e,t,s){var r,n=t.pendingProps,l=!1,o=!!(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&!!(2&uo.current)),r&&(l=!0,t.flags&=-129),r=!!(32&t.flags),t.flags&=-33,null===e){if(lr){if(l?oo(t):co(),lr){var i,c=nr;if(i=c){e:{for(i=c,c=ir;8!==i.nodeType;){if(!c){c=null;break e}if(null===(i=ym(i.nextSibling))){c=null;break e}}c=i}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Ya?{id:Xa,overflow:Za}:null,retryLane:536870912,hydrationErrors:null},(i=Fa(18,null,null,0)).stateNode=c,i.return=t,t.child=i,rr=t,nr=null,i=!0):i=!1}i||dr(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return bm(c)?t.lanes=32:t.lanes=536870912,null;mo(t)}return c=n.children,n=n.fallback,l?(co(),c=Wo({mode:"hidden",children:c},l=t.mode),n=Ua(n,l,s,null),c.return=t,n.return=t,c.sibling=n,t.child=c,(l=t.child).memoizedState=Uo(s),l.childLanes=Bo(e,r,s),t.memoizedState=zo,n):(oo(t),Ho(t,c))}if(null!==(i=e.memoizedState)&&null!==(c=i.dehydrated)){if(o)256&t.flags?(oo(t),t.flags&=-257,t=Qo(e,t,s)):null!==t.memoizedState?(co(),t.child=e.child,t.flags|=128,t=null):(co(),l=n.fallback,c=t.mode,n=Wo({mode:"visible",children:n.children},c),(l=Ua(l,c,s,null)).flags|=2,n.return=t,l.return=t,n.sibling=l,t.child=n,ao(t,e.child,null,s),(n=t.child).memoizedState=Uo(s),n.childLanes=Bo(e,r,s),t.memoizedState=zo,t=l);else if(oo(t),bm(c)){if(r=c.nextSibling&&c.nextSibling.dataset)var d=r.dgst;r=d,(n=Error(a(419))).stack="",n.digest=r,pr({value:n,source:null,stack:null}),t=Qo(e,t,s)}else if(To||kr(e,t,s,!1),r=0!==(s&e.childLanes),To||r){if(null!==(r=nc)&&(0!==(n=0!==((n=42&(n=s&-s)?1:Ee(n))&(r.suspendedLanes|s))?0:n)&&n!==i.retryLane))throw i.retryLane=n,Pa(e,n),qc(r,e,n),Ao;"$?"===c.data||Gc(),t=Qo(e,t,s)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=i.treeContext,nr=ym(c.nextSibling),rr=t,lr=!0,or=null,ir=!1,null!==e&&(Ga[Ka++]=Xa,Ga[Ka++]=Za,Ga[Ka++]=Ya,Xa=e.id,Za=e.overflow,Ya=t),(t=Ho(t,n.children)).flags|=4096);return t}return l?(co(),l=n.fallback,c=t.mode,d=(i=e.child).sibling,(n=Ma(i,{mode:"hidden",children:n.children})).subtreeFlags=65011712&i.subtreeFlags,null!==d?l=Ma(d,l):(l=Ua(l,c,s,null)).flags|=2,l.return=t,n.return=t,n.sibling=l,t.child=n,n=l,l=t.child,null===(c=e.child.memoizedState)?c=Uo(s):(null!==(i=c.cachePool)?(d=Or._currentValue,i=i.parent!==d?{parent:d,pool:d}:i):i=Hr(),c={baseLanes:c.baseLanes|s,cachePool:i}),l.memoizedState=c,l.childLanes=Bo(e,r,s),t.memoizedState=zo,n):(oo(t),e=(s=e.child).sibling,(s=Ma(s,{mode:"visible",children:n.children})).return=t,s.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s)}function Ho(e,t){return(t=Wo({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Wo(e,t){return(e=Fa(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Qo(e,t,s){return ao(t,e.child,null,s),(e=Ho(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Jo(e,t,s){e.lanes|=t;var a=e.alternate;null!==a&&(a.lanes|=t),Nr(e.return,t,s)}function Go(e,t,s,a,r){var n=e.memoizedState;null===n?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:s,tailMode:r}:(n.isBackwards=t,n.rendering=null,n.renderingStartTime=0,n.last=a,n.tail=s,n.tailMode=r)}function Ko(e,t,s){var a=t.pendingProps,r=a.revealOrder,n=a.tail;if(_o(e,t,a.children,s),2&(a=uo.current))a=1&a|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Jo(e,s,t);else if(19===e.tag)Jo(e,s,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}switch($(uo,a),r){case"forwards":for(s=t.child,r=null;null!==s;)null!==(e=s.alternate)&&null===xo(e)&&(r=s),s=s.sibling;null===(s=r)?(r=t.child,t.child=null):(r=s.sibling,s.sibling=null),Go(t,!1,r,s,n);break;case"backwards":for(s=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===xo(e)){t.child=r;break}e=r.sibling,r.sibling=s,s=r,r=e}Go(t,!0,s,null,n);break;case"together":Go(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Yo(e,t,s){if(null!==e&&(t.dependencies=e.dependencies),gc|=t.lanes,0===(s&t.childLanes)){if(null===e)return null;if(kr(e,t,s,!1),0===(s&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(s=Ma(e=t.child,e.pendingProps),t.child=s,s.return=t;null!==e.sibling;)e=e.sibling,(s=s.sibling=Ma(e,e.pendingProps)).return=t;s.sibling=null}return t.child}function Xo(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Sr(e))}function Zo(e,t,s){if(null!==e)if(e.memoizedProps!==t.pendingProps)To=!0;else{if(!(Xo(e,s)||128&t.flags))return To=!1,function(e,t,s){switch(t.tag){case 3:H(t,t.stateNode.containerInfo),jr(0,Or,e.memoizedState.cache),hr();break;case 27:case 5:Q(t);break;case 4:H(t,t.stateNode.containerInfo);break;case 10:jr(0,t.type,t.memoizedProps.value);break;case 13:var a=t.memoizedState;if(null!==a)return null!==a.dehydrated?(oo(t),t.flags|=128,null):0!==(s&t.child.childLanes)?Vo(e,t,s):(oo(t),null!==(e=Yo(e,t,s))?e.sibling:null);oo(t);break;case 19:var r=!!(128&e.flags);if((a=0!==(s&t.childLanes))||(kr(e,t,s,!1),a=0!==(s&t.childLanes)),r){if(a)return Ko(e,t,s);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),$(uo,uo.current),a)break;return null;case 22:case 23:return t.lanes=0,Io(e,t,s);case 24:jr(0,Or,e.memoizedState.cache)}return Yo(e,t,s)}(e,t,s);To=!!(131072&e.flags)}else To=!1,lr&&1048576&t.flags&&tr(t,Ja,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,n=r._init;if(r=n(r._payload),t.type=r,"function"!=typeof r){if(null!=r){if((n=r.$$typeof)===v){t.tag=11,t=Ro(null,t,r,e,s);break e}if(n===k){t.tag=14,t=Po(null,t,r,e,s);break e}}throw t=R(r)||r,Error(a(306,t,""))}qa(r)?(e=bo(r,e),t.tag=1,t=Mo(null,t,r,e,s)):(t.tag=0,t=Fo(null,t,r,e,s))}return t;case 0:return Fo(e,t,t.type,t.pendingProps,s);case 1:return Mo(e,t,r=t.type,n=bo(r,t.pendingProps),s);case 3:e:{if(H(t,t.stateNode.containerInfo),null===e)throw Error(a(387));r=t.pendingProps;var l=t.memoizedState;n=l.element,rn(e,t),un(t,r,null,s);var o=t.memoizedState;if(r=o.cache,jr(0,Or,r),r!==l.cache&&wr(t,[Or],s,!0),mn(),r=o.element,l.isDehydrated){if(l={element:r,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=l,t.memoizedState=l,256&t.flags){t=$o(e,t,r,s);break e}if(r!==n){pr(n=Sa(Error(a(424)),t)),t=$o(e,t,r,s);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(nr=ym(e.firstChild),rr=t,lr=!0,or=null,ir=!0,s=ro(t,null,r,s),t.child=s;s;)s.flags=-3&s.flags|4096,s=s.sibling}else{if(hr(),r===n){t=Yo(e,t,s);break e}_o(e,t,r,s)}t=t.child}return t;case 26:return Lo(e,t),null===e?(s=_m(t.type,null,t.pendingProps,null))?t.memoizedState=s:lr||(s=t.type,e=t.pendingProps,(r=nm(B.current).createElement(s))[Re]=t,r[Pe]=e,sm(r,s,e),Ve(r),t.stateNode=r):t.memoizedState=_m(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Q(t),null===e&&lr&&(r=t.stateNode=Nm(t.type,t.pendingProps,B.current),rr=t,ir=!0,n=nr,gm(t.type)?(jm=n,nr=ym(r.firstChild)):nr=n),_o(e,t,t.pendingProps.children,s),Lo(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&lr&&((n=r=nr)&&(null!==(r=function(e,t,s,a){for(;1===e.nodeType;){var r=s;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!a&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(a){if(!e[qe])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(n=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(n!==r.rel||e.getAttribute("href")!==(null==r.href||""===r.href?null:r.href)||e.getAttribute("crossorigin")!==(null==r.crossOrigin?null:r.crossOrigin)||e.getAttribute("title")!==(null==r.title?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((n=e.getAttribute("src"))!==(null==r.src?null:r.src)||e.getAttribute("type")!==(null==r.type?null:r.type)||e.getAttribute("crossorigin")!==(null==r.crossOrigin?null:r.crossOrigin))&&n&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var n=null==r.name?null:""+r.name;if("hidden"===r.type&&e.getAttribute("name")===n)return e}if(null===(e=ym(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,ir))?(t.stateNode=r,rr=t,nr=ym(r.firstChild),ir=!1,n=!0):n=!1),n||dr(t)),Q(t),n=t.type,l=t.pendingProps,o=null!==e?e.memoizedProps:null,r=l.children,im(n,l)?r=null:null!==o&&im(n,o)&&(t.flags|=32),null!==t.memoizedState&&(n=On(e,t,Ln,null,null,s),Km._currentValue=n),Lo(e,t),_o(e,t,r,s),t.child;case 6:return null===e&&lr&&((e=s=nr)&&(null!==(s=function(e,t,s){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!s)return null;if(null===(e=ym(e.nextSibling)))return null}return e}(s,t.pendingProps,ir))?(t.stateNode=s,rr=t,nr=null,e=!0):e=!1),e||dr(t)),null;case 13:return Vo(e,t,s);case 4:return H(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ao(t,null,r,s):_o(e,t,r,s),t.child;case 11:return Ro(e,t,t.type,t.pendingProps,s);case 7:return _o(e,t,t.pendingProps,s),t.child;case 8:case 12:return _o(e,t,t.pendingProps.children,s),t.child;case 10:return r=t.pendingProps,jr(0,t.type,r.value),_o(e,t,r.children,s),t.child;case 9:return n=t.type._context,r=t.pendingProps.children,Cr(t),r=r(n=Er(n)),t.flags|=1,_o(e,t,r,s),t.child;case 14:return Po(e,t,t.type,t.pendingProps,s);case 15:return Oo(e,t,t.type,t.pendingProps,s);case 19:return Ko(e,t,s);case 31:return r=t.pendingProps,s=t.mode,r={mode:r.mode,children:r.children},null===e?((s=Wo(r,s)).ref=t.ref,t.child=s,s.return=t,t=s):((s=Ma(e.child,r)).ref=t.ref,t.child=s,s.return=t,t=s),t;case 22:return Io(e,t,s);case 24:return Cr(t),r=Er(Or),null===e?(null===(n=Br())&&(n=nc,l=Ir(),n.pooledCache=l,l.refCount++,null!==l&&(n.pooledCacheLanes|=s),n=l),t.memoizedState={parent:r,cache:n},an(t),jr(0,Or,n)):(0!==(e.lanes&s)&&(rn(e,t),un(t,null,null,s),mn()),n=e.memoizedState,l=t.memoizedState,n.parent!==r?(n={parent:r,cache:r},t.memoizedState=n,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=n),jr(0,Or,r)):(r=l.cache,jr(0,Or,r),r!==n.cache&&wr(t,[Or],s,!0))),_o(e,t,t.pendingProps.children,s),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}function ei(e){e.flags|=4}function ti(e,t){if("stylesheet"!==t.type||4&t.state.loading)e.flags&=-16777217;else if(e.flags|=16777216,!Bm(t)){if(null!==(t=no.current)&&((4194048&oc)===oc?null!==lo:(62914560&oc)!==oc&&!(536870912&oc)||t!==lo))throw Zr=Gr,Qr;e.flags|=8192}}function si(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Ne():536870912,e.lanes|=t,yc|=t)}function ai(e,t){if(!lr)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;null!==t;)null!==t.alternate&&(s=t),t=t.sibling;null===s?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var a=null;null!==s;)null!==s.alternate&&(a=s),s=s.sibling;null===a?t||null===e.tail?e.tail=null:e.tail.sibling=null:a.sibling=null}}function ri(e){var t=null!==e.alternate&&e.alternate.child===e.child,s=0,a=0;if(t)for(var r=e.child;null!==r;)s|=r.lanes|r.childLanes,a|=65011712&r.subtreeFlags,a|=65011712&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)s|=r.lanes|r.childLanes,a|=r.subtreeFlags,a|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=a,e.childLanes=s,t}function ni(e,t,s){var r=t.pendingProps;switch(ar(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return ri(t),null;case 3:return s=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),vr(Or),W(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),null!==e&&null!==e.child||(xr(t)?ei(t):null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,gr())),ri(t),null;case 26:return s=t.memoizedState,null===e?(ei(t),null!==s?(ri(t),ti(t,s)):(ri(t),t.flags&=-16777217)):s?s!==e.memoizedState?(ei(t),ri(t),ti(t,s)):(ri(t),t.flags&=-16777217):(e.memoizedProps!==r&&ei(t),ri(t),t.flags&=-16777217),null;case 27:J(t),s=B.current;var n=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&ei(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return ri(t),null}e=z.current,xr(t)?mr(t):(e=Nm(n,r,s),t.stateNode=e,ei(t))}return ri(t),null;case 5:if(J(t),s=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&ei(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return ri(t),null}if(e=z.current,xr(t))mr(t);else{switch(n=nm(B.current),e){case 1:e=n.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:e=n.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":e=n.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":e=n.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":(e=n.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"==typeof r.is?n.createElement("select",{is:r.is}):n.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"==typeof r.is?n.createElement(s,{is:r.is}):n.createElement(s)}}e[Re]=t,e[Pe]=r;e:for(n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&27!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;null===n.sibling;){if(null===n.return||n.return===t)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}t.stateNode=e;e:switch(sm(e,s,r),s){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&ei(t)}}return ri(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&ei(t);else{if("string"!=typeof r&&null===t.stateNode)throw Error(a(166));if(e=B.current,xr(t)){if(e=t.stateNode,s=t.memoizedProps,r=null,null!==(n=rr))switch(n.tag){case 27:case 5:r=n.memoizedProps}e[Re]=t,(e=!!(e.nodeValue===s||null!==r&&!0===r.suppressHydrationWarning||Xd(e.nodeValue,s)))||dr(t)}else(e=nm(e).createTextNode(r))[Re]=t,t.stateNode=e}return ri(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(n=xr(t),null!==r&&null!==r.dehydrated){if(null===e){if(!n)throw Error(a(318));if(!(n=null!==(n=t.memoizedState)?n.dehydrated:null))throw Error(a(317));n[Re]=t}else hr(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;ri(t),n=!1}else n=gr(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),n=!0;if(!n)return 256&t.flags?(mo(t),t):(mo(t),null)}if(mo(t),128&t.flags)return t.lanes=s,t;if(s=null!==r,e=null!==e&&null!==e.memoizedState,s){n=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(n=r.alternate.memoizedState.cachePool.pool);var l=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(l=r.memoizedState.cachePool.pool),l!==n&&(r.flags|=2048)}return s!==e&&s&&(t.child.flags|=8192),si(t,t.updateQueue),ri(t),null;case 4:return W(),null===e&&Ud(t.stateNode.containerInfo),ri(t),null;case 10:return vr(t.type),ri(t),null;case 19:if(M(uo),null===(n=t.memoizedState))return ri(t),null;if(r=!!(128&t.flags),null===(l=n.rendering))if(r)ai(n,!1);else{if(0!==hc||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(l=xo(e))){for(t.flags|=128,ai(n,!1),e=l.updateQueue,t.updateQueue=e,si(t,e),t.subtreeFlags=0,e=s,s=t.child;null!==s;)$a(s,e),s=s.sibling;return $(uo,1&uo.current|2),t.child}e=e.sibling}null!==n.tail&&ee()>kc&&(t.flags|=128,r=!0,ai(n,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=xo(l))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,si(t,e),ai(n,!0),null===n.tail&&"hidden"===n.tailMode&&!l.alternate&&!lr)return ri(t),null}else 2*ee()-n.renderingStartTime>kc&&536870912!==s&&(t.flags|=128,r=!0,ai(n,!1),t.lanes=4194304);n.isBackwards?(l.sibling=t.child,t.child=l):(null!==(e=n.last)?e.sibling=l:t.child=l,n.last=l)}return null!==n.tail?(t=n.tail,n.rendering=t,n.tail=t.sibling,n.renderingStartTime=ee(),t.sibling=null,e=uo.current,$(uo,r?1&e|2:1&e),t):(ri(t),null);case 22:case 23:return mo(t),yn(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?!!(536870912&s)&&!(128&t.flags)&&(ri(t),6&t.subtreeFlags&&(t.flags|=8192)):ri(t),null!==(s=t.updateQueue)&&si(t,s.retryQueue),s=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(s=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==s&&(t.flags|=2048),null!==e&&M(Ur),null;case 24:return s=null,null!==e&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),vr(Or),ri(t),null;case 25:case 30:return null}throw Error(a(156,t.tag))}function li(e,t){switch(ar(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return vr(Or),W(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return J(t),null;case 13:if(mo(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));hr()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return M(uo),null;case 4:return W(),null;case 10:return vr(t.type),null;case 22:case 23:return mo(t),yn(),null!==e&&M(Ur),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return vr(Or),null;default:return null}}function oi(e,t){switch(ar(t),t.tag){case 3:vr(Or),W();break;case 26:case 27:case 5:J(t);break;case 4:W();break;case 13:mo(t);break;case 19:M(uo);break;case 10:vr(t.type);break;case 22:case 23:mo(t),yn(),null!==e&&M(Ur);break;case 24:vr(Or)}}function ii(e,t){try{var s=t.updateQueue,a=null!==s?s.lastEffect:null;if(null!==a){var r=a.next;s=r;do{if((s.tag&e)===e){a=void 0;var n=s.create,l=s.inst;a=n(),l.destroy=a}s=s.next}while(s!==r)}}catch(o){ud(t,t.return,o)}}function ci(e,t,s){try{var a=t.updateQueue,r=null!==a?a.lastEffect:null;if(null!==r){var n=r.next;a=n;do{if((a.tag&e)===e){var l=a.inst,o=l.destroy;if(void 0!==o){l.destroy=void 0,r=t;var i=s,c=o;try{c()}catch(d){ud(r,i,d)}}}a=a.next}while(a!==n)}}catch(d){ud(t,t.return,d)}}function di(e){var t=e.updateQueue;if(null!==t){var s=e.stateNode;try{hn(t,s)}catch(a){ud(e,e.return,a)}}}function mi(e,t,s){s.props=bo(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(a){ud(e,t,a)}}function ui(e,t){try{var s=e.ref;if(null!==s){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;default:a=e.stateNode}"function"==typeof s?e.refCleanup=s(a):s.current=a}}catch(r){ud(e,t,r)}}function xi(e,t){var s=e.ref,a=e.refCleanup;if(null!==s)if("function"==typeof a)try{a()}catch(r){ud(e,t,r)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof s)try{s(null)}catch(n){ud(e,t,n)}else s.current=null}function hi(e){var t=e.type,s=e.memoizedProps,a=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":s.autoFocus&&a.focus();break e;case"img":s.src?a.src=s.src:s.srcSet&&(a.srcset=s.srcSet)}}catch(r){ud(e,e.return,r)}}function gi(e,t,s){try{var r=e.stateNode;!function(e,t,s,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var n=null,l=null,o=null,i=null,c=null,d=null,m=null;for(h in s){var u=s[h];if(s.hasOwnProperty(h)&&null!=u)switch(h){case"checked":case"value":break;case"defaultValue":c=u;default:r.hasOwnProperty(h)||em(e,t,h,null,r,u)}}for(var x in r){var h=r[x];if(u=s[x],r.hasOwnProperty(x)&&(null!=h||null!=u))switch(x){case"type":l=h;break;case"name":n=h;break;case"checked":d=h;break;case"defaultChecked":m=h;break;case"value":o=h;break;case"defaultValue":i=h;break;case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(a(137,t));break;default:h!==u&&em(e,t,x,h,r,u)}}return void bt(e,o,i,c,d,m,l,n);case"select":for(l in h=o=i=x=null,s)if(c=s[l],s.hasOwnProperty(l)&&null!=c)switch(l){case"value":break;case"multiple":h=c;default:r.hasOwnProperty(l)||em(e,t,l,null,r,c)}for(n in r)if(l=r[n],c=s[n],r.hasOwnProperty(n)&&(null!=l||null!=c))switch(n){case"value":x=l;break;case"defaultValue":i=l;break;case"multiple":o=l;default:l!==c&&em(e,t,n,l,r,c)}return t=i,s=o,r=h,void(null!=x?vt(e,!!s,x,!1):!!r!=!!s&&(null!=t?vt(e,!!s,t,!0):vt(e,!!s,s?[]:"",!1)));case"textarea":for(i in h=x=null,s)if(n=s[i],s.hasOwnProperty(i)&&null!=n&&!r.hasOwnProperty(i))switch(i){case"value":case"children":break;default:em(e,t,i,null,r,n)}for(o in r)if(n=r[o],l=s[o],r.hasOwnProperty(o)&&(null!=n||null!=l))switch(o){case"value":x=n;break;case"defaultValue":h=n;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=n)throw Error(a(91));break;default:n!==l&&em(e,t,o,n,r,l)}return void Nt(e,x,h);case"option":for(var g in s)if(x=s[g],s.hasOwnProperty(g)&&null!=x&&!r.hasOwnProperty(g))if("selected"===g)e.selected=!1;else em(e,t,g,null,r,x);for(c in r)if(x=r[c],h=s[c],r.hasOwnProperty(c)&&x!==h&&(null!=x||null!=h))if("selected"===c)e.selected=x&&"function"!=typeof x&&"symbol"!=typeof x;else em(e,t,c,x,r,h);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var p in s)x=s[p],s.hasOwnProperty(p)&&null!=x&&!r.hasOwnProperty(p)&&em(e,t,p,null,r,x);for(d in r)if(x=r[d],h=s[d],r.hasOwnProperty(d)&&x!==h&&(null!=x||null!=h))switch(d){case"children":case"dangerouslySetInnerHTML":if(null!=x)throw Error(a(137,t));break;default:em(e,t,d,x,r,h)}return;default:if(At(t)){for(var f in s)x=s[f],s.hasOwnProperty(f)&&void 0!==x&&!r.hasOwnProperty(f)&&tm(e,t,f,void 0,r,x);for(m in r)x=r[m],h=s[m],!r.hasOwnProperty(m)||x===h||void 0===x&&void 0===h||tm(e,t,m,x,r,h);return}}for(var b in s)x=s[b],s.hasOwnProperty(b)&&null!=x&&!r.hasOwnProperty(b)&&em(e,t,b,null,r,x);for(u in r)x=r[u],h=s[u],!r.hasOwnProperty(u)||x===h||null==x&&null==h||em(e,t,u,x,r,h)}(r,e.type,s,t),r[Pe]=t}catch(n){ud(e,e.return,n)}}function pi(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&gm(e.type)||4===e.tag}function fi(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||pi(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&gm(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function bi(e,t,s){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?(9===s.nodeType?s.body:"HTML"===s.nodeName?s.ownerDocument.body:s).insertBefore(e,t):((t=9===s.nodeType?s.body:"HTML"===s.nodeName?s.ownerDocument.body:s).appendChild(e),null!=(s=s._reactRootContainer)||null!==t.onclick||(t.onclick=Zd));else if(4!==a&&(27===a&&gm(e.type)&&(s=e.stateNode,t=null),null!==(e=e.child)))for(bi(e,t,s),e=e.sibling;null!==e;)bi(e,t,s),e=e.sibling}function yi(e,t,s){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(4!==a&&(27===a&&gm(e.type)&&(s=e.stateNode),null!==(e=e.child)))for(yi(e,t,s),e=e.sibling;null!==e;)yi(e,t,s),e=e.sibling}function ji(e){var t=e.stateNode,s=e.memoizedProps;try{for(var a=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);sm(t,a,s),t[Re]=e,t[Pe]=s}catch(n){ud(e,e.return,n)}}var vi=!1,Ni=!1,wi=!1,ki="function"==typeof WeakSet?WeakSet:Set,Si=null;function Ci(e,t,s){var a=s.flags;switch(s.tag){case 0:case 11:case 15:Mi(e,s),4&a&&ii(5,s);break;case 1:if(Mi(e,s),4&a)if(e=s.stateNode,null===t)try{e.componentDidMount()}catch(l){ud(s,s.return,l)}else{var r=bo(s.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){ud(s,s.return,o)}}64&a&&di(s),512&a&&ui(s,s.return);break;case 3:if(Mi(e,s),64&a&&null!==(e=s.updateQueue)){if(t=null,null!==s.child)switch(s.child.tag){case 27:case 5:case 1:t=s.child.stateNode}try{hn(e,t)}catch(l){ud(s,s.return,l)}}break;case 27:null===t&&4&a&&ji(s);case 26:case 5:Mi(e,s),null===t&&4&a&&hi(s),512&a&&ui(s,s.return);break;case 12:Mi(e,s);break;case 13:Mi(e,s),4&a&&Pi(e,s),64&a&&(null!==(e=s.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var s=e.ownerDocument;if("$?"!==e.data||"complete"===s.readyState)t();else{var a=function(){t(),s.removeEventListener("DOMContentLoaded",a)};s.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}(e,s=pd.bind(null,s))));break;case 22:if(!(a=null!==s.memoizedState||vi)){t=null!==t&&null!==t.memoizedState||Ni,r=vi;var n=Ni;vi=a,(Ni=t)&&!n?zi(e,s,!!(8772&s.subtreeFlags)):Mi(e,s),vi=r,Ni=n}break;case 30:break;default:Mi(e,s)}}function Ei(e){var t=e.alternate;null!==t&&(e.alternate=null,Ei(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Me(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ai=null,Ti=!1;function _i(e,t,s){for(s=s.child;null!==s;)Ri(e,t,s),s=s.sibling}function Ri(e,t,s){if(de&&"function"==typeof de.onCommitFiberUnmount)try{de.onCommitFiberUnmount(ce,s)}catch(n){}switch(s.tag){case 26:Ni||xi(s,t),_i(e,t,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode).parentNode.removeChild(s);break;case 27:Ni||xi(s,t);var a=Ai,r=Ti;gm(s.type)&&(Ai=s.stateNode,Ti=!1),_i(e,t,s),wm(s.stateNode),Ai=a,Ti=r;break;case 5:Ni||xi(s,t);case 6:if(a=Ai,r=Ti,Ai=null,_i(e,t,s),Ti=r,null!==(Ai=a))if(Ti)try{(9===Ai.nodeType?Ai.body:"HTML"===Ai.nodeName?Ai.ownerDocument.body:Ai).removeChild(s.stateNode)}catch(l){ud(s,t,l)}else try{Ai.removeChild(s.stateNode)}catch(l){ud(s,t,l)}break;case 18:null!==Ai&&(Ti?(pm(9===(e=Ai).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,s.stateNode),Tu(e)):pm(Ai,s.stateNode));break;case 4:a=Ai,r=Ti,Ai=s.stateNode.containerInfo,Ti=!0,_i(e,t,s),Ai=a,Ti=r;break;case 0:case 11:case 14:case 15:Ni||ci(2,s,t),Ni||ci(4,s,t),_i(e,t,s);break;case 1:Ni||(xi(s,t),"function"==typeof(a=s.stateNode).componentWillUnmount&&mi(s,t,a)),_i(e,t,s);break;case 21:_i(e,t,s);break;case 22:Ni=(a=Ni)||null!==s.memoizedState,_i(e,t,s),Ni=a;break;default:_i(e,t,s)}}function Pi(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Tu(e)}catch(s){ud(t,t.return,s)}}function Oi(e,t){var s=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new ki),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new ki),t;default:throw Error(a(435,e.tag))}}(e);t.forEach(function(t){var a=fd.bind(null,e,t);s.has(t)||(s.add(t),t.then(a,a))})}function Ii(e,t){var s=t.deletions;if(null!==s)for(var r=0;r<s.length;r++){var n=s[r],l=e,o=t,i=o;e:for(;null!==i;){switch(i.tag){case 27:if(gm(i.type)){Ai=i.stateNode,Ti=!1;break e}break;case 5:Ai=i.stateNode,Ti=!1;break e;case 3:case 4:Ai=i.stateNode.containerInfo,Ti=!0;break e}i=i.return}if(null===Ai)throw Error(a(160));Ri(l,o,n),Ai=null,Ti=!1,null!==(l=n.alternate)&&(l.return=null),n.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Li(t,e),t=t.sibling}var Di=null;function Li(e,t){var s=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ii(t,e),Fi(e),4&r&&(ci(3,e,e.return),ii(3,e),ci(5,e,e.return));break;case 1:Ii(t,e),Fi(e),512&r&&(Ni||null===s||xi(s,s.return)),64&r&&vi&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===s?r:s.concat(r))));break;case 26:var n=Di;if(Ii(t,e),Fi(e),512&r&&(Ni||null===s||xi(s,s.return)),4&r){var l=null!==s?s.memoizedState:null;if(r=e.memoizedState,null===s)if(null===r)if(null===e.stateNode){e:{r=e.type,s=e.memoizedProps,n=n.ownerDocument||n;t:switch(r){case"title":(!(l=n.getElementsByTagName("title")[0])||l[qe]||l[Re]||"http://www.w3.org/2000/svg"===l.namespaceURI||l.hasAttribute("itemprop"))&&(l=n.createElement(r),n.head.insertBefore(l,n.querySelector("head > title"))),sm(l,r,s),l[Re]=e,Ve(l),r=l;break e;case"link":var o=zm("link","href",n).get(r+(s.href||""));if(o)for(var i=0;i<o.length;i++)if((l=o[i]).getAttribute("href")===(null==s.href||""===s.href?null:s.href)&&l.getAttribute("rel")===(null==s.rel?null:s.rel)&&l.getAttribute("title")===(null==s.title?null:s.title)&&l.getAttribute("crossorigin")===(null==s.crossOrigin?null:s.crossOrigin)){o.splice(i,1);break t}sm(l=n.createElement(r),r,s),n.head.appendChild(l);break;case"meta":if(o=zm("meta","content",n).get(r+(s.content||"")))for(i=0;i<o.length;i++)if((l=o[i]).getAttribute("content")===(null==s.content?null:""+s.content)&&l.getAttribute("name")===(null==s.name?null:s.name)&&l.getAttribute("property")===(null==s.property?null:s.property)&&l.getAttribute("http-equiv")===(null==s.httpEquiv?null:s.httpEquiv)&&l.getAttribute("charset")===(null==s.charSet?null:s.charSet)){o.splice(i,1);break t}sm(l=n.createElement(r),r,s),n.head.appendChild(l);break;default:throw Error(a(468,r))}l[Re]=e,Ve(l),r=l}e.stateNode=r}else Um(n,e.type,e.stateNode);else e.stateNode=Lm(n,r,e.memoizedProps);else l!==r?(null===l?null!==s.stateNode&&(s=s.stateNode).parentNode.removeChild(s):l.count--,null===r?Um(n,e.type,e.stateNode):Lm(n,r,e.memoizedProps)):null===r&&null!==e.stateNode&&gi(e,e.memoizedProps,s.memoizedProps)}break;case 27:Ii(t,e),Fi(e),512&r&&(Ni||null===s||xi(s,s.return)),null!==s&&4&r&&gi(e,e.memoizedProps,s.memoizedProps);break;case 5:if(Ii(t,e),Fi(e),512&r&&(Ni||null===s||xi(s,s.return)),32&e.flags){n=e.stateNode;try{kt(n,"")}catch(h){ud(e,e.return,h)}}4&r&&null!=e.stateNode&&gi(e,n=e.memoizedProps,null!==s?s.memoizedProps:n),1024&r&&(wi=!0);break;case 6:if(Ii(t,e),Fi(e),4&r){if(null===e.stateNode)throw Error(a(162));r=e.memoizedProps,s=e.stateNode;try{s.nodeValue=r}catch(h){ud(e,e.return,h)}}break;case 3:if($m=null,n=Di,Di=Cm(t.containerInfo),Ii(t,e),Di=n,Fi(e),4&r&&null!==s&&s.memoizedState.isDehydrated)try{Tu(t.containerInfo)}catch(h){ud(e,e.return,h)}wi&&(wi=!1,qi(e));break;case 4:r=Di,Di=Cm(e.stateNode.containerInfo),Ii(t,e),Fi(e),Di=r;break;case 12:default:Ii(t,e),Fi(e);break;case 13:Ii(t,e),Fi(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==s&&null!==s.memoizedState)&&(wc=ee()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Oi(e,r)));break;case 22:n=null!==e.memoizedState;var c=null!==s&&null!==s.memoizedState,d=vi,m=Ni;if(vi=d||n,Ni=m||c,Ii(t,e),Ni=m,vi=d,Fi(e),8192&r)e:for(t=e.stateNode,t._visibility=n?-2&t._visibility:1|t._visibility,n&&(null===s||c||vi||Ni||$i(e)),s=null,t=e;;){if(5===t.tag||26===t.tag){if(null===s){c=s=t;try{if(l=c.stateNode,n)"function"==typeof(o=l.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{i=c.stateNode;var u=c.memoizedProps.style,x=null!=u&&u.hasOwnProperty("display")?u.display:null;i.style.display=null==x||"boolean"==typeof x?"":(""+x).trim()}}catch(h){ud(c,c.return,h)}}}else if(6===t.tag){if(null===s){c=t;try{c.stateNode.nodeValue=n?"":c.memoizedProps}catch(h){ud(c,c.return,h)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;s===t&&(s=null),t=t.return}s===t&&(s=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(s=r.retryQueue)&&(r.retryQueue=null,Oi(e,s))));break;case 19:Ii(t,e),Fi(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Oi(e,r)));case 30:case 21:}}function Fi(e){var t=e.flags;if(2&t){try{for(var s,r=e.return;null!==r;){if(pi(r)){s=r;break}r=r.return}if(null==s)throw Error(a(160));switch(s.tag){case 27:var n=s.stateNode;yi(e,fi(e),n);break;case 5:var l=s.stateNode;32&s.flags&&(kt(l,""),s.flags&=-33),yi(e,fi(e),l);break;case 3:case 4:var o=s.stateNode.containerInfo;bi(e,fi(e),o);break;default:throw Error(a(161))}}catch(i){ud(e,e.return,i)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function qi(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;qi(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Mi(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Ci(e,t.alternate,t),t=t.sibling}function $i(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ci(4,t,t.return),$i(t);break;case 1:xi(t,t.return);var s=t.stateNode;"function"==typeof s.componentWillUnmount&&mi(t,t.return,s),$i(t);break;case 27:wm(t.stateNode);case 26:case 5:xi(t,t.return),$i(t);break;case 22:null===t.memoizedState&&$i(t);break;default:$i(t)}e=e.sibling}}function zi(e,t,s){for(s=s&&!!(8772&t.subtreeFlags),t=t.child;null!==t;){var a=t.alternate,r=e,n=t,l=n.flags;switch(n.tag){case 0:case 11:case 15:zi(r,n,s),ii(4,n);break;case 1:if(zi(r,n,s),"function"==typeof(r=(a=n).stateNode).componentDidMount)try{r.componentDidMount()}catch(c){ud(a,a.return,c)}if(null!==(r=(a=n).updateQueue)){var o=a.stateNode;try{var i=r.shared.hiddenCallbacks;if(null!==i)for(r.shared.hiddenCallbacks=null,r=0;r<i.length;r++)xn(i[r],o)}catch(c){ud(a,a.return,c)}}s&&64&l&&di(n),ui(n,n.return);break;case 27:ji(n);case 26:case 5:zi(r,n,s),s&&null===a&&4&l&&hi(n),ui(n,n.return);break;case 12:zi(r,n,s);break;case 13:zi(r,n,s),s&&4&l&&Pi(r,n);break;case 22:null===n.memoizedState&&zi(r,n,s),ui(n,n.return);break;case 30:break;default:zi(r,n,s)}t=t.sibling}}function Ui(e,t){var s=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(s=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==s&&(null!=e&&e.refCount++,null!=s&&Dr(s))}function Bi(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Dr(e))}function Vi(e,t,s,a){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Hi(e,t,s,a),t=t.sibling}function Hi(e,t,s,a){var r=t.flags;switch(t.tag){case 0:case 11:case 15:Vi(e,t,s,a),2048&r&&ii(9,t);break;case 1:case 13:default:Vi(e,t,s,a);break;case 3:Vi(e,t,s,a),2048&r&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Dr(e)));break;case 12:if(2048&r){Vi(e,t,s,a),e=t.stateNode;try{var n=t.memoizedProps,l=n.id,o=n.onPostCommit;"function"==typeof o&&o(l,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(i){ud(t,t.return,i)}}else Vi(e,t,s,a);break;case 23:break;case 22:n=t.stateNode,l=t.alternate,null!==t.memoizedState?2&n._visibility?Vi(e,t,s,a):Qi(e,t):2&n._visibility?Vi(e,t,s,a):(n._visibility|=2,Wi(e,t,s,a,!!(10256&t.subtreeFlags))),2048&r&&Ui(l,t);break;case 24:Vi(e,t,s,a),2048&r&&Bi(t.alternate,t)}}function Wi(e,t,s,a,r){for(r=r&&!!(10256&t.subtreeFlags),t=t.child;null!==t;){var n=e,l=t,o=s,i=a,c=l.flags;switch(l.tag){case 0:case 11:case 15:Wi(n,l,o,i,r),ii(8,l);break;case 23:break;case 22:var d=l.stateNode;null!==l.memoizedState?2&d._visibility?Wi(n,l,o,i,r):Qi(n,l):(d._visibility|=2,Wi(n,l,o,i,r)),r&&2048&c&&Ui(l.alternate,l);break;case 24:Wi(n,l,o,i,r),r&&2048&c&&Bi(l.alternate,l);break;default:Wi(n,l,o,i,r)}t=t.sibling}}function Qi(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var s=e,a=t,r=a.flags;switch(a.tag){case 22:Qi(s,a),2048&r&&Ui(a.alternate,a);break;case 24:Qi(s,a),2048&r&&Bi(a.alternate,a);break;default:Qi(s,a)}t=t.sibling}}var Ji=8192;function Gi(e){if(e.subtreeFlags&Ji)for(e=e.child;null!==e;)Ki(e),e=e.sibling}function Ki(e){switch(e.tag){case 26:Gi(e),e.flags&Ji&&null!==e.memoizedState&&function(e,t,s){if(null===Vm)throw Error(a(475));var r=Vm;if(!("stylesheet"!==t.type||"string"==typeof s.media&&!1===matchMedia(s.media).matches||4&t.state.loading)){if(null===t.instance){var n=Rm(s.href),l=e.querySelector(Pm(n));if(l)return null!==(e=l._p)&&"object"==typeof e&&"function"==typeof e.then&&(r.count++,r=Wm.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=l,void Ve(l);l=e.ownerDocument||e,s=Om(s),(n=km.get(n))&&qm(s,n),Ve(l=l.createElement("link"));var o=l;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),sm(l,"link",s),t.instance=l}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&!(3&t.state.loading)&&(r.count++,t=Wm.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Di,e.memoizedState,e.memoizedProps);break;case 5:default:Gi(e);break;case 3:case 4:var t=Di;Di=Cm(e.stateNode.containerInfo),Gi(e),Di=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Ji,Ji=16777216,Gi(e),Ji=t):Gi(e))}}function Yi(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Xi(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var s=0;s<t.length;s++){var a=t[s];Si=a,tc(a,e)}Yi(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Zi(e),e=e.sibling}function Zi(e){switch(e.tag){case 0:case 11:case 15:Xi(e),2048&e.flags&&ci(9,e,e.return);break;case 3:case 12:default:Xi(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,ec(e)):Xi(e)}}function ec(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var s=0;s<t.length;s++){var a=t[s];Si=a,tc(a,e)}Yi(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:ci(8,t,t.return),ec(t);break;case 22:2&(s=t.stateNode)._visibility&&(s._visibility&=-3,ec(t));break;default:ec(t)}e=e.sibling}}function tc(e,t){for(;null!==Si;){var s=Si;switch(s.tag){case 0:case 11:case 15:ci(8,s,t);break;case 23:case 22:if(null!==s.memoizedState&&null!==s.memoizedState.cachePool){var a=s.memoizedState.cachePool.pool;null!=a&&a.refCount++}break;case 24:Dr(s.memoizedState.cache)}if(null!==(a=s.child))a.return=s,Si=a;else e:for(s=e;null!==Si;){var r=(a=Si).sibling,n=a.return;if(Ei(a),a===s){Si=null;break e}if(null!==r){r.return=n,Si=r;break e}Si=n}}}var sc={getCacheForType:function(e){var t=Er(Or),s=t.data.get(e);return void 0===s&&(s=e(),t.data.set(e,s)),s}},ac="function"==typeof WeakMap?WeakMap:Map,rc=0,nc=null,lc=null,oc=0,ic=0,cc=null,dc=!1,mc=!1,uc=!1,xc=0,hc=0,gc=0,pc=0,fc=0,bc=0,yc=0,jc=null,vc=null,Nc=!1,wc=0,kc=1/0,Sc=null,Cc=null,Ec=0,Ac=null,Tc=null,_c=0,Rc=0,Pc=null,Oc=null,Ic=0,Dc=null;function Lc(){if(2&rc&&0!==oc)return oc&-oc;if(null!==O.T){return 0!==qr?qr:Rd()}return Te()}function Fc(){0===bc&&(bc=536870912&oc&&!lr?536870912:ve());var e=no.current;return null!==e&&(e.flags|=32),bc}function qc(e,t,s){(e!==nc||2!==ic&&9!==ic)&&null===e.cancelPendingCommit||(Hc(e,0),Uc(e,oc,bc,!1)),ke(e,s),2&rc&&e===nc||(e===nc&&(!(2&rc)&&(pc|=s),4===hc&&Uc(e,oc,bc,!1)),kd(e))}function Mc(e,t,s){if(6&rc)throw Error(a(327));for(var r=!s&&!(124&t)&&0===(t&e.expiredLanes)||ye(e,t),n=r?function(e,t){var s=rc;rc|=2;var r=Qc(),n=Jc();nc!==e||oc!==t?(Sc=null,kc=ee()+500,Hc(e,t)):mc=ye(e,t);e:for(;;)try{if(0!==ic&&null!==lc){t=lc;var l=cc;t:switch(ic){case 1:ic=0,cc=null,td(e,t,l,1);break;case 2:case 9:if(Kr(l)){ic=0,cc=null,ed(t);break}t=function(){2!==ic&&9!==ic||nc!==e||(ic=7),kd(e)},l.then(t,t);break e;case 3:ic=7;break e;case 4:ic=5;break e;case 7:Kr(l)?(ic=0,cc=null,ed(t)):(ic=0,cc=null,td(e,t,l,7));break;case 5:var o=null;switch(lc.tag){case 26:o=lc.memoizedState;case 5:case 27:var i=lc;if(!o||Bm(o)){ic=0,cc=null;var c=i.sibling;if(null!==c)lc=c;else{var d=i.return;null!==d?(lc=d,sd(d)):lc=null}break t}}ic=0,cc=null,td(e,t,l,5);break;case 6:ic=0,cc=null,td(e,t,l,6);break;case 8:Vc(),hc=6;break e;default:throw Error(a(462))}}Xc();break}catch(m){Wc(e,m)}return yr=br=null,O.H=r,O.A=n,rc=s,null!==lc?0:(nc=null,oc=0,Ta(),hc)}(e,t):Kc(e,t,!0),l=r;;){if(0===n){mc&&!r&&Uc(e,t,0,!1);break}if(s=e.current.alternate,!l||zc(s)){if(2===n){if(l=t,e.errorRecoveryDisabledLanes&l)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var i=e;n=jc;var c=i.current.memoizedState.isDehydrated;if(c&&(Hc(i,o).flags|=256),2!==(o=Kc(i,o,!1))){if(uc&&!c){i.errorRecoveryDisabledLanes|=l,pc|=l,n=4;break e}l=vc,vc=n,null!==l&&(null===vc?vc=l:vc.push.apply(vc,l))}n=o}if(l=!1,2!==n)continue}}if(1===n){Hc(e,0),Uc(e,t,0,!0);break}e:{switch(r=e,l=n){case 0:case 1:throw Error(a(345));case 4:if((4194048&t)!==t)break;case 6:Uc(r,t,bc,!dc);break e;case 2:vc=null;break;case 3:case 5:break;default:throw Error(a(329))}if((62914560&t)===t&&10<(n=wc+300-ee())){if(Uc(r,t,bc,!dc),0!==be(r,0,!0))break e;r.timeoutHandle=dm($c.bind(null,r,s,vc,Sc,Nc,t,bc,pc,yc,dc,l,2,-0,0),n)}else $c(r,s,vc,Sc,Nc,t,bc,pc,yc,dc,l,0,-0,0)}break}n=Kc(e,t,!1),l=!1}kd(e)}function $c(e,t,s,r,n,l,o,i,c,d,m,u,x,h){if(e.timeoutHandle=-1,(8192&(u=t.subtreeFlags)||!(16785408&~u))&&(Vm={stylesheets:null,count:0,unsuspend:Hm},Ki(t),null!==(u=function(){if(null===Vm)throw Error(a(475));var e=Vm;return e.stylesheets&&0===e.count&&Jm(e,e.stylesheets),0<e.count?function(t){var s=setTimeout(function(){if(e.stylesheets&&Jm(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(s)}}:null}())))return e.cancelPendingCommit=u(rd.bind(null,e,t,l,s,r,n,o,i,c,m,1,x,h)),void Uc(e,l,o,!d);rd(e,t,l,s,r,n,o,i,c)}function zc(e){for(var t=e;;){var s=t.tag;if((0===s||11===s||15===s)&&16384&t.flags&&(null!==(s=t.updateQueue)&&null!==(s=s.stores)))for(var a=0;a<s.length;a++){var r=s[a],n=r.getSnapshot;r=r.value;try{if(!Ks(n(),r))return!1}catch(l){return!1}}if(s=t.child,16384&t.subtreeFlags&&null!==s)s.return=t,t=s;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Uc(e,t,s,a){t&=~fc,t&=~pc,e.suspendedLanes|=t,e.pingedLanes&=~t,a&&(e.warmLanes|=t),a=e.expirationTimes;for(var r=t;0<r;){var n=31-ue(r),l=1<<n;a[n]=-1,r&=~l}0!==s&&Se(e,s,t)}function Bc(){return!!(6&rc)||(Sd(0),!1)}function Vc(){if(null!==lc){if(0===ic)var e=lc.return;else yr=br=null,Mn(e=lc),Kl=null,Yl=0,e=lc;for(;null!==e;)oi(e.alternate,e),e=e.return;lc=null}}function Hc(e,t){var s=e.timeoutHandle;-1!==s&&(e.timeoutHandle=-1,mm(s)),null!==(s=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,s()),Vc(),nc=e,lc=s=Ma(e.current,null),oc=t,ic=0,cc=null,dc=!1,mc=ye(e,t),uc=!1,yc=bc=fc=pc=gc=hc=0,vc=jc=null,Nc=!1,8&t&&(t|=32&t);var a=e.entangledLanes;if(0!==a)for(e=e.entanglements,a&=t;0<a;){var r=31-ue(a),n=1<<r;t|=e[r],a&=~n}return xc=t,Ta(),s}function Wc(e,t){vn=null,O.H=Wl,t===Wr||t===Jr?(t=en(),ic=3):t===Qr?(t=en(),ic=4):ic=t===Ao?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,cc=t,null===lc&&(hc=1,wo(e,Sa(t,e.current)))}function Qc(){var e=O.H;return O.H=Wl,null===e?Wl:e}function Jc(){var e=O.A;return O.A=sc,e}function Gc(){hc=4,dc||(4194048&oc)!==oc&&null!==no.current||(mc=!0),!(134217727&gc)&&!(134217727&pc)||null===nc||Uc(nc,oc,bc,!1)}function Kc(e,t,s){var a=rc;rc|=2;var r=Qc(),n=Jc();nc===e&&oc===t||(Sc=null,Hc(e,t)),t=!1;var l=hc;e:for(;;)try{if(0!==ic&&null!==lc){var o=lc,i=cc;switch(ic){case 8:Vc(),l=6;break e;case 3:case 2:case 9:case 6:null===no.current&&(t=!0);var c=ic;if(ic=0,cc=null,td(e,o,i,c),s&&mc){l=0;break e}break;default:c=ic,ic=0,cc=null,td(e,o,i,c)}}Yc(),l=hc;break}catch(d){Wc(e,d)}return t&&e.shellSuspendCounter++,yr=br=null,rc=a,O.H=r,O.A=n,null===lc&&(nc=null,oc=0,Ta()),l}function Yc(){for(;null!==lc;)Zc(lc)}function Xc(){for(;null!==lc&&!X();)Zc(lc)}function Zc(e){var t=Zo(e.alternate,e,xc);e.memoizedProps=e.pendingProps,null===t?sd(e):lc=t}function ed(e){var t=e,s=t.alternate;switch(t.tag){case 15:case 0:t=qo(s,t,t.pendingProps,t.type,void 0,oc);break;case 11:t=qo(s,t,t.pendingProps,t.type.render,t.ref,oc);break;case 5:Mn(t);default:oi(s,t),t=Zo(s,t=lc=$a(t,xc),xc)}e.memoizedProps=e.pendingProps,null===t?sd(e):lc=t}function td(e,t,s,r){yr=br=null,Mn(t),Kl=null,Yl=0;var n=t.return;try{if(function(e,t,s,r,n){if(s.flags|=32768,null!==r&&"object"==typeof r&&"function"==typeof r.then){if(null!==(t=s.alternate)&&kr(t,s,n,!0),null!==(s=no.current)){switch(s.tag){case 13:return null===lo?Gc():null===s.alternate&&0===hc&&(hc=3),s.flags&=-257,s.flags|=65536,s.lanes=n,r===Gr?s.flags|=16384:(null===(t=s.updateQueue)?s.updateQueue=new Set([r]):t.add(r),xd(e,r,n)),!1;case 22:return s.flags|=65536,r===Gr?s.flags|=16384:(null===(t=s.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},s.updateQueue=t):null===(s=t.retryQueue)?t.retryQueue=new Set([r]):s.add(r),xd(e,r,n)),!1}throw Error(a(435,s.tag))}return xd(e,r,n),Gc(),!1}if(lr)return null!==(t=no.current)?(!(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=n,r!==cr&&pr(Sa(e=Error(a(422),{cause:r}),s))):(r!==cr&&pr(Sa(t=Error(a(423),{cause:r}),s)),(e=e.current.alternate).flags|=65536,n&=-n,e.lanes|=n,r=Sa(r,s),cn(e,n=So(e.stateNode,r,n)),4!==hc&&(hc=2)),!1;var l=Error(a(520),{cause:r});if(l=Sa(l,s),null===jc?jc=[l]:jc.push(l),4!==hc&&(hc=2),null===t)return!0;r=Sa(r,s),s=t;do{switch(s.tag){case 3:return s.flags|=65536,e=n&-n,s.lanes|=e,cn(s,e=So(s.stateNode,r,e)),!1;case 1:if(t=s.type,l=s.stateNode,!(128&s.flags||"function"!=typeof t.getDerivedStateFromError&&(null===l||"function"!=typeof l.componentDidCatch||null!==Cc&&Cc.has(l))))return s.flags|=65536,n&=-n,s.lanes|=n,Eo(n=Co(n),e,s,r),cn(s,n),!1}s=s.return}while(null!==s);return!1}(e,n,t,s,oc))return hc=1,wo(e,Sa(s,e.current)),void(lc=null)}catch(l){if(null!==n)throw lc=n,l;return hc=1,wo(e,Sa(s,e.current)),void(lc=null)}32768&t.flags?(lr||1===r?e=!0:mc||536870912&oc?e=!1:(dc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=no.current)&&13===r.tag&&(r.flags|=16384))),ad(t,e)):sd(t)}function sd(e){var t=e;do{if(32768&t.flags)return void ad(t,dc);e=t.return;var s=ni(t.alternate,t,xc);if(null!==s)return void(lc=s);if(null!==(t=t.sibling))return void(lc=t);lc=t=e}while(null!==t);0===hc&&(hc=5)}function ad(e,t){do{var s=li(e.alternate,e);if(null!==s)return s.flags&=32767,void(lc=s);if(null!==(s=e.return)&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!t&&null!==(e=e.sibling))return void(lc=e);lc=e=s}while(null!==e);hc=6,lc=null}function rd(e,t,s,r,n,l,o,i,c){e.cancelPendingCommit=null;do{cd()}while(0!==Ec);if(6&rc)throw Error(a(327));if(null!==t){if(t===e.current)throw Error(a(177));if(l=t.lanes|t.childLanes,function(e,t,s,a,r,n){var l=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var o=e.entanglements,i=e.expirationTimes,c=e.hiddenUpdates;for(s=l&~s;0<s;){var d=31-ue(s),m=1<<d;o[d]=0,i[d]=-1;var u=c[d];if(null!==u)for(c[d]=null,d=0;d<u.length;d++){var x=u[d];null!==x&&(x.lane&=-536870913)}s&=~m}0!==a&&Se(e,a,0),0!==n&&0===r&&0!==e.tag&&(e.suspendedLanes|=n&~(l&~t))}(e,s,l|=Aa,o,i,c),e===nc&&(lc=nc=null,oc=0),Tc=t,Ac=e,_c=s,Rc=l,Pc=n,Oc=r,10256&t.subtreeFlags||10256&t.flags?(e.callbackNode=null,e.callbackPriority=0,K(re,function(){return dd(),null})):(e.callbackNode=null,e.callbackPriority=0),r=!!(13878&t.flags),13878&t.subtreeFlags||r){r=O.T,O.T=null,n=I.p,I.p=2,o=rc,rc|=4;try{!function(e,t){if(e=e.containerInfo,am=ru,sa(e=ta(e))){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(s=(s=e.ownerDocument)&&s.defaultView||window).getSelection&&s.getSelection();if(r&&0!==r.rangeCount){s=r.anchorNode;var n=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{s.nodeType,l.nodeType}catch(p){s=null;break e}var o=0,i=-1,c=-1,d=0,m=0,u=e,x=null;t:for(;;){for(var h;u!==s||0!==n&&3!==u.nodeType||(i=o+n),u!==l||0!==r&&3!==u.nodeType||(c=o+r),3===u.nodeType&&(o+=u.nodeValue.length),null!==(h=u.firstChild);)x=u,u=h;for(;;){if(u===e)break t;if(x===s&&++d===n&&(i=o),x===l&&++m===r&&(c=o),null!==(h=u.nextSibling))break;x=(u=x).parentNode}u=h}s=-1===i||-1===c?null:{start:i,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(rm={focusedElem:e,selectionRange:s},ru=!1,Si=t;null!==Si;)if(e=(t=Si).child,1024&t.subtreeFlags&&null!==e)e.return=t,Si=e;else for(;null!==Si;){switch(l=(t=Si).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(1024&e&&null!==l){e=void 0,s=t,n=l.memoizedProps,l=l.memoizedState,r=s.stateNode;try{var g=bo(s.type,n,(s.elementType,s.type));e=r.getSnapshotBeforeUpdate(g,l),r.__reactInternalSnapshotBeforeUpdate=e}catch(f){ud(s,s.return,f)}}break;case 3:if(1024&e)if(9===(s=(e=t.stateNode.containerInfo).nodeType))fm(e);else if(1===s)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":fm(e);break;default:e.textContent=""}break;default:if(1024&e)throw Error(a(163))}if(null!==(e=t.sibling)){e.return=t.return,Si=e;break}Si=t.return}}(e,t)}finally{rc=o,I.p=n,O.T=r}}Ec=1,nd(),ld(),od()}}function nd(){if(1===Ec){Ec=0;var e=Ac,t=Tc,s=!!(13878&t.flags);if(13878&t.subtreeFlags||s){s=O.T,O.T=null;var a=I.p;I.p=2;var r=rc;rc|=4;try{Li(t,e);var n=rm,l=ta(e.containerInfo),o=n.focusedElem,i=n.selectionRange;if(l!==o&&o&&o.ownerDocument&&ea(o.ownerDocument.documentElement,o)){if(null!==i&&sa(o)){var c=i.start,d=i.end;if(void 0===d&&(d=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(d,o.value.length);else{var m=o.ownerDocument||document,u=m&&m.defaultView||window;if(u.getSelection){var x=u.getSelection(),h=o.textContent.length,g=Math.min(i.start,h),p=void 0===i.end?g:Math.min(i.end,h);!x.extend&&g>p&&(l=p,p=g,g=l);var f=Zs(o,g),b=Zs(o,p);if(f&&b&&(1!==x.rangeCount||x.anchorNode!==f.node||x.anchorOffset!==f.offset||x.focusNode!==b.node||x.focusOffset!==b.offset)){var y=m.createRange();y.setStart(f.node,f.offset),x.removeAllRanges(),g>p?(x.addRange(y),x.extend(b.node,b.offset)):(y.setEnd(b.node,b.offset),x.addRange(y))}}}}for(m=[],x=o;x=x.parentNode;)1===x.nodeType&&m.push({element:x,left:x.scrollLeft,top:x.scrollTop});for("function"==typeof o.focus&&o.focus(),o=0;o<m.length;o++){var j=m[o];j.element.scrollLeft=j.left,j.element.scrollTop=j.top}}ru=!!am,rm=am=null}finally{rc=r,I.p=a,O.T=s}}e.current=t,Ec=2}}function ld(){if(2===Ec){Ec=0;var e=Ac,t=Tc,s=!!(8772&t.flags);if(8772&t.subtreeFlags||s){s=O.T,O.T=null;var a=I.p;I.p=2;var r=rc;rc|=4;try{Ci(e,t.alternate,t)}finally{rc=r,I.p=a,O.T=s}}Ec=3}}function od(){if(4===Ec||3===Ec){Ec=0,Z();var e=Ac,t=Tc,s=_c,a=Oc;10256&t.subtreeFlags||10256&t.flags?Ec=5:(Ec=0,Tc=Ac=null,id(e,e.pendingLanes));var r=e.pendingLanes;if(0===r&&(Cc=null),Ae(s),t=t.stateNode,de&&"function"==typeof de.onCommitFiberRoot)try{de.onCommitFiberRoot(ce,t,void 0,!(128&~t.current.flags))}catch(i){}if(null!==a){t=O.T,r=I.p,I.p=2,O.T=null;try{for(var n=e.onRecoverableError,l=0;l<a.length;l++){var o=a[l];n(o.value,{componentStack:o.stack})}}finally{O.T=t,I.p=r}}3&_c&&cd(),kd(e),r=e.pendingLanes,4194090&s&&42&r?e===Dc?Ic++:(Ic=0,Dc=e):Ic=0,Sd(0)}}function id(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Dr(t)))}function cd(e){return nd(),ld(),od(),dd()}function dd(){if(5!==Ec)return!1;var e=Ac,t=Rc;Rc=0;var s=Ae(_c),r=O.T,n=I.p;try{I.p=32>s?32:s,O.T=null,s=Pc,Pc=null;var l=Ac,o=_c;if(Ec=0,Tc=Ac=null,_c=0,6&rc)throw Error(a(331));var i=rc;if(rc|=4,Zi(l.current),Hi(l,l.current,o,s),rc=i,Sd(0,!1),de&&"function"==typeof de.onPostCommitFiberRoot)try{de.onPostCommitFiberRoot(ce,l)}catch(c){}return!0}finally{I.p=n,O.T=r,id(e,t)}}function md(e,t,s){t=Sa(s,t),null!==(e=ln(e,t=So(e.stateNode,t,2),2))&&(ke(e,2),kd(e))}function ud(e,t,s){if(3===e.tag)md(e,e,s);else for(;null!==t;){if(3===t.tag){md(t,e,s);break}if(1===t.tag){var a=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof a.componentDidCatch&&(null===Cc||!Cc.has(a))){e=Sa(s,e),null!==(a=ln(t,s=Co(2),2))&&(Eo(s,a,t,e),ke(a,2),kd(a));break}}t=t.return}}function xd(e,t,s){var a=e.pingCache;if(null===a){a=e.pingCache=new ac;var r=new Set;a.set(t,r)}else void 0===(r=a.get(t))&&(r=new Set,a.set(t,r));r.has(s)||(uc=!0,r.add(s),e=hd.bind(null,e,t,s),t.then(e,e))}function hd(e,t,s){var a=e.pingCache;null!==a&&a.delete(t),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,nc===e&&(oc&s)===s&&(4===hc||3===hc&&(62914560&oc)===oc&&300>ee()-wc?!(2&rc)&&Hc(e,0):fc|=s,yc===oc&&(yc=0)),kd(e)}function gd(e,t){0===t&&(t=Ne()),null!==(e=Pa(e,t))&&(ke(e,t),kd(e))}function pd(e){var t=e.memoizedState,s=0;null!==t&&(s=t.retryLane),gd(e,s)}function fd(e,t){var s=0;switch(e.tag){case 13:var r=e.stateNode,n=e.memoizedState;null!==n&&(s=n.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(a(314))}null!==r&&r.delete(t),gd(e,s)}var bd=null,yd=null,jd=!1,vd=!1,Nd=!1,wd=0;function kd(e){e!==yd&&null===e.next&&(null===yd?bd=yd=e:yd=yd.next=e),vd=!0,jd||(jd=!0,xm(function(){6&rc?K(se,Cd):Ed()}))}function Sd(e,t){if(!Nd&&vd){Nd=!0;do{for(var s=!1,a=bd;null!==a;){if(0!==e){var r=a.pendingLanes;if(0===r)var n=0;else{var l=a.suspendedLanes,o=a.pingedLanes;n=(1<<31-ue(42|e)+1)-1,n=201326741&(n&=r&~(l&~o))?201326741&n|1:n?2|n:0}0!==n&&(s=!0,_d(a,n))}else n=oc,!(3&(n=be(a,a===nc?n:0,null!==a.cancelPendingCommit||-1!==a.timeoutHandle)))||ye(a,n)||(s=!0,_d(a,n));a=a.next}}while(s);Nd=!1}}function Cd(){Ed()}function Ed(){vd=jd=!1;var e=0;0!==wd&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==cm&&(cm=e,!0);return cm=null,!1}()&&(e=wd),wd=0);for(var t=ee(),s=null,a=bd;null!==a;){var r=a.next,n=Ad(a,t);0===n?(a.next=null,null===s?bd=r:s.next=r,null===r&&(yd=s)):(s=a,(0!==e||3&n)&&(vd=!0)),a=r}Sd(e)}function Ad(e,t){for(var s=e.suspendedLanes,a=e.pingedLanes,r=e.expirationTimes,n=-62914561&e.pendingLanes;0<n;){var l=31-ue(n),o=1<<l,i=r[l];-1===i?0!==(o&s)&&0===(o&a)||(r[l]=je(o,t)):i<=t&&(e.expiredLanes|=o),n&=~o}if(s=oc,s=be(e,e===(t=nc)?s:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),a=e.callbackNode,0===s||e===t&&(2===ic||9===ic)||null!==e.cancelPendingCommit)return null!==a&&null!==a&&Y(a),e.callbackNode=null,e.callbackPriority=0;if(!(3&s)||ye(e,s)){if((t=s&-s)===e.callbackPriority)return t;switch(null!==a&&Y(a),Ae(s)){case 2:case 8:s=ae;break;case 32:default:s=re;break;case 268435456:s=le}return a=Td.bind(null,e),s=K(s,a),e.callbackPriority=t,e.callbackNode=s,t}return null!==a&&null!==a&&Y(a),e.callbackPriority=2,e.callbackNode=null,2}function Td(e,t){if(0!==Ec&&5!==Ec)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(cd()&&e.callbackNode!==s)return null;var a=oc;return 0===(a=be(e,e===nc?a:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Mc(e,a,t),Ad(e,ee()),null!=e.callbackNode&&e.callbackNode===s?Td.bind(null,e):null)}function _d(e,t){if(cd())return null;Mc(e,t,!0)}function Rd(){return 0===wd&&(wd=ve()),wd}function Pd(e){return null==e||"symbol"==typeof e||"boolean"==typeof e?null:"function"==typeof e?e:Rt(""+e)}function Od(e,t){var s=t.ownerDocument.createElement("input");return s.name=t.name,s.value=t.value,e.id&&s.setAttribute("form",e.id),t.parentNode.insertBefore(s,t),e=new FormData(e),s.parentNode.removeChild(s),e}for(var Id=0;Id<Na.length;Id++){var Dd=Na[Id];wa(Dd.toLowerCase(),"on"+(Dd[0].toUpperCase()+Dd.slice(1)))}wa(ha,"onAnimationEnd"),wa(ga,"onAnimationIteration"),wa(pa,"onAnimationStart"),wa("dblclick","onDoubleClick"),wa("focusin","onFocus"),wa("focusout","onBlur"),wa(fa,"onTransitionRun"),wa(ba,"onTransitionStart"),wa(ya,"onTransitionCancel"),wa(ja,"onTransitionEnd"),Je("onMouseEnter",["mouseout","mouseover"]),Je("onMouseLeave",["mouseout","mouseover"]),Je("onPointerEnter",["pointerout","pointerover"]),Je("onPointerLeave",["pointerout","pointerover"]),Qe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qe("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ld="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fd=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ld));function qd(e,t){t=!!(4&t);for(var s=0;s<e.length;s++){var a=e[s],r=a.event;a=a.listeners;e:{var n=void 0;if(t)for(var l=a.length-1;0<=l;l--){var o=a[l],i=o.instance,c=o.currentTarget;if(o=o.listener,i!==n&&r.isPropagationStopped())break e;n=o,r.currentTarget=c;try{n(r)}catch(d){yo(d)}r.currentTarget=null,n=i}else for(l=0;l<a.length;l++){if(i=(o=a[l]).instance,c=o.currentTarget,o=o.listener,i!==n&&r.isPropagationStopped())break e;n=o,r.currentTarget=c;try{n(r)}catch(d){yo(d)}r.currentTarget=null,n=i}}}}function Md(e,t){var s=t[Ie];void 0===s&&(s=t[Ie]=new Set);var a=e+"__bubble";s.has(a)||(Bd(t,e,2,!1),s.add(a))}function $d(e,t,s){var a=0;t&&(a|=4),Bd(s,e,a,t)}var zd="_reactListening"+Math.random().toString(36).slice(2);function Ud(e){if(!e[zd]){e[zd]=!0,He.forEach(function(t){"selectionchange"!==t&&(Fd.has(t)||$d(t,!1,e),$d(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zd]||(t[zd]=!0,$d("selectionchange",!1,t))}}function Bd(e,t,s,a){switch(mu(t)){case 2:var r=nu;break;case 8:r=lu;break;default:r=ou}s=r.bind(null,t,s,e),r=void 0,!zt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),a?void 0!==r?e.addEventListener(t,s,{capture:!0,passive:r}):e.addEventListener(t,s,!0):void 0!==r?e.addEventListener(t,s,{passive:r}):e.addEventListener(t,s,!1)}function Vd(e,t,s,a,r){var l=a;if(!(1&t||2&t||null===a))e:for(;;){if(null===a)return;var o=a.tag;if(3===o||4===o){var i=a.stateNode.containerInfo;if(i===r)break;if(4===o)for(o=a.return;null!==o;){var c=o.tag;if((3===c||4===c)&&o.stateNode.containerInfo===r)return;o=o.return}for(;null!==i;){if(null===(o=$e(i)))return;if(5===(c=o.tag)||6===c||26===c||27===c){a=l=o;continue e}i=i.parentNode}}a=a.return}qt(function(){var a=l,r=Ot(s),o=[];e:{var i=va.get(e);if(void 0!==i){var c=ts,d=e;switch(e){case"keypress":if(0===Qt(s))break e;case"keydown":case"keyup":c=ps;break;case"focusin":d="focus",c=os;break;case"focusout":d="blur",c=os;break;case"beforeblur":case"afterblur":c=os;break;case"click":if(2===s.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=ns;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=ls;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=bs;break;case ha:case ga:case pa:c=is;break;case ja:c=ys;break;case"scroll":case"scrollend":c=as;break;case"wheel":c=js;break;case"copy":case"cut":case"paste":c=cs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=fs;break;case"toggle":case"beforetoggle":c=vs}var m=!!(4&t),u=!m&&("scroll"===e||"scrollend"===e),x=m?null!==i?i+"Capture":null:i;m=[];for(var h,g=a;null!==g;){var p=g;if(h=p.stateNode,5!==(p=p.tag)&&26!==p&&27!==p||null===h||null===x||null!=(p=Mt(g,x))&&m.push(Hd(g,p,h)),u)break;g=g.return}0<m.length&&(i=new c(i,d,null,s,r),o.push({event:i,listeners:m}))}}if(!(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(i="mouseover"===e||"pointerover"===e)||s===Pt||!(d=s.relatedTarget||s.fromElement)||!$e(d)&&!d[Oe])&&(c||i)&&(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,c?(c=a,null!==(d=(d=s.relatedTarget||s.toElement)?$e(d):null)&&(u=n(d),m=d.tag,d!==u||5!==m&&27!==m&&6!==m)&&(d=null)):(c=null,d=a),c!==d)){if(m=ns,p="onMouseLeave",x="onMouseEnter",g="mouse","pointerout"!==e&&"pointerover"!==e||(m=fs,p="onPointerLeave",x="onPointerEnter",g="pointer"),u=null==c?i:Ue(c),h=null==d?i:Ue(d),(i=new m(p,g+"leave",c,s,r)).target=u,i.relatedTarget=h,p=null,$e(r)===a&&((m=new m(x,g+"enter",d,s,r)).target=h,m.relatedTarget=u,p=m),u=p,c&&d)e:{for(x=d,g=0,h=m=c;h;h=Qd(h))g++;for(h=0,p=x;p;p=Qd(p))h++;for(;0<g-h;)m=Qd(m),g--;for(;0<h-g;)x=Qd(x),h--;for(;g--;){if(m===x||null!==x&&m===x.alternate)break e;m=Qd(m),x=Qd(x)}m=null}else m=null;null!==c&&Jd(o,i,c,m,!1),null!==d&&null!==u&&Jd(o,u,d,m,!0)}if("select"===(c=(i=a?Ue(a):window).nodeName&&i.nodeName.toLowerCase())||"input"===c&&"file"===i.type)var f=Ms;else if(Os(i))if($s)f=Gs;else{f=Qs;var b=Ws}else!(c=i.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==i.type&&"radio"!==i.type?a&&At(a.elementType)&&(f=Ms):f=Js;switch(f&&(f=f(e,a))?Is(o,f,s,r):(b&&b(e,i,a),"focusout"===e&&a&&"number"===i.type&&null!=a.memoizedProps.value&&jt(i,"number",i.value)),b=a?Ue(a):window,e){case"focusin":(Os(b)||"true"===b.contentEditable)&&(ra=b,na=a,la=null);break;case"focusout":la=na=ra=null;break;case"mousedown":oa=!0;break;case"contextmenu":case"mouseup":case"dragend":oa=!1,ia(o,s,r);break;case"selectionchange":if(aa)break;case"keydown":case"keyup":ia(o,s,r)}var y;if(ws)e:{switch(e){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else Rs?Ts(e,s)&&(j="onCompositionEnd"):"keydown"===e&&229===s.keyCode&&(j="onCompositionStart");j&&(Cs&&"ko"!==s.locale&&(Rs||"onCompositionStart"!==j?"onCompositionEnd"===j&&Rs&&(y=Wt()):(Vt="value"in(Bt=r)?Bt.value:Bt.textContent,Rs=!0)),0<(b=Wd(a,j)).length&&(j=new ds(j,e,null,s,r),o.push({event:j,listeners:b}),y?j.data=y:null!==(y=_s(s))&&(j.data=y))),(y=Ss?function(e,t){switch(e){case"compositionend":return _s(t);case"keypress":return 32!==t.which?null:(As=!0,Es);case"textInput":return(e=t.data)===Es&&As?null:e;default:return null}}(e,s):function(e,t){if(Rs)return"compositionend"===e||!ws&&Ts(e,t)?(e=Wt(),Ht=Vt=Bt=null,Rs=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Cs&&"ko"!==t.locale?null:t.data}}(e,s))&&(0<(j=Wd(a,"onBeforeInput")).length&&(b=new ds("onBeforeInput","beforeinput",null,s,r),o.push({event:b,listeners:j}),b.data=y)),function(e,t,s,a,r){if("submit"===t&&s&&s.stateNode===r){var n=Pd((r[Pe]||null).action),l=a.submitter;l&&null!==(t=(t=l[Pe]||null)?Pd(t.formAction):l.getAttribute("formAction"))&&(n=t,l=null);var o=new ts("action","action",null,a,r);e.push({event:o,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(0!==wd){var e=l?Od(r,l):new FormData(r);Pl(s,{pending:!0,data:e,method:r.method,action:n},null,e)}}else"function"==typeof n&&(o.preventDefault(),e=l?Od(r,l):new FormData(r),Pl(s,{pending:!0,data:e,method:r.method,action:n},n,e))},currentTarget:r}]})}}(o,e,a,s,r)}qd(o,t)})}function Hd(e,t,s){return{instance:e,listener:t,currentTarget:s}}function Wd(e,t){for(var s=t+"Capture",a=[];null!==e;){var r=e,n=r.stateNode;if(5!==(r=r.tag)&&26!==r&&27!==r||null===n||(null!=(r=Mt(e,s))&&a.unshift(Hd(e,r,n)),null!=(r=Mt(e,t))&&a.push(Hd(e,r,n))),3===e.tag)return a;e=e.return}return[]}function Qd(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Jd(e,t,s,a,r){for(var n=t._reactName,l=[];null!==s&&s!==a;){var o=s,i=o.alternate,c=o.stateNode;if(o=o.tag,null!==i&&i===a)break;5!==o&&26!==o&&27!==o||null===c||(i=c,r?null!=(c=Mt(s,n))&&l.unshift(Hd(s,c,i)):r||null!=(c=Mt(s,n))&&l.push(Hd(s,c,i))),s=s.return}0!==l.length&&e.push({event:t,listeners:l})}var Gd=/\r\n?/g,Kd=/\u0000|\uFFFD/g;function Yd(e){return("string"==typeof e?e:""+e).replace(Gd,"\n").replace(Kd,"")}function Xd(e,t){return t=Yd(t),Yd(e)===t}function Zd(){}function em(e,t,s,r,n,l){switch(s){case"children":"string"==typeof r?"body"===t||"textarea"===t&&""===r||kt(e,r):("number"==typeof r||"bigint"==typeof r)&&"body"!==t&&kt(e,""+r);break;case"className":tt(e,"class",r);break;case"tabIndex":tt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":tt(e,s,r);break;case"style":Et(e,r,l);break;case"data":if("object"!==t){tt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==s)){e.removeAttribute(s);break}if(null==r||"function"==typeof r||"symbol"==typeof r||"boolean"==typeof r){e.removeAttribute(s);break}r=Rt(""+r),e.setAttribute(s,r);break;case"action":case"formAction":if("function"==typeof r){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"==typeof l&&("formAction"===s?("input"!==t&&em(e,t,"name",n.name,n,null),em(e,t,"formEncType",n.formEncType,n,null),em(e,t,"formMethod",n.formMethod,n,null),em(e,t,"formTarget",n.formTarget,n,null)):(em(e,t,"encType",n.encType,n,null),em(e,t,"method",n.method,n,null),em(e,t,"target",n.target,n,null))),null==r||"symbol"==typeof r||"boolean"==typeof r){e.removeAttribute(s);break}r=Rt(""+r),e.setAttribute(s,r);break;case"onClick":null!=r&&(e.onclick=Zd);break;case"onScroll":null!=r&&Md("scroll",e);break;case"onScrollEnd":null!=r&&Md("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!=typeof r||!("__html"in r))throw Error(a(61));if(null!=(s=r.__html)){if(null!=n.children)throw Error(a(60));e.innerHTML=s}}break;case"multiple":e.multiple=r&&"function"!=typeof r&&"symbol"!=typeof r;break;case"muted":e.muted=r&&"function"!=typeof r&&"symbol"!=typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"==typeof r||"boolean"==typeof r||"symbol"==typeof r){e.removeAttribute("xlink:href");break}s=Rt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!=typeof r&&"symbol"!=typeof r?e.setAttribute(s,""+r):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!=typeof r&&"symbol"!=typeof r?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":!0===r?e.setAttribute(s,""):!1!==r&&null!=r&&"function"!=typeof r&&"symbol"!=typeof r?e.setAttribute(s,r):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!=typeof r&&"symbol"!=typeof r&&!isNaN(r)&&1<=r?e.setAttribute(s,r):e.removeAttribute(s);break;case"rowSpan":case"start":null==r||"function"==typeof r||"symbol"==typeof r||isNaN(r)?e.removeAttribute(s):e.setAttribute(s,r);break;case"popover":Md("beforetoggle",e),Md("toggle",e),et(e,"popover",r);break;case"xlinkActuate":st(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":st(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":st(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":st(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":st(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":st(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":st(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":st(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":st(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":et(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<s.length)||"o"!==s[0]&&"O"!==s[0]||"n"!==s[1]&&"N"!==s[1])&&et(e,s=Tt.get(s)||s,r)}}function tm(e,t,s,r,n,l){switch(s){case"style":Et(e,r,l);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!=typeof r||!("__html"in r))throw Error(a(61));if(null!=(s=r.__html)){if(null!=n.children)throw Error(a(60));e.innerHTML=s}}break;case"children":"string"==typeof r?kt(e,r):("number"==typeof r||"bigint"==typeof r)&&kt(e,""+r);break;case"onScroll":null!=r&&Md("scroll",e);break;case"onScrollEnd":null!=r&&Md("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Zd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:We.hasOwnProperty(s)||("o"!==s[0]||"n"!==s[1]||(n=s.endsWith("Capture"),t=s.slice(2,n?s.length-7:void 0),"function"==typeof(l=null!=(l=e[Pe]||null)?l[s]:null)&&e.removeEventListener(t,l,n),"function"!=typeof r)?s in e?e[s]=r:!0===r?e.setAttribute(s,""):et(e,s,r):("function"!=typeof l&&null!==l&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(t,r,n)))}}function sm(e,t,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Md("error",e),Md("load",e);var r,n=!1,l=!1;for(r in s)if(s.hasOwnProperty(r)){var o=s[r];if(null!=o)switch(r){case"src":n=!0;break;case"srcSet":l=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:em(e,t,r,o,s,null)}}return l&&em(e,t,"srcSet",s.srcSet,s,null),void(n&&em(e,t,"src",s.src,s,null));case"input":Md("invalid",e);var i=r=o=l=null,c=null,d=null;for(n in s)if(s.hasOwnProperty(n)){var m=s[n];if(null!=m)switch(n){case"name":l=m;break;case"type":o=m;break;case"checked":c=m;break;case"defaultChecked":d=m;break;case"value":r=m;break;case"defaultValue":i=m;break;case"children":case"dangerouslySetInnerHTML":if(null!=m)throw Error(a(137,t));break;default:em(e,t,n,m,s,null)}}return yt(e,r,i,c,d,o,l,!1),void ut(e);case"select":for(l in Md("invalid",e),n=o=r=null,s)if(s.hasOwnProperty(l)&&null!=(i=s[l]))switch(l){case"value":r=i;break;case"defaultValue":o=i;break;case"multiple":n=i;default:em(e,t,l,i,s,null)}return t=r,s=o,e.multiple=!!n,void(null!=t?vt(e,!!n,t,!1):null!=s&&vt(e,!!n,s,!0));case"textarea":for(o in Md("invalid",e),r=l=n=null,s)if(s.hasOwnProperty(o)&&null!=(i=s[o]))switch(o){case"value":n=i;break;case"defaultValue":l=i;break;case"children":r=i;break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(a(91));break;default:em(e,t,o,i,s,null)}return wt(e,n,l,r),void ut(e);case"option":for(c in s)if(s.hasOwnProperty(c)&&null!=(n=s[c]))if("selected"===c)e.selected=n&&"function"!=typeof n&&"symbol"!=typeof n;else em(e,t,c,n,s,null);return;case"dialog":Md("beforetoggle",e),Md("toggle",e),Md("cancel",e),Md("close",e);break;case"iframe":case"object":Md("load",e);break;case"video":case"audio":for(n=0;n<Ld.length;n++)Md(Ld[n],e);break;case"image":Md("error",e),Md("load",e);break;case"details":Md("toggle",e);break;case"embed":case"source":case"link":Md("error",e),Md("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in s)if(s.hasOwnProperty(d)&&null!=(n=s[d]))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:em(e,t,d,n,s,null)}return;default:if(At(t)){for(m in s)s.hasOwnProperty(m)&&(void 0!==(n=s[m])&&tm(e,t,m,n,s,void 0));return}}for(i in s)s.hasOwnProperty(i)&&(null!=(n=s[i])&&em(e,t,i,n,s,null))}var am=null,rm=null;function nm(e){return 9===e.nodeType?e:e.ownerDocument}function lm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function om(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function im(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"bigint"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var cm=null;var dm="function"==typeof setTimeout?setTimeout:void 0,mm="function"==typeof clearTimeout?clearTimeout:void 0,um="function"==typeof Promise?Promise:void 0,xm="function"==typeof queueMicrotask?queueMicrotask:void 0!==um?function(e){return um.resolve(null).then(e).catch(hm)}:dm;function hm(e){setTimeout(function(){throw e})}function gm(e){return"head"===e}function pm(e,t){var s=t,a=0,r=0;do{var n=s.nextSibling;if(e.removeChild(s),n&&8===n.nodeType)if("/$"===(s=n.data)){if(0<a&&8>a){s=a;var l=e.ownerDocument;if(1&s&&wm(l.documentElement),2&s&&wm(l.body),4&s)for(wm(s=l.head),l=s.firstChild;l;){var o=l.nextSibling,i=l.nodeName;l[qe]||"SCRIPT"===i||"STYLE"===i||"LINK"===i&&"stylesheet"===l.rel.toLowerCase()||s.removeChild(l),l=o}}if(0===r)return e.removeChild(n),void Tu(t);r--}else"$"===s||"$?"===s||"$!"===s?r++:a=s.charCodeAt(0)-48;else a=0;s=n}while(s);Tu(t)}function fm(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var s=t;switch(t=t.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":fm(s),Me(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===s.rel.toLowerCase())continue}e.removeChild(s)}}function bm(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function ym(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var jm=null;function vm(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var s=e.data;if("$"===s||"$!"===s||"$?"===s){if(0===t)return e;t--}else"/$"===s&&t++}e=e.previousSibling}return null}function Nm(e,t,s){switch(t=nm(s),e){case"html":if(!(e=t.documentElement))throw Error(a(452));return e;case"head":if(!(e=t.head))throw Error(a(453));return e;case"body":if(!(e=t.body))throw Error(a(454));return e;default:throw Error(a(451))}}function wm(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Me(e)}var km=new Map,Sm=new Set;function Cm(e){return"function"==typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Em=I.d;I.d={f:function(){var e=Em.f(),t=Bc();return e||t},r:function(e){var t=ze(e);null!==t&&5===t.tag&&"form"===t.type?Il(t):Em.r(e)},D:function(e){Em.D(e),Tm("dns-prefetch",e,null)},C:function(e,t){Em.C(e,t),Tm("preconnect",e,t)},L:function(e,t,s){Em.L(e,t,s);var a=Am;if(a&&e&&t){var r='link[rel="preload"][as="'+ft(t)+'"]';"image"===t&&s&&s.imageSrcSet?(r+='[imagesrcset="'+ft(s.imageSrcSet)+'"]',"string"==typeof s.imageSizes&&(r+='[imagesizes="'+ft(s.imageSizes)+'"]')):r+='[href="'+ft(e)+'"]';var n=r;switch(t){case"style":n=Rm(e);break;case"script":n=Im(e)}km.has(n)||(e=c({rel:"preload",href:"image"===t&&s&&s.imageSrcSet?void 0:e,as:t},s),km.set(n,e),null!==a.querySelector(r)||"style"===t&&a.querySelector(Pm(n))||"script"===t&&a.querySelector(Dm(n))||(sm(t=a.createElement("link"),"link",e),Ve(t),a.head.appendChild(t)))}},m:function(e,t){Em.m(e,t);var s=Am;if(s&&e){var a=t&&"string"==typeof t.as?t.as:"script",r='link[rel="modulepreload"][as="'+ft(a)+'"][href="'+ft(e)+'"]',n=r;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":n=Im(e)}if(!km.has(n)&&(e=c({rel:"modulepreload",href:e},t),km.set(n,e),null===s.querySelector(r))){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Dm(n)))return}sm(a=s.createElement("link"),"link",e),Ve(a),s.head.appendChild(a)}}},X:function(e,t){Em.X(e,t);var s=Am;if(s&&e){var a=Be(s).hoistableScripts,r=Im(e),n=a.get(r);n||((n=s.querySelector(Dm(r)))||(e=c({src:e,async:!0},t),(t=km.get(r))&&Mm(e,t),Ve(n=s.createElement("script")),sm(n,"link",e),s.head.appendChild(n)),n={type:"script",instance:n,count:1,state:null},a.set(r,n))}},S:function(e,t,s){Em.S(e,t,s);var a=Am;if(a&&e){var r=Be(a).hoistableStyles,n=Rm(e);t=t||"default";var l=r.get(n);if(!l){var o={loading:0,preload:null};if(l=a.querySelector(Pm(n)))o.loading=5;else{e=c({rel:"stylesheet",href:e,"data-precedence":t},s),(s=km.get(n))&&qm(e,s);var i=l=a.createElement("link");Ve(i),sm(i,"link",e),i._p=new Promise(function(e,t){i.onload=e,i.onerror=t}),i.addEventListener("load",function(){o.loading|=1}),i.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Fm(l,t,a)}l={type:"stylesheet",instance:l,count:1,state:o},r.set(n,l)}}},M:function(e,t){Em.M(e,t);var s=Am;if(s&&e){var a=Be(s).hoistableScripts,r=Im(e),n=a.get(r);n||((n=s.querySelector(Dm(r)))||(e=c({src:e,async:!0,type:"module"},t),(t=km.get(r))&&Mm(e,t),Ve(n=s.createElement("script")),sm(n,"link",e),s.head.appendChild(n)),n={type:"script",instance:n,count:1,state:null},a.set(r,n))}}};var Am="undefined"==typeof document?null:document;function Tm(e,t,s){var a=Am;if(a&&"string"==typeof t&&t){var r=ft(t);r='link[rel="'+e+'"][href="'+r+'"]',"string"==typeof s&&(r+='[crossorigin="'+s+'"]'),Sm.has(r)||(Sm.add(r),e={rel:e,crossOrigin:s,href:t},null===a.querySelector(r)&&(sm(t=a.createElement("link"),"link",e),Ve(t),a.head.appendChild(t)))}}function _m(e,t,s,r){var n,l,o,i,c=(c=B.current)?Cm(c):null;if(!c)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return"string"==typeof s.precedence&&"string"==typeof s.href?(t=Rm(s.href),(r=(s=Be(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},s.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===s.rel&&"string"==typeof s.href&&"string"==typeof s.precedence){e=Rm(s.href);var d=Be(c).hoistableStyles,m=d.get(e);if(m||(c=c.ownerDocument||c,m={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,m),(d=c.querySelector(Pm(e)))&&!d._p&&(m.instance=d,m.state.loading=5),km.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},km.set(e,s),d||(n=c,l=e,o=s,i=m.state,n.querySelector('link[rel="preload"][as="style"]['+l+"]")?i.loading=1:(l=n.createElement("link"),i.preload=l,l.addEventListener("load",function(){return i.loading|=1}),l.addEventListener("error",function(){return i.loading|=2}),sm(l,"link",o),Ve(l),n.head.appendChild(l))))),t&&null===r)throw Error(a(528,""));return m}if(t&&null!==r)throw Error(a(529,""));return null;case"script":return t=s.async,"string"==typeof(s=s.src)&&t&&"function"!=typeof t&&"symbol"!=typeof t?(t=Im(s),(r=(s=Be(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},s.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function Rm(e){return'href="'+ft(e)+'"'}function Pm(e){return'link[rel="stylesheet"]['+e+"]"}function Om(e){return c({},e,{"data-precedence":e.precedence,precedence:null})}function Im(e){return'[src="'+ft(e)+'"]'}function Dm(e){return"script[async]"+e}function Lm(e,t,s){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+ft(s.href)+'"]');if(r)return t.instance=r,Ve(r),r;var n=c({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return Ve(r=(e.ownerDocument||e).createElement("style")),sm(r,"style",n),Fm(r,s.precedence,e),t.instance=r;case"stylesheet":n=Rm(s.href);var l=e.querySelector(Pm(n));if(l)return t.state.loading|=4,t.instance=l,Ve(l),l;r=Om(s),(n=km.get(n))&&qm(r,n),Ve(l=(e.ownerDocument||e).createElement("link"));var o=l;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),sm(l,"link",r),t.state.loading|=4,Fm(l,s.precedence,e),t.instance=l;case"script":return l=Im(s.src),(n=e.querySelector(Dm(l)))?(t.instance=n,Ve(n),n):(r=s,(n=km.get(l))&&Mm(r=c({},s),n),Ve(n=(e=e.ownerDocument||e).createElement("script")),sm(n,"link",r),e.head.appendChild(n),t.instance=n);case"void":return null;default:throw Error(a(443,t.type))}else"stylesheet"===t.type&&!(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Fm(r,s.precedence,e));return t.instance}function Fm(e,t,s){for(var a=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=a.length?a[a.length-1]:null,n=r,l=0;l<a.length;l++){var o=a[l];if(o.dataset.precedence===t)n=o;else if(n!==r)break}n?n.parentNode.insertBefore(e,n.nextSibling):(t=9===s.nodeType?s.head:s).insertBefore(e,t.firstChild)}function qm(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Mm(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var $m=null;function zm(e,t,s){if(null===$m){var a=new Map,r=$m=new Map;r.set(s,a)}else(a=(r=$m).get(s))||(a=new Map,r.set(s,a));if(a.has(e))return a;for(a.set(e,null),s=s.getElementsByTagName(e),r=0;r<s.length;r++){var n=s[r];if(!(n[qe]||n[Re]||"link"===e&&"stylesheet"===n.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==n.namespaceURI){var l=n.getAttribute(t)||"";l=e+l;var o=a.get(l);o?o.push(n):a.set(l,[n])}}return a}function Um(e,t,s){(e=e.ownerDocument||e).head.insertBefore(s,"title"===t?e.querySelector("head > title"):null)}function Bm(e){return!!("stylesheet"!==e.type||3&e.state.loading)}var Vm=null;function Hm(){}function Wm(){if(this.count--,0===this.count)if(this.stylesheets)Jm(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Qm=null;function Jm(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Qm=new Map,t.forEach(Gm,e),Qm=null,Wm.call(e))}function Gm(e,t){if(!(4&t.state.loading)){var s=Qm.get(e);if(s)var a=s.get(null);else{s=new Map,Qm.set(e,s);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),n=0;n<r.length;n++){var l=r[n];"LINK"!==l.nodeName&&"not all"===l.getAttribute("media")||(s.set(l.dataset.precedence,l),a=l)}a&&s.set(null,a)}l=(r=t.instance).getAttribute("data-precedence"),(n=s.get(l)||a)===a&&s.set(null,r),s.set(l,r),this.count++,a=Wm.bind(this),r.addEventListener("load",a),r.addEventListener("error",a),n?n.parentNode.insertBefore(r,n.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(r,e.firstChild),t.state.loading|=4}}var Km={$$typeof:j,Provider:null,Consumer:null,_currentValue:D,_currentValue2:D,_threadCount:0};function Ym(e,t,s,a,r,n,l,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=we(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=we(0),this.hiddenUpdates=we(null),this.identifierPrefix=a,this.onUncaughtError=r,this.onCaughtError=n,this.onRecoverableError=l,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function Xm(e,t,s,a,r,n,l,o,i,c,d,m){return e=new Ym(e,t,s,l,o,i,c,m),t=1,!0===n&&(t|=24),n=Fa(3,null,null,t),e.current=n,n.stateNode=e,(t=Ir()).refCount++,e.pooledCache=t,t.refCount++,n.memoizedState={element:a,isDehydrated:s,cache:t},an(n),e}function Zm(e){return e?e=Da:Da}function eu(e,t,s,a,r,n){r=Zm(r),null===a.context?a.context=r:a.pendingContext=r,(a=nn(t)).payload={element:s},null!==(n=void 0===n?null:n)&&(a.callback=n),null!==(s=ln(e,a,t))&&(qc(s,0,t),on(s,e,t))}function tu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var s=e.retryLane;e.retryLane=0!==s&&s<t?s:t}}function su(e,t){tu(e,t),(e=e.alternate)&&tu(e,t)}function au(e){if(13===e.tag){var t=Pa(e,67108864);null!==t&&qc(t,0,67108864),su(e,67108864)}}var ru=!0;function nu(e,t,s,a){var r=O.T;O.T=null;var n=I.p;try{I.p=2,ou(e,t,s,a)}finally{I.p=n,O.T=r}}function lu(e,t,s,a){var r=O.T;O.T=null;var n=I.p;try{I.p=8,ou(e,t,s,a)}finally{I.p=n,O.T=r}}function ou(e,t,s,a){if(ru){var r=iu(a);if(null===r)Vd(e,t,a,cu,s),ju(e,a);else if(function(e,t,s,a,r){switch(t){case"focusin":return xu=vu(xu,e,t,s,a,r),!0;case"dragenter":return hu=vu(hu,e,t,s,a,r),!0;case"mouseover":return gu=vu(gu,e,t,s,a,r),!0;case"pointerover":var n=r.pointerId;return pu.set(n,vu(pu.get(n)||null,e,t,s,a,r)),!0;case"gotpointercapture":return n=r.pointerId,fu.set(n,vu(fu.get(n)||null,e,t,s,a,r)),!0}return!1}(r,e,t,s,a))a.stopPropagation();else if(ju(e,a),4&t&&-1<yu.indexOf(e)){for(;null!==r;){var n=ze(r);if(null!==n)switch(n.tag){case 3:if((n=n.stateNode).current.memoizedState.isDehydrated){var l=fe(n.pendingLanes);if(0!==l){var o=n;for(o.pendingLanes|=2,o.entangledLanes|=2;l;){var i=1<<31-ue(l);o.entanglements[1]|=i,l&=~i}kd(n),!(6&rc)&&(kc=ee()+500,Sd(0))}}break;case 13:null!==(o=Pa(n,2))&&qc(o,0,2),Bc(),su(n,2)}if(null===(n=iu(a))&&Vd(e,t,a,cu,s),n===r)break;r=n}null!==r&&a.stopPropagation()}else Vd(e,t,a,null,s)}}function iu(e){return du(e=Ot(e))}var cu=null;function du(e){if(cu=null,null!==(e=$e(e))){var t=n(e);if(null===t)e=null;else{var s=t.tag;if(13===s){if(null!==(e=l(t)))return e;e=null}else if(3===s){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return cu=e,null}function mu(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(te()){case se:return 2;case ae:return 8;case re:case ne:return 32;case le:return 268435456;default:return 32}default:return 32}}var uu=!1,xu=null,hu=null,gu=null,pu=new Map,fu=new Map,bu=[],yu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ju(e,t){switch(e){case"focusin":case"focusout":xu=null;break;case"dragenter":case"dragleave":hu=null;break;case"mouseover":case"mouseout":gu=null;break;case"pointerover":case"pointerout":pu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":fu.delete(t.pointerId)}}function vu(e,t,s,a,r,n){return null===e||e.nativeEvent!==n?(e={blockedOn:t,domEventName:s,eventSystemFlags:a,nativeEvent:n,targetContainers:[r]},null!==t&&(null!==(t=ze(t))&&au(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Nu(e){var t=$e(e.target);if(null!==t){var s=n(t);if(null!==s)if(13===(t=s.tag)){if(null!==(t=l(s)))return e.blockedOn=t,void function(e,t){var s=I.p;try{return I.p=e,t()}finally{I.p=s}}(e.priority,function(){if(13===s.tag){var e=Lc();e=Ee(e);var t=Pa(s,e);null!==t&&qc(t,0,e),su(s,e)}})}else if(3===t&&s.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===s.tag?s.stateNode.containerInfo:null)}e.blockedOn=null}function wu(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var s=iu(e.nativeEvent);if(null!==s)return null!==(t=ze(s))&&au(t),e.blockedOn=s,!1;var a=new(s=e.nativeEvent).constructor(s.type,s);Pt=a,s.target.dispatchEvent(a),Pt=null,t.shift()}return!0}function ku(e,t,s){wu(e)&&s.delete(t)}function Su(){uu=!1,null!==xu&&wu(xu)&&(xu=null),null!==hu&&wu(hu)&&(hu=null),null!==gu&&wu(gu)&&(gu=null),pu.forEach(ku),fu.forEach(ku)}function Cu(t,s){t.blockedOn===s&&(t.blockedOn=null,uu||(uu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Su)))}var Eu=null;function Au(t){Eu!==t&&(Eu=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Eu===t&&(Eu=null);for(var e=0;e<t.length;e+=3){var s=t[e],a=t[e+1],r=t[e+2];if("function"!=typeof a){if(null===du(a||s))continue;break}var n=ze(s);null!==n&&(t.splice(e,3),e-=3,Pl(n,{pending:!0,data:r,method:s.method,action:a},a,r))}}))}function Tu(e){function t(t){return Cu(t,e)}null!==xu&&Cu(xu,e),null!==hu&&Cu(hu,e),null!==gu&&Cu(gu,e),pu.forEach(t),fu.forEach(t);for(var s=0;s<bu.length;s++){var a=bu[s];a.blockedOn===e&&(a.blockedOn=null)}for(;0<bu.length&&null===(s=bu[0]).blockedOn;)Nu(s),null===s.blockedOn&&bu.shift();if(null!=(s=(e.ownerDocument||e).$$reactFormReplay))for(a=0;a<s.length;a+=3){var r=s[a],n=s[a+1],l=r[Pe]||null;if("function"==typeof n)l||Au(s);else if(l){var o=null;if(n&&n.hasAttribute("formAction")){if(r=n,l=n[Pe]||null)o=l.formAction;else if(null!==du(r))continue}else o=l.action;"function"==typeof o?s[a+1]=o:(s.splice(a,3),a-=3),Au(s)}}}function _u(e){this._internalRoot=e}function Ru(e){this._internalRoot=e}Ru.prototype.render=_u.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));eu(t.current,Lc(),e,t,null,null)},Ru.prototype.unmount=_u.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;eu(e.current,2,null,e,null,null),Bc(),t[Oe]=null}},Ru.prototype.unstable_scheduleHydration=function(e){if(e){var t=Te();e={blockedOn:null,target:e,priority:t};for(var s=0;s<bu.length&&0!==t&&t<bu[s].priority;s++);bu.splice(s,0,e),0===s&&Nu(e)}};var Pu=t.version;if("19.1.1"!==Pu)throw Error(a(527,Pu,"19.1.1"));I.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=n(e)))throw Error(a(188));return t!==e?null:e}for(var s=e,r=t;;){var l=s.return;if(null===l)break;var i=l.alternate;if(null===i){if(null!==(r=l.return)){s=r;continue}break}if(l.child===i.child){for(i=l.child;i;){if(i===s)return o(l),e;if(i===r)return o(l),t;i=i.sibling}throw Error(a(188))}if(s.return!==r.return)s=l,r=i;else{for(var c=!1,d=l.child;d;){if(d===s){c=!0,s=l,r=i;break}if(d===r){c=!0,r=l,s=i;break}d=d.sibling}if(!c){for(d=i.child;d;){if(d===s){c=!0,s=i,r=l;break}if(d===r){c=!0,r=i,s=l;break}d=d.sibling}if(!c)throw Error(a(189))}}if(s.alternate!==r)throw Error(a(190))}if(3!==s.tag)throw Error(a(188));return s.stateNode.current===s?e:t}(t),e=null===(e=null!==e?i(e):null)?null:e.stateNode};var Ou={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.1.1"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Iu.isDisabled&&Iu.supportsFiber)try{ce=Iu.inject(Ou),de=Iu}catch(Lu){}}return dt.createRoot=function(e,t){if(!r(e))throw Error(a(299));var s=!1,n="",l=jo,o=vo,i=No;return null!=t&&(!0===t.unstable_strictMode&&(s=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onUncaughtError&&(l=t.onUncaughtError),void 0!==t.onCaughtError&&(o=t.onCaughtError),void 0!==t.onRecoverableError&&(i=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Xm(e,1,!1,null,0,s,n,l,o,i,0,null),e[Oe]=t.current,Ud(e),new _u(t)},dt.hydrateRoot=function(e,t,s){if(!r(e))throw Error(a(299));var n=!1,l="",o=jo,i=vo,c=No,d=null;return null!=s&&(!0===s.unstable_strictMode&&(n=!0),void 0!==s.identifierPrefix&&(l=s.identifierPrefix),void 0!==s.onUncaughtError&&(o=s.onUncaughtError),void 0!==s.onCaughtError&&(i=s.onCaughtError),void 0!==s.onRecoverableError&&(c=s.onRecoverableError),void 0!==s.unstable_transitionCallbacks&&s.unstable_transitionCallbacks,void 0!==s.formState&&(d=s.formState)),(t=Xm(e,1,!0,t,0,n,l,o,i,c,0,d)).context=Zm(null),s=t.current,(l=nn(n=Ee(n=Lc()))).callback=null,ln(s,l,n),s=n,t.current.lanes=s,ke(t,s),kd(t),e[Oe]=t.current,Ud(e),new Ru(t)},dt.version="19.1.1",dt}var gt=(ot||(ot=1,function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),ct.exports=ht()),ct.exports);const pt=new class{constructor(){this.baseURL="https://woodfire.food/api/v1"}getAuthHeader(){const e=localStorage.getItem("admin_token"),t=localStorage.getItem("employee_token"),s=e||t;return s?{Authorization:`Bearer ${s}`}:{}}isAdmin(){return!!localStorage.getItem("admin_token")}isEmployee(){return!!localStorage.getItem("employee_token")&&!this.isAdmin()}async makeRequest(e,t={}){const s=`${this.baseURL}${e}`,a={headers:{"Content-Type":"application/json",Accept:"application/json",...this.getAuthHeader()}},r={...a,...t,headers:{...a.headers,...t.headers}};try{const e=await fetch(s,r),t=await e.json();if(!e.ok){if(422===e.status&&t.errors){const e=Object.values(t.errors).flat().join(", ");throw new Error(`Validation failed: ${e}`)}throw new Error(t.message||`HTTP error! status: ${e.status}`)}return t}catch(n){throw console.error("Table Tracking API Request failed:",n),n}}async submitTableMapping(e,t){try{const s=`${t.toString()}_${e.toString().toUpperCase()}_${Date.now()}`,a=await this.makeRequest("/table-tracking/submit",{method:"POST",body:JSON.stringify({table_number:e.toString().toUpperCase(),order_number:t.toString(),submission_id:s,submitted_at:(new Date).toISOString(),source:"customer_walk_in"})});return a.success?{success:!0,mapping:a.data.mapping,order:a.data.order,message:a.message}:{success:!1,error:a.message||"Failed to submit table mapping"}}catch(s){return{success:!1,error:s.message}}}async getAllOrders(){try{const e=this.isEmployee()?"/employee/table-tracking/orders":"/admin/table-tracking/orders",t=await this.makeRequest(e);return t.success?{success:!0,orders:t.data.orders,message:t.message}:{success:!1,error:t.message||"Failed to get orders"}}catch(e){return{success:!1,error:e.message}}}async getAllMappings(){try{const e=this.isEmployee()?"/employee/table-tracking/mappings":"/admin/table-tracking/mappings",t=await this.makeRequest(e);return t.success?{success:!0,mappings:t.data.mappings,message:t.message}:{success:!1,error:t.message||"Failed to get mappings"}}catch(e){return{success:!1,error:e.message}}}async getAnalytics(){try{const e=await this.makeRequest("/admin/table-tracking/analytics");return e.success?{success:!0,analytics:e.data.analytics,message:e.message}:{success:!1,error:e.message||"Failed to get analytics"}}catch(e){return{success:!1,error:e.message}}}async addOrder(e){try{const t=`order_${e.orderNumber}_${Date.now()}`,s=await this.makeRequest("/admin/table-tracking/orders",{method:"POST",body:JSON.stringify({order_number:e.orderNumber,customer_name:e.customerName||"Walk-in Customer",status:e.status||"pending",creation_id:t,created_at:(new Date).toISOString(),source:"admin_manual_order"})});return s.success?{success:!0,order:s.data.order,message:s.message}:{success:!1,error:s.message||"Failed to add order"}}catch(t){return{success:!1,error:t.message}}}async updateOrderStatus(e,t,s=null,a=null){try{const r={status:t};s&&(r.mapping_id=s),a&&(r.table_number=a);const n=this.isEmployee()?`/employee/table-tracking/orders/${e}/status`:`/admin/table-tracking/orders/${e}/status`,l=await this.makeRequest(n,{method:"PUT",body:JSON.stringify(r)});return l.success?{success:!0,order:l.data.order,mapping:l.data.mapping,message:l.message}:{success:!1,error:l.message||"Failed to update order status"}}catch(r){return{success:!1,error:r.message}}}async markDelivered(e,t,s=null,a=null){try{const r={delivered_by:t};s&&(r.mapping_id=s),a&&(r.table_number=a);const n=this.isEmployee()?`/employee/table-tracking/orders/${e}/delivered`:`/admin/table-tracking/orders/${e}/delivered`,l=await this.makeRequest(n,{method:"PUT",body:JSON.stringify(r)});return l.success?{success:!0,order:l.data.order,mapping:l.data.mapping,message:l.message}:{success:!1,error:l.message||"Failed to mark as delivered"}}catch(r){return{success:!1,error:r.message}}}async deleteOrder(e,t=null,s=null){try{const a={};t&&(a.mapping_id=t),s&&(a.table_number=s);const r=await this.makeRequest(`/admin/table-tracking/orders/${e}`,{method:"DELETE",body:Object.keys(a).length>0?JSON.stringify(a):void 0});return r.success?{success:!0,message:r.message}:{success:!1,error:r.message||"Failed to delete order"}}catch(a){return{success:!1,error:a.message}}}async submitManualMapping(e,t){try{const s=`${t.toString()}_${e.toString().toUpperCase()}_${Date.now()}_manual`,a=await this.makeRequest("/admin/table-tracking/manual-mapping",{method:"POST",body:JSON.stringify({table_number:e.toString().toUpperCase(),order_number:t.toString(),submission_id:s,submitted_at:(new Date).toISOString(),source:"admin_manual"})});return a.success?{success:!0,mapping:a.data.mapping,order:a.data.order,message:a.message}:{success:!1,error:a.message||"Failed to submit manual mapping"}}catch(s){return{success:!1,error:s.message}}}async clearMapping(e,t){try{const s=await this.makeRequest(`/admin/table-tracking/mappings/${e}/clear`,{method:"PUT",body:JSON.stringify({reason:t})});return s.success?{success:!0,mapping:s.data.mapping,message:s.message}:{success:!1,error:s.message||"Failed to clear mapping"}}catch(s){return{success:!1,error:s.message}}}async getEmployeeNotifications(e){try{const e=await this.makeRequest("/employee/table-tracking/notifications");return e.success?{success:!0,notifications:e.data.notifications,message:e.message}:{success:!1,error:e.message||"Failed to get employee notifications"}}catch(t){return{success:!1,error:t.message}}}async markNotificationAsRead(e){try{const t=await this.makeRequest(`/employee/table-tracking/notifications/${e}/read`,{method:"PUT"});return t.success?{success:!0,message:t.message}:{success:!1,error:t.message||"Failed to mark notification as read"}}catch(t){return{success:!1,error:t.message}}}async markAllNotificationsAsRead(){try{const e=await this.makeRequest("/employee/table-tracking/notifications/mark-all-read",{method:"PUT"});return e.success?{success:!0,message:e.message}:{success:!1,error:e.message||"Failed to mark all notifications as read"}}catch(e){return{success:!1,error:e.message}}}async deleteNotification(e){try{const t=await this.makeRequest(`/employee/table-tracking/notifications/${e}`,{method:"DELETE"});return t.success?{success:!0,message:t.message}:{success:!1,error:t.message||"Failed to delete notification"}}catch(t){return{success:!1,error:t.message}}}async getAdminNotifications(){try{const e=await this.makeRequest("/admin/table-tracking/notifications");return e.success?{success:!0,notifications:e.data.notifications,message:e.message}:{success:!1,error:e.message||"Failed to get admin notifications"}}catch(e){return{success:!1,error:e.message}}}async markAdminNotificationAsRead(e){try{const t=await this.makeRequest(`/admin/table-tracking/notifications/${e}/read`,{method:"PUT"});return t.success?{success:!0,message:t.message}:{success:!1,error:t.message||"Failed to mark admin notification as read"}}catch(t){return{success:!1,error:t.message}}}async deleteAdminNotification(e){try{const t=await this.makeRequest(`/admin/table-tracking/notifications/${e}`,{method:"DELETE"});return t.success?{success:!0,message:t.message}:{success:!1,error:t.message||"Failed to delete admin notification"}}catch(t){return{success:!1,error:t.message}}}async getTableSettings(){try{const e=await this.makeRequest("/table-tracking/settings");return e.success?{success:!0,settings:e.data.settings,message:e.message}:{success:!1,error:e.message||"Failed to get table settings"}}catch(e){return{success:!1,error:e.message}}}};const ft=new class{constructor(){this.listeners=new Set}addListener(e){return this.listeners.add(e),()=>this.listeners.delete(e)}notifyListeners(){this.listeners.forEach(e=>{try{e()}catch(t){console.error("Error in notification listener:",t)}})}createNotification(e,t={}){const s={id:`${e}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:e,timestamp:(new Date).toISOString(),read:!1,...t};return console.log("Table tracking notification created:",s),this.notifyListeners(),s}getStorageKey(){return"adminNotifications"}notifyNewEmployeeSignup(e){return this.createNotification("NEW_SIGNUP",{title:"New Employee Registration",message:`${e.name} has submitted their registration for ${e.location}`,employeeName:e.name,employeeEmail:e.email,location:e.location,designation:e.designation})}notifyOnboardingComplete(e){return this.createNotification("ONBOARDING_COMPLETE",{title:"Onboarding Completed",message:`${e.name} has completed their onboarding process`,employeeName:e.name,employeeId:e.id})}notifyNewCustomerSignup(e){return this.createNotification("NEW_CUSTOMER",{title:"New Customer Registration",message:`${e.name} has signed up as a customer`,customerName:e.name,customerEmail:e.email})}notifyEmployee(e,t,s){return this.createNotification(t,{...s,employeeId:e})}notifyOnboardingReminder(e,t,s){return this.notifyEmployee(e,"ONBOARDING_REMINDER",{title:"Complete Your Onboarding",message:`You have ${s} onboarding step${1!==s?"s":""} remaining`,remainingSteps:s})}notifyProfileUpdateRequired(e,t,s){return this.notifyEmployee(e,"PROFILE_UPDATE_REQUIRED",{title:"Profile Update Required",message:`Please complete your profile: ${s.join(", ")}`,missingFields:s})}notifyTrainingAssigned(e,t,s=null){return this.notifyEmployee(e,"TRAINING_ASSIGNED",{title:"New Training Assigned",message:`You have been assigned: ${t}${s?` (Due: ${new Date(s).toLocaleDateString()})`:""}`,trainingTitle:t,dueDate:s})}notifyTrainingReminder(e,t,s,a){return this.createNotification("TRAINING_REMINDER",{title:"Training Reminder",message:`${t} has an overdue training: ${s}`,employeeId:e,employeeName:t,trainingTitle:s,dueDate:a})}notifyTrainingReset(e,t){return this.notifyEmployee(e,"TRAINING_RESET",{title:"Training Progress Reset",message:`Your progress for "${t}" has been reset. Please complete it again.`,trainingTitle:t})}async getAdminNotifications(){try{const e=await pt.getAdminNotifications();return e.success?e.notifications||[]:(console.error("Failed to get admin notifications:",e.error),[])}catch(e){return console.error("Error getting admin notifications:",e),[]}}getEmployeeNotifications(e){try{return e&&this.employeeNotifications.get(e)||[]}catch(t){return console.error("Error getting employee notifications:",t),[]}}markAsRead(e,t=null){try{const s=(t?this.employeeNotifications.get(t)||[]:this.adminNotifications).map(t=>t.id===e?{...t,read:!0,readAt:(new Date).toISOString()}:t);return t?this.employeeNotifications.set(t,s):this.adminNotifications=s,this.notifyListeners(),!0}catch(s){return console.error("Error marking notification as read:",s),!1}}deleteNotification(e,t=null){try{if(t){const s=(this.employeeNotifications.get(t)||[]).filter(t=>t.id!==e);this.employeeNotifications.set(t,s)}else this.adminNotifications=this.adminNotifications.filter(t=>t.id!==e);return this.notifyListeners(),!0}catch(s){return console.error("Error deleting notification:",s),!1}}notifyNewTicket(e){const t="object"==typeof e&&e?e:{},s=t.employeeId||t.employee_id||null,a=t.title||"New Support Ticket",r=t.description||"A new support ticket has been created.";return this.createNotification("NEW_TICKET",{title:a,message:r,employeeId:s,ticketId:t.id||t.ticketId||void 0,priority:t.priority||void 0,category:t.category||void 0})}notifyTicketArchived(e,t){return this.createNotification("TICKET_ARCHIVED",{title:"Ticket Archived",message:`Ticket "${t||""}" was archived by admin`,employeeId:e})}notifyTicketStatusUpdate(e,t,s){return this.createNotification("TICKET_STATUS_UPDATE",{title:"Ticket Status Updated",message:`Your ticket "${t||""}" status changed to ${s}`,employeeId:e,status:s})}notifyTicketResponse(e,t,s){return this.createNotification("TICKET_RESPONSE",{title:"New Response from Management",message:`Update on "${t||""}"  ${s}`,employeeId:e})}showSuccess(e,t=3e3){this.showToast(e,"success",t)}showError(e,t=5e3){this.showToast(e,"error",t)}showInfo(e,t=3e3){this.showToast(e,"info",t)}showWarning(e,t=4e3){this.showToast(e,"warning",t)}showToast(e,t="info",s=3e3){const a=document.createElement("div"),r=`toast-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;a.id=r;const n={success:"border-green-500 text-green-800 bg-green-50",error:"border-red-500 text-red-800 bg-red-50",warning:"border-yellow-500 text-yellow-800 bg-yellow-50",info:"border-blue-500 text-blue-800 bg-blue-50"};a.className="fixed top-4 right-4 z-50 max-w-sm w-full bg-white rounded-lg shadow-lg border-l-4 p-4 transition-all duration-300 transform translate-x-full "+(n[t]||n.info),a.innerHTML=`\n      <div class="flex items-start">\n        <div class="flex-1">\n          <div class="text-sm font-medium">${this.escapeHtml(e)}</div>\n        </div>\n        <button class="ml-4 text-gray-400 hover:text-gray-600" onclick="this.parentElement.parentElement.parentElement.remove()">\n          <span class="sr-only">Close</span>\n          <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">\n            <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>\n          </svg>\n        </button>\n      </div>\n    `,document.body.appendChild(a),setTimeout(()=>{a.classList.remove("translate-x-full"),a.classList.add("translate-x-0")},10),setTimeout(()=>{this.hideToast(r)},s)}hideToast(e){const t=document.getElementById(e);t&&(t.classList.add("translate-x-full"),setTimeout(()=>{t.remove()},300))}escapeHtml(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}},bt=async()=>{try{const e=await fetch("https://woodfire.food/api/v1/sanctum/csrf-cookie",{method:"GET",credentials:"include",headers:{Accept:"application/json"}});if(!e.ok)throw new Error(`Failed to fetch CSRF cookie: ${e.status}`);return{success:!0}}catch(e){return console.error("CSRF cookie fetch failed:",e),{success:!1,error:e.message}}};const yt=new class{constructor(){this.baseURL="https://woodfire.food/api/v1",this.token=this.getAuthToken()}getAuthToken(){return localStorage.getItem("customer_token")}setAuthToken(e){this.token=e,localStorage.setItem("customer_token",e)}removeAuthToken(){this.token=null,localStorage.removeItem("customer_token")}getHeaders(){const e={"Content-Type":"application/json",Accept:"application/json"};return this.token&&(e.Authorization=`Bearer ${this.token}`),e}async makeRequest(e,t={}){const s=`${this.baseURL}${e}`,a={headers:this.getHeaders(),credentials:"include",...t};try{const e=await fetch(s,a),t=await e.json();if(!e.ok)throw new Error(t.message||`HTTP ${e.status}: ${e.statusText}`);return t}catch(r){throw console.error(`API request failed: ${r.message}`,r),r}}async registerCustomer(e){try{const t=await bt();t.success||console.warn("CSRF cookie fetch failed, proceeding anyway:",t.error);const s=await this.makeRequest("/auth/customer/register",{method:"POST",body:JSON.stringify(e)});return"success"===s.status?(this.setAuthToken(s.data.token),{success:!0,customer:s.data.customer,token:s.data.token}):{success:!1,error:s.message}}catch(t){return{success:!1,error:t.message}}}async loginCustomer(e,t){try{const s=await bt();s.success||console.warn("CSRF cookie fetch failed, proceeding anyway:",s.error);const a=await this.makeRequest("/auth/customer/login",{method:"POST",body:JSON.stringify({email:e,password:t})});return"success"===a.status?(this.setAuthToken(a.data.token),{success:!0,customer:a.data.customer,token:a.data.token}):{success:!1,error:a.message}}catch(s){return{success:!1,error:s.message}}}async logoutCustomer(){try{await this.makeRequest("/auth/logout",{method:"POST"})}catch(e){console.error("Logout request failed:",e)}finally{this.removeAuthToken()}}async getCustomerProfile(){try{const e=await this.makeRequest("/customer/profile");return"success"===e.status?{success:!0,customer:e.data}:{success:!1,error:e.message}}catch(e){return{success:!1,error:e.message}}}async updateCustomerProfile(e){try{const t=await this.makeRequest("/customer/profile",{method:"PUT",body:JSON.stringify(e)});return"success"===t.status?{success:!0,customer:t.data}:{success:!1,error:t.message}}catch(t){return{success:!1,error:t.message}}}async getCustomerDashboard(){try{const e=await this.makeRequest("/customer/dashboard");return"success"===e.status?{success:!0,dashboard:e.data}:{success:!1,error:e.message}}catch(e){return{success:!1,error:e.message}}}async getCustomerAnnouncements(){try{const e=await this.makeRequest("/customer/announcements");return"success"===e.status?{success:!0,announcements:e.data}:{success:!1,error:e.message}}catch(e){return{success:!1,error:e.message}}}async dismissAnnouncement(e){try{const t=await this.makeRequest(`/customer/announcements/${e}/dismiss`,{method:"POST"});return{success:"success"===t.status,message:t.message}}catch(t){return{success:!1,error:t.message}}}async redeemReward(e){try{const t=await this.makeRequest("/customer/rewards/redeem",{method:"POST",body:JSON.stringify({reward_id:e})});return"success"===t.status?{success:!0,reward:t.data.reward,remaining_points:t.data.remaining_points,message:t.message}:{success:!1,error:t.message}}catch(t){return{success:!1,error:t.message}}}async updateCustomerPreferences(e){try{const t=await this.makeRequest("/customer/preferences",{method:"PUT",body:JSON.stringify({preferences:e})});return"success"===t.status?{success:!0,preferences:t.data.preferences}:{success:!1,error:t.message}}catch(t){return{success:!1,error:t.message}}}transformCustomerData(e){return{id:e.id,name:e.name,firstName:e.first_name,lastName:e.last_name,email:e.email,phone:e.phone||"",homeLocation:e.home_location||"",loyaltyPoints:e.loyalty_points||0,loyaltyTier:e.loyalty_tier||"Bronze",totalOrders:e.total_orders||0,totalSpent:parseFloat(e.total_spent)||0,preferences:e.preferences||{notifications:!0,marketing:!1},locations:e.locations||[],lastVisit:e.last_visit,createdAt:e.created_at,status:e.status||"ACTIVE"}}transformAnnouncementData(e){return{id:e.id,title:e.title,message:e.message,type:e.type,priority:e.priority,startDate:e.start_date,endDate:e.end_date,actionText:e.action_text,actionUrl:e.action_url,dismissible:e.is_dismissible,createdAt:e.created_at,createdBy:e.created_by}}isAuthenticated(){return!!this.token}async getCustomerId(){try{const e=await this.getCustomerProfile();return e.success?e.customer.id:null}catch(e){return console.error("Error getting customer ID:",e),null}}};const jt=new class{constructor(){this.baseURL="https://woodfire.food/api/v1",this.token=localStorage.getItem("employee_token")}getAuthHeader(){const e=localStorage.getItem("employee_token");return e?{Authorization:`Bearer ${e}`}:{}}async makeRequest(e,t={}){const s=`${this.baseURL}${e}`,a={headers:{"Content-Type":"application/json",Accept:"application/json",...this.getAuthHeader()}},r={...a,...t,credentials:"include",headers:{...a.headers,...t.headers}};try{const e=await fetch(s,r),t=await e.json();if(!e.ok){if(422===e.status&&t.errors){const e=Object.values(t.errors).flat().join(", ");throw new Error(`Validation failed: ${e}`)}throw new Error(t.message||`HTTP error! status: ${e.status}`)}return t}catch(n){throw console.error("API Request failed:",n),n}}async registerEmployee(e){try{const t=await bt();t.success||console.warn("CSRF cookie fetch failed, proceeding anyway:",t.error);const{name:s,email:a,password:r,password_confirmation:n,phone:l,position:o,department:i}=e,c=s.trim().split(" "),d=c[0]||"",m={first_name:d,last_name:c.slice(1).join(" ")||d,email:a,password:r,password_confirmation:n,phone:l||null,position:o||null,department:i||null},u=await this.makeRequest("/auth/employee/register",{method:"POST",body:JSON.stringify(m)});return u.success?{success:!0,employee:u.data,message:u.message}:{success:!1,error:u.message||"Registration failed"}}catch(t){return{success:!1,error:t.message}}}async loginEmployee(e,t){try{const s=await bt();s.success||console.warn("CSRF cookie fetch failed, proceeding anyway:",s.error);const a=await this.makeRequest("/auth/employee/login",{method:"POST",body:JSON.stringify({email:e,password:t})});return a.success?(localStorage.setItem("employee_token",a.data.token),{success:!0,user_type:a.data.user_type||"employee",employee:a.data.employee,token:a.data.token,stage:a.data.stage,status:a.data.status,can_access_dashboard:a.data.can_access_dashboard,message:a.message}):{success:!1,error:a.message||"Login failed"}}catch(s){return{success:!1,error:s.message}}}async getEmployeeProfile(){try{const e=await this.makeRequest("/employee/profile");return e.success?{success:!0,data:e.data}:{success:!1,error:e.message}}catch(e){return{success:!1,error:e.message}}}async generateQR(){try{const e=await this.makeRequest("/employee/qr");return e.success?{success:!0,qr_code:e.data.qr_code,employee:e.data.employee,stage_info:e.data.stage_info}:{success:!1,error:e.message}}catch(e){return{success:!1,error:e.message}}}async submitLocation(e){try{const t=await this.makeRequest("/employee/location",{method:"POST",body:JSON.stringify({location:e})});return t.success?{success:!0,employee:t.data,message:t.message}:{success:!1,error:t.message}}catch(t){return{success:!1,error:t.message}}}async getQuestionnaire(){try{const e=await this.makeRequest("/employee/questionnaire");return e.success?{success:!0,questionnaire:e.data.questionnaire,employee:e.data.employee}:{success:!1,error:e.message}}catch(e){return{success:!1,error:e.message}}}async submitQuestionnaire(e){try{const t=await this.makeRequest("/employee/questionnaire",{method:"POST",body:JSON.stringify({responses:e})});return t.success?{success:!0,employee:t.data,message:t.message}:{success:!1,error:t.message}}catch(t){return{success:!1,error:t.message}}}async submitQuestionnaireWithFiles(e){try{const t=this.getAuthHeader(),s=await fetch(`${this.baseURL}/employee/questionnaire`,{method:"POST",headers:{Accept:"application/json",...t},body:e}),a=await s.json();if(!s.ok){if(422===s.status&&a.errors){const e=Object.values(a.errors).flat().join(", ");throw new Error(`Validation failed: ${e}`)}throw new Error(a.message||`HTTP error! status: ${s.status}`)}return a.success?{success:!0,employee:a.data,message:a.message}:{success:!1,error:a.message}}catch(t){return console.error("File upload failed:",t),{success:!1,error:t.message}}}async getWelcomePage(){try{const e=await this.makeRequest("/employee/welcome");return e.success?{success:!0,employee:e.data.employee,stage_info:e.data.stage_info}:{success:!1,error:e.message}}catch(e){return{success:!1,error:e.message}}}async getConfirmationPage(){try{const e=await this.makeRequest("/employee/confirmation");return e.success?{success:!0,employee:e.data.employee,confirmation_info:e.data.confirmation_info}:{success:!1,error:e.message}}catch(e){return{success:!1,error:e.message}}}async getDashboard(){try{const e=await this.makeRequest("/employee/dashboard");return e.success?{success:!0,employee:e.data.employee,dashboard_data:e.data.dashboard_data}:{success:!1,error:e.message}}catch(e){return{success:!1,error:e.message}}}async updatePersonalInfo(e){try{const t=await this.makeRequest("/employee/personal-info",{method:"PUT",body:JSON.stringify(e)});return t.success?{success:!0,employee:t.data,message:t.message}:{success:!1,error:t.message}}catch(t){return{success:!1,error:t.message}}}async getOnboardingPages(){try{const e=await this.makeRequest("/employee/onboarding-pages");return e.success?{success:!0,data:e.data,pages:e.data.pages,progress:e.data.progress,details:e.data.details,summary:e.data.summary,personal_info_complete:e.data.personal_info_complete}:{success:!1,error:e.message}}catch(e){return{success:!1,error:e.message}}}async completeOnboardingPage(e,t){try{const s=await this.makeRequest("/employee/onboarding-pages/complete",{method:"POST",body:JSON.stringify({page_id:e,signature:t})});return s.success?{success:!0,progress:s.data.progress,employee:s.data.employee,message:s.message}:{success:!1,error:s.message}}catch(s){return{success:!1,error:s.message}}}async getOnboardingProgress(){try{const e=await this.makeRequest("/employee/onboarding-progress");return e.success?{success:!0,progress:e.data.progress,completions:e.data.completions,signatures:e.data.signatures}:{success:!1,error:e.message}}catch(e){return{success:!1,error:e.message}}}async logoutEmployee(){try{const e=await this.makeRequest("/employee/logout",{method:"POST"});return localStorage.removeItem("employee_token"),e.success?{success:!0,message:e.message}:{success:!1,error:e.message||"Logout failed"}}catch(e){return localStorage.removeItem("employee_token"),{success:!1,error:e.message}}}isAuthenticated(){return!!localStorage.getItem("employee_token")}clearSession(){localStorage.removeItem("employee_token")}async getTrainingModules(){try{const e=await this.makeRequest("/employee/training-modules");return e.success||"success"===e.status?{success:!0,modules:e.data?.modules||e.modules||[],statistics:e.data?.statistics||e.statistics||{},message:e.message}:{success:!1,error:e.message||"Failed to get training modules"}}catch(e){return{success:!1,error:e.message}}}async unlockTrainingModule(e){try{const t=await this.makeRequest("/employee/training-modules/unlock",{method:"POST",body:JSON.stringify({qr_code:e})});return t.success||"success"===t.status?{success:!0,module:t.data?.module||t.module,assignment:t.data?.assignment||t.assignment,message:t.message}:{success:!1,error:t.message||"Failed to unlock training module"}}catch(t){return{success:!1,error:t.message}}}async getTrainingModuleContent(e){try{const t=await this.makeRequest(`/employee/training-modules/${e}/content`);return t.success||"success"===t.status?{success:!0,module:t.data||t.module,message:t.message}:{success:!1,error:t.message||"Failed to get training module content"}}catch(t){return{success:!1,error:t.message}}}async completeTrainingModule(e,t={}){try{const s={completion_data:{video_watched:!0,content_reviewed:!0,time_spent_minutes:t.timeSpent||0,quiz_score:t.quizScore||null,...t}},a=await this.makeRequest(`/employee/training-modules/${e}/complete`,{method:"POST",body:JSON.stringify(s)});return a.success||"success"===a.status?{success:!0,assignment:a.data?.assignment||a.assignment,message:a.message}:{success:!1,error:a.message||"Failed to complete training module"}}catch(s){return{success:!1,error:s.message}}}async getTrainingNotifications(){try{const e=await this.makeRequest("/notifications/training");return e.success||"success"===e.status?{success:!0,notifications:e.data||e.notifications||[],message:e.message}:{success:!1,error:e.message||"Failed to get training notifications"}}catch(e){return{success:!1,error:e.message}}}async getFaqs(e={}){try{const t=new URLSearchParams(e).toString(),s=t?`/employee/faqs?${t}`:"/employee/faqs",a=await this.makeRequest(s);return a.success?{success:!0,data:a.data,categories:a.categories,message:a.message}:{success:!1,error:a.message||"Failed to get FAQs"}}catch(t){return{success:!1,error:t.message}}}async getFaqCategories(){try{const e=await this.makeRequest("/employee/faqs/categories");return e.success?{success:!0,data:e.data}:{success:!1,error:e.message||"Failed to get FAQ categories"}}catch(e){return{success:!1,error:e.message}}}transformEmployeeData(e){return{id:e.id,name:e.full_name,firstName:e.first_name,lastName:e.last_name,email:e.email,phone:e.phone,position:e.position,department:e.department,stage:e.stage,status:e.status,location:e.location,canAccessDashboard:e.can_access_dashboard,nextStage:e.next_stage,approvedAt:e.approved_at,createdAt:e.created_at,updatedAt:e.updated_at,training_assignments:e.training_assignments||[],training_progress:e.training_progress||[],completed_training:e.completed_training||[]}}};const vt=new class{constructor(){this.baseURL="https://woodfire.food/api/v1"}getAuthHeader(){const e=localStorage.getItem("admin_token");return e?{Authorization:`Bearer ${e}`}:{}}async makeRequest(e,t={}){const s=`${this.baseURL}${e}`,a={headers:{"Content-Type":"application/json",Accept:"application/json",...this.getAuthHeader()}},r={...a,...t,credentials:"include",headers:{...a.headers,...t.headers}};try{const e=await fetch(s,r),t=await e.json();if(!e.ok){if(422===e.status&&t.errors){const e=Object.values(t.errors).flat().join(", ");throw new Error(`Validation failed: ${e}`)}throw new Error(t.message||`HTTP error! status: ${e.status}`)}return t}catch(n){throw console.error("API Request failed:",n),n}}async loginAdmin(e,t){try{const s=await bt();s.success||console.warn("CSRF cookie fetch failed, proceeding anyway:",s.error);const a=await this.makeRequest("/auth/admin/login",{method:"POST",body:JSON.stringify({email:e,password:t})});return a.success?(localStorage.setItem("admin_token",a.data.token),{success:!0,user_type:a.data.user_type,admin:a.data.admin,token:a.data.token,role:a.data.role,status:a.data.status,can_access_dashboard:a.data.can_access_dashboard,message:a.message}):{success:!1,error:a.message||"Admin login failed"}}catch(s){return{success:!1,error:s.message}}}async getDashboard(){try{const e=await this.makeRequest("/admin/dashboard");return e.success?{success:!0,data:e.data,message:e.message}:{success:!1,error:e.message||"Failed to get dashboard data"}}catch(e){return{success:!1,error:e.message}}}async getProfile(){try{const e=await this.makeRequest("/admin/profile");return e.success?{success:!0,admin:e.data,message:e.message}:{success:!1,error:e.message||"Failed to get admin profile"}}catch(e){return{success:!1,error:e.message}}}async logoutAdmin(){try{const e=await this.makeRequest("/admin/logout",{method:"POST"});return localStorage.removeItem("admin_token"),e.success?{success:!0,message:e.message}:{success:!1,error:e.message||"Logout failed"}}catch(e){return localStorage.removeItem("admin_token"),{success:!1,error:e.message}}}async getAdminUsers(e={}){try{const t=new URLSearchParams(e).toString(),s=t?`/admin/users?${t}`:"/admin/users",a=await this.makeRequest(s);return a.success?{success:!0,users:a.data.users,meta:a.data.meta,message:a.message}:{success:!1,error:a.message||"Failed to get admin users"}}catch(t){return{success:!1,error:t.message}}}async createAdminUser(e){try{const t=await this.makeRequest("/admin/users",{method:"POST",body:JSON.stringify(e)});return t.success?{success:!0,user:t.data.user,message:t.message}:{success:!1,error:t.message||"Failed to create admin user"}}catch(t){return{success:!1,error:t.message}}}async getFaqs(e={}){try{const t=new URLSearchParams(e).toString(),s=t?`/admin/faqs?${t}`:"/admin/faqs",a=await this.makeRequest(s);return a.success?{success:!0,data:a.data,stats:a.stats,categories:a.categories,message:a.message}:{success:!1,error:a.message||"Failed to get FAQs"}}catch(t){return{success:!1,error:t.message}}}async createFaq(e){try{const t=await this.makeRequest("/admin/faqs",{method:"POST",body:JSON.stringify(e)});return t.success?{success:!0,data:t.data,message:t.message}:{success:!1,error:t.message||"Failed to create FAQ"}}catch(t){return{success:!1,error:t.message}}}async updateFaq(e,t){try{const s=await this.makeRequest(`/admin/faqs/${e}`,{method:"PUT",body:JSON.stringify(t)});return s.success?{success:!0,data:s.data,message:s.message}:{success:!1,error:s.message||"Failed to update FAQ"}}catch(s){return{success:!1,error:s.message}}}async deleteFaq(e){try{const t=await this.makeRequest(`/admin/faqs/${e}`,{method:"DELETE"});return t.success?{success:!0,message:t.message}:{success:!1,error:t.message||"Failed to delete FAQ"}}catch(t){return{success:!1,error:t.message}}}async toggleFaqStatus(e){try{const t=await this.makeRequest(`/admin/faqs/${e}/toggle-status`,{method:"PATCH"});return t.success?{success:!0,data:t.data,message:t.message}:{success:!1,error:t.message||"Failed to toggle FAQ status"}}catch(t){return{success:!1,error:t.message}}}async getFaqCategories(){try{const e=await this.makeRequest("/admin/faqs/categories");return e.success?{success:!0,data:e.data}:{success:!1,error:e.message||"Failed to get FAQ categories"}}catch(e){return{success:!1,error:e.message}}}async updateAdminPermissions(e,t){try{const s=await this.makeRequest(`/admin/users/${e}/permissions`,{method:"PUT",body:JSON.stringify({permissions:t})});return s.success?{success:!0,user:s.data.user,message:s.message}:{success:!1,error:s.message||"Failed to update permissions"}}catch(s){return{success:!1,error:s.message}}}async deactivateAdminUser(e){try{const t=await this.makeRequest(`/admin/users/${e}`,{method:"DELETE"});return t.success?{success:!0,user:t.data.user,message:t.message}:{success:!1,error:t.message||"Failed to deactivate user"}}catch(t){return{success:!1,error:t.message}}}async getRolesAndPermissions(){try{const e=await this.makeRequest("/admin/roles-permissions");return e.success?{success:!0,data:e.data,message:e.message}:{success:!1,error:e.message||"Failed to get roles and permissions"}}catch(e){return{success:!1,error:e.message}}}async getEmployees(e={}){try{const t=new URLSearchParams(e).toString(),s=t?`/admin/employees?${t}`:"/admin/employees",a=await this.makeRequest(s);return a.success?{success:!0,employees:a.data.employees,pagination:a.data.pagination,message:a.message}:{success:!1,error:a.message||"Failed to get employees"}}catch(t){return{success:!1,error:t.message}}}async getPendingEmployees(){try{const e=await this.makeRequest("/admin/employees/pending");return e.success?{success:!0,employees:e.data,message:e.message}:{success:!1,error:e.message||"Failed to get pending employees"}}catch(e){return{success:!1,error:e.message}}}async getEmployee(e){try{const t=await this.makeRequest(`/admin/employees/${e}`);return t.success?{success:!0,employee:t.data,message:t.message}:{success:!1,error:t.message||"Failed to get employee details"}}catch(t){return{success:!1,error:t.message}}}async approveEmployee(e,t=""){try{const s=await this.makeRequest(`/admin/employees/${e}/approve`,{method:"POST",body:JSON.stringify({note:t})});return s.success?{success:!0,employee:s.data,message:s.message}:{success:!1,error:s.message||"Failed to approve employee"}}catch(s){return{success:!1,error:s.message}}}async rejectEmployee(e,t){try{const s=await this.makeRequest(`/admin/employees/${e}/reject`,{method:"POST",body:JSON.stringify({rejection_reason:t})});return s.success?{success:!0,employee:s.data,message:s.message}:{success:!1,error:s.message||"Failed to reject employee"}}catch(s){return{success:!1,error:s.message}}}async pauseEmployee(e,t){try{const s=await this.makeRequest(`/admin/employees/${e}/pause`,{method:"POST",body:JSON.stringify({reason:t})});return s.success?{success:!0,employee:s.data,message:s.message}:{success:!1,error:s.message||"Failed to pause employee"}}catch(s){return{success:!1,error:s.message}}}async resumeEmployee(e){try{const t=await this.makeRequest(`/admin/employees/${e}/resume`,{method:"POST"});return t.success?{success:!0,employee:t.data,message:t.message}:{success:!1,error:t.message||"Failed to resume employee"}}catch(t){return{success:!1,error:t.message}}}async deactivateEmployee(e,t){try{const s=await this.makeRequest(`/admin/employees/${e}/deactivate`,{method:"POST",body:JSON.stringify({reason:t})});return s.success?{success:!0,employee:s.data,message:s.message}:{success:!1,error:s.message||"Failed to deactivate employee"}}catch(s){return{success:!1,error:s.message}}}async activateEmployee(e){try{const t=await this.makeRequest(`/admin/employees/${e}/activate`,{method:"POST"});return t.success?{success:!0,employee:t.data,message:t.message}:{success:!1,error:t.message||"Failed to activate employee"}}catch(t){return{success:!1,error:t.message}}}async getEmployeeStatistics(){try{const e=await this.makeRequest("/admin/employees/statistics");return e.success?{success:!0,statistics:e.data,message:e.message}:{success:!1,error:e.message||"Failed to get employee statistics"}}catch(e){return{success:!1,error:e.message}}}async createEmployee(e){try{const t=await this.makeRequest("/admin/employees",{method:"POST",body:JSON.stringify(e)});return t.success?{success:!0,employee:t.data,message:t.message||"Employee created successfully"}:{success:!1,error:t.message||"Failed to create employee",errors:t.errors}}catch(t){return{success:!1,error:t.message}}}async getLocations(){try{const e=await this.makeRequest("/admin/locations");return e.success?{success:!0,locations:e.data,message:e.message}:{success:!1,error:e.message||"Failed to get locations"}}catch(e){return{success:!1,error:e.message}}}async createLocation(e){try{const t=await this.makeRequest("/admin/locations",{method:"POST",body:JSON.stringify(e)});return t.success?{success:!0,location:t.data,message:t.message}:{success:!1,error:t.message||"Failed to create location"}}catch(t){return{success:!1,error:t.message}}}async updateLocation(e,t){try{const s=await this.makeRequest(`/admin/locations/${e}`,{method:"PUT",body:JSON.stringify(t)});return s.success?{success:!0,location:s.data,message:s.message}:{success:!1,error:s.message||"Failed to update location"}}catch(s){return{success:!1,error:s.message}}}async deleteLocation(e){try{const t=await this.makeRequest(`/admin/locations/${e}`,{method:"DELETE"});return t.success?{success:!0,location:t.data,message:t.message}:{success:!1,error:t.message||"Failed to delete location"}}catch(t){return{success:!1,error:t.message}}}async getOnboardingPages(){try{const e=await this.makeRequest("/admin/onboarding-pages");return e.success?{success:!0,pages:e.data,message:e.message}:{success:!1,error:e.message||"Failed to get onboarding pages"}}catch(e){return{success:!1,error:e.message}}}async createOnboardingPage(e){try{const t=await this.makeRequest("/admin/onboarding-pages",{method:"POST",body:JSON.stringify(e)});return t.success?{success:!0,page:t.data,message:t.message}:{success:!1,error:t.message||"Failed to create onboarding page"}}catch(t){return{success:!1,error:t.message}}}async updateOnboardingPage(e,t){try{const s=await this.makeRequest(`/admin/onboarding-pages/${e}`,{method:"PUT",body:JSON.stringify(t)});return s.success?{success:!0,page:s.data,message:s.message}:{success:!1,error:s.message||"Failed to update onboarding page"}}catch(s){return{success:!1,error:s.message}}}async deleteOnboardingPage(e){try{const t=await this.makeRequest(`/admin/onboarding-pages/${e}`,{method:"DELETE"});return t.success?{success:!0,message:t.message}:{success:!1,error:t.message||"Failed to delete onboarding page"}}catch(t){return{success:!1,error:t.message}}}async toggleOnboardingPageStatus(e){try{const t=await this.makeRequest(`/admin/onboarding-pages/${e}/toggle-status`,{method:"PATCH"});return t.success?{success:!0,page:t.data,message:t.message}:{success:!1,error:t.message||"Failed to toggle page status"}}catch(t){return{success:!1,error:t.message}}}async getCustomers(e={}){try{const t=new URLSearchParams(e).toString(),s=t?`/admin/customers?${t}`:"/admin/customers",a=await this.makeRequest(s);return!0===a.success||"success"===a.status?{success:!0,customers:a.data||a.customers||[],meta:a.meta,message:a.message}:{success:!1,error:a.message||"Failed to get customers"}}catch(t){return{success:!1,error:t.message}}}async createCustomer(e){try{const t=await this.makeRequest("/admin/customers",{method:"POST",body:JSON.stringify(e)});return t.success?{success:!0,customer:t.data,message:t.message}:{success:!1,error:t.message||"Failed to create customer"}}catch(t){return{success:!1,error:t.message}}}async getCustomer(e){try{const t=await this.makeRequest(`/admin/customers/${e}`);return!0===t.success||"success"===t.status?{success:!0,customer:t.data||t.customer,message:t.message}:{success:!1,error:t.message||"Failed to get customer"}}catch(t){return{success:!1,error:t.message}}}async updateCustomer(e,t){try{const s=await this.makeRequest(`/admin/customers/${e}`,{method:"PUT",body:JSON.stringify(t)});return s.success?{success:!0,customer:s.data,message:s.message}:{success:!1,error:s.message||"Failed to update customer"}}catch(s){return{success:!1,error:s.message}}}async deleteCustomer(e){try{const t=await this.makeRequest(`/admin/customers/${e}`,{method:"DELETE"});return!0===t.success||"success"===t.status?{success:!0,message:t.message}:{success:!1,error:t.message||"Failed to delete customer"}}catch(t){return{success:!1,error:t.message}}}async getCustomerStatistics(){try{const e=await this.makeRequest("/admin/customers/statistics");return!0===e.success||"success"===e.status?{success:!0,statistics:e.data||e.statistics,message:e.message}:{success:!1,error:e.message||"Failed to get customer statistics"}}catch(e){return{success:!1,error:e.message}}}async getTrainingModules(e={}){try{const t=new URLSearchParams(e).toString(),s=t?`/admin/training-modules?${t}`:"/admin/training-modules",a=await this.makeRequest(s);return a.success?{success:!0,modules:(a.data.modules||[]).map(e=>this.transformTrainingModuleData(e)),statistics:a.data.statistics||{},categories:a.data.categories||[],message:a.message}:{success:!1,error:a.message||"Failed to get training modules"}}catch(t){return{success:!1,error:t.message}}}async getTrainingModule(e){try{const t=await this.makeRequest(`/admin/training-modules/${e}`);return t.success?{success:!0,module:this.transformTrainingModuleData(t.data.module||t.data),assignments:t.data.assignments||[],message:t.message}:{success:!1,error:t.message||"Failed to get training module"}}catch(t){return{success:!1,error:t.message}}}async createTrainingModule(e){try{const t=this.transformToBackendFormat(e),s=await this.makeRequest("/admin/training-modules",{method:"POST",body:JSON.stringify(t)});return s.success?{success:!0,module:this.transformTrainingModuleData(s.data.module||s.data),message:s.message}:{success:!1,error:s.message||"Failed to create training module"}}catch(t){return{success:!1,error:t.message}}}async updateTrainingModule(e,t){try{const s=this.transformToBackendFormat(t),a=await this.makeRequest(`/admin/training-modules/${e}`,{method:"PUT",body:JSON.stringify(s)});return a.success?{success:!0,module:this.transformTrainingModuleData(a.data.module||a.data),message:a.message}:{success:!1,error:a.message||"Failed to update training module"}}catch(s){return{success:!1,error:s.message}}}async deleteTrainingModule(e){try{const t=await this.makeRequest(`/admin/training-modules/${e}`,{method:"DELETE"});return t.success?{success:!0,message:t.message}:{success:!1,error:t.message||"Failed to delete training module"}}catch(t){return{success:!1,error:t.message}}}async assignTrainingModule(e,t){try{const s=await this.makeRequest(`/admin/training-modules/${e}/assign`,{method:"POST",body:JSON.stringify(t)});return s.success?{success:!0,assignments:s.data.assignments,total_assigned:s.data.total_assigned,warnings:s.warnings,message:s.message}:{success:!1,error:s.message||"Failed to assign training module"}}catch(s){return{success:!1,error:s.message}}}async getTrainingModuleAssignments(e){try{const t=await this.makeRequest(`/admin/training-modules/${e}/assignments`);return t.success?{success:!0,module:t.data.module,assignments:t.data.assignments,message:t.message}:{success:!1,error:t.message||"Failed to get training assignments"}}catch(t){return{success:!1,error:t.message}}}async resetTrainingProgress(e,t){try{const s=await this.makeRequest(`/admin/training-modules/${e}/reset-progress`,{method:"POST",body:JSON.stringify({employee_ids:t})});return s.success?{success:!0,reset_count:s.data.reset_count,message:s.message}:{success:!1,error:s.message||"Failed to reset training progress"}}catch(s){return{success:!1,error:s.message}}}async removeTrainingAssignments(e,t){try{const s=await this.makeRequest(`/admin/training-modules/${e}/remove-assignments`,{method:"POST",body:JSON.stringify({employee_ids:t})});return s.success?{success:!0,removed_count:s.data.removed_count,message:s.message}:{success:!1,error:s.message||"Failed to remove training assignments"}}catch(s){return{success:!1,error:s.message}}}async generateTrainingQrCode(e){try{const t=await this.makeRequest(`/admin/training-modules/${e}/qr-code`);return t.success?{success:!0,qr_code:t.data.qr_code,qr_url:t.data.qr_url,message:t.message}:{success:!1,error:t.message||"Failed to generate QR code"}}catch(t){return{success:!1,error:t.message}}}async regenerateTrainingQrCode(e){try{const t=await this.makeRequest(`/admin/training-modules/${e}/regenerate-qr`,{method:"POST"});return t.success?{success:!0,qr_code:t.data.qr_code,qr_url:t.data.qr_url,message:t.message}:{success:!1,error:t.message||"Failed to regenerate QR code"}}catch(t){return{success:!1,error:t.message}}}async getTrainingCategories(){try{const e=await this.makeRequest("/admin/training-modules/categories");return e.success?{success:!0,categories:e.data,message:e.message}:{success:!1,error:e.message||"Failed to get training categories"}}catch(e){return{success:!1,error:e.message}}}async getTrainingAnalytics(){try{const e=await this.makeRequest("/admin/training-modules/analytics");return e.success?{success:!0,analytics:e.data,message:e.message}:{success:!1,error:e.message||"Failed to get training analytics"}}catch(e){return{success:!1,error:e.message}}}async downloadFile(e,t){try{const s=`${this.baseURL}/files/${e}/download`,a=localStorage.getItem("admin_token"),r=await fetch(s,{method:"GET",headers:{Authorization:`Bearer ${a}`}});if(!r.ok)throw new Error("Download failed");const n=await r.blob(),l=window.URL.createObjectURL(n),o=document.createElement("a");return o.href=l,o.download=t||"download",o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(l),{success:!0}}catch(s){return console.error("File download error:",s),{success:!1,error:s.message}}}transformAdminData(e){return e?{id:e.id,name:e.full_name||`${e.first_name} ${e.last_name}`,first_name:e.first_name,last_name:e.last_name,full_name:e.full_name,email:e.email,phone:e.phone,role:e.role,status:e.status,profile_data:e.profile_data,last_login_at:e.last_login_at,email_verified_at:e.email_verified_at,created_at:e.created_at,updated_at:e.updated_at}:null}transformTrainingModuleData(e){return e?{id:e.id,title:e.title,description:e.description,qrCode:e.qr_code,videoUrl:e.video_url,content:e.content,duration:e.duration,category:e.category,active:e.active,createdAt:e.created_at,updatedAt:e.updated_at,createdBy:e.created_by,assignmentsCount:e.assignments_count||0,completionsCount:e.completions_count||0,order:e.order_index||0}:null}transformToBackendFormat(e){if(!e)return null;const t={...e};return void 0!==e.qrCode&&(t.qr_code=e.qrCode,delete t.qrCode),void 0!==e.videoUrl&&(t.video_url=e.videoUrl,delete t.videoUrl),t}},Nt=e.createContext(),wt=()=>{const t=e.useContext(Nt);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},kt=({children:t})=>{const[s,a]=e.useState(null),[r,n]=e.useState(!0);e.useEffect(()=>{const e=localStorage.getItem("user");if(e)try{const t=JSON.parse(e);t&&t.id&&t.email?a(t):localStorage.removeItem("user")}catch(t){console.error("Error parsing stored user:",t),localStorage.removeItem("user")}n(!1)},[]);const l=async e=>{try{const t=await jt.registerEmployee(e);if(t.success){const t=await o(e.email,e.password);return t.success?t:{success:!1,error:"Registration successful but auto-login failed. Please login manually."}}return{success:!1,error:t.error}}catch(t){return{success:!1,error:t.message}}},o=async(e,t)=>{try{const s=await jt.loginEmployee(e,t);if(s.success){const e=s.employee,t={id:e.id,email:e.email,name:e.full_name||`${e.first_name} ${e.last_name}`,role:"employee",status:e.status,stage:s.stage,can_access_dashboard:s.can_access_dashboard};return a(t),localStorage.setItem("user",JSON.stringify(t)),{success:!0,user:t}}return{success:!1,error:s.error}}catch(s){return{success:!1,error:s.message}}},i=async(e,t,s=null)=>{try{const r=await vt.loginAdmin(e,t);if(r.success){const e=r.admin,t=r.role;if(s&&t!==s)return{success:!1,error:`Role mismatch. Your account role is '${t}', but you selected '${s}'.`};const n={id:e.id,email:e.email,name:e.full_name||`${e.first_name} ${e.last_name}`,role:t,status:e.status,admin_role:t,can_access_dashboard:r.can_access_dashboard};return a(n),localStorage.setItem("user",JSON.stringify(n)),{success:!0,user:n}}return{success:!1,error:r.error}}catch(r){return{success:!1,error:r.message}}},c=async e=>{try{const t=await yt.registerCustomer(e);if(t.success){const e=yt.transformCustomerData(t.customer),s={id:e.id,email:e.email,name:e.name,role:"customer",status:"ACTIVE"};return a(s),localStorage.setItem("user",JSON.stringify(s)),{success:!0,user:s}}return{success:!1,error:t.error}}catch(t){return{success:!1,error:t.message}}},d=async(e,t)=>{try{const s=await yt.loginCustomer(e,t);if(s.success){const e=yt.transformCustomerData(s.customer),t={id:e.id,email:e.email,name:e.name,role:"customer",status:"ACTIVE"};return a(t),localStorage.setItem("user",JSON.stringify(t)),{success:!0,user:t}}return{success:!1,error:s.error}}catch(s){return{success:!1,error:s.message}}},m={user:s,login:async(e,t,s="employee")=>{try{if("customer"===s)return await d(e,t);if("employee"===s)return await o(e,t);if("admin"===s)return await i(e,t);throw new Error(`Login for user type '${s}' not implemented yet`)}catch(a){return{success:!1,error:a.message}}},signup:async e=>{try{const{name:t,phone:s,email:a,password:r,confirmPassword:n,locations:o,role:i="employee"}=e;if("customer"===i)return await c(e);if("employee"===i)return await l(e);throw new Error("Admin signup not implemented yet")}catch(t){return{success:!1,error:t.message}}},logout:async()=>{s&&"customer"===s.role&&await yt.logoutCustomer(),s&&"employee"===s.role&&await jt.logoutEmployee();s&&["owner","admin","manager","hiring_manager","expo"].includes(s.role)&&await vt.logoutAdmin(),a(null),localStorage.removeItem("user")},clearAllData:()=>{a(null),localStorage.removeItem("user")},loading:r,customerLogin:d,customerSignup:c,employeeLogin:o,employeeSignup:l,adminLogin:i};return it.jsx(Nt.Provider,{value:m,children:t})},St=({type:t="text",name:s,value:a,onChange:r,label:n,required:l=!1,error:o="",className:i="",...c})=>{const[d,m]=e.useState(!1),[u,x]=e.useState(!1),h=a&&a.length>0,f=d||h,b="password"===t,y=b&&u?"text":t;return it.jsxs("div",{className:`relative ${i}`,children:[it.jsx("input",{type:y,name:s,value:a,onChange:r,onFocus:()=>m(!0),onBlur:()=>m(!1),required:l,className:`\n          w-full px-4 pt-6 pb-2 border rounded-xl transition-all duration-200\n          focus:ring-2 focus:ring-gold focus:border-transparent\n          ${o?"border-accent":"border-charcoal/20"}\n          ${f?"border-gold/50":""}\n          ${b?"pr-12":""}\n        `,...c}),b&&it.jsx("button",{type:"button",onClick:()=>x(!u),className:"absolute right-3 top-1/2 -translate-y-1/2 text-charcoal/50 hover:text-charcoal transition-colors duration-200 focus:outline-none",tabIndex:-1,children:u?it.jsx(g,{className:"w-5 h-5"}):it.jsx(p,{className:"w-5 h-5"})}),it.jsxs("label",{className:`\n          absolute left-4 transition-all duration-200 pointer-events-none\n          ${f?"top-2 text-xs text-gold font-medium":"top-4 text-sm text-charcoal/50"}\n          max-w-[calc(100%-2rem)] overflow-hidden text-ellipsis\n        `,children:[n,l&&it.jsx("span",{className:"text-accent ml-1",children:"*"})]}),o&&it.jsx("p",{className:"text-accent text-xs mt-1 ml-1",children:o})]})},Ct=()=>{const s=t(),{user:a}=wt(),[r,n]=e.useState(null),[l,o]=e.useState(null),[i,c]=e.useState(!0),[d,m]=e.useState({}),[u,x]=e.useState(!1),[h,g]=e.useState({}),[p,v]=e.useState("");e.useEffect(()=>{if("employee"===a?.role){if("questionnaire_completed"===a.stage)return void s("/confirmation");(async()=>{try{c(!0);const e=await jt.getQuestionnaire();e.success?(n(e.questionnaire),o(e.employee)):(console.error("Failed to load questionnaire:",e.error),e.error.includes("QR scan and location selection")||e.error.includes("not in correct stage")?s("/employee/qr-scan"):e.error.includes("No active questionnaire")?v("No questionnaire is currently available. Please contact support."):s("/employee/qr-scan"))}catch(e){console.error("Error loading onboarding data:",e),(e.message||"Unknown error").includes("QR scan and location selection")?s("/employee/qr-scan"):v("Failed to load questionnaire. Please try again.")}finally{c(!1)}})()}else s("/login")},[a,s]),e.useEffect(()=>{if(r?.questions){const e={};r.questions.forEach((t,s)=>{const a=`question_${s}`;"multiple_choice"===t.type?e[a]=[]:e[a]=""}),m(e)}},[r]);const N=e=>{const{name:t,value:s,type:a,checked:r}=e.target;m("checkbox"===a?e=>({...e,[t]:r}):"radio"===a?e=>({...e,[t]:s}):e=>({...e,[t]:s})),h[t]&&g(e=>({...e,[t]:""}))},w=(e,t)=>{const s=`question_${t}`;switch(e.type){case"text":return it.jsxs("div",{className:"space-y-3 xs:space-y-4",children:[it.jsxs("h3",{className:"font-display text-lg xs:text-xl font-semibold text-charcoal mb-3 xs:mb-4",children:[e.question," ",e.required&&"*"]}),it.jsx("textarea",{name:s,value:d[s]||"",onChange:N,rows:3,className:"w-full px-3 xs:px-4 py-2 xs:py-3 border border-charcoal/20 rounded-lg xs:rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent transition-all resize-none text-sm xs:text-base",placeholder:"Type your answer here..."}),h[s]&&it.jsx("p",{className:"text-accent text-xs mt-1",children:h[s]})]},t);case"single_choice":return it.jsxs("div",{className:"space-y-3 xs:space-y-4",children:[it.jsxs("h3",{className:"font-display text-lg xs:text-xl font-semibold text-charcoal mb-3 xs:mb-4",children:[e.question," ",e.required&&"*"]}),it.jsx("div",{className:"space-y-2",children:e.options?.map((e,t)=>it.jsxs("label",{className:"flex items-center gap-2 xs:gap-3 cursor-pointer p-2 xs:p-3 rounded-lg xs:rounded-xl hover:bg-gold/5 transition-colors",children:[it.jsx("input",{type:"radio",name:s,value:e,checked:d[s]===e,onChange:N,className:"w-4 h-4 text-gold border-charcoal/30 focus:ring-gold"}),it.jsx("span",{className:"text-charcoal font-medium text-sm xs:text-base",children:e})]},t))}),h[s]&&it.jsx("p",{className:"text-accent text-xs mt-1",children:h[s]})]},t);case"multiple_choice":return it.jsxs("div",{className:"space-y-3 xs:space-y-4",children:[it.jsxs("h3",{className:"font-display text-lg xs:text-xl font-semibold text-charcoal mb-3 xs:mb-4",children:[e.question," ",e.required&&"*"]}),it.jsx("div",{className:"space-y-2",children:e.options?.map((e,t)=>it.jsxs("label",{className:"flex items-center gap-2 xs:gap-3 cursor-pointer p-2 xs:p-3 rounded-lg xs:rounded-xl hover:bg-gold/5 transition-colors",children:[it.jsx("input",{type:"checkbox",checked:(d[s]||[]).includes(e),onChange:()=>{return t=s,a=e,m(e=>{const s=e[t]||[];return{...e,[t]:s.includes(a)?s.filter(e=>e!==a):[...s,a]}}),void(h[t]&&g(e=>({...e,[t]:""})));var t,a},className:"w-4 h-4 text-gold border-charcoal/30 rounded focus:ring-gold"}),it.jsx("span",{className:"text-charcoal font-medium text-sm xs:text-base",children:e})]},t))}),h[s]&&it.jsx("p",{className:"text-accent text-xs mt-1",children:h[s]})]},t);case"boolean":return it.jsxs("div",{className:"space-y-3 xs:space-y-4",children:[it.jsxs("h3",{className:"font-display text-lg xs:text-xl font-semibold text-charcoal mb-3 xs:mb-4",children:[e.question," ",e.required&&"*"]}),it.jsx("div",{className:"space-y-2",children:["Yes","No"].map(e=>it.jsxs("label",{className:"flex items-center gap-2 xs:gap-3 cursor-pointer p-2 xs:p-3 rounded-lg xs:rounded-xl hover:bg-gold/5 transition-colors",children:[it.jsx("input",{type:"radio",name:s,value:e.toLowerCase(),checked:d[s]===e.toLowerCase(),onChange:N,className:"w-4 h-4 text-gold border-charcoal/30 focus:ring-gold"}),it.jsx("span",{className:"text-charcoal font-medium text-sm xs:text-base",children:e})]},e))}),h[s]&&it.jsx("p",{className:"text-accent text-xs mt-1",children:h[s]})]},t);case"file":return it.jsxs("div",{className:"space-y-3 xs:space-y-4",children:[it.jsxs("h3",{className:"font-display text-lg xs:text-xl font-semibold text-charcoal mb-3 xs:mb-4",children:[e.question," ",e.required&&"*"]}),e.description&&it.jsx("p",{className:"text-charcoal/70 text-sm xs:text-base mb-3",children:e.description}),it.jsxs("div",{className:"border-2 border-dashed border-charcoal/20 rounded-lg xs:rounded-xl p-4 xs:p-6 hover:border-gold/50 transition-colors",children:[it.jsx("input",{type:"file",name:s,id:s,accept:e.accept||".pdf,.jpg,.jpeg,.png,.doc,.docx",onChange:t=>{const a=t.target.files[0];if(a){if(e.max_size){const s=parseInt(e.max_size.replace("MB",""));if(a.size/1048576>s)return alert(`File size must be less than ${e.max_size}`),void(t.target.value="")}m(e=>({...e,[s]:a}))}h[s]&&g(e=>({...e,[s]:""}))},className:"hidden"}),it.jsxs("label",{htmlFor:s,className:"cursor-pointer flex flex-col items-center justify-center text-center",children:[it.jsx(j,{className:"w-8 h-8 xs:w-12 xs:h-12 text-gold mb-2 xs:mb-4"}),it.jsx("div",{className:"text-charcoal font-medium mb-1 xs:mb-2 text-sm xs:text-base",children:d[s]?d[s].name:"Click to upload your document"}),it.jsxs("div",{className:"text-charcoal/60 text-xs xs:text-sm",children:[e.accept?`Supported formats: ${e.accept}`:"PDF, JPG, PNG, DOC files",e.max_size&&` (Max: ${e.max_size})`]})]})]}),h[s]&&it.jsx("p",{className:"text-accent text-xs mt-1",children:h[s]})]},t);default:return null}};return i?it.jsx("div",{className:"min-h-screen bg-cream flex items-center justify-center",children:it.jsxs("div",{className:"text-center",children:[it.jsx("div",{className:"w-8 h-8 border-2 border-gold border-t-transparent rounded-full animate-spin mx-auto mb-4"}),it.jsx("p",{className:"text-charcoal",children:"Loading questionnaire..."})]})}):r?it.jsx("div",{className:"min-h-screen bg-cream text-charcoal py-1 xs:py-4 px-3 xs:px-4",children:it.jsxs("div",{className:"max-w-6xl mx-auto",children:[it.jsxs("div",{className:"text-center mb-4 xs:mb-6",children:[it.jsx("h1",{className:"font-display text-2xl xs:text-3xl md:text-4xl lg:text-5xl font-bold text-cream mb-1 xs:mb-4 px-2 xs:px-0",children:"WORKING INTERVIEW SHIFT INFORMATION"}),it.jsx("div",{className:"bg-cream/50 rounded-xl xs:rounded-2xl p-4 xs:p-6 md:p-8 mb-3 xs:mb-4 text-left max-w-4xl mx-auto",children:it.jsxs("div",{className:"space-y-3 xs:space-y-4 text-charcoal/90 leading-relaxed text-sm xs:text-base",children:[it.jsxs("p",{children:["Thank you for joining the team at ",it.jsx("strong",{children:"309+311 Properties!"})," Before officially bringing new team members on board, we conduct a working interview to ensure it's a great fit for both you and us. We want you to experience the company firsthand and decide if it's the right place for you."]}),it.jsx("p",{children:"During your first two to three shifts, which will serve as your working interview, you may be trying out various positions to get a feel for different roles within the team. Each shift will last 3 to 4 hours and be paid at minimum wage. If you're officially brought on after this period, you will transition to the base pay offered to you. From there, as you grow and excel within the company, you will have opportunities for raises and advancement."}),it.jsx("p",{children:"On your start days, we will guide you through orientation and provide all necessary information. We look forward to working with you!"})]})}),it.jsx("div",{className:"text-center mb-6 xs:mb-8",children:it.jsx("p",{className:"font-bold text-base xs:text-lg px-2 xs:px-0",style:{color:"#1C1C1C"},children:"Before getting started, please fill out the following information."})}),it.jsxs("div",{className:"flex items-center justify-center gap-2 xs:gap-4",children:[it.jsxs("div",{className:"flex items-center gap-1 xs:gap-2",children:[it.jsx("div",{className:"w-8 h-8 xs:w-10 xs:h-10 bg-gold rounded-full flex items-center justify-center text-charcoal font-bold text-xs xs:text-sm shadow-lg",children:""}),it.jsx("span",{className:"text-xs xs:text-sm text-charcoal font-medium hidden xs:inline",children:"QR Scan"}),it.jsx("span",{className:"text-xs text-charcoal font-medium xs:hidden",children:"Scan"})]}),it.jsx("div",{className:"w-8 xs:w-16 h-1 rounded-full bg-gold"}),it.jsxs("div",{className:"flex items-center gap-1 xs:gap-2",children:[it.jsx("div",{className:"w-8 h-8 xs:w-10 xs:h-10 bg-gold rounded-full flex items-center justify-center text-charcoal font-bold text-xs xs:text-sm shadow-lg animate-pulse",children:"2"}),it.jsx("span",{className:"text-xs xs:text-sm text-charcoal font-bold hidden xs:inline",children:"Application Form"}),it.jsx("span",{className:"text-xs text-charcoal font-bold xs:hidden",children:"Form"})]}),it.jsx("div",{className:"w-8 xs:w-16 h-1 bg-charcoal/20 rounded-full"}),it.jsxs("div",{className:"flex items-center gap-1 xs:gap-2",children:[it.jsx("div",{className:"w-8 h-8 xs:w-10 xs:h-10 bg-charcoal/20 rounded-full flex items-center justify-center text-charcoal font-bold text-xs xs:text-sm",children:"3"}),it.jsx("span",{className:"text-xs xs:text-sm text-charcoal font-medium hidden xs:inline",children:"Confirmation"}),it.jsx("span",{className:"text-xs text-charcoal font-medium xs:hidden",children:"Done"})]})]}),it.jsx("div",{className:"text-center mt-3 xs:mt-4",children:it.jsx("p",{className:"font-semibold text-base xs:text-lg",style:{color:"#D4AF37"},children:"Step 2 of 3"})})]}),it.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl xs:rounded-3xl shadow-2xl overflow-hidden text-charcoal",children:it.jsxs("div",{className:"grid md:grid-cols-2 gap-0",children:[it.jsxs("div",{className:"relative bg-restaurant-gradient p-6 xs:p-8 md:p-12 flex flex-col justify-center items-center text-center overflow-hidden",children:[it.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-20",style:{backgroundImage:"url('https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80')"}}),it.jsxs("div",{className:"relative z-10 mb-6 xs:mb-8",children:[it.jsx("div",{className:"w-24 h-24 xs:w-32 xs:h-32 bg-gold/20 rounded-full flex items-center justify-center mb-4 xs:mb-6 backdrop-blur-sm",children:it.jsx(f,{className:"w-12 h-12 xs:w-16 xs:h-16 text-gold"})}),it.jsx("h3",{className:"font-display text-xl xs:text-2xl font-bold text-cream mb-3 xs:mb-4",children:"Your Culinary Journey Starts Here"}),it.jsx("p",{className:"text-cream leading-relaxed text-sm xs:text-base",style:{opacity:.9},children:"Join our passionate team of culinary professionals. We're looking for dedicated individuals who share our commitment to exceptional dining experiences."})]}),it.jsxs("div",{className:"relative z-10 space-y-3 xs:space-y-4 text-cream text-xs xs:text-sm",style:{opacity:.9},children:[it.jsxs("div",{className:"flex items-center gap-2 xs:gap-3",children:[it.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:"#D4AF37"}}),it.jsx("span",{children:"Competitive wages & tips"})]}),it.jsxs("div",{className:"flex items-center gap-2 xs:gap-3",children:[it.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:"#D4AF37"}}),it.jsx("span",{children:"Flexible scheduling"})]}),it.jsxs("div",{className:"flex items-center gap-2 xs:gap-3",children:[it.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:"#D4AF37"}}),it.jsx("span",{children:"Career advancement opportunities"})]}),it.jsxs("div",{className:"flex items-center gap-2 xs:gap-3",children:[it.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:"#D4AF37"}}),it.jsx("span",{children:"Employee meal discounts"})]})]})]}),it.jsx("div",{className:"p-4 xs:p-6 md:p-8 lg:p-12",children:it.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),v(""),(()=>{const e={};return!!r?.questions&&(r.questions.forEach((t,s)=>{const a=`question_${s}`,r=d[a];t.required&&(!r||Array.isArray(r)&&0===r.length||"string"==typeof r&&""===r.trim())&&(e[a]="This question is required")}),g(e),0===Object.keys(e).length)})()){x(!0);try{const e=new FormData,t={};r.questions.forEach((s,a)=>{const r=d[`question_${a}`];"file"===s.type&&r instanceof File?(e.append(`file_${a}`,r),t[a]={question:s.question,answer:r.name,type:"file",file_field:`file_${a}`}):t[a]={question:s.question,answer:r}}),e.append("responses",JSON.stringify(t));const a=await jt.submitQuestionnaireWithFiles(e);a.success?s("/confirmation"):(v(a.error||"Failed to submit questionnaire"),x(!1))}catch(t){console.error("Error submitting questionnaire:",t),v("Something went wrong. Please try again."),x(!1)}}else v("Please answer all required questions")},className:"space-y-4 xs:space-y-6",children:[it.jsxs("div",{className:"text-center mb-6",children:[it.jsx("h2",{className:"text-xl xs:text-2xl font-bold text-charcoal mb-2",children:r?.title||"Onboarding Questionnaire"}),r?.description&&it.jsx("p",{className:"text-charcoal/70 text-sm xs:text-base",children:r.description})]}),r?.questions?.map((e,t)=>w(e,t)),p&&it.jsxs("div",{className:"bg-accent/10 border border-accent/30 rounded-lg xs:rounded-xl p-3 xs:p-4 flex items-center gap-2 xs:gap-3",children:[it.jsx(b,{className:"w-4 h-4 xs:w-5 xs:h-5 text-accent flex-shrink-0"}),it.jsx("p",{className:"text-accent text-xs xs:text-sm",children:p})]}),it.jsx("button",{type:"submit",disabled:u,className:"w-full bg-gold-gradient text-charcoal font-bold px-6 xs:px-8 py-3 xs:py-4 rounded-xl xs:rounded-2xl transition-all duration-300 transform hover:scale-[1.02] inline-flex items-center justify-center gap-2 xs:gap-3 text-base xs:text-lg disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl",children:u?it.jsxs(it.Fragment,{children:[it.jsx("div",{className:"w-4 h-4 xs:w-5 xs:h-5 border-2 border-charcoal/30 border-t-charcoal rounded-full animate-spin"}),it.jsx("span",{className:"hidden xs:inline",children:"Submitting Application..."}),it.jsx("span",{className:"xs:hidden",children:"Submitting..."})]}):it.jsxs(it.Fragment,{children:["Submit",it.jsx(y,{className:"w-4 h-4 xs:w-5 xs:h-5"})]})})]})})]})})]})}):it.jsx("div",{className:"min-h-screen bg-cream flex items-center justify-center",children:it.jsxs("div",{className:"text-center",children:[it.jsx("p",{className:"text-charcoal",children:"Questionnaire not available"}),it.jsx("button",{onClick:()=>s("/employee/qr-scan"),className:"mt-4 px-4 py-2 bg-gold text-charcoal rounded-lg",children:"Go Back"})]})})},Et=()=>{const{employee:s,updateEmployee:a}=Ql(),{user:r}=wt(),n=t(),[l,o]=e.useState(null),[i,c]=e.useState(!0);if(e.useEffect(()=>{(async()=>{if("employee"===r?.role)try{const e=await jt.getConfirmationPage();e.success?(o({personalInfo:{firstName:e.employee.first_name,lastName:e.employee.last_name,email:e.employee.email,phone:e.employee.phone},location:{name:e.employee.location},status:e.employee.stage,confirmationInfo:e.confirmation_info}),a({id:e.employee.id,status:e.employee.stage,location:e.employee.location,designation:e.employee.position})):console.error("Failed to load confirmation data:",e.error)}catch(e){console.error("Error loading confirmation data:",e)}c(!1)})()},[r,a]),i)return it.jsx("div",{className:"min-h-screen bg-cream flex items-center justify-center",children:it.jsxs("div",{className:"text-center",children:[it.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gold mx-auto mb-4"}),it.jsx("p",{className:"text-charcoal",children:"Loading..."})]})});if(!l||!l.personalInfo?.firstName)return it.jsx("div",{className:"min-h-screen bg-cream flex items-center justify-center",children:it.jsxs("div",{className:"text-center",children:[it.jsx("h2",{className:"font-display text-2xl text-charcoal mb-4",children:"No application data found"}),it.jsx("p",{className:"text-charcoal/60",children:"Please complete the application form first."})]})});const{personalInfo:d,location:m}=l;return it.jsx("div",{className:"min-h-screen bg-cream text-charcoal",children:it.jsx("div",{className:"max-w-4xl mx-auto p-3 xs:p-6",children:it.jsxs("div",{className:"bg-white rounded-xl xs:rounded-2xl shadow-xl p-4 xs:p-6 md:p-8 border border-gold/10",children:[it.jsxs("div",{className:"mb-4 xs:mb-6 text-center",children:[it.jsx("h1",{className:"font-display text-xl xs:text-3xl md:text-4xl font-bold text-charcoal mb-2 xs:mb-3",children:"Woodfire.food"}),it.jsx("div",{className:"bg-charcoal/5 rounded-lg xs:rounded-xl p-2 xs:p-3 mb-3 xs:mb-4",children:it.jsxs("div",{className:"grid grid-cols-1 xs:grid-cols-2 gap-2 xs:gap-3 text-xs xs:text-sm",children:[it.jsxs("div",{className:"flex items-center justify-center gap-2",children:[it.jsx(v,{className:"w-3 h-3 xs:w-4 xs:h-4 text-gold"}),it.jsx("span",{className:"text-charcoal",children:"hr@309311restaurants.com"})]}),it.jsxs("div",{className:"flex items-center justify-center gap-2",children:[it.jsx(N,{className:"w-3 h-3 xs:w-4 xs:h-4 text-gold"}),it.jsx("span",{className:"text-charcoal",children:"(918) 555-0123"})]})]})}),it.jsx("div",{className:"flex flex-col xs:flex-row xs:justify-between xs:items-center gap-2 xs:gap-0 mb-3 xs:mb-4",children:it.jsxs("h2",{className:"font-display text-lg xs:text-xl md:text-2xl text-gold",children:["Hi ",d.firstName," ",d.lastName,"! "]})}),it.jsxs("div",{className:"flex justify-between items-center bg-blue-100 text-blue-800 px-2 xs:px-3 py-2 rounded-lg mb-3 xs:mb-4",children:[it.jsxs("div",{className:"flex items-center gap-2",children:[it.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),it.jsx("span",{className:"text-xs xs:text-sm font-medium",children:"Status:"})]}),it.jsx("span",{className:"text-xs xs:text-sm font-medium",children:"Interview"})]})]}),it.jsx("div",{className:"bg-cream/50 rounded-lg xs:rounded-xl p-3 xs:p-4 md:p-6 mb-4 xs:mb-6 text-left",children:it.jsxs("div",{className:"text-charcoal/90 leading-relaxed space-y-2 xs:space-y-3 text-sm xs:text-base",children:[it.jsx("p",{children:it.jsx("strong",{children:"We're excited you're interested in joining our team."})}),it.jsx("p",{children:it.jsx("strong",{children:"You will receive a link from our scheduling software shortly  please log in and update your availability ASAP so we can get you on a shift."})}),it.jsx("p",{children:it.jsx("strong",{children:"Your first few shifts will be working interviews (34 hours each, paid minimum wage). If we're a good fit, we'll add you to the regular schedule and begin formal training."})}),it.jsx("p",{children:it.jsx("strong",{children:"For now, please wear a plain black t-shirt and non-ripped jeans. If you don't have one, a dark shirt is fine. A uniform will be provided once you're officially hired."})}),it.jsx("p",{className:"text-gold font-bold text-base xs:text-lg",children:it.jsx("strong",{children:"We look forward to seeing you soon!"})})]})}),it.jsxs("div",{className:"bg-charcoal/5 rounded-lg xs:rounded-xl p-3 xs:p-4 mb-4 xs:mb-6",children:[it.jsxs("h3",{className:"font-display text-base xs:text-lg font-semibold text-charcoal mb-2 xs:mb-3 flex items-center justify-center gap-2",children:[it.jsx(w,{className:"w-4 h-4 xs:w-5 xs:h-5 text-gold"}),"Application Summary"]}),it.jsxs("div",{className:"grid grid-cols-1 xs:grid-cols-2 gap-2 xs:gap-3 text-xs xs:text-sm",children:[it.jsxs("div",{className:"flex items-center gap-2 xs:gap-3",children:[it.jsx(k,{className:"w-3 h-3 xs:w-4 xs:h-4 text-gold flex-shrink-0"}),it.jsx("span",{className:"text-charcoal/70",children:"Location:"}),it.jsx("span",{className:"font-medium text-charcoal truncate",children:m?.name||d.preferredLocation})]}),it.jsxs("div",{className:"flex items-center gap-2 xs:gap-3",children:[it.jsx("div",{className:"w-3 h-3 xs:w-4 xs:h-4 bg-blue-500 rounded-full flex-shrink-0"}),it.jsx("span",{className:"text-charcoal/70",children:"Status:"}),it.jsx("span",{className:"font-medium text-blue-700",children:"Interview"})]}),it.jsxs("div",{className:"flex items-center gap-2 xs:gap-3",children:[it.jsx(v,{className:"w-3 h-3 xs:w-4 xs:h-4 text-gold flex-shrink-0"}),it.jsx("span",{className:"text-charcoal/70",children:"Email:"}),it.jsx("span",{className:"font-medium text-charcoal truncate",children:d.email})]}),it.jsxs("div",{className:"flex items-center gap-2 xs:gap-3",children:[it.jsx(N,{className:"w-3 h-3 xs:w-4 xs:h-4 text-gold flex-shrink-0"}),it.jsx("span",{className:"text-charcoal/70",children:"Phone:"}),it.jsx("span",{className:"font-medium text-charcoal",children:d.phone})]})]})]}),it.jsx("div",{className:"bg-gold/5 rounded-lg xs:rounded-xl p-3 xs:p-4 md:p-6 mb-4 xs:mb-6 border border-gold/20",children:it.jsxs("div",{className:"text-center",children:[it.jsxs("h3",{className:"font-display text-base xs:text-lg font-semibold text-charcoal mb-2 flex items-center justify-center gap-2",children:[it.jsx(S,{className:"w-4 h-4 xs:w-5 xs:h-5 text-gold"}),"Set Your Availability"]}),it.jsx("p",{className:"text-charcoal/70 mb-3 xs:mb-4 text-xs xs:text-sm",children:"Please set your availability to help us schedule your working interview."}),it.jsx("div",{className:"mb-3 xs:mb-4",children:l.schedule?it.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg xs:rounded-xl p-3 xs:p-4 mb-3 xs:mb-4",children:[it.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[it.jsx(C,{className:"w-4 h-4 xs:w-5 xs:h-5 text-green-600"}),it.jsx("span",{className:"text-green-800 font-medium text-sm xs:text-base",children:"Schedule Submitted!"})]}),it.jsxs("p",{className:"text-green-700 text-xs xs:text-sm",children:["You submitted your availability on"," ",new Date(l.schedule.submittedAt).toLocaleDateString()]}),it.jsx("button",{onClick:()=>n("/employee/schedule"),className:"mt-2 xs:mt-3 text-green-700 hover:text-green-800 font-medium text-xs xs:text-sm underline",children:"Update Schedule"})]}):it.jsx("div",{})}),it.jsxs("button",{onClick:()=>n("/employee/schedule"),className:"inline-flex items-center gap-2 xs:gap-3 px-4 xs:px-6 py-2 xs:py-3 rounded-lg xs:rounded-xl font-medium transition-all duration-200 text-sm xs:text-base "+(l.schedule?"bg-gold/10 text-gold border border-gold/30 hover:bg-gold/20":"bg-gold-gradient text-charcoal shadow-lg hover:shadow-xl transform hover:scale-[1.02]"),children:[it.jsx(S,{className:"w-4 h-4 xs:w-5 xs:h-5"}),l.schedule?"Update Schedule":"Set My Schedule"]})]})}),it.jsxs("div",{className:"border-t border-charcoal/10 pt-3 xs:pt-4 text-center",children:[it.jsx("h4",{className:"font-display text-sm xs:text-base font-semibold text-charcoal mb-2 xs:mb-3",children:"Questions? We're Here to Help!"}),it.jsxs("div",{className:"grid grid-cols-1 xs:grid-cols-2 gap-2 xs:gap-3 text-xs xs:text-sm",children:[it.jsxs("div",{className:"flex items-center justify-center gap-2",children:[it.jsx(v,{className:"w-3 h-3 xs:w-4 xs:h-4 text-gold"}),it.jsx("span",{className:"text-charcoal",children:"hr@309311restaurants.com"})]}),it.jsxs("div",{className:"flex items-center justify-center gap-2",children:[it.jsx(N,{className:"w-3 h-3 xs:w-4 xs:h-4 text-gold"}),it.jsx("span",{className:"text-charcoal",children:"(918) 555-0123"})]})]})]})]})})})},At=({size:e="md",className:t=""})=>{const s={sm:"w-16 h-16 xs:w-12 xs:h-12",md:"w-28 h-28 xs:w-24 xs:h-24",lg:"w-36 h-36 xs:w-32 xs:h-32",xl:"w-44 h-44 xs:w-40 xs:h-40"};return it.jsx("div",{className:`${s[e]} ${t} flex items-center justify-center`,children:it.jsx("img",{src:"/Picture1.png",alt:"Woodfire.food Logo",className:`${s[e]} object-contain`})})},Tt=({showContactInfo:e=!1,location:t=null,showLogout:s=!0})=>{const{logout:a}=wt();return it.jsx("header",{className:"bg-brand-navy text-cream shadow-2xl border-b border-gold/20",children:it.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:it.jsxs("div",{className:"flex items-center justify-between h-20 xs:h-20",children:[it.jsxs("div",{className:"flex items-center gap-3 xs:gap-4",children:[it.jsx(At,{size:"sm"}),it.jsxs("div",{children:[it.jsx("div",{className:"hidden xs:block",children:it.jsx("h1",{className:"font-display text-xl md:text-2xl font-bold text-gold",children:"Woodfire.food"})}),it.jsxs("div",{className:"xs:hidden",children:[it.jsx("h1",{className:"font-display text-xl font-bold text-gold leading-tight",children:"Woodfire.food"}),it.jsx("p",{className:"font-display text-base text-gold leading-tight",children:"Restaurant"})]}),t&&it.jsxs("p",{className:"text-cream/80 text-xs xs:text-sm font-medium tracking-wide",children:[t.name," Location"]})]})]}),e&&it.jsxs("div",{className:"hidden md:flex items-center gap-6 text-sm",children:[it.jsxs("div",{className:"flex items-center gap-2",children:[it.jsx(N,{className:"w-4 h-4 text-gold"}),it.jsx("span",{children:"(918) 555-0123"})]}),it.jsxs("div",{className:"flex items-center gap-2",children:[it.jsx(v,{className:"w-4 h-4 text-gold"}),it.jsx("span",{children:"hr@309311restaurants.com"})]}),t&&it.jsxs("div",{className:"flex items-center gap-2",children:[it.jsx(k,{className:"w-4 h-4 text-gold"}),it.jsx("span",{children:t.address})]})]}),s&&it.jsx("button",{onClick:()=>{a(),window.location.href="/login"},className:"inline-flex items-center gap-1 xs:gap-2 px-3 xs:px-4 py-1.5 xs:py-2 bg-gold hover:bg-gold/90 text-brand-navy rounded-lg xs:rounded-xl shadow-sm hover:shadow-md transition-all duration-200 font-medium text-sm xs:text-base",children:"Logout"})]})})})},_t=({location:e=null})=>it.jsx("footer",{className:"bg-brand-navy text-cream mt-auto border-t border-gold/20",children:it.jsxs("div",{className:"max-w-7xl mx-auto px-3 xs:px-4 sm:px-6 lg:px-8 py-4 xs:py-6 sm:py-12",children:[it.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-start gap-4 xs:gap-6 md:gap-8",children:[it.jsxs("div",{className:"flex-1",children:[it.jsx("h3",{className:"font-display text-lg xs:text-sm sm:text-lg font-bold text-gold mb-2 xs:mb-3 sm:mb-4 text-center md:text-left",children:"Woodfire.food"}),it.jsx("p",{className:"text-cream/80 text-xs sm:text-sm leading-relaxed text-center md:text-left px-2 xs:px-0",children:"Premium dining experiences across Oklahoma. Join our team and be part of our culinary excellence."})]}),it.jsxs("div",{className:"flex-shrink-0",children:[it.jsx("h4",{className:"font-semibold text-gold mb-2 xs:mb-3 sm:mb-4 text-xs xs:text-sm sm:text-base text-center md:text-left",children:"Contact Hiring Manager"}),it.jsxs("div",{className:"space-y-1.5 xs:space-y-2 sm:space-y-3 text-xs sm:text-sm",children:[it.jsxs("div",{className:"flex items-center gap-2 xs:gap-3 justify-center md:justify-start",children:[it.jsx(N,{className:"w-3 h-3 xs:w-3.5 xs:h-3.5 sm:w-4 sm:h-4 text-gold flex-shrink-0"}),it.jsx("span",{children:"(918) 555-0123"})]}),it.jsxs("div",{className:"flex items-center gap-2 xs:gap-3 justify-center md:justify-start",children:[it.jsx(v,{className:"w-3 h-3 xs:w-3.5 xs:h-3.5 sm:w-4 sm:h-4 text-gold flex-shrink-0"}),it.jsx("span",{className:"text-xs xs:text-sm",children:"hr@309311restaurants.com"})]}),it.jsxs("div",{className:"flex items-center gap-2 xs:gap-3 justify-center md:justify-start",children:[it.jsx(E,{className:"w-3 h-3 xs:w-3.5 xs:h-3.5 sm:w-4 sm:h-4 text-gold flex-shrink-0"}),it.jsx("span",{children:"Mon-Fri: 9AM-5PM"})]})]})]})]}),it.jsx("div",{className:"border-t border-cream/20 mt-4 xs:mt-6 sm:mt-8 pt-3 xs:pt-4 sm:pt-6",children:it.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-3",children:[it.jsx("p",{className:"text-cream/60 text-xs sm:text-sm px-2 xs:px-0 order-2 sm:order-1",children:" 2025 Woodfire.food. All rights reserved."}),it.jsxs(s,{to:"/admin-login",className:"order-1 sm:order-2 inline-flex items-center gap-2 bg-gold/10 hover:bg-gold/20 text-gold border border-gold/30 hover:border-gold/50 px-3 py-2 rounded-lg text-xs font-medium transition-all duration-200",children:[it.jsx(A,{className:"w-3 h-3"}),"Admin Login"]})]})})]})}),Rt={bartlesville:{id:"bartlesville",name:"Bartlesville",restaurantName:"Woodfire.food",address:"123 Main Street, Bartlesville, OK 74003",phone:"(918) 555-0123",email:"bartlesville@309311restaurants.com",manager:"Sarah Johnson",description:"Our flagship location in the heart of downtown Bartlesville",features:["Full-service dining","Private event space","Craft cocktail bar","Outdoor patio seating"],positions:[{id:"server",name:"Server",department:"Front of House"},{id:"host",name:"Host/Hostess",department:"Front of House"},{id:"bartender",name:"Bartender",department:"Front of House"},{id:"cook",name:"Line Cook",department:"Back of House"},{id:"prep",name:"Prep Cook",department:"Back of House"},{id:"dishwasher",name:"Dishwasher",department:"Back of House"}]},tulsa:{id:"tulsa",name:"Tulsa",restaurantName:"Woodfire.food",address:"456 Downtown Ave, Tulsa, OK 74103",phone:"(918) 555-0124",email:"tulsa@309311restaurants.com",manager:"Michael Rodriguez",description:"Our modern location in Tulsa's vibrant downtown district",features:["Contemporary dining","Rooftop bar","Live music venue","Corporate catering"],positions:[{id:"server",name:"Server",department:"Front of House"},{id:"host",name:"Host/Hostess",department:"Front of House"},{id:"bartender",name:"Bartender",department:"Front of House"},{id:"sommelier",name:"Sommelier",department:"Front of House"},{id:"cook",name:"Line Cook",department:"Back of House"},{id:"sous",name:"Sous Chef",department:"Back of House"},{id:"prep",name:"Prep Cook",department:"Back of House"},{id:"dishwasher",name:"Dishwasher",department:"Back of House"}]}},Pt=()=>{const[t,s]=e.useState("bartlesville"),[a,r]=e.useState(!1),n=Object.values(Rt),l=e=>{const t=window.location.origin;return`https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=${encodeURIComponent(`${t}/onboard/${e}`)}&bgcolor=FAF9F6&color=1C1C1C&margin=20`},o=n.find(e=>e.id===t);return it.jsx("div",{className:"min-h-screen bg-cream text-charcoal py-6 xs:py-12 px-3 xs:px-4 pb-6 xs:pb-8",children:it.jsx("div",{className:"max-w-3xl mx-auto my-4 xs:my-8 mb-6 xs:mb-8",children:it.jsxs("div",{className:"bg-white rounded-xl xs:rounded-2xl shadow-2xl relative border border-gold/10",children:[it.jsxs("div",{className:"bg-brand-navy p-4 xs:p-6 md:p-8 text-center border-b border-gold/20 rounded-t-xl xs:rounded-t-2xl",children:[it.jsxs("div",{className:"flex items-center justify-center gap-2 xs:gap-3 mb-2 xs:mb-3",children:[it.jsx("div",{className:"w-8 h-8 xs:w-10 xs:h-10 bg-gold-gradient rounded-lg flex items-center justify-center shadow-lg",children:it.jsx(T,{className:"w-5 h-5 xs:w-6 xs:h-6 text-charcoal"})}),it.jsx("h1",{className:"font-display text-xl xs:text-2xl md:text-3xl font-bold text-cream",children:"QR Code Generator"})]}),it.jsx("p",{className:"text-cream/90 text-sm xs:text-base px-2 xs:px-0",children:"Generate QR codes for restaurant locations to enable employee onboarding"})]}),it.jsx("div",{className:"p-4 xs:p-6 md:p-8 pb-8 xs:pb-12 md:pb-16",children:it.jsxs("div",{className:"grid md:grid-cols-2 gap-6 xs:gap-8",children:[it.jsxs("div",{className:"space-y-4 xs:space-y-5",children:[it.jsxs("div",{children:[it.jsx("h3",{className:"font-display text-lg xs:text-xl font-semibold text-charcoal mb-2 xs:mb-3",children:"Select Location"}),it.jsx("select",{value:t,onChange:e=>s(e.target.value),className:"w-full px-3 py-2.5 border border-charcoal/20 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent transition-all text-sm xs:text-base",children:n.map(e=>it.jsxs("option",{value:e.id,children:[e.name," - Woodfire.food"]},e.id))})]}),o&&it.jsxs("div",{className:"bg-cream/50 rounded-lg p-3 xs:p-4",children:[it.jsxs("h4",{className:"font-semibold text-charcoal mb-2 text-sm xs:text-base",children:[o.name," Location"]}),it.jsxs("p",{className:"text-charcoal/70 text-xs xs:text-sm mb-1 whitespace-nowrap overflow-hidden text-ellipsis",children:[" ",o.address]}),it.jsxs("p",{className:"text-charcoal/70 text-xs xs:text-sm mb-1 whitespace-nowrap",children:[" ",o.phone]}),it.jsxs("p",{className:"text-charcoal/70 text-xs xs:text-sm whitespace-nowrap overflow-hidden text-ellipsis",children:[" ",o.email]})]}),it.jsxs("div",{className:"space-y-3",children:[it.jsxs("button",{onClick:()=>{const e=l(t),s=document.createElement("a");s.href=e,s.download=`qr-code-${t}.png`,document.body.appendChild(s),s.click(),document.body.removeChild(s)},className:"w-full bg-gold-gradient text-charcoal font-semibold px-3 xs:px-4 py-2 xs:py-2.5 rounded-lg hover:shadow-lg transition-all flex items-center justify-center gap-2 text-sm xs:text-base",children:[it.jsx(_,{className:"w-4 h-4"}),"Download QR Code"]}),it.jsxs("div",{className:"relative z-50",children:[it.jsxs("button",{onClick:()=>r(!a),className:"w-full bg-charcoal text-cream font-semibold px-3 xs:px-4 py-2 xs:py-2.5 rounded-lg hover:bg-charcoal/80 transition-all flex items-center justify-center gap-2 text-sm xs:text-base",children:[it.jsx(k,{className:"w-4 h-4"}),"Test Onboarding",it.jsx(R,{className:"w-4 h-4 transition-transform "+(a?"rotate-180":"")})]}),a&&it.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 bg-white rounded-lg shadow-2xl border border-charcoal/10 overflow-hidden min-w-52 xs:min-w-56 z-50",children:it.jsxs("div",{className:"p-2",children:[it.jsx("div",{className:"text-xs text-charcoal/60 px-2 py-1.5 font-medium",children:"Select a location to test:"}),n.map(e=>it.jsxs("button",{onClick:()=>(e=>{const t=`${window.location.origin}/onboard/${e}`;window.open(t,"_blank"),r(!1)})(e.id),className:"w-full text-left px-2 py-1.5 hover:bg-gold/10 rounded transition-colors text-sm text-charcoal",children:[it.jsx("div",{className:"font-medium text-xs xs:text-sm",children:e.name}),it.jsx("div",{className:"text-xs text-charcoal/60 truncate whitespace-nowrap",children:e.address})]},e.id))]})})]})]})]}),it.jsxs("div",{className:"flex flex-col items-center justify-start",children:[it.jsx("div",{className:"bg-cream p-3 xs:p-5 rounded-xl shadow-lg",children:it.jsx("img",{src:l(t),alt:`QR Code for ${o?.name} location`,className:"w-40 h-40 xs:w-52 xs:h-52 rounded-lg"})}),it.jsxs("div",{className:"mt-3 text-center px-2",children:[it.jsx("p",{className:"text-charcoal/70 text-xs xs:text-sm",children:"Scan this QR code to start the onboarding process for"}),it.jsxs("p",{className:"font-semibold text-charcoal text-sm xs:text-base whitespace-nowrap",children:[o?.name," Location"]})]})]})]})})]})})})},Ot=()=>{const[r,n]=e.useState({email:"",password:""}),[l,o]=e.useState({}),[i,c]=e.useState(!1),{login:d}=wt(),m=t(),u=a(),x=u.state?.from?.pathname,h=e=>{const{name:t,value:s}=e.target;n(e=>({...e,[t]:s})),l[t]&&o(e=>({...e,[t]:""}))};return it.jsx("div",{className:"flex items-center justify-center px-3 xs:px-4 py-6 xs:py-12",children:it.jsx("div",{className:"max-w-md w-full",children:it.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!(()=>{const e={};return r.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)||(e.email="Please enter a valid email address"):e.email="Email is required",r.password||(e.password="Password is required"),o(e),0===Object.keys(e).length})())return;c(!0);const t=await d(r.email,r.password,"employee");if(t.success){const e=x||(e=>{if(["owner","admin","manager","hiring_manager","expo"].includes(e.role))return"/admin/dashboard";if("customer"===e.role)return"/customer/dashboard";if("employee"===e.role){if(e.can_access_dashboard)return"/employee/dashboard";switch(e.stage){case"interview":default:return"/employee/qr-scan";case"location_selected":return"/employee/questionnaire";case"questionnaire_completed":return"/confirmation"}}return"ACTIVE"===e.status?"/employee/dashboard":"INTERVIEW"===e.status?"/confirmation":"/employee/qr-scan"})(t.user);m(e,{replace:!0})}else o({general:t.error});c(!1)},className:"bg-white rounded-lg shadow-lg p-4 xs:p-8 space-y-4 xs:space-y-6",children:[it.jsxs("div",{className:"text-center mb-4 xs:mb-6",children:[it.jsxs("div",{className:"relative",children:[it.jsx("button",{type:"button",onClick:()=>m("/"),className:"absolute left-0 top-1/2 transform -translate-y-1/2 text-gray-600 hover:text-charcoal transition-colors",children:it.jsx(P,{className:"w-5 h-5 xs:w-6 xs:h-6"})}),it.jsx("h2",{className:"text-2xl xs:text-3xl font-bold text-charcoal mb-1 xs:mb-2",children:"Employee Login"})]}),it.jsx("p",{className:"text-charcoal/70 text-sm xs:text-base",children:"Sign in to your employee account"})]}),l.general&&it.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-3 xs:px-4 py-2 xs:py-3 rounded-md text-xs xs:text-sm",children:l.general}),it.jsxs("div",{className:"space-y-4",children:[it.jsx(St,{id:"email",name:"email",type:"email",label:"Email Address",value:r.email,onChange:h,error:l.email,required:!0}),it.jsx(St,{id:"password",name:"password",type:"password",label:"Password",value:r.password,onChange:h,error:l.password,required:!0})]}),it.jsx("button",{type:"submit",disabled:i,className:"w-full bg-gold-gradient text-charcoal py-2.5 xs:py-3 px-3 xs:px-4 rounded-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-gold focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-medium text-sm xs:text-base",children:i?"Signing In...":"Sign In"}),it.jsxs("div",{className:"text-center",children:[it.jsxs("p",{className:"text-charcoal/70 text-xs xs:text-sm",children:["Don't have an account?"," ",it.jsx(s,{to:"/admin/signup",className:"text-gold hover:text-gold-dark font-medium transition-colors duration-200",children:"Employee Sign up here"})]}),it.jsxs("div",{className:"text-center pt-3 xs:pt-4 border-t border-gray-200",children:[it.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:["Customer?"," ",it.jsx(s,{to:"/customer/login",className:"text-blue-600 hover:text-blue-700 transition-colors",children:"Customer Login"})]}),it.jsxs("p",{className:"text-xs text-gray-500",children:["Manager/Admin?"," ",it.jsx(s,{to:"/admin-login",className:"text-blue-600 hover:text-blue-700 transition-colors",children:"Admin Login"})]})]})]})]})})})},It=()=>{const[a,r]=e.useState({name:"",email:"",password:"",confirmPassword:""}),[n,l]=e.useState({}),[o,i]=e.useState(!1),{signup:c}=wt(),d=t(),m=e=>{const{name:t,value:s}=e.target;r(e=>({...e,[t]:s})),n[t]&&l(e=>({...e,[t]:""}))};return it.jsx("div",{className:"flex items-center justify-center px-3 xs:px-4 py-6 xs:py-12",children:it.jsx("div",{className:"max-w-md w-full",children:it.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!(()=>{const e={};return a.name.trim()||(e.name="Name is required"),a.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)||(e.email="Please enter a valid email address"):e.email="Email is required",a.password?a.password.length<6&&(e.password="Password must be at least 6 characters long"):e.password="Password is required",a.confirmPassword?a.password!==a.confirmPassword&&(e.confirmPassword="Passwords do not match"):e.confirmPassword="Please confirm your password",l(e),0===Object.keys(e).length})())return;i(!0);const t={...a,password_confirmation:a.confirmPassword,role:"employee"},s=await c(t);if(s.success){"interview"===s.user.stage?d("/employee/qr-scan"):d("/employee/dashboard")}else l({general:s.error});i(!1)},className:"bg-white rounded-lg shadow-lg p-4 xs:p-8 space-y-4 xs:space-y-6",children:[it.jsxs("div",{className:"text-center mb-4 xs:mb-6",children:[it.jsxs("div",{className:"relative",children:[it.jsx("button",{type:"button",onClick:()=>d("/"),className:"absolute left-0 top-1/2 transform -translate-y-1/2 text-gray-600 hover:text-charcoal transition-colors",children:it.jsx(P,{className:"w-5 h-5 xs:w-6 xs:h-6"})}),it.jsx("h2",{className:"text-2xl xs:text-3xl font-bold text-charcoal mb-1 xs:mb-2",children:"Create Account"})]}),it.jsx("p",{className:"text-charcoal/70 text-sm xs:text-base",children:"Join us to get started with your restaurant management"})]}),n.general&&it.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-3 xs:px-4 py-2 xs:py-3 rounded-md text-xs xs:text-sm",children:n.general}),it.jsxs("div",{className:"space-y-4",children:[it.jsx(St,{id:"name",name:"name",type:"text",label:"Full Name",value:a.name,onChange:m,error:n.name,required:!0}),it.jsx(St,{id:"email",name:"email",type:"email",label:"Email Address",value:a.email,onChange:m,error:n.email,required:!0}),it.jsx(St,{id:"password",name:"password",type:"password",label:"Password",value:a.password,onChange:m,error:n.password,required:!0}),it.jsx(St,{id:"confirmPassword",name:"confirmPassword",type:"password",label:"Confirm Password",value:a.confirmPassword,onChange:m,error:n.confirmPassword,required:!0})]}),it.jsx("button",{type:"submit",disabled:o,className:"w-full bg-gold-gradient text-charcoal py-2.5 xs:py-3 px-3 xs:px-4 rounded-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-gold focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-medium text-sm xs:text-base",children:o?"Creating Account...":"Create Account"}),it.jsx("div",{className:"text-center",children:it.jsxs("p",{className:"text-charcoal/70 text-xs xs:text-sm whitespace-nowrap",children:["Already have an account?"," ",it.jsx(s,{to:"/login",className:"text-gold hover:text-gold-dark font-medium transition-colors duration-200",children:"Sign in here"})]})})]})})})},Dt=({isOpen:e,onClick:t})=>it.jsxs("button",{className:"flex flex-col justify-center items-center w-8 h-8 rounded-md focus:outline-none focus:ring-2 focus:ring-gold hover:bg-gold/10 transition-all duration-200",onClick:t,"aria-label":e?"Close menu":"Open menu",children:[it.jsx("span",{className:"block w-5 h-0.5 bg-cream transition-all duration-300 ease-in-out "+(e?"transform rotate-45 translate-y-1":"")}),it.jsx("span",{className:"block w-5 h-0.5 bg-cream mt-1 transition-all duration-300 ease-in-out "+(e?"opacity-0":"")}),it.jsx("span",{className:"block w-5 h-0.5 bg-cream mt-1 transition-all duration-300 ease-in-out "+(e?"transform -rotate-45 -translate-y-1":"")})]}),Lt=({user:t,locations:s,userTypes:a,onSave:r,onClose:n})=>{const[l,o]=e.useState({name:"",email:"",userType:"",location:"",password:""}),[i,c]=e.useState({});e.useEffect(()=>{t&&o({name:t.name||"",email:t.email||"",userType:t.userType||"",location:t.location||"",password:""})},[t]);const d=e=>{const{name:t,value:s}=e.target;o(e=>({...e,[t]:s})),i[t]&&c(e=>({...e,[t]:""}))};return it.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:it.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[it.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[it.jsx("h3",{className:"text-lg font-semibold text-charcoal",children:t?"Edit User":"Add New User"}),it.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:it.jsx(O,{className:"w-6 h-6"})})]}),it.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),!(()=>{const e={};return l.name.trim()||(e.name="Name is required"),l.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.email)||(e.email="Please enter a valid email address"):e.email="Email is required",l.userType||(e.userType="User type is required"),l.location||"owner"===l.userType||(e.location="Location is required"),t||l.password?l.password&&l.password.length<6&&(e.password="Password must be at least 6 characters long"):e.password="Password is required",c(e),0===Object.keys(e).length})())return;const s={...l};"owner"===s.userType&&(s.location=null),t&&!l.password&&delete s.password,r(s)},className:"p-6 space-y-4",children:[it.jsx(St,{id:"name",name:"name",type:"text",label:"Full Name",value:l.name,onChange:d,error:i.name,required:!0}),it.jsx(St,{id:"email",name:"email",type:"email",label:"Email Address",value:l.email,onChange:d,error:i.email,required:!0}),it.jsxs("div",{children:[it.jsx("label",{htmlFor:"userType",className:"block text-sm font-medium text-charcoal mb-1",children:"User Type"}),it.jsxs("select",{id:"userType",name:"userType",value:l.userType,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent",required:!0,children:[it.jsx("option",{value:"",children:"Select User Type"}),a.map(e=>{const t={owner:"Owner",admin:"Admin",manager:"Manager",hiring_manager:"Hiring Manager",expo:"Expo"}[e]||e;return it.jsx("option",{value:e,children:t},e)})]}),i.userType&&it.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.userType})]}),it.jsxs("div",{children:[it.jsxs("label",{htmlFor:"location",className:"block text-sm font-medium text-charcoal mb-1",children:["Location ","owner"===l.userType&&it.jsx("span",{className:"text-gray-400 font-normal",children:"(Owner can access all locations)"})]}),it.jsxs("select",{id:"location",name:"location",value:l.location,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent",required:"owner"!==l.userType,disabled:"owner"===l.userType,children:[it.jsx("option",{value:"",children:"owner"===l.userType?"All Locations":"Select Location"}),console.log("Rendering locations in dropdown:",s)||s.map(e=>it.jsx("option",{value:e.id,children:e.name},e.id))]}),i.location&&it.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.location})]}),it.jsx(St,{id:"password",name:"password",type:"password",label:t?"New Password (leave blank to keep current)":"Password",value:l.password,onChange:d,error:i.password,required:!t}),it.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[it.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-charcoal bg-gray-200 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),it.jsx("button",{type:"submit",className:"px-4 py-2 bg-gold-gradient text-charcoal rounded-md hover:shadow-lg transition-all",children:t?"Update User":"Add User"})]})]})]})})},Ft=({location:t,onSave:s,onClose:a})=>{const[r,n]=e.useState({name:"",address:"",city:"",state:"",zip_code:"",country:"USA",phone:"",email:"",description:""}),[l,o]=e.useState({});e.useEffect(()=>{t&&n({name:t.name||"",address:t.address||"",city:t.city||"",state:t.state||"",zip_code:t.zip_code||"",country:t.country||"USA",phone:t.phone||"",email:t.email||"",description:t.description||""})},[t]);const i=e=>{const{name:t,value:s}=e.target;n(e=>({...e,[t]:s})),l[t]&&o(e=>({...e,[t]:""}))};return it.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:e=>{e.target===e.currentTarget&&a()},children:it.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[it.jsxs("div",{className:"flex justify-between items-center px-6 py-4 border-b border-gray-200",children:[it.jsx("h3",{className:"text-xl font-semibold text-charcoal",children:t?"Edit Location":"Add New Location"}),it.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 transition-colors",type:"button",children:it.jsx(O,{className:"w-6 h-6"})})]}),it.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:it.jsxs("div",{className:"space-y-3",children:[it.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[it.jsx("div",{className:"md:col-span-2",children:it.jsx(St,{id:"name",name:"name",type:"text",label:"Location Name",value:r.name,onChange:i,error:l.name,required:!0})}),it.jsx("div",{className:"md:col-span-2",children:it.jsx(St,{id:"address",name:"address",type:"text",label:"Address",value:r.address,onChange:i,error:l.address,required:!0})}),it.jsx(St,{id:"city",name:"city",type:"text",label:"City (Optional)",value:r.city,onChange:i,error:l.city}),it.jsx(St,{id:"state",name:"state",type:"text",label:"State (Optional)",value:r.state,onChange:i,error:l.state}),it.jsx(St,{id:"zip_code",name:"zip_code",type:"text",label:"ZIP Code (Optional)",value:r.zip_code,onChange:i,error:l.zip_code}),it.jsx(St,{id:"country",name:"country",type:"text",label:"Country",value:r.country,onChange:i,error:l.country,required:!0}),it.jsx(St,{id:"phone",name:"phone",type:"tel",label:"Phone Number (Optional)",value:r.phone,onChange:i,error:l.phone}),it.jsx(St,{id:"email",name:"email",type:"email",label:"Email Address (Optional)",value:r.email,onChange:i,error:l.email})]}),it.jsxs("div",{children:[it.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-charcoal mb-1",children:"Description (Optional)"}),it.jsx("textarea",{id:"description",name:"description",rows:"2",value:r.description,onChange:i,placeholder:"Brief description of this location...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent resize-none"})]})]})}),it.jsxs("div",{className:"flex justify-end gap-3 px-6 py-4 border-t border-gray-200 bg-gray-50",children:[it.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 text-charcoal bg-gray-200 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),it.jsx("button",{type:"submit",onClick:e=>{e.preventDefault(),(()=>{const e={};return r.name.trim()||(e.name="Location name is required"),r.address.trim()||(e.address="Address is required"),r.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)&&(e.email="Please enter a valid email address"),r.phone&&!/^\+?[1-9]\d{1,14}$/.test(r.phone.replace(/[\s()-]/g,""))&&(e.phone="Please enter a valid phone number (international format with + supported)"),o(e),0===Object.keys(e).length})()&&s(r)},className:"px-4 py-2 bg-gold-gradient text-charcoal rounded-md hover:shadow-lg transition-all font-medium",children:t?"Update Location":"Add Location"})]})]})})},qt=({locations:t,setLocations:s})=>{const[a,r]=e.useState(!1),[n,l]=e.useState(null),[o,i]=e.useState(!1);e.useEffect(()=>{c()},[]);const c=async()=>{i(!0);try{const e=await vt.getLocations();e.success?s(e.locations):console.error("Error loading locations:",e.error)}catch(e){console.error("Error loading locations:",e)}finally{i(!1)}};return it.jsxs("div",{children:[it.jsxs("div",{className:"flex justify-between items-center mb-6",children:[it.jsx("h2",{className:"text-xl font-semibold text-charcoal",children:"Location Management"}),it.jsxs("button",{onClick:()=>r(!0),className:"bg-gold-gradient text-charcoal px-4 py-2 rounded-md hover:shadow-lg transition-all flex items-center gap-2 whitespace-nowrap",children:[it.jsx(I,{className:"w-4 h-4"}),"Add Location"]})]}),it.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(e=>it.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[it.jsxs("div",{className:"flex items-start justify-between mb-4",children:[it.jsxs("div",{className:"flex items-center gap-3",children:[it.jsx("div",{className:"p-2 rounded-lg "+(e.active?"bg-green-100":"bg-gray-100"),children:it.jsx(k,{className:"w-5 h-5 "+(e.active?"text-green-600":"text-gray-400")})}),it.jsxs("div",{children:[it.jsx("h3",{className:"font-semibold text-charcoal",children:e.name}),it.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full "+(e.active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.active?"Active":"Inactive"})]})]}),it.jsxs("div",{className:"flex space-x-2",children:[it.jsx("button",{onClick:()=>l(e),className:"text-gold hover:text-gold-dark",children:it.jsx(D,{className:"w-4 h-4"})}),it.jsx("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this location? This action cannot be undone."))try{const a=await vt.deleteLocation(e);if(a.success){const a=t.filter(t=>t.id!==e);s(a),alert("Location deleted successfully!")}else alert(`Failed to delete location: ${a.error}`)}catch(a){console.error("Error deleting location:",a),alert(`Error deleting location: ${a.message}`)}})(e.id),className:"text-red-600 hover:text-red-900",children:it.jsx(L,{className:"w-4 h-4"})})]})]}),it.jsxs("div",{className:"space-y-2 mb-4",children:[it.jsxs("p",{className:"text-sm text-charcoal/70",children:[it.jsx("strong",{children:"Address:"})," ",e.address]}),e.phone&&it.jsxs("p",{className:"text-sm text-charcoal/70",children:[it.jsx("strong",{children:"Phone:"})," ",e.phone]}),e.email&&it.jsxs("p",{className:"text-sm text-charcoal/70",children:[it.jsx("strong",{children:"Email:"})," ",e.email]})]}),it.jsx("button",{onClick:()=>(async e=>{const a=t.find(t=>t.id===e);if(a)try{const r=await vt.updateLocation(e,{...a,active:!a.active});if(r.success){const r=t.map(t=>t.id===e?{...t,active:!t.active}:t);s(r),alert(`Location ${a.active?"deactivated":"activated"} successfully!`)}else alert(`Failed to update location: ${r.error}`)}catch(r){console.error("Error toggling location status:",r),alert(`Error updating location: ${r.message}`)}})(e.id),className:"w-full py-2 px-4 rounded-md text-sm font-medium transition-colors "+(e.active?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"),children:e.active?"Deactivate":"Activate"})]},e.id))}),0===t.length&&it.jsxs("div",{className:"text-center py-12",children:[it.jsx(k,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),it.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No locations found"}),it.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by adding your first location."}),it.jsx("button",{onClick:()=>r(!0),className:"bg-gold-gradient text-charcoal px-4 py-2 rounded-md hover:shadow-lg transition-all",children:"Add Location"})]}),(a||n)&&it.jsx(Ft,{location:n,onSave:n?e=>(async(e,a)=>{try{const r=await vt.updateLocation(e,a);if(r.success){const a=t.map(t=>t.id===e?r.location:t);s(a),l(null),alert("Location updated successfully!")}else alert(`Failed to update location: ${r.error}`)}catch(r){console.error("Error updating location:",r),alert(`Error updating location: ${r.message}`)}})(n.id,e):async e=>{try{const a=await vt.createLocation(e);a.success?(s([...t,a.location]),r(!1),alert("Location added successfully!")):alert(`Failed to add location: ${a.error}`)}catch(a){console.error("Error adding location:",a),alert(`Error adding location: ${a.message}`)}},onClose:()=>{r(!1),l(null)}})]})},Mt=e=>{if(!e)return 0;const t=new Date(e),s=new Date-t;return Math.floor(s/864e5)},$t=e=>{if(e<30)return`${e} day${1!==e?"s":""}`;if(e<365){const t=Math.floor(e/30);return`${t} month${1!==t?"s":""}`}{const t=Math.floor(e/365),s=Math.floor(e%365/30);return`${t} year${1!==t?"s":""}${s>0?` ${s} month${1!==s?"s":""}`:""}`}},zt=e=>{const t=(e=>{if(!e)return null;const t=new Date(e),s=Mt(e),a=[{days:30,label:"1 Month"},{days:90,label:"3 Months"},{days:180,label:"6 Months"},{days:365,label:"1 Year"},{days:730,label:"2 Years"},{days:1095,label:"3 Years"},{days:1460,label:"4 Years"},{days:1825,label:"5 Years"}];for(const r of a)if(s<r.days){const e=new Date(t);return e.setDate(e.getDate()+r.days),{milestone:r.label,date:e,daysRemaining:r.days-s}}return null})(e);if(!t)return!1;const s=new Date,a=t.date-s,r=Math.ceil(a/864e5);return r<=7&&r>=0},Ut=e=>{if(!e)return[];const t=Mt(e);return[{days:30,label:"1 Month"},{days:90,label:"3 Months"},{days:180,label:"6 Months"},{days:365,label:"1 Year"},{days:730,label:"2 Years"},{days:1095,label:"3 Years"},{days:1460,label:"4 Years"},{days:1825,label:"5 Years"}].filter(e=>t>=e.days)},Bt=e=>{if(!e.trainingAssignments)return[];const t=new Date;return e.trainingAssignments.filter(e=>{if(!e.dueDate)return!1;if(e.completedAt)return!1;const s=new Date(e.dueDate);return t>s})},Vt=e=>{const t={assigned:0,completed:0,overdue:0,pending:0};return e.trainingAssignments&&(t.assigned=e.trainingAssignments.length,t.completed=e.trainingAssignments.filter(e=>e.completedAt).length,t.overdue=Bt(e).length,t.pending=t.assigned-t.completed),t},Ht=({isOpen:t,onClose:s,onEmployeeAdded:a,locations:r})=>{const[n,l]=e.useState({first_name:"",last_name:"",email:"",password:"",confirmPassword:"",phone:"",position:"",department:"",location_id:""}),[o,i]=e.useState(!1),[c,d]=e.useState({}),[m,u]=e.useState(!1),[x,h]=e.useState(!1);e.useEffect(()=>{t&&(l({first_name:"",last_name:"",email:"",password:"",confirmPassword:"",phone:"",position:"",department:"",location_id:""}),d({}))},[t]);const b=e=>{const{name:t,value:s}=e.target;l(e=>({...e,[t]:s})),c[t]&&d(e=>({...e,[t]:null}))},y=()=>{o||s()};return t?it.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4 backdrop-blur-sm",onClick:e=>{e.target===e.currentTarget&&y()},children:it.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden border border-gray-200",children:[it.jsx("div",{className:"bg-gradient-to-r from-brand-navy to-brand-navy/90 px-8 py-6 border-b border-gold/20",children:it.jsxs("div",{className:"flex justify-between items-center",children:[it.jsxs("div",{children:[it.jsx("h3",{className:"text-xl font-bold font-display text-cream",children:"Add New Employee"}),it.jsx("p",{className:"text-sm text-cream/80 mt-1",children:"Create employee account with direct dashboard access"})]}),it.jsx("button",{onClick:y,disabled:o,className:"text-cream/60 hover:text-cream hover:bg-cream/10 rounded-lg p-2 transition-all duration-200 disabled:opacity-50",title:"Close",children:it.jsx(O,{className:"w-6 h-6"})})]})}),it.jsx("div",{className:"p-8 overflow-y-auto",style:{maxHeight:"calc(90vh - 120px)"},children:it.jsxs("form",{onSubmit:async e=>{e.preventDefault();const t=(()=>{const e={};return n.first_name?.trim()||(e.first_name="First name is required"),n.last_name?.trim()||(e.last_name="Last name is required"),n.email?.trim()||(e.email="Email is required"),n.password?.trim()||(e.password="Password is required"),n.confirmPassword?.trim()||(e.confirmPassword="Please confirm password"),n.phone?.trim()||(e.phone="Phone number is required"),n.position?.trim()||(e.position="Position is required"),n.location_id||(e.location_id="Location is required"),n.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)&&(e.email="Please enter a valid email address"),n.password&&n.password.length<6&&(e.password="Password must be at least 6 characters"),n.password&&n.confirmPassword&&n.password!==n.confirmPassword&&(e.confirmPassword="Passwords do not match"),n.phone&&!/^[\+]?[\d\s\-\(\)\.\_]{7,}$/.test(n.phone.trim())&&(e.phone="Please enter a valid phone number (7+ digits)"),e})();if(Object.keys(t).length>0)d(t);else{i(!0);try{const e={first_name:n.first_name.trim(),last_name:n.last_name.trim(),email:n.email.trim().toLowerCase(),password:n.password,phone:n.phone.trim().replace(/[^\d\+\s\-\(\)]/g,""),position:n.position.trim(),department:n.department?.trim()||"Front of House",location_id:parseInt(n.location_id)},t=await vt.createEmployee(e);t.success?(ft.showSuccess("Employee created successfully!"),a(t.employee),s()):t.errors&&"object"==typeof t.errors?d(t.errors):ft.showError(t.error||"Failed to create employee")}catch(r){console.error("Error creating employee:",r),ft.showError("Failed to create employee: "+r.message)}finally{i(!1)}}},className:"space-y-6",children:[it.jsxs("div",{children:[it.jsxs("h4",{className:"text-lg font-medium text-charcoal mb-4 flex items-center gap-2",children:[it.jsx(F,{className:"w-5 h-5 text-gold"}),"Personal Information"]}),it.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal mb-2",children:"First Name *"}),it.jsx("input",{type:"text",name:"first_name",value:n.first_name,onChange:b,className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent transition-all "+(c.first_name?"border-red-300 bg-red-50":"border-gray-300"),placeholder:"Enter first name"}),c.first_name&&it.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center gap-1",children:[it.jsx(q,{className:"w-4 h-4"}),c.first_name]})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal mb-2",children:"Last Name *"}),it.jsx("input",{type:"text",name:"last_name",value:n.last_name,onChange:b,className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent transition-all "+(c.last_name?"border-red-300 bg-red-50":"border-gray-300"),placeholder:"Enter last name"}),c.last_name&&it.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center gap-1",children:[it.jsx(q,{className:"w-4 h-4"}),c.last_name]})]})]})]}),it.jsxs("div",{children:[it.jsxs("h4",{className:"text-lg font-medium text-charcoal mb-4 flex items-center gap-2",children:[it.jsx(v,{className:"w-5 h-5 text-gold"}),"Contact Information"]}),it.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal mb-2",children:"Email *"}),it.jsx("input",{type:"email",name:"email",value:n.email,onChange:b,className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent transition-all "+(c.email?"border-red-300 bg-red-50":"border-gray-300"),placeholder:"employee@restaurant.com"}),c.email&&it.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center gap-1",children:[it.jsx(q,{className:"w-4 h-4"}),c.email]})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal mb-2",children:"Phone Number *"}),it.jsx("input",{type:"tel",name:"phone",value:n.phone,onChange:b,className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent transition-all "+(c.phone?"border-red-300 bg-red-50":"border-gray-300"),placeholder:"+1 555 123 4567"}),c.phone&&it.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center gap-1",children:[it.jsx(q,{className:"w-4 h-4"}),c.phone]})]})]})]}),it.jsxs("div",{children:[it.jsxs("h4",{className:"text-lg font-medium text-charcoal mb-4 flex items-center gap-2",children:[it.jsx(F,{className:"w-5 h-5 text-gold"}),"Account Security"]}),it.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal mb-2",children:"Password *"}),it.jsxs("div",{className:"relative",children:[it.jsx("input",{type:m?"text":"password",name:"password",value:n.password,onChange:b,className:"w-full px-4 py-3 pr-12 border rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent transition-all "+(c.password?"border-red-300 bg-red-50":"border-gray-300"),placeholder:"Enter password"}),it.jsx("button",{type:"button",onClick:()=>u(!m),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 transition-colors",title:m?"Hide password":"Show password",children:m?it.jsx(g,{className:"w-5 h-5"}):it.jsx(p,{className:"w-5 h-5"})})]}),c.password&&it.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center gap-1",children:[it.jsx(q,{className:"w-4 h-4"}),c.password]})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal mb-2",children:"Confirm Password *"}),it.jsxs("div",{className:"relative",children:[it.jsx("input",{type:x?"text":"password",name:"confirmPassword",value:n.confirmPassword,onChange:b,className:"w-full px-4 py-3 pr-12 border rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent transition-all "+(c.confirmPassword?"border-red-300 bg-red-50":"border-gray-300"),placeholder:"Confirm password"}),it.jsx("button",{type:"button",onClick:()=>h(!x),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 transition-colors",title:x?"Hide password":"Show password",children:x?it.jsx(g,{className:"w-5 h-5"}):it.jsx(p,{className:"w-5 h-5"})})]}),c.confirmPassword&&it.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center gap-1",children:[it.jsx(q,{className:"w-4 h-4"}),c.confirmPassword]})]})]})]}),it.jsxs("div",{children:[it.jsxs("h4",{className:"text-lg font-medium text-charcoal mb-4 flex items-center gap-2",children:[it.jsx(f,{className:"w-5 h-5 text-gold"}),"Work Information"]}),it.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal mb-2",children:"Position *"}),it.jsx("input",{type:"text",name:"position",value:n.position,onChange:b,className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent transition-all "+(c.position?"border-red-300 bg-red-50":"border-gray-300"),placeholder:"e.g. Cook"}),c.position&&it.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center gap-1",children:[it.jsx(q,{className:"w-4 h-4"}),c.position]})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal mb-2",children:"Department"}),it.jsxs("select",{name:"department",value:n.department,onChange:b,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent transition-all",children:[it.jsx("option",{value:"",children:"Select Department"}),it.jsx("option",{value:"Front of House",children:"Front of House"}),it.jsx("option",{value:"Back of House",children:"Back of House"})]})]})]}),it.jsxs("div",{className:"mt-4",children:[it.jsxs("label",{className:"block text-sm font-medium text-charcoal mb-2",children:[it.jsx(k,{className:"w-4 h-4 inline mr-1"}),"Location *"]}),it.jsxs("select",{name:"location_id",value:n.location_id,onChange:b,className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent transition-all "+(c.location_id?"border-red-300 bg-red-50":"border-gray-300"),children:[it.jsx("option",{value:"",children:"Select Location"}),r&&r.map(e=>it.jsx("option",{value:e.id,children:e.name},e.id))]}),c.location_id&&it.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center gap-1",children:[it.jsx(q,{className:"w-4 h-4"}),c.location_id]})]})]}),it.jsxs("div",{className:"flex gap-4 pt-4 border-t",children:[it.jsx("button",{type:"button",onClick:y,disabled:o,className:"flex-1 px-6 py-3 border border-gray-300 text-charcoal rounded-lg hover:bg-gray-50 transition-all disabled:opacity-50",children:"Cancel"}),it.jsx("button",{type:"submit",disabled:o,className:"flex-1 px-6 py-3 bg-brand-navy text-cream rounded-lg hover:bg-brand-navy/90 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:o?it.jsxs(it.Fragment,{children:[it.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-cream"}),"Creating..."]}):it.jsxs(it.Fragment,{children:[it.jsx(M,{className:"w-4 h-4"}),"Create Employee"]})})]})]})})]})}):null},Wt=()=>{const[t,s]=e.useState([]),[a,r]=e.useState(null),[n,l]=e.useState(!1),[o,i]=e.useState(!0),[c,d]=e.useState(null),[m,u]=e.useState(null),[x,h]=e.useState(null),[g,f]=e.useState([]),[b,y]=e.useState(!1),[j,v]=e.useState(!1);e.useEffect(()=>{(async()=>{try{i(!0),d(null);const e=await vt.getEmployees();e.success?s(e.employees||[]):(d(e.error||"Failed to load employees"),ft.showError("Failed to load employees: "+(e.error||"Unknown error")))}catch(e){d("Failed to load employees"),ft.showError("Failed to load employees: "+e.message)}finally{i(!1)}})(),(async()=>{try{h(null);const e=await vt.getEmployeeStatistics();e.success&&e.statistics?u(M(e.statistics)):e.success||h(e.error||"Failed to load employee statistics")}catch(e){h(e.message)}})(),(async()=>{try{const e=await vt.getLocations();e.success?f(e.locations||[]):console.error("Failed to load locations:",e.error)}catch(e){console.error("Error loading locations:",e)}})()},[]);const N=async(e,n)=>{try{let l;if("approve"===n)l=await vt.approveEmployee(e);else if("reject"===n){const t=prompt("Please provide a reason for rejection:");if(!t)return;l=await vt.rejectEmployee(e,t)}if(l.success){const n=t.map(t=>t.id===e?l.employee:t);s(n),ft.showSuccess(l.message||"Employee status updated successfully"),a&&a.id===e&&r(l.employee)}else ft.showError(l.error||"Failed to update employee status")}catch(l){ft.showError("Failed to update employee status: "+l.message)}},w=async(e,n)=>{try{let l;if("pause"===n){const t=prompt("Reason for pausing (optional):")||void 0;l=await vt.pauseEmployee(e,t)}else if("resume"===n)l=await vt.resumeEmployee(e);else if("deactivate"===n){const t=prompt("Reason for marking inactive (optional):")||void 0;l=await vt.deactivateEmployee(e,t)}else"activate"===n&&(l=await vt.activateEmployee(e));if(l?.success){const o=t.map(t=>t.id===e?l.employee||{...t,status:"activate"===n?"approved":"deactivate"===n?"inactive":"pause"===n?"paused":"approved"}:t);s(o),a&&a.id===e&&r(l.employee||o.find(t=>t.id===e)),ft.showSuccess(l.message||"Employee status updated")}else ft.showError(l?.error||"Failed to update employee")}catch(l){ft.showError("Failed to update employee: "+l.message)}},k=e=>{r(e),l(!0)},S=e=>{const t=(e?.status||"").toLowerCase(),s=(e?.stage||"").toLowerCase();return"approved"===t||"active"===t||e?.can_access_dashboard?"ACTIVE":"paused"===t||s.includes("paused")?"PAUSED":"rejected"===t||"inactive"===t?"INACTIVE":s.includes("interview")||t.includes("interview")?"INTERVIEW":("pending_approval"===t||s.includes("questionnaire"),"NEW")},A=e=>e.employee_type||e.type||e.role||"Not Set",T=e=>{const t=e.personal_info||e.profile_data?.personal_info||e.personalInfo||{},s=Object.keys(t||{}).length>0&&Object.values(t).some(e=>!!e);return it.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-lg text-xs font-semibold border "+(s?"bg-green-50 text-green-700 border-green-200":"bg-amber-50 text-amber-700 border-amber-200"),children:s?"Complete":"Incomplete"})},P=e=>{const t=e.onboarding_progress?.status||e.stage?.replace(/_/g," ")||e.status?.replace(/_/g," ")||"Not started",s=t.toLowerCase();let a="bg-gray-50 text-gray-700 border-gray-200";return s.includes("complete")||"approved"===s?a="bg-green-50 text-green-700 border-green-200":s.includes("in progress")||s.includes("interview")?a="bg-blue-50 text-blue-700 border-blue-200":s.includes("paused")?a="bg-orange-50 text-orange-700 border-orange-200":(s.includes("rejected")||s.includes("inactive"))&&(a="bg-red-50 text-red-700 border-red-200"),it.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-lg text-xs font-semibold border ${a}`,children:t})},O=e=>e.hireDate||e.hired_at||e.approved_at||e.created_at||e.createdAt||null,D=e=>{const t=O(e);return t?new Date(t).toLocaleDateString():""},L=e=>{const t=O(e);if(!t)return"";const s=Mt(t);return $t(s)},F=e=>"number"==typeof e&&Number.isFinite(e)?e:"string"!=typeof e||""===e.trim()||isNaN(Number(e))?null:Number(e),M=e=>{const t=(...t)=>{for(const s of t){const t=e?.[s],a=F(t);if(null!==a)return a;const r=e&&"string"==typeof s?e[s.toLowerCase?.()]:void 0,n=F(r);if(null!==n)return n}return null},s=t("total","total_employees"),a=t("NEW","new","new_employees","pending","pending_approval"),r=t("INTERVIEW","interview","in_interview"),n=t("ACTIVE","active","approved"),l=t("PAUSED","paused")??0,o=[t("INACTIVE","inactive"),t("rejected"),t("disabled")].filter(e=>null!==e),i=o.length?o.reduce((e,t)=>e+t,0):null;return{total:s??[a,r,n,l,i].filter(e=>null!==e).reduce((e,t)=>e+t,0),NEW:a,INTERVIEW:r,ACTIVE:n,PAUSED:l,INACTIVE:i}},J={NEW:0,INTERVIEW:0,ACTIVE:0,PAUSED:0,INACTIVE:0};t.forEach(e=>{const t=S(e);J[t]=(J[t]||0)+1});const G=(e,t)=>{const s=F(e);return null!==s?s:t},K={NEW:G(m?.NEW,J.NEW),INTERVIEW:G(m?.INTERVIEW,J.INTERVIEW),ACTIVE:G(m?.ACTIVE,J.ACTIVE),PAUSED:G(m?.PAUSED,J.PAUSED),INACTIVE:G(m?.INACTIVE,J.INACTIVE)},Y=F(m?.total)??t.length;return it.jsxs("div",{className:"space-y-6",children:[it.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[it.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-brand-navy to-brand-navy/90 border-b border-gold/20",children:it.jsxs("div",{className:"flex flex-col xs:flex-row xs:items-center xs:justify-between gap-3",children:[it.jsxs("div",{children:[it.jsx("h2",{className:"text-xl font-bold font-display text-cream",children:"Employee Management"}),it.jsx("p",{className:"text-sm text-cream/80 mt-1",children:"Manage employee profiles and status"})]}),it.jsxs("button",{onClick:()=>y(!0),className:"w-full xs:w-auto inline-flex items-center justify-center gap-2 px-4 py-2 md:px-5 md:py-2.5 bg-gold text-brand-navy rounded-lg hover:bg-gold/90 transition-all duration-200 font-medium text-sm md:text-base",title:"Add new employee with direct dashboard access",children:[it.jsx(I,{className:"w-4 h-4"}),"Add Employee"]})]})}),it.jsx("div",{className:"px-6 py-4",children:it.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-4 mobile-grid",children:[it.jsxs("div",{className:"bg-white rounded-xl border border-gold/20 shadow-sm hover:shadow transition-all p-4",children:[it.jsxs("div",{className:"flex items-start justify-between mb-3",children:[it.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:it.jsx($,{className:"w-5 h-5 text-blue-600"})}),it.jsx("span",{className:"text-[11px] font-semibold px-2 py-0.5 rounded-full bg-gray-50 text-gray-700 border border-gray-200",children:"TOTAL"})]}),it.jsx("div",{className:"text-2xl font-bold text-charcoal leading-none",children:Y}),it.jsx("div",{className:"text-sm text-charcoal/70",children:"Employees"})]}),it.jsxs("div",{className:"bg-white rounded-xl border border-gold/20 shadow-sm hover:shadow transition-all p-4",children:[it.jsxs("div",{className:"flex items-start justify-between mb-3",children:[it.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:it.jsx($,{className:"w-5 h-5 text-blue-600"})}),it.jsx("span",{className:"text-[11px] font-semibold px-2 py-0.5 rounded-full bg-blue-50 text-blue-700 border border-blue-200",children:"NEW"})]}),it.jsx("div",{className:"text-2xl font-bold text-charcoal leading-none",children:K.NEW}),it.jsx("div",{className:"text-sm text-charcoal/70",children:"Employees"})]}),it.jsxs("div",{className:"bg-white rounded-xl border border-gold/20 shadow-sm hover:shadow transition-all p-4",children:[it.jsxs("div",{className:"flex items-start justify-between mb-3",children:[it.jsx("div",{className:"p-2 bg-yellow-50 rounded-lg",children:it.jsx(E,{className:"w-5 h-5 text-yellow-600"})}),it.jsx("span",{className:"text-[11px] font-semibold px-2 py-0.5 rounded-full bg-yellow-50 text-yellow-700 border border-yellow-200",children:"INTERVIEW"})]}),it.jsx("div",{className:"text-2xl font-bold text-charcoal leading-none",children:K.INTERVIEW}),it.jsx("div",{className:"text-sm text-charcoal/70",children:"Employees"})]}),it.jsxs("div",{className:"bg-white rounded-xl border border-gold/20 shadow-sm hover:shadow transition-all p-4",children:[it.jsxs("div",{className:"flex items-start justify-between mb-3",children:[it.jsx("div",{className:"p-2 bg-green-50 rounded-lg",children:it.jsx(z,{className:"w-5 h-5 text-green-600"})}),it.jsx("span",{className:"text-[11px] font-semibold px-2 py-0.5 rounded-full bg-green-50 text-green-700 border border-green-200",children:"ACTIVE"})]}),it.jsx("div",{className:"text-2xl font-bold text-charcoal leading-none",children:K.ACTIVE}),it.jsx("div",{className:"text-sm text-charcoal/70",children:"Employees"})]}),it.jsxs("div",{className:"bg-white rounded-xl border border-gold/20 shadow-sm hover:shadow transition-all p-4",children:[it.jsxs("div",{className:"flex items-start justify-between mb-3",children:[it.jsx("div",{className:"p-2 bg-orange-50 rounded-lg",children:it.jsx(q,{className:"w-5 h-5 text-orange-600"})}),it.jsx("span",{className:"text-[11px] font-semibold px-2 py-0.5 rounded-full bg-orange-50 text-orange-700 border border-orange-200",children:"PAUSED"})]}),it.jsx("div",{className:"text-2xl font-bold text-charcoal leading-none",children:K.PAUSED}),it.jsx("div",{className:"text-sm text-charcoal/70",children:"Employees"})]}),it.jsxs("div",{className:"bg-white rounded-xl border border-gold/20 shadow-sm hover:shadow transition-all p-4",children:[it.jsxs("div",{className:"flex items-start justify-between mb-3",children:[it.jsx("div",{className:"p-2 bg-red-50 rounded-lg",children:it.jsx(U,{className:"w-5 h-5 text-red-600"})}),it.jsx("span",{className:"text-[11px] font-semibold px-2 py-0.5 rounded-full bg-red-50 text-red-700 border border-red-200",children:"INACTIVE"})]}),it.jsx("div",{className:"text-2xl font-bold text-charcoal leading-none",children:K.INACTIVE}),it.jsx("div",{className:"text-sm text-charcoal/70",children:"Employees"})]})]})}),it.jsx("div",{className:"overflow-x-auto",children:it.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[it.jsx("thead",{className:"bg-gray-50/80",children:it.jsxs("tr",{children:[it.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-charcoal uppercase tracking-wider",children:"Employee"}),it.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-charcoal uppercase tracking-wider",children:"Location"}),it.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-charcoal uppercase tracking-wider",children:"Employee Type"}),it.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-charcoal uppercase tracking-wider",children:"Personal Info"}),it.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-charcoal uppercase tracking-wider",children:"Onboarding"}),it.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-charcoal uppercase tracking-wider",children:"Joined"}),it.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-charcoal uppercase tracking-wider",children:"Tenure"}),it.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-charcoal uppercase tracking-wider",children:"Actions"})]})}),it.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:t.map(e=>{return it.jsxs("tr",{onClick:()=>k(e),className:"hover:bg-gold/5 hover:shadow-sm transition-all duration-200 cursor-pointer",children:[it.jsx("td",{className:"px-6 py-5 whitespace-nowrap",children:it.jsxs("div",{children:[it.jsxs("div",{className:"text-sm font-semibold font-body text-charcoal",children:[e.personalInfo?.firstName||e.first_name," ",e.personalInfo?.lastName||e.last_name]}),it.jsxs("div",{className:"text-xs text-charcoal/60 font-medium",children:["ID: ",String(e.id).slice(-8)]}),it.jsx("div",{className:"text-xs text-charcoal/70 font-medium mt-1",children:e.email})]})}),it.jsx("td",{className:"px-6 py-5 whitespace-nowrap text-sm text-charcoal",children:(t=e,t.location?.name||t.location||t.department||"Not Assigned")}),it.jsx("td",{className:"px-6 py-5 whitespace-nowrap text-sm text-charcoal",children:A(e)}),it.jsx("td",{className:"px-6 py-5 whitespace-nowrap",children:T(e)}),it.jsx("td",{className:"px-6 py-5 whitespace-nowrap",children:P(e)}),it.jsx("td",{className:"px-6 py-5 whitespace-nowrap text-sm text-charcoal",children:D(e)}),it.jsx("td",{className:"px-6 py-5 whitespace-nowrap text-sm text-charcoal",children:L(e)}),it.jsx("td",{className:"px-6 py-5 whitespace-nowrap text-sm font-medium",children:it.jsxs("div",{className:"flex items-center space-x-3",children:[it.jsx("button",{onClick:t=>{t.stopPropagation(),k(e)},className:"p-2 text-gold hover:text-gold-dark hover:bg-gold/10 rounded-lg transition-all duration-200",title:"View Details",children:it.jsx(p,{className:"w-4 h-4"})}),("pending_approval"===e.status||"questionnaire_completed"===e.stage)&&it.jsxs(it.Fragment,{children:[it.jsx("button",{onClick:t=>{t.stopPropagation(),N(e.id,"approve")},className:"text-green-600 hover:text-green-900 p-2 rounded-lg",title:"Approve Employee",children:it.jsx(z,{className:"w-4 h-4"})}),it.jsx("button",{onClick:t=>{t.stopPropagation(),N(e.id,"reject")},className:"text-red-600 hover:text-red-900 p-2 rounded-lg",title:"Reject Employee",children:it.jsx(U,{className:"w-4 h-4"})})]})]})})]},e.id);var t})})]})}),o&&it.jsxs("div",{className:"text-center py-12",children:[it.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-navy mx-auto mb-4"}),it.jsx("p",{className:"text-gray-500",children:"Loading employees..."})]}),c&&it.jsxs("div",{className:"text-center py-12",children:[it.jsx(q,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),it.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Loading Employees"}),it.jsx("p",{className:"text-red-500 mb-4",children:c}),it.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-brand-navy text-cream rounded-lg hover:bg-brand-navy/90",children:"Retry"})]}),!o&&!c&&0===t.length&&it.jsxs("div",{className:"text-center py-12",children:[it.jsx($,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),it.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No employees found"}),it.jsx("p",{className:"text-gray-500",children:"Employees will appear here after they complete onboarding."})]})]}),n&&a&&it.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4 backdrop-blur-sm",onClick:()=>{l(!1),r(null)},children:it.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-7xl w-full max-h-[95vh] sm:max-h-[90vh] overflow-hidden border border-gray-200 flex flex-col",onClick:e=>e.stopPropagation(),children:[it.jsxs("div",{className:"bg-gradient-to-r from-brand-navy to-brand-navy/90 px-4 sm:px-8 py-4 sm:py-6 border-b border-gold/20 relative flex-shrink-0",children:[it.jsx("button",{onClick:()=>{l(!1),r(null)},className:"absolute top-4 right-4 text-cream/60 hover:text-cream hover:bg-cream/10 rounded-lg p-2 transition-all duration-200 z-10",title:"Close",children:it.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:it.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),it.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 pr-12",children:[it.jsxs("div",{className:"min-w-0",children:[it.jsxs("h3",{className:"text-xl font-bold font-display text-cream truncate",children:[a.personalInfo?.firstName||a.first_name," ",a.personalInfo?.lastName||a.last_name]}),it.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[it.jsx("p",{className:"text-sm text-cream/80",children:a.email}),it.jsx("div",{className:"transform scale-90 origin-left",children:(e=>{const t={NEW:{color:"bg-blue-100 text-blue-800",icon:$},INTERVIEW:{color:"bg-yellow-100 text-yellow-800",icon:E},ACTIVE:{color:"bg-green-100 text-green-800",icon:z},PAUSED:{color:"bg-orange-100 text-orange-800",icon:q},INACTIVE:{color:"bg-red-100 text-red-800",icon:U}},s=S(e),a=t[s]||t.INACTIVE,r=a.icon;return it.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-full ${a.color}`,children:[it.jsx(r,{className:"w-3 h-3"}),s]})})(a)})]})]}),it.jsx("div",{className:"flex items-start sm:items-center gap-2 w-full sm:w-auto justify-start sm:justify-end flex-wrap",children:it.jsxs("div",{className:"flex items-center gap-2 flex-wrap w-full sm:w-auto",children:[("pending_approval"===a.status||"questionnaire_completed"===a.stage)&&it.jsxs(it.Fragment,{children:[it.jsxs("button",{onClick:async()=>{await N(a.id,"approve"),l(!1),r(null)},className:"px-4 py-2 bg-green-100 text-green-800 text-sm font-medium rounded-lg hover:bg-green-200 transition-colors flex items-center gap-2",children:[it.jsx(C,{className:"w-4 h-4"}),"Approve Employee"]}),it.jsxs("button",{onClick:async()=>{await N(a.id,"reject"),l(!1),r(null)},className:"px-4 py-2 bg-red-100 text-red-800 text-sm font-medium rounded-lg hover:bg-red-200 transition-colors flex items-center gap-2",children:[it.jsx(U,{className:"w-4 h-4"}),"Reject Employee"]})]}),(()=>{const e=S(a);return"ACTIVE"===e?it.jsxs("div",{className:"flex items-center gap-2",children:[it.jsxs("button",{onClick:()=>w(a.id,"pause"),className:"px-3 py-2 bg-amber-100 text-amber-800 text-sm font-medium rounded-lg hover:bg-amber-200 transition-colors flex items-center gap-2",children:[it.jsx(B,{className:"w-4 h-4"})," Pause"]}),it.jsxs("button",{onClick:()=>w(a.id,"deactivate"),className:"px-3 py-2 bg-red-100 text-red-800 text-sm font-medium rounded-lg hover:bg-red-200 transition-colors flex items-center gap-2",children:[it.jsx(U,{className:"w-4 h-4"})," Mark Inactive"]})]}):"PAUSED"===e?it.jsxs("div",{className:"flex items-center gap-2",children:[it.jsxs("button",{onClick:()=>w(a.id,"resume"),className:"px-3 py-2 bg-green-100 text-green-800 text-sm font-medium rounded-lg hover:bg-green-200 transition-colors flex items-center gap-2",children:[it.jsx(V,{className:"w-4 h-4"})," Resume"]}),it.jsxs("button",{onClick:()=>w(a.id,"deactivate"),className:"px-3 py-2 bg-red-100 text-red-800 text-sm font-medium rounded-lg hover:bg-red-200 transition-colors flex items-center gap-2",children:[it.jsx(U,{className:"w-4 h-4"})," Mark Inactive"]})]}):"INACTIVE"===e?it.jsx("div",{className:"flex items-center gap-2",children:it.jsxs("button",{onClick:()=>w(a.id,"activate"),className:"px-3 py-2 bg-blue-100 text-blue-800 text-sm font-medium rounded-lg hover:bg-blue-200 transition-colors flex items-center gap-2",children:[it.jsx(H,{className:"w-4 h-4"})," Activate"]})}):null})()]})})]})]}),it.jsx("div",{className:"p-4 sm:p-8 overflow-y-auto scrollable-modal flex-1 min-h-0",children:it.jsxs("div",{className:"space-y-8",children:[a.questionnaire_responses&&it.jsxs("div",{className:"bg-white rounded-xl border-2 border-gold shadow-sm p-5",children:[it.jsxs("button",{onClick:()=>v(!j),className:"w-full flex items-center justify-between p-3 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors duration-200 border border-gray-200",children:[it.jsx("h4",{className:"font-medium text-charcoal text-left",children:"Questionnaire Responses"}),it.jsxs("div",{className:"flex items-center gap-2",children:[it.jsxs("span",{className:"text-xs text-charcoal/60",children:[Object.keys(a.questionnaire_responses).length," response(s)"]}),j?it.jsx(R,{className:"w-4 h-4 text-charcoal transition-transform duration-200"}):it.jsx(W,{className:"w-4 h-4 text-charcoal transition-transform duration-200"})]})]}),j&&it.jsx("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 animate-in slide-in-from-top-2 duration-200",children:Object.entries(a.questionnaire_responses).map(([e,t])=>it.jsxs("div",{className:"bg-white rounded-xl border border-gold/20 shadow-sm hover:shadow transition-all p-4 min-w-0",children:[it.jsxs("div",{className:"text-sm font-semibold text-charcoal mb-3",children:["Question ",e]}),it.jsx("div",{className:"text-sm text-charcoal/80",children:"object"==typeof t?it.jsx("div",{className:"space-y-2",children:Object.entries(t).map(([e,t])=>it.jsxs("div",{className:"flex flex-col min-w-0",children:[it.jsxs("span",{className:"font-medium text-charcoal/70 capitalize text-xs mb-1",children:[e.replace(/_/g," "),":"]}),it.jsx("span",{className:"text-charcoal break-all overflow-hidden leading-tight",children:String(t)})]},e))}):it.jsx("span",{className:"text-charcoal break-all overflow-hidden leading-tight",children:t||"No response"})})]},e))})]}),it.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.questionnaire_files&&a.questionnaire_files.length>0&&it.jsxs("div",{className:"bg-white rounded-xl border-2 border-gold shadow-sm p-5",children:[it.jsx("h4",{className:"font-medium text-charcoal mb-4",children:"Uploaded Files"}),it.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:a.questionnaire_files.map(e=>it.jsxs("div",{className:"bg-white rounded-xl border border-gold/20 shadow-sm hover:shadow transition-all p-4 min-w-0",children:[it.jsxs("div",{className:"flex items-start justify-between mb-3",children:[it.jsx("div",{className:"p-2 bg-brand-navy/10 rounded-lg",children:it.jsx(Q,{className:"w-5 h-5 text-brand-navy"})}),it.jsx("button",{onClick:async()=>{const t=await vt.downloadFile(e.id,e.original_filename);t.success||ft.showError("Failed to download file: "+t.error)},className:"p-2 text-brand-navy hover:bg-brand-navy/10 rounded-lg transition-colors",title:"Download File",children:it.jsx(_,{className:"w-4 h-4"})})]}),it.jsxs("div",{className:"space-y-2",children:[it.jsx("div",{className:"text-sm font-semibold text-charcoal leading-tight break-words",children:e.original_filename}),it.jsxs("div",{className:"text-xs text-charcoal/60 space-y-1",children:[it.jsxs("div",{children:["Question ",e.question_index]}),it.jsxs("div",{children:[(e.file_size/1024).toFixed(1)," KB  ",e.mime_type]}),it.jsxs("div",{children:["Uploaded ",new Date(e.uploaded_at).toLocaleDateString()]})]})]})]},e.id))})]}),a.onboarding_progress&&it.jsxs("div",{className:"bg-white rounded-xl border-2 border-gold shadow-sm p-5",children:[it.jsx("h4",{className:"font-medium text-charcoal mb-4",children:"Onboarding Progress"}),it.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[it.jsxs("div",{className:"bg-white rounded-xl border border-gold/20 shadow-sm hover:shadow transition-all p-4",children:[it.jsx("div",{className:"text-xs font-semibold text-charcoal/70 mb-2",children:"Current Stage"}),it.jsx("div",{className:"text-sm font-medium text-charcoal capitalize",children:a.stage?.replace(/_/g," ")||"Unknown"})]}),it.jsxs("div",{className:"bg-white rounded-xl border border-gold/20 shadow-sm hover:shadow transition-all p-4",children:[it.jsx("div",{className:"text-xs font-semibold text-charcoal/70 mb-2",children:"Status"}),it.jsx("div",{className:"text-sm font-medium text-charcoal capitalize",children:a.status?.replace(/_/g," ")||"Unknown"})]}),it.jsxs("div",{className:"bg-white rounded-xl border border-gold/20 shadow-sm hover:shadow transition-all p-4",children:[it.jsx("div",{className:"text-xs font-semibold text-charcoal/70 mb-2",children:"Location"}),it.jsx("div",{className:"text-sm font-medium text-charcoal",children:a.location||"Not selected"})]}),it.jsxs("div",{className:"bg-white rounded-xl border border-gold/20 shadow-sm hover:shadow transition-all p-4",children:[it.jsx("div",{className:"text-xs font-semibold text-charcoal/70 mb-2",children:"Dashboard Access"}),it.jsx("div",{className:"text-sm font-medium text-charcoal",children:a.can_access_dashboard?"Yes":"No"})]}),a.approved_by&&it.jsxs("div",{className:"bg-white rounded-xl border border-gold/20 shadow-sm hover:shadow transition-all p-4 min-w-0",children:[it.jsx("div",{className:"text-xs font-semibold text-charcoal/70 mb-2",children:"Approved By"}),it.jsxs("div",{className:"space-y-1",children:[it.jsx("div",{className:"text-sm font-semibold text-charcoal leading-tight break-words",children:a.approved_by.name}),it.jsxs("div",{className:"text-xs text-charcoal/60 leading-snug break-all overflow-hidden",children:["(",a.approved_by.email,")"]})]})]}),a.approved_at&&it.jsxs("div",{className:"bg-white rounded-xl border border-gold/20 shadow-sm hover:shadow transition-all p-4 min-w-0",children:[it.jsx("div",{className:"text-xs font-semibold text-charcoal/70 mb-2",children:"Approved At"}),it.jsx("div",{className:"text-sm font-semibold text-charcoal whitespace-pre-line break-words leading-snug",children:new Date(a.approved_at).toLocaleString()})]})]})]})]}),(a.personalInfo||a.personal_info||a.profile_data&&a.profile_data.personal_info)&&it.jsxs("div",{className:"bg-white rounded-xl border-2 border-gold shadow-sm p-5",children:[it.jsx("h4",{className:"font-medium text-charcoal mb-4",children:"Personal Information"}),it.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:Object.entries(a.personal_info||a.profile_data?.personal_info||a.personalInfo||{}).map(([e,t])=>{const s=e.replace(/_/g," ").replace(/([A-Z])/g," $1").split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ");return it.jsxs("div",{className:"bg-white rounded-xl border border-gold/20 shadow-sm hover:shadow transition-all p-4",children:[it.jsx("div",{className:"text-xs font-semibold text-charcoal/70 mb-2",children:s}),it.jsx("div",{className:"text-sm font-medium text-charcoal",children:t||"Not provided"})]},e)})})]})]})})]})}),it.jsx(Ht,{isOpen:b,onClose:()=>y(!1),onEmployeeAdded:e=>{s(t=>[e,...t]);(async()=>{try{h(null);const e=await vt.getEmployeeStatistics();e.success&&e.statistics&&u(M(e.statistics))}catch(e){h(e.message)}})()},locations:g})]})},Qt={FOH:{id:"FOH",name:"Front of House",description:"Customer-facing operations and service",color:"purple",areas:{"dining-room":{id:"dining-room",name:"Dining Room",description:"Main dining area service",roles:[{id:"server",name:"Server",description:"Takes orders and serves customers"},{id:"host",name:"Host",description:"Greets and seats customers"},{id:"busser",name:"Busser",description:"Clears and sets tables"}]},patio:{id:"patio",name:"Patio",description:"Outdoor dining area service",roles:[{id:"server",name:"Server",description:"Takes orders and serves customers"},{id:"host",name:"Host",description:"Greets and seats customers"}]},bar:{id:"bar",name:"Bar",description:"Bar and beverage service",roles:[{id:"bartender",name:"Bartender",description:"Prepares and serves beverages"},{id:"barback",name:"Barback",description:"Supports bartender operations"},{id:"server",name:"Server",description:"Serves drinks to tables"}]}}},BOH:{id:"BOH",name:"Back of House",description:"Kitchen and food preparation operations",color:"orange",areas:{"kitchen-line":{id:"kitchen-line",name:"Kitchen Line",description:"Main cooking and food preparation",roles:[{id:"line-cook",name:"Line Cook",description:"Prepares food on the cooking line"},{id:"kitchen-staff",name:"Kitchen Staff",description:"General kitchen duties"},{id:"expediter",name:"Expediter",description:"Coordinates food orders"}]},"pizza-station":{id:"pizza-station",name:"Pizza Station",description:"Pizza preparation and cooking",roles:[{id:"pizza-cook",name:"Pizza Cook",description:"Prepares and cooks pizzas"},{id:"dough-prep",name:"Dough Prep",description:"Prepares pizza dough and toppings"}]},prep:{id:"prep",name:"Prep",description:"Food preparation and ingredient prep",roles:[{id:"prep-cook",name:"Prep Cook",description:"Prepares ingredients and components"},{id:"baker",name:"Baker",description:"Prepares bread and baked goods"},{id:"kitchen-staff",name:"Kitchen Staff",description:"General kitchen duties"}]},dishwasher:{id:"dishwasher",name:"Dishwasher",description:"Cleaning and sanitation",roles:[{id:"dishwasher",name:"Dishwasher",description:"Washes dishes and maintains cleanliness"},{id:"utility",name:"Utility",description:"General cleaning and maintenance"}]}}}},Jt=()=>Object.keys(Qt).map(e=>({id:e,...Qt[e]})),Gt=e=>Qt[e]||null,Kt=e=>{const t=Gt(e);return t?Object.keys(t.areas).map(s=>({id:s,departmentId:e,...t.areas[s]})):[]},Yt=(e,t=null)=>{if(t){const s=((e,t)=>{const s=Gt(e);return s&&s.areas[t]?{id:t,departmentId:e,...s.areas[t]}:null})(e,t);return s?s.roles:[]}const s=Gt(e);if(!s)return[];const a=[];return Object.values(s.areas).forEach(e=>{e.roles.forEach(e=>{a.find(t=>t.id===e.id)||a.push(e)})}),a},Xt=()=>({departments:[],areas:[],roles:[],primaryDepartment:null,primaryArea:null,primaryRole:null,isFlexible:!1,lastUpdated:(new Date).toISOString()}),Zt=e=>{const t=[];return e.departments&&0!==e.departments.length||t.push("At least one department must be assigned"),e.primaryDepartment||t.push("Primary department must be specified"),e.roles&&0!==e.roles.length||t.push("At least one role must be assigned"),{isValid:0===t.length,errors:t}},es=()=>{const[t,s]=e.useState([]),[a,r]=e.useState({}),[n,l]=e.useState({}),[o,i]=e.useState(null),[c,d]=e.useState(!1),[m,u]=e.useState("");e.useEffect(()=>{x();const e=()=>{h("department")},t=document.querySelector("[data-department-management]");if(t)return t.addEventListener("addDepartment",e),()=>{t.removeEventListener("addDepartment",e)}},[]);const x=()=>{const e=Jt();s(e),r({FOH:!0,BOH:!0})},h=(e,t=null)=>{u(e),i(t),d(!0)};return it.jsxs("div",{className:"space-y-6","data-department-management":!0,children:[it.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 department-stats-mobile",children:[it.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:it.jsxs("div",{className:"flex items-center gap-3",children:[it.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:it.jsx(J,{className:"w-5 h-5 text-blue-600"})}),it.jsxs("div",{children:[it.jsx("p",{className:"text-sm text-charcoal/70",children:"Total Departments"}),it.jsx("p",{className:"text-xl font-bold text-charcoal",children:t.length})]})]})}),it.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:it.jsxs("div",{className:"flex items-center gap-3",children:[it.jsx("div",{className:"p-2 bg-green-50 rounded-lg",children:it.jsx(k,{className:"w-5 h-5 text-green-600"})}),it.jsxs("div",{children:[it.jsx("p",{className:"text-sm text-charcoal/70",children:"Total Areas"}),it.jsx("p",{className:"text-xl font-bold text-charcoal",children:t.reduce((e,t)=>e+Object.keys(t.areas).length,0)})]})]})}),it.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:it.jsxs("div",{className:"flex items-center gap-3",children:[it.jsx("div",{className:"p-2 bg-purple-50 rounded-lg",children:it.jsx($,{className:"w-5 h-5 text-purple-600"})}),it.jsxs("div",{children:[it.jsx("p",{className:"text-sm text-charcoal/70",children:"Total Roles"}),it.jsx("p",{className:"text-xl font-bold text-charcoal",children:t.reduce((e,t)=>e+Object.values(t.areas).reduce((e,t)=>e+t.roles.length,0),0)})]})]})})]}),it.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[it.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-brand-navy to-brand-navy/90 border-b border-gold/20 mobile-navy-header",children:it.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3 sm:gap-0",children:[it.jsxs("div",{className:"flex-1 min-w-0",children:[it.jsx("h4",{className:"text-lg font-semibold font-display text-cream",children:"Organization Structure"}),it.jsx("p",{className:"text-sm text-cream/80",children:"Hierarchical view of departments, areas, and roles"})]}),it.jsxs("button",{onClick:()=>h("department"),className:"inline-flex items-center justify-center gap-2 px-4 py-2 bg-gold text-charcoal font-semibold rounded-lg hover:bg-gold/90 transition-colors w-full sm:w-auto",children:[it.jsx(I,{className:"w-4 h-4"}),it.jsx("span",{children:"Add Department"})]})]})}),it.jsx("div",{className:"p-4 md:p-6 overflow-x-auto",children:it.jsx("div",{className:"min-w-full",children:t.map(e=>it.jsxs("div",{className:"mb-6 last:mb-0",children:[it.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between p-3 md:p-4 bg-gradient-to-r from-gray-50 to-gray-50/50 rounded-lg border border-gray-200 mb-3 gap-3 sm:gap-0",children:[it.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[it.jsx("button",{onClick:()=>{return t=e.id,void r(e=>({...e,[t]:!e[t]}));var t},className:"p-1 hover:bg-gray-200 rounded transition-colors flex-shrink-0",children:a[e.id]?it.jsx(R,{className:"w-4 h-4 text-charcoal"}):it.jsx(W,{className:"w-4 h-4 text-charcoal"})}),it.jsx("div",{className:"p-2 rounded-lg flex-shrink-0 "+("purple"===e.color?"bg-purple-50":"bg-orange-50"),children:it.jsx(J,{className:"w-4 h-4 md:w-5 md:h-5 "+("purple"===e.color?"text-purple-600":"text-orange-600")})}),it.jsxs("div",{className:"min-w-0 flex-1",children:[it.jsx("h5",{className:"font-semibold text-charcoal text-sm md:text-base truncate",children:e.name}),it.jsx("p",{className:"text-xs text-charcoal/60 truncate",children:e.description})]})]}),it.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4",children:[it.jsx("div",{className:"text-left sm:text-right",children:(()=>{const t=(e=>{const t=Kt(e),s=t.reduce((e,t)=>e+t.roles.length,0);return{areas:t.length,roles:s}})(e.id);return it.jsxs("div",{className:"flex gap-4 text-xs",children:[it.jsxs("span",{className:"text-charcoal/70",children:[t.areas," Areas"]}),it.jsxs("span",{className:"text-charcoal/70",children:[t.roles," Roles"]})]})})()}),it.jsxs("div",{className:"flex gap-2 mobile-button-container",children:[it.jsx("button",{onClick:()=>h("area",e.id),className:"p-2 text-green-600 hover:bg-green-50 rounded transition-colors mobile-icon-button",title:"Add Area",children:it.jsx(I,{className:"w-4 h-4"})}),it.jsx("button",{className:"p-2 text-blue-600 hover:bg-blue-50 rounded transition-colors mobile-icon-button",children:it.jsx(G,{className:"w-4 h-4"})})]})]})]}),a[e.id]&&it.jsx("div",{className:"ml-4 md:ml-8 space-y-3",children:Kt(e.id).map(t=>{const s=`${e.id}-${t.id}`;return it.jsxs("div",{className:"border-l-2 border-gray-200 pl-3 md:pl-4",children:[it.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between p-3 bg-white rounded-lg border border-gray-100 hover:border-gray-300 transition-colors mb-2 gap-3 sm:gap-0",children:[it.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[it.jsx("button",{onClick:()=>(e=>{l(t=>({...t,[e]:!t[e]}))})(s),className:"p-1 hover:bg-gray-100 rounded transition-colors flex-shrink-0",children:n[s]?it.jsx(R,{className:"w-3 h-3 text-charcoal"}):it.jsx(W,{className:"w-3 h-3 text-charcoal"})}),it.jsx("div",{className:"p-1.5 bg-blue-50 rounded flex-shrink-0",children:it.jsx(k,{className:"w-3 h-3 md:w-4 md:h-4 text-blue-600"})}),it.jsxs("div",{className:"min-w-0 flex-1",children:[it.jsx("h6",{className:"font-medium text-charcoal text-sm truncate",children:t.name}),it.jsx("p",{className:"text-xs text-charcoal/60 truncate",children:t.description})]})]}),it.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[it.jsxs("span",{className:"text-xs text-charcoal/70",children:[(a=e.id,r=t.id,{roles:Yt(a,r).length}).roles," Roles"]}),it.jsxs("div",{className:"flex gap-2 mobile-button-container",children:[it.jsx("button",{onClick:()=>h("role",{departmentId:e.id,areaId:t.id}),className:"p-2 text-green-600 hover:bg-green-50 rounded transition-colors mobile-icon-button",title:"Add Role",children:it.jsx(I,{className:"w-3 h-3"})}),it.jsx("button",{className:"p-2 text-blue-600 hover:bg-blue-50 rounded transition-colors mobile-icon-button",children:it.jsx(G,{className:"w-3 h-3"})})]})]})]}),n[s]&&it.jsx("div",{className:"ml-4 md:ml-6 space-y-2",children:Yt(e.id,t.id).map(e=>it.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between p-3 bg-gray-50 rounded border border-gray-100 gap-3 sm:gap-0",children:[it.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[it.jsx("div",{className:"p-1 bg-green-50 rounded flex-shrink-0",children:it.jsx(z,{className:"w-3 h-3 text-green-600"})}),it.jsxs("div",{className:"min-w-0 flex-1",children:[it.jsx("span",{className:"text-sm font-medium text-charcoal block truncate",children:e.name}),it.jsx("p",{className:"text-xs text-charcoal/60 truncate",children:e.description})]})]}),it.jsx("button",{className:"p-2 text-blue-600 hover:bg-blue-50 rounded transition-colors mobile-icon-button self-start sm:self-center",children:it.jsx(G,{className:"w-3 h-3"})})]},e.id))})]},t.id);var a,r})})]},e.id))})})]}),c&&it.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:it.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 mobile-modal-padding",children:[it.jsxs("h3",{className:"text-lg font-semibold text-charcoal mb-4 mobile-modal-header",children:["Add ",m.charAt(0).toUpperCase()+m.slice(1)]}),it.jsx("p",{className:"text-sm text-charcoal/70 mb-4 mobile-subtitle",children:"This feature will be fully implemented in the next phase."}),it.jsxs("div",{className:"flex gap-3",children:[it.jsx("button",{onClick:()=>d(!1),className:"px-4 py-2 text-charcoal border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors mobile-secondary-button",children:"Cancel"}),it.jsx("button",{onClick:()=>d(!1),className:"px-4 py-2 bg-gold text-charcoal font-semibold rounded-lg hover:bg-gold/90 transition-colors mobile-primary-button mobile-gold-button",children:"Coming Soon"})]})]})})]})},ts=()=>{const[t,s]=e.useState([]),[a,r]=e.useState([]),[n,l]=e.useState(null),[o,i]=e.useState(!1),[c,d]=e.useState(!1),[m,u]=e.useState(null),[x,h]=e.useState(""),[g,f]=e.useState(""),[b,y]=e.useState(!1);e.useEffect(()=>{j()},[]);const j=async()=>{try{const e=await vt.getEmployees();if(e?.success){const t=(e.employees||[]).map(e=>({id:e.id,email:e.email,personalInfo:e.personal_info||e.personalInfo||{firstName:e.first_name||e.firstName,lastName:e.last_name||e.lastName},assignments:e.assignments||Xt()}));s(t)}else{const e=localStorage.getItem("employees");if(e){const t=JSON.parse(e).map(e=>({...e,assignments:e.assignments||Xt()}));s(t)}else s([])}}catch(e){const t=localStorage.getItem("employees");if(t){const e=JSON.parse(t).map(e=>({...e,assignments:e.assignments||Xt()}));s(e)}else s([])}r(Jt())},v=e=>e.assignments&&e.assignments.departments&&0!==e.assignments.departments.length?1===e.assignments.departments.length?e.assignments.departments[0]:`${e.assignments.departments[0]} +${e.assignments.departments.length-1}`:"Not Assigned",N=e=>{if(!e.assignments)return{status:"none",color:"gray"};return Zt(e.assignments).isValid?e.assignments.departments.length>1||e.assignments.roles.length>2?{status:"flexible",color:"blue"}:{status:"assigned",color:"green"}:{status:"incomplete",color:"red"}},w=t.filter(e=>{const t=!x||`${e.personalInfo?.firstName||""} ${e.personalInfo?.lastName||""}`.toLowerCase().includes(x.toLowerCase())||e.email.toLowerCase().includes(x.toLowerCase()),s=!g||e.assignments?.departments?.includes(g);return t&&s});return it.jsxs("div",{className:"space-y-6",children:[it.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:it.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[it.jsx("div",{className:"flex-1",children:it.jsxs("div",{className:"relative",children:[it.jsx(K,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),it.jsx("input",{type:"text",placeholder:"Search employees by name or email...",value:x,onChange:e=>h(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent"})]})}),it.jsx("div",{className:"w-full md:w-48",children:it.jsxs("select",{value:g,onChange:e=>f(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent",children:[it.jsx("option",{value:"",children:"All Departments"}),a.map(e=>it.jsx("option",{value:e.id,children:e.name},e.id))]})})]})}),it.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 role-stats-mobile",children:[{label:"Total Employees",value:t.length,color:"blue"},{label:"Fully Assigned",value:t.filter(e=>"assigned"===N(e).status).length,color:"green"},{label:"Multi-Role",value:t.filter(e=>"flexible"===N(e).status).length,color:"purple"},{label:"Incomplete",value:t.filter(e=>"incomplete"===N(e).status).length,color:"red"}].map((e,t)=>it.jsx("div",{className:"role-stat-card bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:it.jsxs("div",{className:"flex items-center gap-3",children:[it.jsx("div",{className:"p-2 rounded-lg "+("blue"===e.color?"bg-blue-50":"green"===e.color?"bg-green-50":"purple"===e.color?"bg-purple-50":"bg-red-50"),children:it.jsx($,{className:"w-5 h-5 "+("blue"===e.color?"text-blue-600":"green"===e.color?"text-green-600":"purple"===e.color?"text-purple-600":"text-red-600")})}),it.jsxs("div",{children:[it.jsx("p",{className:"text-sm text-charcoal/70",children:e.label}),it.jsx("p",{className:"text-xl font-bold text-charcoal",children:e.value})]})]})},t))}),it.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[it.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-brand-navy to-brand-navy/90 border-b border-gold/20",children:it.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3 sm:gap-0",children:[it.jsxs("div",{className:"flex-1 min-w-0",children:[it.jsx("h4",{className:"text-lg font-semibold font-display text-cream",children:"Employee Role Assignments"}),it.jsx("p",{className:"text-sm text-cream/80",children:"Manage role assignments and scheduling eligibility"})]}),it.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[b&&it.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2 text-amber-300",children:[it.jsx(q,{className:"w-4 h-4"}),it.jsx("span",{className:"text-sm font-medium",children:"Unsaved Changes"})]}),it.jsxs("button",{onClick:()=>{localStorage.setItem("employees",JSON.stringify(t)),y(!1)},disabled:!b,className:"inline-flex items-center justify-center gap-2 px-4 py-2 rounded-lg font-semibold transition-colors w-full sm:w-auto "+(b?"bg-gold text-charcoal hover:bg-gold/90":"bg-gray-200 text-gray-500 cursor-not-allowed"),children:[it.jsx(M,{className:"w-4 h-4"}),it.jsx("span",{children:"Save Changes"})]})]})]})}),it.jsx("div",{className:"overflow-x-auto",children:it.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[it.jsx("thead",{className:"bg-gray-50/80",children:it.jsxs("tr",{children:[it.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-charcoal uppercase tracking-wider",children:"Employee"}),it.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-charcoal uppercase tracking-wider",children:"Departments"}),it.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-charcoal uppercase tracking-wider",children:"Current Roles"}),it.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-charcoal uppercase tracking-wider",children:"Assignment Status"}),it.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-charcoal uppercase tracking-wider",children:"Last Updated"}),it.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-charcoal uppercase tracking-wider",children:"Actions"})]})}),it.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:w.map(e=>{const t=N(e),s=(e=>e.assignments&&e.assignments.roles?e.assignments.roles:[])(e);return it.jsxs("tr",{className:"hover:bg-gold/5 hover:shadow-sm transition-all duration-200",children:[it.jsx("td",{className:"px-6 py-5 whitespace-nowrap",children:it.jsxs("div",{children:[it.jsxs("div",{className:"text-sm font-semibold font-body text-charcoal",children:[e.personalInfo?.firstName," ",e.personalInfo?.lastName]}),it.jsxs("div",{className:"text-xs text-charcoal/60 font-medium",children:["ID: ",String(e.id).slice(-8)]}),it.jsx("div",{className:"text-xs text-charcoal/70 font-medium mt-1",children:e.email})]})}),it.jsx("td",{className:"px-6 py-5 whitespace-nowrap",children:it.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-lg text-xs font-semibold bg-blue-50 text-blue-700 border border-blue-200",children:v(e)})}),it.jsx("td",{className:"px-6 py-5 whitespace-nowrap",children:s.length>0?it.jsxs("button",{onClick:()=>{u(e),d(!0)},className:"inline-flex items-center gap-1 px-3 py-1.5 text-xs font-semibold text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg border border-blue-200 transition-all duration-200",title:"View Roles Details",children:[it.jsx(p,{className:"w-3 h-3"}),s.length," Role",s.length>1?"s":""]}):it.jsx("span",{className:"text-xs text-charcoal/60",children:"No roles assigned"})}),it.jsx("td",{className:"px-6 py-5 whitespace-nowrap",children:it.jsxs("div",{className:"flex items-center gap-2",children:["assigned"===t.status&&it.jsxs(it.Fragment,{children:[it.jsx(C,{className:"w-4 h-4 text-green-600"}),it.jsx("span",{className:"text-xs font-medium text-green-700",children:"Complete"})]}),"flexible"===t.status&&it.jsxs(it.Fragment,{children:[it.jsx(z,{className:"w-4 h-4 text-blue-600"}),it.jsx("span",{className:"text-xs font-medium text-blue-700",children:"Multi-Role"})]}),"incomplete"===t.status&&it.jsxs(it.Fragment,{children:[it.jsx(Y,{className:"w-4 h-4 text-red-600"}),it.jsx("span",{className:"text-xs font-medium text-red-700",children:"Incomplete"})]}),"none"===t.status&&it.jsxs(it.Fragment,{children:[it.jsx(q,{className:"w-4 h-4 text-gray-600"}),it.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Not Set"})]})]})}),it.jsx("td",{className:"px-6 py-5 whitespace-nowrap text-xs text-charcoal/70",children:e.assignments?.lastUpdated?new Date(e.assignments.lastUpdated).toLocaleDateString():"Never"}),it.jsx("td",{className:"px-6 py-5 whitespace-nowrap",children:it.jsx("button",{onClick:()=>{l(e),i(!0)},className:"inline-flex items-center gap-1 px-3 py-1.5 text-xs font-semibold text-gold hover:text-gold-dark hover:bg-gold/10 rounded-lg transition-all duration-200 mobile-secondary-button",title:"Manage Assignments",children:it.jsx(X,{className:"w-3 h-3"})})})]},e.id)})})]})}),0===w.length&&it.jsxs("div",{className:"text-center py-12",children:[it.jsx($,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),it.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No employees found"}),it.jsx("p",{className:"text-gray-500",children:"Try adjusting your search or filter criteria."})]})]}),o&&n&&it.jsx(ss,{employee:n,departments:a,onClose:()=>{i(!1),l(null)},onSave:e=>{((e,t)=>{s(s=>s.map(s=>s.id===e?{...s,assignments:{...t,lastUpdated:(new Date).toISOString()}}:s)),y(!0)})(n.id,e),i(!1),l(null)}}),c&&m&&it.jsx(as,{employee:m,departments:a,onClose:()=>{d(!1),u(null)}})]})},ss=({employee:t,departments:s,onClose:a,onSave:r})=>{const[n,l]=e.useState(t.assignments||Xt()),[o,i]=e.useState([]);return it.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4 backdrop-blur-sm",children:it.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden border border-gray-200",children:[it.jsx("div",{className:"bg-gradient-to-r from-brand-navy to-brand-navy/90 px-8 py-6 border-b border-gold/20 mobile-navy-header mobile-modal-padding",children:it.jsxs("div",{className:"flex justify-between items-center",children:[it.jsxs("div",{children:[it.jsx("h3",{className:"text-xl font-bold font-display text-cream mobile-modal-header",children:"Role Assignment"}),it.jsxs("p",{className:"text-sm text-cream/80 mt-1 mobile-subtitle",children:[t.personalInfo?.firstName," ",t.personalInfo?.lastName]})]}),it.jsx("button",{onClick:a,className:"text-cream/60 hover:text-cream hover:bg-cream/10 rounded-lg p-2 transition-all duration-200 mobile-icon-button",children:it.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:it.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),it.jsxs("div",{className:"p-4 sm:p-8 space-y-8 overflow-y-auto",style:{maxHeight:"calc(90vh - 220px)"},children:[o.length>0&&it.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[it.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[it.jsx(q,{className:"w-5 h-5 text-red-600"}),it.jsx("h4",{className:"font-medium text-red-800",children:"Assignment Issues"})]}),it.jsx("ul",{className:"list-disc list-inside space-y-1",children:o.map((e,t)=>it.jsx("li",{className:"text-sm text-red-700",children:e},t))})]}),it.jsxs("div",{children:[it.jsx("h4",{className:"font-medium text-charcoal mb-3",children:"Departments"}),it.jsx("div",{className:"space-y-3",children:s.map(e=>it.jsxs("label",{className:"flex items-center gap-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[it.jsx("input",{type:"checkbox",checked:n.departments.includes(e.id),onChange:t=>((e,t)=>{const s=t?[...n.departments,e]:n.departments.filter(t=>t!==e);l(e=>({...e,departments:s,primaryDepartment:1===s.length?s[0]:e.primaryDepartment}))})(e.id,t.target.checked),className:"w-4 h-4 text-gold border-gray-300 rounded focus:ring-gold"}),it.jsx("div",{className:"p-2 rounded-lg "+("purple"===e.color?"bg-purple-50":"bg-orange-50"),children:it.jsx(J,{className:"w-4 h-4 "+("purple"===e.color?"text-purple-600":"text-orange-600")})}),it.jsxs("div",{children:[it.jsx("span",{className:"font-medium text-charcoal",children:e.name}),it.jsx("p",{className:"text-xs text-charcoal/60",children:e.description})]})]},e.id))})]}),n.departments.map(e=>{const t=s.find(t=>t.id===e);return t?it.jsxs("div",{children:[it.jsxs("h4",{className:"font-medium text-charcoal mb-3",children:[t.name," - Areas & Roles"]}),it.jsx("div",{className:"space-y-4",children:Kt(e).map(t=>it.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[it.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[it.jsx(k,{className:"w-4 h-4 text-blue-600"}),it.jsx("h5",{className:"font-medium text-charcoal",children:t.name})]}),it.jsx("div",{className:"grid grid-cols-2 gap-2",children:Yt(e,t.id).map(e=>it.jsxs("label",{className:"flex items-center gap-2 p-2 hover:bg-gray-50 rounded cursor-pointer",children:[it.jsx("input",{type:"checkbox",checked:n.roles.includes(e.name),onChange:t=>((e,t)=>{const s=t?[...n.roles,e]:n.roles.filter(t=>t!==e);l(e=>({...e,roles:s,primaryRole:1===s.length?s[0]:e.primaryRole}))})(e.name,t.target.checked),className:"w-3 h-3 text-gold border-gray-300 rounded focus:ring-gold"}),it.jsx("span",{className:"text-sm text-charcoal",children:e.name})]},e.id))})]},t.id))})]},e):null})]}),it.jsx("div",{className:"px-4 sm:px-8 py-4 border-t border-gray-200 bg-white",children:it.jsxs("div",{className:"flex flex-col gap-4",children:[it.jsx("div",{className:"text-xs text-charcoal/60 text-center sm:text-left",children:"* Assignments determine shift eligibility in the scheduling system"}),it.jsx("div",{className:"flex justify-center sm:justify-end",children:it.jsx("button",{onClick:()=>{const e=Zt(n);e.isValid?r(n):i(e.errors)},className:"w-full sm:w-auto px-6 py-3 bg-gold text-charcoal font-semibold rounded-lg hover:bg-gold/90 transition-colors",children:"Save Assignment"})})]})})]})})},as=({employee:e,departments:t,onClose:s})=>{const a=e.assignments?.roles||[],r=e.assignments?.departments||[],n=[];return r.forEach(e=>{const s=t.find(t=>t.id===e);if(!s)return;Kt(e).forEach(t=>{const r=Yt(e,t.id).filter(e=>a.includes(e.name)).map(e=>e.name);r.length>0&&n.push({department:s.name,departmentColor:s.color,area:t.name,roles:r})})}),it.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4 backdrop-blur-sm",children:it.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-hidden border border-gray-200",children:[it.jsx("div",{className:"bg-gradient-to-r from-brand-navy to-brand-navy/90 px-6 py-4 border-b border-gold/20 mobile-navy-header mobile-modal-padding",children:it.jsxs("div",{className:"flex justify-between items-center",children:[it.jsxs("div",{children:[it.jsx("h3",{className:"text-lg font-bold font-display text-cream mobile-modal-header",children:"Role Details"}),it.jsxs("p",{className:"text-sm text-cream/80 mt-1 mobile-subtitle",children:[e.personalInfo?.firstName," ",e.personalInfo?.lastName]})]}),it.jsx("button",{onClick:s,className:"text-cream/60 hover:text-cream hover:bg-cream/10 rounded-lg p-2 transition-all duration-200 mobile-icon-button",children:it.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:it.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),it.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto",style:{maxHeight:"calc(80vh - 140px)"},children:[it.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[it.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[it.jsx("div",{className:"p-2 rounded-lg bg-blue-50",children:it.jsx($,{className:"w-4 h-4 text-blue-600"})}),it.jsx("div",{children:it.jsx("h4",{className:"font-medium text-charcoal",children:"Assignment Summary"})})]}),it.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[it.jsxs("div",{children:[it.jsx("span",{className:"text-charcoal/60",children:"Total Roles:"}),it.jsx("span",{className:"ml-2 font-semibold text-charcoal",children:a.length})]}),it.jsxs("div",{children:[it.jsx("span",{className:"text-charcoal/60",children:"Departments:"}),it.jsx("span",{className:"ml-2 font-semibold text-charcoal",children:r.length})]})]})]}),n.length>0?it.jsxs("div",{className:"space-y-4",children:[it.jsx("h4",{className:"font-medium text-charcoal",children:"Current Role Assignments"}),n.map((e,t)=>it.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[it.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[it.jsx("div",{className:"p-2 rounded-lg "+("purple"===e.departmentColor?"bg-purple-50":"bg-orange-50"),children:it.jsx(J,{className:"w-4 h-4 "+("purple"===e.departmentColor?"text-purple-600":"text-orange-600")})}),it.jsxs("div",{children:[it.jsx("h5",{className:"font-medium text-charcoal",children:e.department}),it.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[it.jsx(k,{className:"w-3 h-3 text-blue-600"}),it.jsx("span",{className:"text-sm text-blue-700 font-medium",children:e.area})]})]})]}),it.jsx("div",{className:"flex flex-wrap gap-2",children:e.roles.map((e,t)=>it.jsx("span",{className:"inline-flex items-center px-3 py-1 text-sm font-medium rounded-lg bg-green-50 text-green-700 border border-green-200",children:e},t))})]},t))]}):it.jsxs("div",{className:"text-center py-8",children:[it.jsx(q,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),it.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Roles Assigned"}),it.jsx("p",{className:"text-gray-500",children:"This employee currently has no role assignments."})]})]}),it.jsx("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end mobile-modal-padding",children:it.jsx("button",{onClick:s,className:"px-4 py-2 bg-gold text-charcoal font-semibold rounded-lg hover:bg-gold/90 transition-colors mobile-primary-button mobile-gold-button",children:"Close"})})]})})},rs=()=>{const[t,s]=e.useState([]),[a,r]=e.useState(!1),[n,l]=e.useState(!1),[o,i]=e.useState(null),c=e.useCallback(async()=>{try{l(!0),i(null);const e=await pt.getAdminNotifications();if(!e.success)throw new Error(e.error||"Failed to load notifications");{const t=(e.notifications||[]).filter(e=>e&&"object"==typeof e).sort((e,t)=>{try{const s=new Date(e.created_at||e.timestamp);return new Date(t.created_at||t.timestamp)-s}catch(s){return console.error("Error sorting notifications by date:",s),0}}).slice(0,20);s(t)}}catch(e){console.error("Error loading notifications:",e),i("Failed to load notifications"),s([])}finally{l(!1)}},[]);e.useEffect(()=>{c();const e=setInterval(()=>{try{c()}catch(e){console.error("Error in notification interval:",e)}},1e4);return()=>{clearInterval(e)}},[c]);const d=async e=>{try{const a=await pt.markAdminNotificationAsRead(e);if(a.success){const a=t.map(t=>t.id===e?{...t,is_read:!0,read:!0}:t);s(a)}else console.error("Failed to mark notification as read:",a.error)}catch(a){console.error("Error marking notification as read:",a)}},m=async()=>{try{const e=t.filter(e=>!e.is_read&&!e.read);for(const t of e)await pt.markAdminNotificationAsRead(t.id);const a=t.map(e=>({...e,is_read:!0,read:!0}));s(a)}catch(e){console.error("Error marking all notifications as read:",e)}},u=async e=>{try{const a=await pt.deleteAdminNotification(e);if(a.success){const a=t.filter(t=>t.id!==e);s(a)}else console.error("Failed to delete notification:",a.error)}catch(a){console.error("Error deleting notification:",a)}},x=t.filter(e=>!e.is_read&&!e.read).length,h=e=>{const t=new Date(e||Date.now()),s=new Date,a=Math.floor((s-t)/6e4);return a<1?"Just now":a<60?`${a}m ago`:a<1440?`${Math.floor(a/60)}h ago`:t.toLocaleDateString()};return it.jsxs("div",{className:"relative",children:[it.jsxs("button",{onClick:()=>r(!a),className:"relative p-2 text-cream/80 hover:text-cream transition-colors",children:[it.jsx(Z,{className:"w-6 h-6"}),x>0&&it.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:x>9?"9+":x})]}),a&&it.jsxs(it.Fragment,{children:[it.jsxs("div",{className:"absolute right-0 top-full mt-2 w-80 bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-hidden notification-desktop-modal",children:[it.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[it.jsx("h3",{className:"font-semibold text-charcoal",children:"Notifications"}),it.jsxs("div",{className:"flex items-center gap-2",children:[x>0&&it.jsx("button",{onClick:m,className:"text-xs text-gold hover:text-gold-dark",children:"Mark all read"}),it.jsx("button",{onClick:()=>r(!1),className:"text-gray-400 hover:text-gray-600",children:it.jsx(O,{className:"w-4 h-4"})})]})]}),it.jsx("div",{className:"max-h-80 overflow-y-auto",children:0===t.length?it.jsx("div",{className:"p-8 text-center text-gray-500",children:it.jsx("p",{children:"No notifications yet"})}):t.map(e=>it.jsx("div",{className:"p-4 border-b border-gray-100 hover:bg-gray-50 transition-colors "+(e.is_read||e.read?"":"bg-blue-50"),children:it.jsx("div",{className:"flex items-start gap-3",children:it.jsx("div",{className:"flex-1 min-w-0",children:it.jsx("div",{className:"flex items-start justify-between",children:it.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[it.jsxs("div",{className:"flex items-start justify-between",children:[it.jsx("p",{className:"font-medium text-charcoal text-sm break-words flex-1",children:e.title}),it.jsx("button",{onClick:()=>u(e.id),className:"text-gray-400 hover:text-red-600 ml-2 flex-shrink-0",children:it.jsx(O,{className:"w-3 h-3"})})]}),it.jsx("p",{className:"text-charcoal/70 text-sm mt-1 break-words",children:e.message}),it.jsxs("div",{className:"flex items-center justify-between mt-2",children:[it.jsx("p",{className:"text-xs text-gray-500",children:h(e.created_at||e.timestamp)}),!e.is_read&&!e.read&&it.jsx("button",{onClick:()=>d(e.id),className:"text-xs text-gold hover:text-gold-dark",children:"Mark read"})]})]})})})})},e.id))})]}),it.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4 notification-mobile-modal",onClick:()=>r(!1),children:it.jsxs("div",{className:"w-full max-w-sm bg-white rounded-lg shadow-xl border border-gray-200 max-h-[70vh] overflow-hidden",onClick:e=>e.stopPropagation(),children:[it.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-gray-200",children:[it.jsx("h3",{className:"font-semibold text-charcoal",children:"Notifications"}),it.jsxs("div",{className:"flex items-center gap-1",children:[x>0&&it.jsx("button",{onClick:m,className:"text-xs text-gold hover:text-gold-dark px-2 py-1 bg-gold/10 rounded",children:"Mark all read"}),it.jsx("button",{onClick:()=>r(!1),className:"text-gray-400 hover:text-gray-600 p-1",children:it.jsx(O,{className:"w-4 h-4"})})]})]}),it.jsx("div",{className:"max-h-[50vh] overflow-y-auto",children:0===t.length?it.jsx("div",{className:"p-6 text-center text-gray-500",children:it.jsx("p",{children:"No notifications yet"})}):t.map(e=>it.jsx("div",{className:"p-3 border-b border-gray-100 hover:bg-gray-50 transition-colors "+(e.is_read||e.read?"":"bg-blue-50"),children:it.jsx("div",{className:"flex items-start gap-2",children:it.jsx("div",{className:"flex-1 min-w-0",children:it.jsx("div",{className:"space-y-2",children:it.jsxs("div",{children:[it.jsxs("div",{className:"flex items-start justify-between",children:[it.jsx("p",{className:"font-medium text-charcoal text-sm break-words flex-1",children:e.title}),it.jsx("button",{onClick:()=>u(e.id),className:"text-gray-400 hover:text-red-600 ml-2 flex-shrink-0",children:it.jsx(O,{className:"w-3 h-3"})})]}),it.jsx("p",{className:"text-charcoal/70 text-sm mt-1 break-words",children:e.message}),it.jsxs("div",{className:"flex items-center justify-between mt-1",children:[it.jsx("p",{className:"text-xs text-gray-500",children:h(e.created_at||e.timestamp)}),!e.is_read&&!e.read&&it.jsx("button",{onClick:()=>d(e.id),className:"text-xs text-gold hover:text-gold-dark px-2 py-1 bg-gold/10 rounded",children:"Mark read"})]})]})})})})},e.id))})]})})]})]})};class ns extends r.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t),this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:it.jsx("div",{className:"relative",children:it.jsxs("button",{className:"relative p-2 text-cream/80 hover:text-cream transition-colors",title:"Notifications temporarily unavailable",children:[it.jsx(q,{className:"w-6 h-6 text-orange-500"}),it.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-2 h-2"})]})}):this.props.children}}const ls=()=>{const[t,s]=e.useState([]),[a,r]=e.useState(null),[n,l]=e.useState(!1),[o,i]=e.useState(!0),[c,d]=e.useState(""),m=async()=>{try{i(!0),d("");const e=await vt.getOnboardingPages();e.success?s(e.pages||[]):(d(e.error||"Failed to load onboarding pages"),console.error("Failed to load onboarding pages:",e.error))}catch(e){d("Error loading onboarding pages"),console.error("Error loading onboarding pages:",e)}finally{i(!1)}};e.useEffect(()=>{m()},[]);return it.jsxs("div",{className:"space-y-6",children:[it.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[it.jsxs("div",{className:"flex-1",children:[it.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-charcoal",children:"Onboarding Content Management"}),it.jsx("p",{className:"text-charcoal/70 text-sm",children:"Manage onboarding pages and content that employees must acknowledge"})]}),it.jsxs("button",{onClick:()=>l(!0),disabled:o,className:"bg-gold-gradient text-charcoal px-4 py-2 rounded-md hover:shadow-lg transition-all flex items-center gap-2 w-full sm:w-auto justify-center disabled:opacity-50 disabled:cursor-not-allowed",children:[it.jsx(I,{className:"w-4 h-4"}),"Add Page"]})]}),c&&it.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:it.jsxs("div",{className:"flex items-start gap-3",children:[it.jsx(q,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),it.jsxs("div",{children:[it.jsx("h4",{className:"font-medium text-red-800",children:"Error"}),it.jsx("p",{className:"text-red-700 text-sm mt-1",children:c})]})]})}),o&&it.jsxs("div",{className:"flex items-center justify-center py-12",children:[it.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gold"}),it.jsx("span",{className:"ml-3 text-charcoal/70",children:"Loading onboarding pages..."})]}),!o&&it.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6",children:t.sort((e,t)=>e.order-t.order).map(e=>it.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-200",children:it.jsxs("div",{className:"p-4 sm:p-6",children:[it.jsxs("div",{className:"flex flex-col sm:flex-row items-start justify-between mb-4 gap-3 sm:gap-0",children:[it.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[it.jsx("div",{className:"p-2 rounded-lg flex-shrink-0 "+(e.active?"bg-green-100":"bg-gray-100"),children:it.jsx(ee,{className:"w-5 h-5 "+(e.active?"text-green-600":"text-gray-400")})}),it.jsxs("div",{className:"min-w-0 flex-1",children:[it.jsx("h3",{className:"font-medium text-charcoal line-clamp-2",children:e.title}),it.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-1",children:[it.jsx("span",{className:"text-xs px-2 py-1 rounded-full "+(e.active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"),children:e.active?"Active":"Inactive"}),it.jsxs("span",{className:"text-xs text-gray-500",children:["Order: ",e.order]})]})]})]}),it.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto justify-end",children:[it.jsx("button",{onClick:()=>(async e=>{try{d("");const t=await vt.toggleOnboardingPageStatus(e);t.success?await m():d(t.error||"Failed to toggle page status")}catch(t){d("Error toggling page status"),console.error("Error toggling page status:",t)}})(e.id),className:"p-2 rounded-md "+(e.active?"text-orange-600 hover:bg-orange-50":"text-green-600 hover:bg-green-50"),title:e.active?"Deactivate":"Activate",children:e.active?it.jsx(q,{className:"w-4 h-4"}):it.jsx(C,{className:"w-4 h-4"})}),it.jsx("button",{onClick:()=>r(e),className:"p-2 text-gold hover:bg-gold/10 rounded-md",title:"Edit",children:it.jsx(D,{className:"w-4 h-4"})}),it.jsx("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this onboarding page?"))try{d("");const t=await vt.deleteOnboardingPage(e);t.success?await m():d(t.error||"Failed to delete page")}catch(t){d("Error deleting page"),console.error("Error deleting page:",t)}})(e.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-md",title:"Delete",children:it.jsx(O,{className:"w-4 h-4"})})]})]}),it.jsx("div",{className:"bg-gray-50 p-3 rounded-lg mb-4",children:it.jsx("div",{className:"prose prose-sm max-w-none text-charcoal/80 line-clamp-3",dangerouslySetInnerHTML:{__html:e.content.substring(0,200)+(e.content.length>200?"...":"")}})}),it.jsxs("div",{className:"text-sm text-charcoal/60",children:["Content length: ",e.content.length," characters"]})]})},e.id))}),(n||a)&&it.jsx(os,{page:a,onSave:async e=>{try{let s;if(d(""),a)s=await vt.updateOnboardingPage(a.id,e);else{const a={...e,active:!0,order:t.length+1};s=await vt.createOnboardingPage(a)}s.success?(await m(),r(null),l(!1)):d(s.error||"Failed to save page")}catch(s){d("Error saving page"),console.error("Error saving page:",s)}},onClose:()=>{l(!1),r(null)}})]})},os=({page:t,onSave:s,onClose:a})=>{const[r,n]=e.useState({title:t?.title||"",content:t?.content||"",icon:t?.icon||"BookOpen",order:t?.order||1});return it.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:e=>{e.target===e.currentTarget&&a()},children:it.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[it.jsxs("div",{className:"flex justify-between items-center px-4 sm:px-6 py-4 border-b border-gray-200",children:[it.jsx("h3",{className:"text-base sm:text-lg font-semibold text-charcoal line-clamp-1 flex-1 mr-4",children:t?"Edit Onboarding Page":"Add New Onboarding Page"}),it.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 transition-colors flex-shrink-0",type:"button",children:it.jsx(O,{className:"w-6 h-6"})})]}),it.jsx("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:it.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[it.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[it.jsxs("div",{className:"sm:col-span-2",children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal/70 mb-2",children:"Page Title *"}),it.jsx("input",{type:"text",value:r.title,onChange:e=>n({...r,title:e.target.value}),placeholder:"Enter page title",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent"})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal/70 mb-2",children:"Display Order"}),it.jsx("input",{type:"number",min:"1",value:r.order,onChange:e=>n({...r,order:parseInt(e.target.value)||1}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent"})]})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal/70 mb-2",children:"Icon"}),it.jsx("div",{className:"grid grid-cols-2 sm:flex sm:flex-wrap gap-2",children:["BookOpen","Calendar","Award","User","FileText","Bell","Clock","Shield"].map(e=>it.jsx("button",{onClick:()=>n({...r,icon:e}),className:"px-3 py-2 rounded-lg text-sm font-medium transition-colors "+(r.icon===e?"bg-gold text-charcoal":"bg-gray-100 text-charcoal hover:bg-gray-200"),children:e},e))})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal/70 mb-2",children:"Page Content * (HTML supported)"}),it.jsx("textarea",{value:r.content,onChange:e=>n({...r,content:e.target.value}),placeholder:"Enter the page content (HTML tags are supported)",rows:8,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent font-mono text-sm resize-none"}),it.jsx("p",{className:"text-xs text-charcoal/60 mt-1",children:"You can use HTML tags for formatting. Common tags: <h3>, <p>, <ul>, <li>, <strong>, <em>"})]}),r.content&&it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal/70 mb-2",children:"Content Preview"}),it.jsx("div",{className:"border border-gray-300 rounded-lg p-4 bg-gray-50",children:it.jsx("div",{className:"prose max-w-none text-charcoal",dangerouslySetInnerHTML:{__html:r.content}})})]})]})}),it.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 px-4 sm:px-6 py-4 border-t border-gray-200 bg-gray-50",children:[it.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 bg-gray-200 text-charcoal rounded-md hover:bg-gray-300 transition-colors order-2 sm:order-1",children:"Cancel"}),it.jsxs("button",{type:"button",onClick:()=>{r.title.trim()&&r.content.trim()?s(r):alert("Please fill in all required fields")},className:"px-6 py-2 bg-gold-gradient text-charcoal rounded-md hover:shadow-lg transition-all flex items-center justify-center gap-2 font-medium order-1 sm:order-2",children:[it.jsx(M,{className:"w-4 h-4"}),it.jsx("span",{children:t?"Update Page":"Create Page"})]})]})]})})},is=()=>{const[t,s]=e.useState([]),[a,r]=e.useState(null),[n,l]=e.useState(!1),[o,i]=e.useState(null),[c,d]=e.useState(null),[m,u]=e.useState(null),[x,h]=e.useState([]),[g,f]=e.useState(!1),[b,y]=e.useState(null),[j,v]=e.useState(["Safety","Service","Technology","Operations","Leadership","Other"]);e.useEffect(()=>{w(),N(),k()},[]);const N=async()=>{try{const e=await vt.getEmployees();if(e.success){const t=e.employees||[];h(t)}else console.error("Failed to load employees:",e.error),y("Failed to load employees")}catch(e){console.error("Error loading employees:",e),y("Failed to load employees")}},w=async()=>{try{f(!0),y(null);const e=await vt.getTrainingModules();e.success?s(e.modules||[]):(console.error("Failed to load training modules:",e.error),y(e.error||"Failed to load training modules"))}catch(e){console.error("Error loading training modules:",e),y("Failed to load training modules")}finally{f(!1)}},k=async()=>{try{const e=await vt.getTrainingCategories();if(e.success&&e.categories.length>0){const t=e.categories,s=[...new Set([...t,...["Safety","Service","Technology","Operations","Leadership","Other"]])];v(s)}}catch(e){console.error("Error loading categories:",e)}};return it.jsxs("div",{className:"space-y-6",children:[it.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[it.jsxs("div",{className:"flex-1",children:[it.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-charcoal",children:"Training Module Management"}),it.jsx("p",{className:"text-charcoal/70 text-sm",children:"Create and manage training modules with QR code access control"})]}),it.jsxs("button",{onClick:()=>l(!0),className:"bg-gold-gradient text-charcoal px-4 py-2 rounded-md hover:shadow-lg transition-all flex items-center justify-center gap-2 w-full sm:w-auto",children:[it.jsx(I,{className:"w-4 h-4"}),"Add Module"]})]}),it.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[it.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsxs("div",{children:[it.jsx("p",{className:"text-xs sm:text-sm font-medium text-charcoal/70",children:"Total Modules"}),it.jsx("p",{className:"text-xl sm:text-2xl font-bold text-charcoal",children:t.length})]}),it.jsx(V,{className:"w-6 sm:w-8 h-6 sm:h-8 text-blue-600"})]})}),it.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsxs("div",{children:[it.jsx("p",{className:"text-xs sm:text-sm font-medium text-charcoal/70",children:"Active Modules"}),it.jsx("p",{className:"text-xl sm:text-2xl font-bold text-green-600",children:t.filter(e=>e.active).length})]}),it.jsx(C,{className:"w-6 sm:w-8 h-6 sm:h-8 text-green-600"})]})}),it.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsxs("div",{children:[it.jsx("p",{className:"text-xs sm:text-sm font-medium text-charcoal/70",children:"Categories"}),it.jsx("p",{className:"text-xl sm:text-2xl font-bold text-charcoal",children:[...new Set(t.map(e=>e.category))].length})]}),it.jsx(T,{className:"w-6 sm:w-8 h-6 sm:h-8 text-purple-600"})]})}),it.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsxs("div",{children:[it.jsx("p",{className:"text-xs sm:text-sm font-medium text-charcoal/70",children:"Total Duration"}),it.jsxs("p",{className:"text-lg sm:text-lg font-bold text-charcoal",children:[t.reduce((e,t)=>e+(parseInt(t.duration)||0),0)," min"]})]}),it.jsx(E,{className:"w-6 sm:w-8 h-6 sm:h-8 text-orange-600"})]})})]}),it.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 sm:gap-6",children:t.sort((e,t)=>e.order-t.order).map(e=>it.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-200",children:it.jsxs("div",{className:"p-4 sm:p-6",children:[it.jsx("div",{className:"flex items-start justify-between mb-4",children:it.jsxs("div",{className:"flex items-start gap-2 sm:gap-3 flex-1",children:[it.jsx("div",{className:"p-2 rounded-lg "+(e.active?"bg-blue-100":"bg-gray-100"),children:it.jsx(V,{className:"w-4 h-4 sm:w-5 sm:h-5 "+(e.active?"text-blue-600":"text-gray-400")})}),it.jsxs("div",{className:"flex-1",children:[it.jsx("h3",{className:"font-medium text-charcoal text-sm sm:text-base",children:e.title}),it.jsxs("div",{className:"flex flex-wrap items-center gap-1 sm:gap-2 mt-1",children:[it.jsx("span",{className:"text-xs px-2 py-1 rounded-full "+(e.active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"),children:e.active?"Active":"Inactive"}),it.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-purple-100 text-purple-800",children:e.category})]})]})]})}),it.jsx("p",{className:"text-xs sm:text-sm text-charcoal/70 mb-3",children:e.description}),it.jsxs("div",{className:"space-y-2 text-xs text-charcoal/60 mb-4",children:[it.jsxs("div",{className:"flex justify-between items-center",children:[it.jsx("span",{children:"Duration:"}),it.jsx("span",{className:"font-medium",children:e.duration})]}),it.jsxs("div",{className:"flex justify-between items-start gap-2",children:[it.jsx("span",{className:"flex-shrink-0",children:"QR Code:"}),it.jsx("span",{className:"font-mono bg-gray-100 px-2 py-1 rounded text-xs break-all",children:e.qrCode})]}),it.jsxs("div",{className:"flex justify-between items-center",children:[it.jsx("span",{children:"Created:"}),it.jsx("span",{children:new Date(e.createdAt).toLocaleDateString()})]})]}),it.jsxs("div",{className:"space-y-3",children:[it.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2",children:[it.jsxs("button",{onClick:()=>i(e),className:"text-xs sm:text-sm text-blue-600 hover:text-blue-800 font-medium flex items-center gap-1",children:[it.jsx(p,{className:"w-3 h-3"}),it.jsx("span",{className:"hidden sm:inline",children:"Preview Content"}),it.jsx("span",{className:"sm:hidden",children:"Preview"})]}),x.length>0&&it.jsxs("div",{className:"flex items-center gap-2 text-xs text-charcoal/60",children:[it.jsx($,{className:"w-3 h-3"}),it.jsxs("span",{children:[x.filter(t=>t.training_assignments?.some(t=>t.module_id===e.id&&"removed"!==t.status)).length," assigned"]})]})]}),it.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[it.jsxs("button",{onClick:()=>d(e),className:"flex items-center justify-center gap-1 sm:gap-2 px-2 sm:px-3 py-2 bg-blue-50 text-blue-700 rounded-lg text-xs font-medium hover:bg-blue-100 transition-all duration-200 border border-blue-200",title:"Assign to Employees",children:[it.jsx(te,{className:"w-3 h-3"}),it.jsx("span",{className:"hidden sm:inline",children:"Assign"})]}),it.jsxs("button",{onClick:()=>u(e),className:"flex items-center justify-center gap-1 sm:gap-2 px-2 sm:px-3 py-2 bg-orange-50 text-orange-700 rounded-lg text-xs font-medium hover:bg-orange-100 transition-all duration-200 border border-orange-200",title:"Reset Progress",children:[it.jsx(se,{className:"w-3 h-3"}),it.jsx("span",{className:"hidden sm:inline",children:"Reset"})]})]}),it.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100",children:[it.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[it.jsx("button",{onClick:()=>(async e=>{try{const s=t.find(t=>t.id===e);if(!s)return;const a={...s,active:!s.active},r=await vt.updateTrainingModule(e,a);r.success?(await w(),ft.showSuccess(`Training module ${a.active?"activated":"deactivated"} successfully`)):ft.showError(r.error||"Failed to update training module")}catch(s){console.error("Error toggling module active status:",s),ft.showError("Failed to update training module")}})(e.id),className:"p-1.5 rounded-md text-xs "+(e.active?"text-orange-600 hover:bg-orange-50 border border-orange-200":"text-green-600 hover:bg-green-50 border border-green-200"),title:e.active?"Deactivate":"Activate",children:e.active?it.jsx(O,{className:"w-3 h-3"}):it.jsx(C,{className:"w-3 h-3"})}),it.jsx("button",{onClick:()=>r(e),className:"p-1.5 text-gold hover:bg-gold/10 rounded-md border border-gold/30 text-xs",title:"Edit Module",children:it.jsx(D,{className:"w-3 h-3"})})]}),it.jsx("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this training module? This action cannot be undone."))try{f(!0);const t=await vt.deleteTrainingModule(e);t.success?(await w(),ft.showSuccess("Training module deleted successfully")):ft.showError(t.error||"Failed to delete training module")}catch(t){console.error("Error deleting module:",t),ft.showError("Failed to delete training module")}finally{f(!1)}})(e.id),className:"p-1.5 text-red-600 hover:bg-red-50 rounded-md border border-red-200 text-xs",title:"Delete Module",children:it.jsx(L,{className:"w-3 h-3"})})]})]})]})},e.id))}),(n||a)&&it.jsx(cs,{module:a,categories:j,onSave:async e=>{try{f(!0),y(null);const t={...e,duration:"number"==typeof e.duration?`${e.duration} minutes`:e.duration||""};let s;s=a?await vt.updateTrainingModule(a.id,t):await vt.createTrainingModule(t),s.success?(await w(),r(null),l(!1),ft.showSuccess(a?"Training module updated successfully":"Training module created successfully")):(y(s.error||"Failed to save training module"),ft.showError(s.error||"Failed to save training module"))}catch(t){console.error("Error saving module:",t);const e="Failed to save training module";y(e),ft.showError(e)}finally{f(!1)}},onClose:()=>{l(!1),r(null)},generateQRCode:()=>`TRAIN_MODULE_${Date.now().toString().slice(-6)}`}),o&&it.jsx(ds,{module:o,onClose:()=>i(null)}),c&&it.jsx(ms,{module:c,employees:x,onClose:()=>d(null),onAssign:async e=>{try{f(!0);const t=e.map(e=>e.employeeId),s=e[0]?.dueDate||null,a={employee_ids:t,due_date:s,assignment_type:s?"scheduled":"immediate",notes:"Assigned via training management interface"},r=await vt.assignTrainingModule(c.id,a);r.success?(ft.showSuccess(`Training assigned to ${r.total_assigned} employee${1!==r.total_assigned?"s":""} successfully`),r.warnings&&r.warnings.length>0&&r.warnings.forEach(e=>{ft.showWarning(e)}),await N()):ft.showError(r.error||"Failed to assign training")}catch(t){console.error("Error assigning training:",t),ft.showError("Failed to assign training")}finally{f(!1)}d(null)}}),m&&it.jsx(us,{module:m,employees:x,onClose:()=>u(null),onReset:async e=>{try{f(!0);const t=await vt.resetTrainingProgress(m.id,e);t.success?(ft.showSuccess(`Training progress reset for ${t.reset_count} employee${1!==t.reset_count?"s":""} successfully`),await N()):ft.showError(t.error||"Failed to reset training progress")}catch(t){console.error("Error resetting training progress:",t),ft.showError("Failed to reset training progress")}finally{f(!1)}u(null)}})]})},cs=({module:t,categories:s,onSave:a,onClose:r,generateQRCode:n})=>{const[l,o]=e.useState({title:t?.title||"",description:t?.description||"",qrCode:t?.qrCode||n(),videoUrl:t?.videoUrl||"",duration:t?.duration||"",category:t?.category||"Other",content:t?.content||"",order:t?.order||1});return it.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:e=>{e.target===e.currentTarget&&r()},children:it.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[it.jsxs("div",{className:"flex justify-between items-center px-4 sm:px-6 py-4 border-b border-gray-200",children:[it.jsx("h3",{className:"text-base sm:text-lg font-semibold text-charcoal",children:t?"Edit Training Module":"Add New Training Module"}),it.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",type:"button",children:it.jsx(O,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]}),it.jsx("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:it.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[it.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal/70 mb-2",children:"Module Title *"}),it.jsx("input",{type:"text",value:l.title,onChange:e=>o({...l,title:e.target.value}),placeholder:"Enter module title",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent"})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal/70 mb-2",children:"Category"}),it.jsx("select",{value:l.category,onChange:e=>o({...l,category:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent",children:s.map(e=>it.jsx("option",{value:e,children:e},e))})]})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal/70 mb-2",children:"Description *"}),it.jsx("input",{type:"text",value:l.description,onChange:e=>o({...l,description:e.target.value}),placeholder:"Brief description of the training module",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent"})]}),it.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal/70 mb-2",children:"QR Code"}),it.jsxs("div",{className:"flex gap-2",children:[it.jsx("input",{type:"text",value:l.qrCode,onChange:e=>o({...l,qrCode:e.target.value}),placeholder:"QR code for unlocking module",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent font-mono"}),it.jsx("button",{onClick:()=>o({...l,qrCode:n()}),className:"px-3 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors",title:"Generate new QR code",children:it.jsx(T,{className:"w-4 h-4"})})]})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal/70 mb-2",children:"Duration"}),it.jsx("input",{type:"text",value:l.duration,onChange:e=>o({...l,duration:e.target.value}),placeholder:"e.g., 15 minutes",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent"})]})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal/70 mb-2",children:"Video URL (Optional)"}),it.jsx("input",{type:"url",value:l.videoUrl,onChange:e=>o({...l,videoUrl:e.target.value}),placeholder:"https://www.youtube.com/watch?v=... or https://youtu.be/... or direct video URL",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent"}),it.jsx("p",{className:"text-xs text-charcoal/60 mt-1",children:"Supports YouTube, Vimeo, and direct video file URLs (.mp4, .webm, .ogg). YouTube URLs will be automatically converted to embeddable format."})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal/70 mb-2",children:"Training Content * (HTML supported)"}),it.jsx("textarea",{value:l.content,onChange:e=>o({...l,content:e.target.value}),placeholder:"Enter the training module content (HTML tags are supported)",rows:8,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent font-mono text-sm resize-none"}),it.jsx("p",{className:"text-xs text-charcoal/60 mt-1",children:"You can use HTML tags for formatting. Common tags: <h3>, <p>, <ul>, <li>, <strong>, <em>"})]}),l.content&&it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal/70 mb-2",children:"Content Preview"}),it.jsx("div",{className:"border border-gray-300 rounded-lg p-4 bg-gray-50 max-h-60 overflow-y-auto",children:it.jsx("div",{className:"prose max-w-none text-charcoal",dangerouslySetInnerHTML:{__html:l.content}})})]})]})}),it.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 px-4 sm:px-6 py-4 border-t border-gray-200 bg-gray-50",children:[it.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 bg-gray-200 text-charcoal rounded-md hover:bg-gray-300 transition-colors order-2 sm:order-1",children:"Cancel"}),it.jsxs("button",{type:"button",onClick:()=>{l.title.trim()&&l.description.trim()&&l.content.trim()?a(l):alert("Please fill in all required fields")},className:"px-6 py-2 bg-gold-gradient text-charcoal rounded-md hover:shadow-lg transition-all flex items-center justify-center gap-2 font-medium order-1 sm:order-2",children:[it.jsx(M,{className:"w-4 h-4"}),it.jsx("span",{children:t?"Update Module":"Create Module"})]})]})]})})},ds=({module:e,onClose:t})=>{const s=e.video_url||e.videoUrl,a=(e=>{if(!e)return null;console.log("Converting video URL:",e);const t=e.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/);if(t){const e=t[1],s=`https://www.youtube.com/embed/${e}?rel=0&modestbranding=1`;return console.log("YouTube video ID extracted:",e),console.log("Generated embed URL:",s),s}const s=e.match(/vimeo\.com\/(?:channels\/[A-z]+\/)?([0-9]+)/);if(s)return`https://player.vimeo.com/video/${s[1]}`;return e.includes("/embed/")||e.endsWith(".mp4")||e.endsWith(".webm")||e.endsWith(".ogg"),e})(s),r=!!(n=s)&&(n.endsWith(".mp4")||n.endsWith(".webm")||n.endsWith(".ogg")||n.endsWith(".avi")||n.endsWith(".mov"));var n;return it.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:e=>{e.target===e.currentTarget&&t()},children:it.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[it.jsxs("div",{className:"flex justify-between items-center px-6 py-4 border-b border-gray-200",children:[it.jsxs("div",{children:[it.jsx("h3",{className:"text-lg font-semibold text-charcoal",children:e.title}),it.jsx("p",{className:"text-sm text-charcoal/60",children:e.description})]}),it.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",type:"button",children:it.jsx(O,{className:"w-6 h-6"})})]}),it.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:it.jsxs("div",{className:"space-y-6",children:[it.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 bg-gray-50 rounded-lg",children:[it.jsxs("div",{children:[it.jsx("span",{className:"text-sm font-medium text-charcoal/70",children:"QR Code:"}),it.jsx("p",{className:"font-mono text-sm bg-white px-2 py-1 rounded mt-1",children:e.qr_code||e.qrCode})]}),it.jsxs("div",{children:[it.jsx("span",{className:"text-sm font-medium text-charcoal/70",children:"Duration:"}),it.jsx("p",{className:"text-sm mt-1",children:e.duration})]}),it.jsxs("div",{children:[it.jsx("span",{className:"text-sm font-medium text-charcoal/70",children:"Category:"}),it.jsx("p",{className:"text-sm mt-1",children:e.category})]})]}),s&&it.jsxs("div",{children:[it.jsx("h4",{className:"font-medium text-charcoal mb-3",children:"Training Video"}),it.jsx("div",{className:"aspect-video bg-gray-100 rounded-lg overflow-hidden",children:r?it.jsxs("video",{width:"100%",height:"100%",controls:!0,className:"rounded-lg object-cover",preload:"metadata",children:[it.jsx("source",{src:s,type:"video/mp4"}),it.jsx("source",{src:s,type:"video/webm"}),it.jsx("source",{src:s,type:"video/ogg"}),"Your browser does not support the video tag."]}):a?it.jsx("iframe",{width:"100%",height:"100%",src:a,title:e.title,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0,className:"rounded-lg",loading:"lazy"}):it.jsx("div",{className:"flex items-center justify-center h-full bg-gray-200 rounded-lg",children:it.jsxs("div",{className:"text-center text-gray-500",children:[it.jsx(V,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),it.jsx("p",{className:"text-sm",children:"Unable to display video"}),it.jsx("p",{className:"text-xs mt-1",children:it.jsx("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Open video in new tab"})})]})})}),it.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[it.jsx("strong",{children:"Original URL:"}),it.jsx("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline ml-1",children:s})]})]}),it.jsxs("div",{children:[it.jsx("h4",{className:"font-medium text-charcoal mb-3",children:"Training Material"}),it.jsx("div",{className:"prose max-w-none text-charcoal bg-white p-4 rounded-lg border border-gray-200",dangerouslySetInnerHTML:{__html:e.content}})]})]})}),it.jsx("div",{className:"flex justify-end px-6 py-4 border-t border-gray-200 bg-gray-50",children:it.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-200 text-charcoal rounded-md hover:bg-gray-300 transition-colors",children:"Close Preview"})})]})})},ms=({module:t,employees:s,onClose:a,onAssign:r})=>{const[n,l]=e.useState([]),[o,i]=e.useState(""),[c,d]=e.useState("immediate"),[m,u]=e.useState({}),x=e=>{const a=s.find(t=>t.id===e);return a?.training_assignments?.some(e=>e.module_id===t.id&&"removed"!==e.status&&"completed"!==e.status)||!1},h=e=>`${e.personalInfo?.firstName||e.name||"Employee"} ${e.personalInfo?.lastName||""}`.trim(),g=s.filter(e=>"approved"===e.status||"ACTIVE"===e.status),p=g.filter(e=>!x(e.id)),f=g.filter(e=>x(e.id));return it.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 backdrop-blur-sm",onClick:e=>{e.target===e.currentTarget&&a()},children:it.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden border border-gray-200",children:[it.jsx("div",{className:"px-4 sm:px-6 py-4 bg-gradient-to-r from-brand-navy to-brand-navy/90 border-b border-gold/20 mobile-navy-header",children:it.jsxs("div",{className:"flex justify-between items-center mobile-modal-header-container",children:[it.jsxs("div",{className:"mobile-header-container",children:[it.jsx("h3",{className:"text-lg font-bold font-display text-cream mobile-modal-header mobile-text-left",children:"Assign Training Module"}),it.jsx("p",{className:"text-sm text-cream/80 mobile-subtitle mobile-text-left",children:t.title})]}),it.jsx("button",{onClick:a,className:"text-cream/60 hover:text-cream hover:bg-cream/10 rounded-lg p-2 transition-all duration-200 mobile-icon-button",children:it.jsx(O,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]})}),it.jsx("div",{className:"p-4 sm:p-6 overflow-y-auto max-h-[calc(90vh-200px)] mobile-modal-padding",children:it.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal mb-3 mobile-form-label",children:"Assignment Type"}),it.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:[it.jsxs("button",{onClick:()=>d("immediate"),className:"p-2 sm:p-3 rounded-lg border text-left transition-all mobile-card "+("immediate"===c?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 hover:border-gray-400"),children:[it.jsx("div",{className:"font-medium text-sm mobile-card-title",children:"Immediate"}),it.jsx("div",{className:"text-xs text-gray-500 mobile-card-subtitle",children:"Start training right away"})]}),it.jsxs("button",{onClick:()=>d("scheduled"),className:"p-2 sm:p-3 rounded-lg border text-left transition-all mobile-card "+("scheduled"===c?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 hover:border-gray-400"),children:[it.jsx("div",{className:"font-medium text-sm mobile-card-title",children:"Scheduled"}),it.jsx("div",{className:"text-xs text-gray-500 mobile-card-subtitle",children:"Set due date"})]})]})]}),"scheduled"===c&&it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal mb-2 mobile-form-label",children:"Due Date"}),it.jsx("input",{type:"date",value:o,onChange:e=>i(e.target.value),min:(new Date).toISOString().split("T")[0],className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent mobile-form-input"})]}),it.jsxs("div",{children:[it.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-3 gap-2",children:[it.jsxs("label",{className:"text-sm font-medium text-charcoal mobile-form-label mobile-text-left",children:["Select Employees (",p.length," available)"]}),it.jsxs("div",{className:"flex gap-2 mobile-button-container",children:[it.jsx("button",{onClick:()=>{const e=s.filter(e=>("approved"===e.status||"ACTIVE"===e.status)&&!e.trainingAssignments?.some(e=>e.moduleId===t.id&&!e.completedAt));l(e.map(e=>e.id))},className:"text-xs text-blue-600 hover:text-blue-800 mobile-link-button",children:"Select All"}),it.jsx("button",{onClick:()=>{l([])},className:"text-xs text-gray-600 hover:text-gray-800 mobile-link-button",children:"Clear"})]})]}),it.jsxs("div",{className:"space-y-2 max-h-40 overflow-y-auto border border-gray-200 rounded-lg p-3",children:[p.map(e=>it.jsxs("label",{className:"flex items-center gap-3 p-2 hover:bg-gray-50 rounded cursor-pointer",children:[it.jsx("input",{type:"checkbox",checked:n.includes(e.id),onChange:()=>{return t=e.id,void l(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),it.jsxs("div",{className:"flex-1",children:[it.jsx("div",{className:"font-medium text-sm text-charcoal",children:h(e)}),it.jsxs("div",{className:"text-xs text-gray-500",children:[e.location?.name||"No location","  ",e.status]})]})]},e.id)),0===p.length&&it.jsxs("div",{className:"text-center text-gray-500 py-4",children:[it.jsx($,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),it.jsx("p",{className:"text-sm",children:"No employees available for assignment"})]})]}),f.length>0&&it.jsxs("div",{className:"mt-4",children:[it.jsxs("label",{className:"text-sm font-medium text-gray-600 mb-2 block",children:["Already Assigned (",f.length,")"]}),it.jsx("div",{className:"space-y-1 max-h-24 overflow-y-auto",children:f.map(e=>it.jsxs("div",{className:"flex items-center gap-3 p-2 bg-gray-50 rounded",children:[it.jsx(C,{className:"w-4 h-4 text-green-500"}),it.jsx("div",{className:"text-sm text-gray-600",children:h(e)})]},e.id))})]})]})]})}),it.jsx("div",{className:"px-4 sm:px-6 py-4 border-t border-gray-200 mobile-modal-padding",children:it.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3",children:[it.jsxs("div",{className:"text-sm text-gray-600 mobile-subtitle mobile-text-left order-2 sm:order-1",children:[n.length," employee",1!==n.length?"s":""," selected"]}),it.jsxs("div",{className:"flex gap-3 order-1 sm:order-2",children:[it.jsx("button",{onClick:a,className:"flex-1 sm:flex-none px-4 py-2 text-charcoal border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors mobile-secondary-button",children:"Cancel"}),it.jsxs("button",{onClick:()=>{if(0===n.length)return void alert("Please select at least one employee");const e=n.map(e=>({employeeId:e,dueDate:"scheduled"===c?m[e]||o:null}));r(e)},disabled:0===n.length,className:"flex-1 sm:flex-none px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center gap-2 mobile-primary-button",children:[it.jsx(te,{className:"w-4 h-4"}),"Assign Training"]})]})]})})]})})},us=({module:t,employees:s,onClose:a,onReset:r})=>{const[n,l]=e.useState([]),[o,i]=e.useState("progress"),c=()=>s.filter(e=>{const s=e.training_assignments?.some(e=>e.module_id===t.id&&"removed"!==e.status),a=e.training_progress?.some(e=>e.module_id===t.id)||e.training_assignments?.some(e=>e.module_id===t.id&&("unlocked"===e.status||"in_progress"===e.status||"completed"===e.status));return s||a}),d=e=>`${e.personalInfo?.firstName||e.name||"Employee"} ${e.personalInfo?.lastName||""}`.trim(),m=c();return it.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 backdrop-blur-sm",onClick:e=>{e.target===e.currentTarget&&a()},children:it.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[95vh] overflow-hidden border border-gray-200",children:[it.jsx("div",{className:"px-4 sm:px-6 py-4 bg-gradient-to-r from-brand-navy to-brand-navy/90 border-b border-gold/20 mobile-navy-header",children:it.jsxs("div",{className:"flex justify-between items-center mobile-modal-header-container",children:[it.jsxs("div",{className:"mobile-header-container",children:[it.jsx("h3",{className:"text-lg font-bold font-display text-cream mobile-modal-header mobile-text-left",children:"Reset Training Progress"}),it.jsx("p",{className:"text-sm text-cream/80 mobile-subtitle mobile-text-left",children:t.title})]}),it.jsx("button",{onClick:a,className:"text-cream/60 hover:text-cream hover:bg-cream/10 rounded-lg p-2 transition-all duration-200 mobile-icon-button",children:it.jsx(O,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]})}),it.jsx("div",{className:"p-4 sm:p-6 bg-orange-50 border-b border-orange-200 mobile-modal-padding",children:it.jsxs("div",{className:"flex items-start gap-3 mobile-warning-container",children:[it.jsx(q,{className:"w-5 h-5 text-orange-600 mt-0.5 flex-shrink-0 mobile-warning-icon"}),it.jsxs("div",{className:"flex-1 min-w-0",children:[it.jsx("h4",{className:"font-medium text-orange-800 mb-2 mobile-form-label mobile-warning-text",children:"Warning: This action cannot be undone"}),it.jsx("p",{className:"text-sm leading-relaxed text-orange-700 mobile-subtitle mobile-warning-text",children:"Resetting will remove all training progress, completion records, and unlock status for selected employees. They will need to complete the training again from the beginning."})]})]})}),it.jsx("div",{className:"p-4 sm:p-6 overflow-y-auto max-h-[calc(95vh-280px)] mobile-modal-padding",children:it.jsxs("div",{className:"space-y-4",children:[it.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[it.jsxs("label",{className:"text-sm font-medium text-charcoal mobile-form-label mobile-text-left",children:["Select Employees to Reset (",m.length," have progress)"]}),it.jsxs("div",{className:"flex gap-2 mobile-button-container",children:[it.jsx("button",{onClick:()=>{const e=c();l(e.map(e=>e.id))},className:"text-xs text-blue-600 hover:text-blue-800 mobile-link-button",children:"Select All"}),it.jsx("button",{onClick:()=>{l([])},className:"text-xs text-gray-600 hover:text-gray-800 mobile-link-button",children:"Clear"})]})]}),it.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto border border-gray-200 rounded-lg p-3",children:[m.map(e=>{const s=(e=>{const s=e.training_assignments?.find(e=>e.module_id===t.id&&"removed"!==e.status);if(!s)return{status:"No Assignment",color:"text-gray-600"};switch(s.status){case"completed":return{status:"Completed",color:"text-green-600",date:s.completed_at};case"overdue":return{status:"Overdue",color:"text-red-600",date:s.due_date};case"in_progress":return{status:"In Progress",color:"text-orange-600",date:s.started_at};case"unlocked":return{status:"Unlocked",color:"text-blue-600",date:s.unlocked_at};case"assigned":return s.due_date&&new Date(s.due_date)<new Date?{status:"Overdue",color:"text-red-600",date:s.due_date}:{status:"Assigned",color:"text-blue-600",date:s.assigned_at};default:return{status:"Unknown",color:"text-gray-600"}}})(e);return it.jsxs("label",{className:"flex items-center gap-3 p-3 hover:bg-gray-50 rounded cursor-pointer border border-gray-100",children:[it.jsx("input",{type:"checkbox",checked:n.includes(e.id),onChange:()=>{return t=e.id,void l(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},className:"w-4 h-4 text-red-600 rounded focus:ring-red-500"}),it.jsxs("div",{className:"flex-1",children:[it.jsx("div",{className:"font-medium text-sm text-charcoal",children:d(e)}),it.jsxs("div",{className:"flex items-center gap-2 text-xs mt-1",children:[it.jsx("span",{className:`font-medium ${s.color}`,children:s.status}),s.date&&it.jsx("span",{className:"text-gray-500",children:new Date(s.date).toLocaleDateString()})]})]})]},e.id)}),0===m.length&&it.jsxs("div",{className:"text-center text-gray-500 py-8",children:[it.jsx(se,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),it.jsx("p",{className:"text-sm",children:"No employees have progress to reset"})]})]})]})}),it.jsx("div",{className:"px-4 sm:px-6 py-4 border-t border-gray-200 mobile-modal-padding",children:it.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3",children:[it.jsxs("div",{className:"text-sm text-gray-600 mobile-subtitle mobile-text-left order-2 sm:order-1",children:[n.length," employee",1!==n.length?"s":""," selected for reset"]}),it.jsxs("div",{className:"flex gap-3 order-1 sm:order-2",children:[it.jsx("button",{onClick:a,className:"flex-1 sm:flex-none px-4 py-2 text-charcoal border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors mobile-secondary-button",children:"Cancel"}),it.jsxs("button",{onClick:()=>{if(0===n.length)return void alert("Please select at least one employee");const e=`Are you sure you want to reset training for ${n.length} employee${1!==n.length?"s":""}? This will remove their progress and they will need to complete the training again.`;window.confirm(e)&&r(n)},disabled:0===n.length,className:"flex-1 sm:flex-none px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center gap-2 mobile-primary-button",children:[it.jsx(se,{className:"w-4 h-4"}),"Reset Progress"]})]})]})})]})})},xs=()=>{const[t,s]=e.useState([]),[a,r]=e.useState(null),[n,l]=e.useState(!1),[o,i]=e.useState(""),[c,d]=e.useState("all"),[m,u]=e.useState(!0),[x,h]=e.useState({total:0,active:0,inactive:0,categories:0}),[g,f]=e.useState([{id:"all",name:"All Categories"}]);e.useEffect(()=>{b(),y()},[]),e.useEffect(()=>{const e=setTimeout(()=>{b()},300);return()=>clearTimeout(e)},[o,c]);const b=async()=>{try{u(!0);const e={};"all"!==c&&(e.category=c),o&&(e.search=o);const t=await vt.getFaqs(e);t.success?(s(t.data),t.stats&&h(t.stats)):(console.error("Failed to load FAQs:",t.error),alert("Failed to load FAQs: "+t.error))}catch(e){console.error("Error loading FAQs:",e),alert("Error loading FAQs: "+e.message)}finally{u(!1)}},y=async()=>{try{const e=await vt.getFaqCategories();if(e.success){const t=[{id:"all",name:"All Categories"},...Object.entries(e.data).map(([e,t])=>({id:e,name:t}))];f(t)}}catch(e){console.error("Error loading categories:",e)}},j=t;return it.jsxs("div",{className:"space-y-6",children:[it.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[it.jsxs("div",{children:[it.jsx("h2",{className:"text-xl font-semibold text-charcoal",children:"FAQ Management"}),it.jsx("p",{className:"text-charcoal/70",children:"Manage frequently asked questions for employees"})]}),it.jsxs("button",{onClick:()=>l(!0),className:"bg-gold-gradient text-charcoal px-4 py-2 rounded-md hover:shadow-lg transition-all flex items-center justify-center gap-2 mobile-hide-button-icons whitespace-nowrap",children:[it.jsx(I,{className:"w-4 h-4"}),it.jsx("span",{className:"mobile-text-content",children:"Add FAQ"})]})]}),it.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[it.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsxs("div",{children:[it.jsx("p",{className:"text-sm font-medium text-charcoal/70",children:"Total FAQs"}),it.jsx("p",{className:"text-2xl font-bold text-charcoal",children:x.total})]}),it.jsx(ae,{className:"w-8 h-8 text-blue-600"})]})}),it.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsxs("div",{children:[it.jsx("p",{className:"text-sm font-medium text-charcoal/70",children:"Active FAQs"}),it.jsx("p",{className:"text-2xl font-bold text-green-600",children:x.active})]}),it.jsx(p,{className:"w-8 h-8 text-green-600"})]})}),it.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsxs("div",{children:[it.jsx("p",{className:"text-sm font-medium text-charcoal/70",children:"Categories"}),it.jsx("p",{className:"text-2xl font-bold text-charcoal",children:x.categories})]}),it.jsx(re,{className:"w-8 h-8 text-purple-600"})]})}),it.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsxs("div",{children:[it.jsx("p",{className:"text-sm font-medium text-charcoal/70",children:"Most Popular"}),it.jsx("p",{className:"text-sm font-bold text-charcoal",children:"Uniform"})]}),it.jsx(ae,{className:"w-8 h-8 text-orange-600"})]})})]}),it.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[it.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[it.jsx("div",{className:"md:col-span-2",children:it.jsxs("div",{className:"relative",children:[it.jsx(K,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-charcoal/50"}),it.jsx("input",{type:"text",value:o,onChange:e=>i(e.target.value),placeholder:"Search FAQ questions and answers...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent"})]})}),it.jsx("div",{children:it.jsx("select",{value:c,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent",children:g.map(e=>it.jsx("option",{value:e.id,children:e.name},e.id))})})]}),o&&it.jsx("div",{className:"mt-4",children:it.jsxs("p",{className:"text-sm text-charcoal/70",children:["Found ",j.length," result",1!==j.length?"s":"",' for "',o,'"']})})]}),it.jsx("div",{className:"space-y-4",children:m?it.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[it.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gold mx-auto mb-3"}),it.jsx("p",{className:"text-lg font-medium text-charcoal",children:"Loading FAQs..."})]}):0===j.length?it.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[it.jsx(ae,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),it.jsx("p",{className:"text-lg font-medium text-charcoal mb-2",children:"No FAQ items found"}),it.jsx("p",{className:"text-sm text-charcoal/60",children:o?`No FAQ items match your search for "${o}"`:"No FAQ items available in this category"})]}):j.sort((e,t)=>e.order-t.order).map(e=>it.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-200",children:it.jsx("div",{className:"p-6",children:it.jsxs("div",{className:"flex items-start justify-between",children:[it.jsxs("div",{className:"flex-1",children:[it.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[it.jsx("div",{className:"p-2 rounded-lg "+(e.active?"bg-green-100":"bg-gray-100"),children:it.jsx(ae,{className:"w-4 h-4 "+(e.active?"text-green-600":"text-gray-400")})}),it.jsxs("div",{className:"flex items-center gap-2",children:[it.jsx("span",{className:"text-xs px-2 py-1 rounded-full "+(e.active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"),children:e.active?"Active":"Inactive"}),it.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-blue-100 text-blue-800 capitalize",children:e.category.replace("-"," ")})]})]}),it.jsx("h3",{className:"font-medium text-charcoal mb-2",children:e.question}),it.jsx("p",{className:"text-sm text-charcoal/70 mb-3 line-clamp-2",children:e.answer}),it.jsxs("div",{className:"text-xs text-charcoal/50",children:["Created: ",new Date(e.created_at).toLocaleDateString()]})]}),it.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[it.jsx("button",{onClick:()=>(async e=>{try{const t=await vt.toggleFaqStatus(e);t.success?(await b(),alert(t.message||"FAQ status updated successfully")):alert("Error updating FAQ status: "+t.error)}catch(t){console.error("Error updating FAQ status:",t),alert("Error updating FAQ status: "+t.message)}})(e.id),className:"p-2 rounded-md "+(e.active?"text-orange-600 hover:bg-orange-50":"text-green-600 hover:bg-green-50"),title:e.active?"Deactivate":"Activate",children:e.active?it.jsx(O,{className:"w-4 h-4"}):it.jsx(p,{className:"w-4 h-4"})}),it.jsx("button",{onClick:()=>r(e),className:"p-2 text-gold hover:bg-gold/10 rounded-md",title:"Edit",children:it.jsx(D,{className:"w-4 h-4"})}),it.jsx("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this FAQ item?"))try{const t=await vt.deleteFaq(e);t.success?(await b(),alert(t.message||"FAQ deleted successfully")):alert("Error deleting FAQ: "+t.error)}catch(t){console.error("Error deleting FAQ:",t),alert("Error deleting FAQ: "+t.message)}})(e.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-md",title:"Delete",children:it.jsx(L,{className:"w-4 h-4"})})]})]})})},e.id))}),(n||a)&&it.jsx(hs,{faq:a,categories:g.filter(e=>"all"!==e.id),onSave:async e=>{try{let t;t=a?await vt.updateFaq(a.id,e):await vt.createFaq({...e,active:e.active??!0}),t.success?(await b(),r(null),l(!1),alert(t.message||(a?"FAQ updated successfully":"FAQ created successfully"))):alert("Error saving FAQ: "+t.error)}catch(t){console.error("Error saving FAQ:",t),alert("Error saving FAQ: "+t.message)}},onClose:()=>{l(!1),r(null)}})]})},hs=({faq:t,categories:s,onSave:a,onClose:r})=>{const[n,l]=e.useState({question:t?.question||"",answer:t?.answer||"",category:t?.category||"other",order:t?.order||1});return it.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:e=>{e.target===e.currentTarget&&r()},children:it.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[it.jsxs("div",{className:"flex justify-between items-center px-4 sm:px-6 py-4 border-b border-gray-200",children:[it.jsx("h3",{className:"text-base sm:text-lg font-semibold text-charcoal",children:t?"Edit FAQ Item":"Add New FAQ Item"}),it.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",type:"button",children:it.jsx(O,{className:"w-6 h-6"})})]}),it.jsx("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:it.jsxs("div",{className:"space-y-6",children:[it.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal/70 mb-2",children:"Category"}),it.jsx("select",{value:n.category,onChange:e=>l({...n,category:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent",children:s.map(e=>it.jsx("option",{value:e.id,children:e.name},e.id))})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal/70 mb-2",children:"Display Order"}),it.jsx("input",{type:"number",min:"1",value:n.order,onChange:e=>l({...n,order:parseInt(e.target.value)||1}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent"})]})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal/70 mb-2",children:"Question *"}),it.jsx("input",{type:"text",value:n.question,onChange:e=>l({...n,question:e.target.value}),placeholder:"Enter the FAQ question",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent"})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal/70 mb-2",children:"Answer *"}),it.jsx("textarea",{value:n.answer,onChange:e=>l({...n,answer:e.target.value}),placeholder:"Enter the detailed answer",rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent resize-none"}),it.jsx("p",{className:"text-xs text-charcoal/60 mt-1",children:"Provide a clear, comprehensive answer to help employees"})]}),n.question&&n.answer&&it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal/70 mb-2",children:"Preview"}),it.jsxs("div",{className:"border border-gray-300 rounded-lg p-4 bg-gray-50",children:[it.jsx("h4",{className:"font-medium text-charcoal mb-2",children:n.question}),it.jsx("p",{className:"text-sm text-charcoal/80",children:n.answer}),it.jsx("div",{className:"mt-2",children:it.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-blue-100 text-blue-800 capitalize",children:n.category.replace("-"," ")})})]})]})]})}),it.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 px-4 sm:px-6 py-4 border-t border-gray-200 bg-gray-50",children:[it.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 bg-gray-200 text-charcoal rounded-md hover:bg-gray-300 transition-colors order-2 sm:order-1",children:"Cancel"}),it.jsxs("button",{type:"button",onClick:()=>{n.question.trim()&&n.answer.trim()?a(n):alert("Please fill in all required fields")},className:"px-6 py-2 bg-gold-gradient text-charcoal rounded-md hover:shadow-lg transition-all flex items-center justify-center gap-2 font-medium order-1 sm:order-2",children:[it.jsx(M,{className:"w-4 h-4"}),it.jsx("span",{children:t?"Update FAQ":"Create FAQ"})]})]})]})})},gs="https://woodfire.food/api/v1",ps=()=>({"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${(()=>{const e=localStorage.getItem("admin_token"),t=localStorage.getItem("employee_token"),s=e||t;return s||console.warn("No authentication token found"),s})()}`}),fs=async(e,t=!1)=>{try{const e=t?`${gs}/admin/communication/conversations`:`${gs}/employee/communication/conversations`,s=await fetch(e,{method:"GET",headers:ps()});if(!s.ok){const e=await s.text();return console.error("Conversations API error:",s.status,e),[]}const a=await s.json();return a.success&&a.data?a.data:[]}catch(s){return console.error("Error fetching conversations:",s),[]}},bs=async(e,t,s=!1,a=!1)=>{try{const t=a?`${gs}/admin/communication/conversations/${e}/read`:`${gs}/employee/communication/conversations/${e}/read`;if(!(await fetch(t,{method:"POST",headers:ps()})).ok)throw new Error("Failed to mark messages as read");return!0}catch(r){return console.error("Error marking messages as read:",r),!1}},ys=async(e,t=!1)=>{try{const s=t?`${gs}/admin/communication/conversations/${e}/messages`:`${gs}/employee/communication/conversations/${e}/messages`,a=await fetch(s,{method:"GET",headers:ps()});if(!a.ok)throw new Error("Failed to fetch conversation messages");return(await a.json()).data}catch(s){return console.error("Error fetching conversation messages:",s),[]}},js=()=>{const{user:t}=wt(),[s,a]=e.useState("chat"),[r,n]=e.useState([]),[l,o]=e.useState([]),[i,c]=e.useState([]),[d,m]=e.useState(null),[u,x]=e.useState([]),[h,g]=e.useState(!1),[p,f]=e.useState("all"),[b,y]=e.useState(""),j=((t,s=200)=>{const[a,r]=e.useState(t);return e.useEffect(()=>{const e=setTimeout(()=>r(t),s);return()=>clearTimeout(e)},[t,s]),a})(b,200),[v,N]=e.useState(!1),[w,k]=e.useState(!1),[S,C]=e.useState(!1),[E,T]=e.useState(!1),_=e.useRef(null),R=e.useRef(null),O=e.useRef(null);e.useEffect(()=>{I()},[]),e.useEffect(()=>{if(d)return D(d),"number"==typeof d.id&&bs(d.id,0,"group"===d.type,!0).then(()=>{T(!1),q()}).catch(()=>{}),R.current&&clearInterval(R.current),R.current=setInterval(()=>{D(d,!0)},2e3),O.current&&clearInterval(O.current),O.current=setInterval(()=>{E&&"number"==typeof d.id&&bs(d.id,0,"group"===d.type,!0).then(()=>{T(!1),q()}).catch(()=>{})},1e4),()=>{R.current&&(clearInterval(R.current),R.current=null),O.current&&(clearInterval(O.current),O.current=null)}},[d,E]),e.useEffect(()=>()=>{R.current&&(clearInterval(R.current),R.current=null),O.current&&(clearInterval(O.current),O.current=null)},[]);const I=async()=>{try{const e=await vt.getEmployees();if(e.success)if(e.employees&&Array.isArray(e.employees)){const t=e.employees.filter(e=>"ACTIVE"===e.status||"active"===e.status||"APPROVED"===e.status||"approved"===e.status);n(t)}else n([]);else n([]);const t=await(async()=>{try{const e=await fetch(`${gs}/admin/communication/conversations`,{method:"GET",headers:ps()});if(!e.ok){const t=await e.text();return console.error("Groups API error:",e.status,t),[]}const t=await e.json();return t.success&&t.data?t.data.filter(e=>"group"===e.type):[]}catch(e){return console.error("Error fetching groups:",e.message),[]}})();o(t);const s=await fs(0,!0);c(s)}catch(e){n([]),o([]),c([])}},D=async(e,t=!1)=>{const s=e||d;if(s)try{t||C(!0);const e=await ys(s.id,!0),a=e.map(e=>({id:e.id,senderId:e.senderId,senderName:e.senderName,senderRole:e.senderRole,content:e.content,textContent:e.textContent,attachments:e.attachments,hasAttachments:e.hasAttachments,timestamp:e.timestamp})).filter((e,t,s)=>s.findIndex(t=>t.id===e.id)===t),r=((e,t)=>{if(!Array.isArray(e)||!Array.isArray(t))return!0;if(e.length!==t.length)return!0;if(0===e.length)return!1;const s=e[e.length-1],a=t[t.length-1];return String(s.id)!==String(a.id)||String(s.timestamp)!==String(a.timestamp)})(u,a);if(x(e=>r?a:e),r&&a.length>0){"Admin"!==a[a.length-1].senderRole&&T(!0),setTimeout(()=>L(),100)}}catch(a){t||x([])}finally{t||C(!1)}},L=()=>{const e=_.current;e&&(e.scrollTop=e.scrollHeight)};e.useEffect(()=>{u.length>0&&setTimeout(()=>L(),100)},[u]);const F=e=>{if(e&&"string"==typeof e.id&&e.id.startsWith("employee_")){const t=String(e.id).replace("employee_","");return i.find(e=>"private"===e.type&&(!(!Array.isArray(e.members)||!e.members.some(e=>String(e)===String(t)))||(!(!Array.isArray(e.participants)||!e.participants.some(e=>String(e.participant_id)===String(t)))||(!(!Array.isArray(e.participant_ids)||!e.participant_ids.some(e=>String(e)===String(t)))||(!(!e.recipient_id||String(e.recipient_id)!==String(t))||(!(!e.employee_id||String(e.employee_id)!==String(t))||!(!e.user_id||String(e.user_id)!==String(t))))))))||e}return e},q=async()=>{try{const e=await fs(0,!0);return c(e),e}catch(e){return i}},M=async e=>{const t=F(e);m(t),"group"===t.type?(k(!0),N(!1)):(N(!0),k(!1)),D(t).then(()=>{I().catch(()=>{})})},$=async e=>{if(("string"==typeof e?e:e.content).trim()&&d)try{T(!1);const t={id:`temp_${Date.now()}`,senderId:"admin",senderName:"Management",senderRole:"Admin",content:"string"==typeof e?e:e.content,textContent:"string"==typeof e?e:e.textContent,attachments:"object"==typeof e&&e.attachments||[],hasAttachments:"object"==typeof e&&!!e.hasAttachments,timestamp:(new Date).toISOString()};if(x(e=>[...e,t]),"group"===d.type)await(async(e,t,s,a,r)=>{try{let t;t="object"==typeof r?{content:r.content??"",attachments:r.attachments??[],has_attachments:!!r.hasAttachments}:{content:r,has_attachments:!1};const s=await fetch(`${gs}/admin/communication/conversations/${e}/messages`,{method:"POST",headers:ps(),body:JSON.stringify(t)});if(!s.ok){const e=await s.text().catch(()=>"");throw console.error("Group message API error:",s.status,e),new Error("Failed to send group message")}return(await s.json()).data}catch(n){throw console.error("Error sending group message:",n),n}})(d.id,0,0,0,e);else{const t=d.participantId||("string"==typeof d.id?d.id.replace("employee_",""):d.id);await(async(e,t,s,a,r,n=!0)=>{try{let e={recipient_id:String(a),content:"string"==typeof r?r:r.content,has_attachments:!1};"object"==typeof r&&r.hasAttachments&&(e={recipient_id:String(a),content:r.content,attachments:r.attachments,has_attachments:r.hasAttachments});const t=n?`${gs}/admin/communication/messages/private`:`${gs}/employee/communication/messages/private`,s=await fetch(t,{method:"POST",headers:ps(),body:JSON.stringify(e)});if(!s.ok){const e=await s.text();throw console.error("Private message API error:",s.status,e),new Error(`Failed to send private message: ${s.status} ${s.statusText}`)}const l=await s.json();return l.data||l}catch(l){throw console.error("Error sending private message:",l),l}})(0,0,0,t,e)}if(await Promise.all([q(),D(d,!0)]),setTimeout(()=>L(),100),"string"==typeof d.id&&d.id.startsWith("employee_")){const e=F(d);m(e)}}catch(t){alert("Failed to send message. Please try again.")}},z=()=>{R.current&&(clearInterval(R.current),R.current=null),O.current&&(clearInterval(O.current),O.current=null),N(!1),k(!1),m(null),x([]),T(!1)},U=e=>new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),B=e=>e.unreadCount>0,V=e.useMemo(()=>{let e=r.map(e=>{const t=i.find(t=>"private"===t.type&&(!!(t.members&&Array.isArray(t.members)&&t.members.some(t=>String(t)===String(e.id)))||(!!(t.participants&&Array.isArray(t.participants)&&t.participants.some(t=>String(t.participant_id)===String(e.id)))||(!!(t.participant_ids&&Array.isArray(t.participant_ids)&&t.participant_ids.some(t=>String(t)===String(e.id)))||(!(!t.recipient_id||String(t.recipient_id)!==String(e.id))||(!(!t.employee_id||String(t.employee_id)!==String(e.id))||!(!t.user_id||String(t.user_id)!==String(e.id))))))));return t?{...t,employee:e,name:`${e.first_name||e.personalInfo?.firstName||"Employee"} ${e.last_name||e.personalInfo?.lastName||""}`.trim()}:{id:`employee_${e.id}`,type:"private",name:`${e.first_name||e.personalInfo?.firstName||"Employee"} ${e.last_name||e.personalInfo?.lastName||""}`.trim(),participantId:e.id,employee:e,lastMessage:null,unreadCount:0,createdAt:e.created_at||(new Date).toISOString()}});if((j||"").trim()){const t=j.toLowerCase();e=e.filter(e=>(e.name||"").toLowerCase().includes(t))}return"unread"===p&&(e=e.filter(e=>B(e))),e},[r,i,j,p]),H=()=>V,W=e.useMemo(()=>{let e=i.filter(e=>"group"===e.type);return"unread"===p&&(e=e.filter(e=>B(e))),e},[i,p]),J=()=>W,G=e=>e.lastMessage?e.lastMessage.content:"No messages yet",K=e=>e.lastMessage?U(e.lastMessage.timestamp):"";if(v&&d)return it.jsxs("div",{className:"bg-white rounded-lg shadow-md w-full h-[70vh] grid grid-rows-[auto,1fr,auto]",children:[it.jsx("div",{className:"bg-gray-50 border-b border-gray-200 p-4",children:it.jsxs("div",{className:"flex items-center gap-3",children:[it.jsx("button",{onClick:z,className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:it.jsx(P,{className:"w-5 h-5 text-gray-600"})}),it.jsxs("div",{children:[it.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:d.name}),it.jsx("p",{className:"text-sm text-gray-600",children:"Private Chat"})]})]})}),it.jsx("div",{ref:_,className:"overflow-y-auto p-4 min-h-0",children:S&&0===u.length?it.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:it.jsxs("div",{className:"text-center animate-pulse",children:[it.jsx(ne,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),it.jsx("p",{className:"font-medium",children:"Loading messages..."})]})}):0===u.length?it.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:it.jsxs("div",{className:"text-center",children:[it.jsx(ne,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),it.jsx("p",{className:"font-medium",children:"No messages yet"}),it.jsx("p",{className:"text-sm",children:"Send a message to start the conversation"})]})}):it.jsx("div",{className:"flex flex-col space-y-3",children:u.map(e=>it.jsx("div",{className:"flex "+("admin"===e.senderId?"justify-end":"justify-start"),children:it.jsxs("div",{className:"max-w-[70%] px-4 py-3 rounded-lg "+("admin"===e.senderId?"bg-blue-600 text-white":"bg-gray-100 text-gray-800"),children:["admin"!==e.senderId&&it.jsx("div",{className:"text-xs font-medium mb-1",children:e.senderName}),it.jsx("div",{className:"text-sm whitespace-pre-wrap",children:e.attachments&&e.attachments.length>0?it.jsxs("div",{children:[e.textContent&&it.jsx("div",{className:"mb-1",children:e.textContent}),it.jsx("div",{className:"flex flex-wrap gap-1",children:e.attachments.map((e,t)=>it.jsx(Ts,{attachment:e},t))})]}):e.content.includes(" Image:")||e.content.includes(" Document:")?it.jsx(_s,{content:e.content}):e.content}),it.jsx("div",{className:"text-xs opacity-70 mt-1",children:U(e.timestamp)})]})},e.id))})}),it.jsx("div",{className:"bg-white border-t border-gray-200",children:it.jsx(vs,{onSend:$,isMobile:!1})})]});if(w&&d)return it.jsxs("div",{className:"bg-white rounded-lg shadow-md w-full h-[70vh] grid grid-rows-[auto,1fr,auto]",children:[it.jsx("div",{className:"bg-gray-50 border-b border-gray-200 p-4",children:it.jsxs("div",{className:"flex items-center gap-3",children:[it.jsx("button",{onClick:z,className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:it.jsx(P,{className:"w-5 h-5 text-gray-600"})}),it.jsxs("div",{children:[it.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:d.name}),it.jsx("p",{className:"text-sm text-gray-600",children:"Group Chat"})]})]})}),it.jsx("div",{ref:_,className:"overflow-y-auto p-4 min-h-0",children:S&&0===u.length?it.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:it.jsxs("div",{className:"text-center animate-pulse",children:[it.jsx(ne,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),it.jsx("p",{className:"font-medium",children:"Loading messages..."})]})}):0===u.length?it.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:it.jsxs("div",{className:"text-center",children:[it.jsx(ne,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),it.jsx("p",{className:"font-medium",children:"No messages yet"}),it.jsx("p",{className:"text-sm",children:"Send a message to start the conversation"})]})}):it.jsx("div",{className:"flex flex-col space-y-3",children:u.map(e=>it.jsx("div",{className:"flex "+("admin"===e.senderId?"justify-end":"justify-start"),children:it.jsxs("div",{className:"max-w-[70%] px-4 py-3 rounded-lg "+("admin"===e.senderId?"bg-blue-600 text-white":"bg-gray-100 text-gray-800"),children:["admin"!==e.senderId&&it.jsx("div",{className:"text-xs font-medium mb-1",children:e.senderName}),it.jsx("div",{className:"text-sm whitespace-pre-wrap",children:e.attachments&&e.attachments.length>0?it.jsxs("div",{children:[e.textContent&&it.jsx("div",{className:"mb-1",children:e.textContent}),it.jsx("div",{className:"flex flex-wrap gap-1",children:e.attachments.map((e,t)=>it.jsx(Ts,{attachment:e},t))})]}):e.content.includes(" Image:")||e.content.includes(" Document:")?it.jsx(_s,{content:e.content}):e.content}),it.jsx("div",{className:"text-xs opacity-70 mt-1",children:U(e.timestamp)})]})},e.id))})}),it.jsx("div",{className:"bg-white border-t border-gray-200",children:it.jsx(vs,{onSend:$,isMobile:!1})})]});const Y=[{id:"feed",name:"Feed",icon:le},{id:"assets",name:"Assets",icon:Q},{id:"chat",name:"Chat",icon:ne},{id:"profile",name:"Profile",icon:oe},{id:"admin",name:"Admin",icon:A}];return it.jsxs("div",{className:"space-y-4 md:space-y-6 w-full",children:[it.jsx("div",{className:"hidden xs:block bg-white rounded-lg shadow-md border border-gray-200 p-4 md:p-6",children:it.jsx("div",{className:"flex items-center justify-between",children:it.jsxs("div",{children:[it.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900 mb-2",children:"Admin Communication Center"}),it.jsx("p",{className:"text-sm md:text-base text-gray-600 hidden sm:block",children:"Manage all communication, assets, and administrative tasks"})]})})}),it.jsxs("div",{className:"hidden xs:block bg-white rounded-lg shadow-md border border-gray-200",children:[it.jsx("div",{className:"flex border-b border-gray-200",children:Y.map(e=>{const t=e.icon;return it.jsxs("button",{onClick:()=>{a(e.id),"chat"!==e.id&&(N(!1),k(!1),m(null))},className:"flex-1 px-2 md:px-4 py-2 md:py-3 text-center text-sm md:text-base font-medium transition-colors flex items-center justify-center gap-1 md:gap-2 "+(s===e.id?"bg-blue-50 text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"),children:[it.jsx(t,{className:"w-4 h-4 md:w-5 md:h-5"}),it.jsx("span",{className:"hidden sm:inline",children:e.name}),it.jsx("span",{className:"sm:hidden text-xs",children:e.name.slice(0,3)})]},e.id)})}),it.jsxs("div",{className:"w-full",children:["feed"===s&&it.jsx(Ns,{}),"assets"===s&&it.jsx(ws,{}),"chat"===s&&it.jsx(ks,{employees:r,groups:l,filterType:p,setFilterType:f,searchQuery:b,setSearchQuery:y,handleConversationSelect:M,getLastMessage:G,getLastMessageTime:K,getFilteredEmployees:H,getFilteredGroups:J,setShowGroupModal:g}),"profile"===s&&it.jsx(Ss,{user:t}),"admin"===s&&it.jsx(Cs,{})]})]}),it.jsx("div",{className:"block xs:hidden",children:it.jsx(As,{employees:r,groups:l,filterType:p,setFilterType:f,searchQuery:b,setSearchQuery:y,handleConversationSelect:M,getLastMessage:G,getLastMessageTime:K,getFilteredEmployees:H,getFilteredGroups:J,tabs:Y,activeTab:s,setActiveTab:a,setShowPrivateChat:N,setShowGroupChat:k,setSelectedConversation:m,setShowGroupModal:g})}),h&&it.jsx(Es,{employees:r,onClose:()=>g(!1),onCreateGroup:async(e,t)=>{try{await(async(e,t,s=[])=>{try{const t=await fetch(`${gs}/admin/communication/conversations/group`,{method:"POST",headers:ps(),body:JSON.stringify({name:e,employee_ids:s})});if(!t.ok)throw new Error("Failed to create group");return(await t.json()).data}catch(a){throw console.error("Error creating group:",a),a}})(e,0,t),await I(),g(!1)}catch(s){alert("Failed to create group. Please try again.")}}})]})},vs=({onSend:t,isMobile:s=!1})=>{const[a,r]=e.useState(""),[n,l]=e.useState([]),o=e.useRef(null),i=async()=>{if(a.trim()||0!==n.length){if(n.length>0){const e=n.map(e=>new Promise(t=>{const s=new FileReader;s.onload=s=>{t({name:e.name,type:e.type,size:e.size,data:s.target.result})},s.readAsDataURL(e)})),s=await Promise.all(e);t({content:a.trim()||"File attachment",textContent:a.trim(),attachments:s,hasAttachments:!0})}else t({content:a,textContent:a,attachments:[],hasAttachments:!1});r(""),l([])}};return it.jsxs("div",{className:"border-t border-gray-200 p-3 sm:p-4 w-full flex-shrink-0 bg-white",children:[n.length>0&&it.jsx("div",{className:"mb-3 flex flex-wrap gap-2",children:n.map((e,t)=>it.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 px-3 py-2 rounded-lg",children:[e.type.startsWith("image/")?it.jsx(ie,{className:"w-4 h-4 text-blue-600"}):it.jsx(Q,{className:"w-4 h-4 text-green-600"}),it.jsx("span",{className:"text-sm font-medium text-gray-700 truncate max-w-32",children:e.name}),it.jsx("button",{onClick:()=>(e=>{l(t=>t.filter((t,s)=>s!==e))})(t),className:"text-gray-400 hover:text-red-500 transition-colors",children:it.jsx(O,{className:"w-4 h-4"})})]},t))}),it.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 w-full",children:[it.jsx("input",{ref:o,type:"file",multiple:!0,accept:"image/*,.pdf,.doc,.docx,.xls,.xlsx,.txt,.csv",onChange:e=>{const t=Array.from(e.target.files).filter(e=>["image/jpeg","image/png","image/gif","image/webp","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/plain","text/csv"].includes(e.type)&&e.size<=10485760);l(e=>[...e,...t]),e.target.value=""},className:"hidden"}),it.jsx("button",{onClick:()=>{o.current?.click()},className:"flex items-center justify-center text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors border border-gray-300 hover:border-blue-300 flex-shrink-0 w-10 h-10",title:"Attach files",children:it.jsx(ce,{className:"w-5 h-5"})}),it.jsx("input",{type:"text",value:a,onChange:e=>r(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),i())},placeholder:"Type a message...",className:"flex-1 min-w-0 px-3 sm:px-4 py-2 sm:py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base"}),it.jsx("button",{onClick:i,disabled:!a.trim()&&0===n.length,className:"flex items-center justify-center bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors flex-shrink-0 w-10 h-10",children:it.jsx(te,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]})]})},Ns=()=>it.jsx("div",{className:"p-6"}),ws=()=>it.jsx("div",{className:"p-6"}),ks=({employees:e,groups:t,filterType:s,setFilterType:a,searchQuery:r,setSearchQuery:n,handleConversationSelect:l,getLastMessage:o,getLastMessageTime:i,getFilteredEmployees:c,getFilteredGroups:d,setShowGroupModal:m})=>it.jsxs("div",{className:"p-4 md:p-6",children:[it.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 md:mb-6 gap-4",children:[it.jsxs("div",{children:[it.jsx("h2",{className:"text-base md:text-lg font-semibold text-gray-900 mb-1",children:"Team Communication"}),it.jsx("p",{className:"text-gray-600 text-xs md:text-sm hidden sm:block",children:"Communicate with employees through private messages or group chats"})]}),it.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[it.jsx("span",{className:"text-xs md:text-sm font-medium text-gray-700",children:"Filter:"}),it.jsxs("div",{className:"flex items-center gap-1",children:[it.jsx("button",{onClick:()=>a("all"),className:"px-2 md:px-3 py-1 text-xs md:text-sm font-medium rounded-md transition-colors "+("all"===s?"bg-blue-100 text-blue-800":"text-gray-600 hover:bg-gray-100"),children:"ALL"}),it.jsx("span",{className:"text-gray-400 mx-1",children:"|"}),it.jsx("button",{onClick:()=>a("unread"),className:"px-2 md:px-3 py-1 text-xs md:text-sm font-medium rounded-md transition-colors "+("unread"===s?"bg-blue-100 text-blue-800":"text-gray-600 hover:bg-gray-100"),children:"Unread"}),it.jsx("span",{className:"text-gray-400 mx-1",children:"|"}),it.jsx("button",{onClick:()=>a("teams"),className:"px-2 md:px-3 py-1 text-xs md:text-sm font-medium rounded-md transition-colors "+("teams"===s?"bg-blue-100 text-blue-800":"text-gray-600 hover:bg-gray-100"),children:"Teams"})]})]})]}),it.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6",children:["teams"!==s&&it.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 flex flex-col w-full md:mb-4 lg:mb-0 min-h-[60vh] md:min-h-[65vh] lg:min-h-[60vh]",children:[it.jsxs("div",{className:"bg-blue-50 border-b border-gray-200 p-3 md:p-4",children:[it.jsx("div",{className:"flex items-center justify-between mb-3 md:mb-4",children:it.jsxs("h3",{className:"text-base md:text-lg font-semibold text-gray-900 flex items-center gap-2",children:[it.jsx(F,{className:"w-4 h-4 md:w-5 md:h-5 text-blue-600"}),it.jsx("span",{className:"hidden sm:inline",children:"Employees Private Chat"}),it.jsx("span",{className:"sm:hidden",children:"Private Chat"})]})}),it.jsxs("div",{className:"relative",children:[it.jsx(K,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),it.jsx("input",{type:"text",placeholder:"Search by name",value:r,onChange:e=>n(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]})]}),it.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto p-3 md:p-4 bg-white",children:it.jsxs("div",{className:"space-y-2",children:[c().map(e=>{const t=e.unreadCount>0;return it.jsx("div",{onClick:()=>l(e),className:"p-2 md:p-3 rounded-lg cursor-pointer border transition-colors "+(t?"border-blue-300 bg-blue-50 hover:bg-blue-100":"border-gray-200 hover:bg-gray-50"),children:it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[it.jsxs("div",{className:"relative",children:[it.jsx("div",{className:"w-8 h-8 md:w-10 md:h-10 bg-blue-100 rounded-full flex items-center justify-center",children:it.jsx(F,{className:"w-4 h-4 md:w-5 md:h-5 text-blue-600"})}),t&&it.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full flex items-center justify-center",children:it.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),it.jsxs("div",{className:"min-w-0 flex-1",children:[it.jsx("div",{className:"text-sm md:text-base font-medium truncate "+(t?"text-gray-900":"text-gray-800"),children:e.name}),it.jsx("div",{className:"text-xs md:text-sm truncate "+(t?"text-gray-600 font-medium":"text-gray-500"),children:o(e)})]})]}),it.jsx("div",{className:"text-xs text-gray-400",children:i(e)})]})},e.id)}),0===c().length&&it.jsxs("div",{className:"text-center py-8 text-gray-500",children:[it.jsx(F,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),it.jsx("p",{className:"font-medium",children:"unread"===s?"No unread messages":"No employees found"}),it.jsx("p",{className:"text-sm",children:"unread"===s?"All conversations are up to date":"Try adjusting your search query"})]})]})})]}),"teams"!==s?it.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 flex flex-col w-full min-h-[60vh] md:min-h-[65vh] lg:min-h-[60vh]",children:[it.jsx("div",{className:"bg-green-50 border-b border-gray-200 p-3 md:p-4",children:it.jsxs("div",{className:"flex items-center justify-between mb-3 md:mb-4",children:[it.jsxs("h3",{className:"text-base md:text-lg font-semibold text-gray-900 flex items-center gap-2",children:[it.jsx($,{className:"w-4 h-4 md:w-5 md:h-5 text-green-600"}),it.jsx("span",{className:"hidden sm:inline",children:"Group chat with Employees"}),it.jsx("span",{className:"sm:hidden",children:"Groups"})]}),it.jsxs("button",{onClick:()=>m(!0),className:"px-3 md:px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm font-medium flex items-center gap-2",children:[it.jsx(I,{className:"w-3 h-3 md:w-4 md:h-4"}),it.jsx("span",{className:"hidden sm:inline",children:"Create Group"}),it.jsx("span",{className:"sm:hidden",children:"Create"})]})]})}),it.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto p-3 md:p-4 bg-white",children:it.jsxs("div",{className:"space-y-2",children:[d().map(e=>{const t=e.unreadCount>0;return it.jsx("div",{onClick:()=>l(e),className:"p-2 md:p-3 rounded-lg cursor-pointer border transition-colors "+(t?"border-green-300 bg-green-50 hover:bg-green-100":"border-gray-200 hover:bg-gray-50"),children:it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[it.jsxs("div",{className:"relative",children:[it.jsx("div",{className:"w-8 h-8 md:w-10 md:h-10 bg-green-100 rounded-full flex items-center justify-center",children:it.jsx($,{className:"w-4 h-4 md:w-5 md:h-5 text-green-600"})}),t&&it.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full flex items-center justify-center",children:it.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),it.jsxs("div",{className:"min-w-0 flex-1",children:[it.jsx("div",{className:"text-sm md:text-base font-medium truncate "+(t?"text-gray-900":"text-gray-800"),children:e.name}),it.jsx("div",{className:"text-xs md:text-sm truncate "+(t?"text-gray-600 font-medium":"text-gray-500"),children:o(e)})]})]}),it.jsx("div",{className:"text-xs text-gray-400",children:i(e)})]})},e.id)}),0===d().length&&it.jsxs("div",{className:"text-center py-8 text-gray-500",children:[it.jsx($,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),it.jsx("p",{className:"font-medium",children:"unread"===s?"No unread group messages":"No groups created"}),it.jsx("p",{className:"text-sm",children:"unread"===s?"All group conversations are up to date":"Create your first group to get started"})]})]})})]}):it.jsxs("div",{className:"lg:col-span-2 bg-gray-50 rounded-lg border border-gray-200 flex flex-col w-full min-h-[60vh] md:min-h-[65vh] lg:min-h-[60vh]",children:[it.jsx("div",{className:"bg-green-50 border-b border-gray-200 p-4",children:it.jsxs("div",{className:"flex items-center justify-between mb-4",children:[it.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[it.jsx($,{className:"w-5 h-5 text-green-600"}),"Team Groups"]}),it.jsxs("button",{onClick:()=>m(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm font-medium flex items-center gap-2",children:[it.jsx(I,{className:"w-4 h-4"}),"Create Group"]})]})}),it.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto p-4 bg-white",children:it.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[d().map(e=>{const t=e.unreadCount>0;return it.jsx("div",{onClick:()=>l(e),className:"p-4 rounded-lg cursor-pointer border transition-colors "+(t?"border-green-300 bg-green-50 hover:bg-green-100":"border-gray-200 hover:bg-gray-50"),children:it.jsxs("div",{className:"flex items-start gap-3",children:[it.jsxs("div",{className:"relative",children:[it.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:it.jsx($,{className:"w-6 h-6 text-green-600"})}),t&&it.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full flex items-center justify-center",children:it.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),it.jsxs("div",{className:"flex-1 min-w-0",children:[it.jsx("div",{className:"font-medium mb-1 "+(t?"text-gray-900":"text-gray-800"),children:e.name}),it.jsxs("div",{className:"text-sm mb-2 "+(t?"text-gray-600 font-medium":"text-gray-500"),children:[e.members?.length||0," members"]}),it.jsx("div",{className:"text-sm text-gray-500 truncate",children:o(e)}),it.jsx("div",{className:"text-xs text-gray-400 mt-1",children:i(e)})]})]})},e.id)}),0===d().length&&it.jsxs("div",{className:"col-span-full text-center py-12 text-gray-500",children:[it.jsx($,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),it.jsx("p",{className:"font-medium text-lg mb-2",children:"unread"===s?"No unread group messages":"No groups created"}),it.jsx("p",{className:"text-sm",children:"unread"===s?"All group conversations are up to date":"Create your first group to get started"})]})]})})]})]})]}),Ss=({user:e})=>it.jsx("div",{className:"p-6"}),Cs=()=>it.jsx("div",{className:"p-6"}),Es=({employees:t,onClose:s,onCreateGroup:a})=>{const[r,n]=e.useState(""),[l,o]=e.useState([]);return it.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:it.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[80vh] overflow-hidden",children:[it.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[it.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Create New Group"}),it.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:it.jsx(O,{className:"w-6 h-6"})})]}),it.jsxs("div",{className:"p-6 space-y-4 overflow-y-auto",children:[it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Group Name"}),it.jsx("input",{type:"text",value:r,onChange:e=>n(e.target.value),placeholder:"Enter group name...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Employees"}),it.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto border border-gray-200 rounded-lg p-3",children:t.map(e=>it.jsxs("label",{className:"flex items-center gap-3 p-2 hover:bg-gray-50 rounded cursor-pointer",children:[it.jsx("input",{type:"checkbox",checked:l.includes(e.id),onChange:()=>{return t=e.id,void o(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),it.jsxs("div",{className:"flex items-center gap-2",children:[it.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:it.jsx(F,{className:"w-3 h-3 text-gray-600"})}),it.jsxs("span",{className:"text-sm text-gray-800",children:[e.first_name||e.personalInfo?.firstName||"Employee"," ",e.last_name||e.personalInfo?.lastName||""]})]})]},e.id))}),it.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Selected: ",l.length," employee",1!==l.length?"s":""]})]})]}),it.jsxs("div",{className:"flex justify-end gap-3 p-6 border-t border-gray-200",children:[it.jsx("button",{onClick:s,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"}),it.jsx("button",{onClick:async()=>{r.trim()&&0!==l.length?await a(r,l):alert("Please enter a group name and select at least one employee")},disabled:!r.trim()||0===l.length,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:"Create Group"})]})]})})},As=({employees:e,groups:t,filterType:s,setFilterType:a,searchQuery:r,setSearchQuery:n,handleConversationSelect:l,getLastMessage:o,getLastMessageTime:i,getFilteredEmployees:c,getFilteredGroups:d,tabs:m,activeTab:u,setActiveTab:x,setShowPrivateChat:h,setShowGroupChat:g,setSelectedConversation:p,setShowGroupModal:f})=>{const b=()=>[...c().map(e=>({...e,isEmployee:!0,hasUnread:e.unreadCount>0})),...d().map(e=>({...e,isEmployee:!1,hasUnread:e.unreadCount>0}))].sort((e,t)=>{if(e.hasUnread&&!t.hasUnread)return-1;if(!e.hasUnread&&t.hasUnread)return 1;const s=e.lastMessage?.timestamp||0,a=t.lastMessage?.timestamp||0;return new Date(a)-new Date(s)});return it.jsxs("div",{className:"absolute top-0 bottom-0 left-0 right-0 z-10 flex flex-col bg-white",style:{marginTop:"80px"},children:[it.jsx("div",{className:"bg-white border-b border-gray-200 px-4 py-3 flex-shrink-0",children:it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Conversations"}),it.jsxs("button",{onClick:()=>f(!0),className:"flex items-center gap-2 px-3 py-2 bg-gold-gradient text-charcoal rounded-lg hover:shadow-lg transition-all duration-300 transform hover:scale-[1.02] text-sm font-medium",children:[it.jsx(I,{className:"w-4 h-4"}),it.jsx("span",{children:"Group"})]})]})}),it.jsx("div",{className:"p-4 border-b border-gray-200",children:it.jsxs("div",{className:"relative",children:[it.jsx(K,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),it.jsx("input",{type:"text",placeholder:"Search Employees or groups",value:r,onChange:e=>n(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),it.jsx("div",{className:"px-4 py-3 border-b border-gray-200 bg-white",children:it.jsxs("div",{className:"flex flex-col gap-2",children:[it.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filter:"}),it.jsxs("div",{className:"flex w-full gap-2",children:[it.jsx("button",{onClick:()=>a("all"),className:"flex-1 py-2.5 text-sm font-medium rounded-lg transition-colors "+("all"===s?"bg-gold text-charcoal shadow-sm":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"All"}),it.jsx("button",{onClick:()=>a("unread"),className:"flex-1 py-2.5 text-sm font-medium rounded-lg transition-colors "+("unread"===s?"bg-gold text-charcoal shadow-sm":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Unread"}),it.jsx("button",{onClick:()=>a("teams"),className:"flex-1 py-2.5 text-sm font-medium rounded-lg transition-colors "+("teams"===s?"bg-gold text-charcoal shadow-sm":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Teams"})]})]})}),it.jsxs("div",{className:"flex-1 overflow-y-auto min-h-0",children:[b().map(e=>it.jsx("div",{onClick:()=>{l(e)},className:"p-4 border-b border-gray-100 active:bg-gray-50 "+(e.hasUnread?"bg-blue-50":"bg-white"),children:it.jsxs("div",{className:"flex justify-between items-start",children:[it.jsxs("div",{className:"flex-1 min-w-0",children:[it.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.isEmployee?it.jsx(F,{className:"w-4 h-4 text-blue-600 flex-shrink-0"}):it.jsx($,{className:"w-4 h-4 text-green-600 flex-shrink-0"}),it.jsx("h3",{className:"font-medium text-gray-900 truncate "+(e.hasUnread?"font-semibold":""),children:e.name}),e.hasUnread&&it.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full flex-shrink-0"})]}),it.jsx("p",{className:"text-sm text-gray-500 truncate "+(e.hasUnread?"font-medium text-gray-700":""),children:o(e)})]}),it.jsx("div",{className:"text-xs text-gray-400 ml-2 flex-shrink-0",children:i(e)})]})},`${e.type}-${e.id}`)),0===b().length&&it.jsxs("div",{className:"text-center py-12 text-gray-500",children:[it.jsx(ne,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),it.jsx("p",{className:"font-medium",children:"unread"===s?"No unread messages":"No conversations found"}),it.jsx("p",{className:"text-sm",children:"unread"===s?"All conversations are up to date":"Try adjusting your search or filter"})]})]}),it.jsx("div",{className:"border-t border-gray-200 bg-white",children:it.jsx("div",{className:"flex",children:m.map(e=>{const t=e.icon;return it.jsxs("button",{onClick:()=>{x(e.id),"chat"!==e.id&&(h(!1),g(!1),p(null))},className:"flex-1 px-2 py-2.5 text-center font-medium transition-colors flex flex-col items-center gap-1 "+(u===e.id?"text-gold bg-gold/10":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"),children:[it.jsx(t,{className:"w-5 h-5"}),it.jsx("span",{className:"text-xs",children:e.name})]},e.id)})})})]})},Ts=({attachment:t})=>{const[s,a]=e.useState(!1),r=t.type.startsWith("image/");return it.jsxs("div",{className:"inline-flex items-center gap-1.5 bg-gray-100 px-2 py-1 rounded text-xs max-w-48",children:[r?it.jsx("img",{src:t.data,alt:t.name,className:"w-4 h-4 object-cover rounded cursor-pointer hover:opacity-80",onClick:()=>a(!0)}):it.jsx(Q,{className:"w-3 h-3 text-blue-600 flex-shrink-0"}),it.jsx("span",{className:"truncate text-gray-700 font-medium",title:t.name,children:t.name.length>15?t.name.substring(0,15)+"...":t.name}),r&&it.jsx("button",{onClick:()=>a(!0),className:"text-blue-600 hover:text-blue-800 flex-shrink-0",title:"View",children:"View"}),it.jsx("button",{onClick:()=>{const e=document.createElement("a");e.href=t.data,e.download=t.name,document.body.appendChild(e),e.click(),document.body.removeChild(e)},className:"text-blue-600 hover:text-blue-800 flex-shrink-0",title:"Download",children:it.jsx(_,{className:"w-3 h-3"})}),s&&r&&it.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",onClick:()=>a(!1),children:it.jsxs("div",{className:"relative max-w-4xl max-h-full",onClick:e=>e.stopPropagation(),children:[it.jsx("img",{src:t.data,alt:t.name,className:"max-w-full max-h-full object-contain rounded-lg"}),it.jsx("button",{onClick:()=>a(!1),className:"absolute top-2 right-2 w-8 h-8 bg-black bg-opacity-50 text-white rounded-full flex items-center justify-center hover:bg-opacity-75 transition-colors",children:it.jsx(O,{className:"w-4 h-4"})}),it.jsx("div",{className:"absolute bottom-2 left-2 bg-black bg-opacity-50 text-white px-3 py-1 rounded text-sm",children:t.name})]})})]})},_s=({content:e})=>{const t=e.includes(" Image:"),s=e.split(": ")[1]||"Unknown file";return it.jsxs("div",{className:"inline-flex items-center gap-1.5 bg-gray-100 px-2 py-1 rounded text-xs",children:[t?it.jsx(ie,{className:"w-3 h-3 text-blue-600"}):it.jsx(Q,{className:"w-3 h-3 text-green-600"}),it.jsx("span",{className:"text-gray-700",children:s}),it.jsx("span",{className:"text-gray-400",children:"(Legacy)"})]})},Rs={owner:{employees:["view","create","edit","delete","manage_status"],users:["view","create","edit","delete"],locations:["view","create","edit","delete"],customers:["view","create","edit","delete","manage_status"],onboarding:["view","create","edit","delete"],training:["view","create","edit","delete"],communication:["view","create","edit","delete"],tableTracking:["view","create","edit","delete"],performance:["view","create","edit","delete","manage_reports"],tickets:["view","create","edit","delete","assign","manage_status"],recognition:["view","create","edit","delete","give_shoutouts","give_rewards","award_badges"],faq:["view","create","edit","delete"],timeTracking:["view","manage_approvals","view_reports"],timeOff:["view","manage_approvals"],notifications:["view","create","edit","delete"],allLocations:!0,canManageUsers:!0,canViewReports:!0,canManageSystem:!0},admin:{employees:["view","create","edit","delete","manage_status"],users:["view","create","edit","delete"],locations:["view","create","edit","delete"],customers:["view","create","edit","delete","manage_status"],onboarding:["view","create","edit","delete"],training:["view","create","edit","delete"],communication:["view","create","edit","delete"],tableTracking:["view","create","edit","delete"],performance:["view","create","edit","delete","manage_reports"],tickets:["view","create","edit","delete","assign","manage_status"],recognition:["view","create","edit","delete","give_shoutouts","give_rewards","award_badges"],faq:["view","create","edit","delete"],timeTracking:["view","manage_approvals","view_reports"],timeOff:["view","manage_approvals"],notifications:["view","create","edit","delete"],allLocations:!1,canManageUsers:!0,canViewReports:!0,canManageSystem:!0},manager:{employees:[],users:[],locations:[],customers:["view","create","edit","manage_status"],onboarding:["view","create","edit"],training:[],communication:["view","create","edit","delete"],tableTracking:["view","edit"],performance:["view","create","edit"],tickets:["view","create","edit","assign"],recognition:["view","create","give_shoutouts","give_rewards","award_badges"],faq:[],timeTracking:["view","manage_approvals"],timeOff:["view"],notifications:[],allLocations:!1,canManageUsers:!1,canViewReports:!0,canManageSystem:!1},hiring_manager:{employees:["view","manage_status"],users:[],locations:[],customers:["view"],onboarding:["view","create","edit"],training:[],communication:[],tableTracking:[],faq:[],timeTracking:[],notifications:["view"],allLocations:!1,canManageUsers:!1,canViewReports:!1,canManageSystem:!1},expo:{employees:[],users:[],locations:[],customers:[],onboarding:[],training:[],communication:[],tableTracking:[],faq:[],timeTracking:[],notifications:[],allLocations:!1,canManageUsers:!1,canViewReports:!1,canManageSystem:!1,isExpoOnly:!0}},Ps=(e,t,s)=>{if(!e||!Rs[e])return!1;return(Rs[e][t]||[]).includes(s)},Os=e=>!!Rs[e]&&!0===Rs[e].isExpoOnly,Is=(e,t,s)=>(e=>!!Rs[e]&&!0===Rs[e].allLocations)(t)?e:e.filter(e=>e.location===s||e.location?.name===s||!e.location),Ds=e=>{const t=(e=>{if(!Rs[e])return[];const t=Rs[e],s=[];return["employees","users","locations","customers","onboarding","training","timeTracking","timeOff","communication","tableTracking","performance","tickets","recognition","faq","notifications"].forEach(e=>{const a=t[e];Array.isArray(a)&&a.length>0&&s.push(e)}),s})(e),s={employees:{id:"employees",title:"Employees"},users:{id:"users",title:"Admin Users"},locations:{id:"locations",title:"Locations"},customers:{id:"customers",title:"Customers"},onboarding:{id:"onboarding",title:"Onboarding"},training:{id:"training",title:"Training"},communication:{id:"communication",title:"Communication"},tableTracking:{id:"table-tracking",title:"Table Tracking"},performance:{id:"performance",title:"Performance"},tickets:{id:"tickets",title:"Tickets"},recognition:{id:"recognition",title:"Recognition"},faq:{id:"faq",title:"FAQ"},timeTracking:{id:"time-tracking",title:"Time Tracking"},timeOff:{id:"time-off",title:"Time Off"}},a=t.map(e=>s[e]).filter(e=>e);return{modules:a,accessibleTabs:a.map(e=>e.id),defaultTab:a[0]?.id||"employees",permissions:Rs[e]||{},isExpoOnly:Os(e)}},Ls=({customer:t,onSave:s,onClose:a})=>{const[r,n]=e.useState({first_name:"",last_name:"",email:"",phone:"",password:"",status:"ACTIVE",home_location:"",notes:""}),[l,o]=e.useState({}),[i,c]=e.useState(!1);e.useEffect(()=>{t&&n({first_name:t.first_name||"",last_name:t.last_name||"",email:t.email||"",phone:t.phone||"",password:"",status:t.status||"ACTIVE",home_location:t.home_location||"",notes:t.notes||""})},[t]);const d=e=>{if(e.preventDefault(),(()=>{const e={};return r.first_name.trim()||(e.first_name="First name is required"),r.last_name.trim()||(e.last_name="Last name is required"),r.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)||(e.email="Please enter a valid email address"):e.email="Email is required",r.phone.trim()?/^\+?[1-9]\d{1,14}$/.test(r.phone.replace(/[\s()-]/g,""))||(e.phone="Please enter a valid phone number (international format with + supported)"):e.phone="Phone number is required",t||r.password.trim()?r.password&&r.password.length<6&&(e.password="Password must be at least 6 characters long"):e.password="Password is required for new customers",o(e),0===Object.keys(e).length})()){const e={...r,name:`${r.first_name} ${r.last_name}`,phone:m(r.phone)};r.password.trim()&&(e.password=r.password),s(e)}},m=e=>{if(e.startsWith("+"))return e;const t=e.replace(/\D/g,"").match(/^(\d{3})(\d{3})(\d{4})$/);return t?`(${t[1]}) ${t[2]}-${t[3]}`:e},u=(e,t)=>{n(s=>({...s,[e]:t})),l[e]&&o(t=>({...t,[e]:""}))};return it.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:e=>{e.target===e.currentTarget&&a()},children:it.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[it.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[it.jsx("h2",{className:"text-2xl font-bold text-charcoal",children:t?"Edit Customer":"Add New Customer"}),it.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:it.jsx(O,{className:"w-6 h-6 text-gray-500"})})]}),it.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:it.jsxs("form",{onSubmit:d,className:"space-y-6",children:[it.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[it.jsxs("h3",{className:"text-lg font-medium text-charcoal mb-4 flex items-center gap-2",children:[it.jsx(F,{className:"w-5 h-5 text-gold"}),"Basic Information"]}),it.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal mb-1",children:"First Name *"}),it.jsx("input",{type:"text",value:r.first_name,onChange:e=>u("first_name",e.target.value),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent "+(l.first_name?"border-red-500":"border-gray-300"),placeholder:"Enter first name"}),l.first_name&&it.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.first_name})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal mb-1",children:"Last Name *"}),it.jsx("input",{type:"text",value:r.last_name,onChange:e=>u("last_name",e.target.value),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent "+(l.last_name?"border-red-500":"border-gray-300"),placeholder:"Enter last name"}),l.last_name&&it.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.last_name})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal mb-1",children:"Status *"}),it.jsxs("select",{value:r.status,onChange:e=>u("status",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent",children:[it.jsx("option",{value:"ACTIVE",children:"Active"}),it.jsx("option",{value:"INACTIVE",children:"Inactive"}),it.jsx("option",{value:"SUSPENDED",children:"Suspended"})]})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal mb-1",children:"Email Address *"}),it.jsx("input",{type:"email",value:r.email,onChange:e=>u("email",e.target.value),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent "+(l.email?"border-red-500":"border-gray-300"),placeholder:"customer@example.com"}),l.email&&it.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.email})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal mb-1",children:"Phone Number *"}),it.jsx("input",{type:"tel",value:r.phone,onChange:e=>u("phone",e.target.value),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent "+(l.phone?"border-red-500":"border-gray-300"),placeholder:"+1234567890 or (555) 123-4567"}),l.phone&&it.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.phone})]})]})]}),it.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[it.jsxs("h3",{className:"text-lg font-medium text-charcoal mb-4 flex items-center gap-2",children:[it.jsx(de,{className:"w-5 h-5 text-gold"}),"Password"]}),it.jsx("div",{className:"grid grid-cols-1 gap-4",children:it.jsxs("div",{children:[it.jsxs("label",{className:"block text-sm font-medium text-charcoal mb-1",children:["Password ",!t&&"*"]}),it.jsxs("div",{className:"relative",children:[it.jsx("input",{type:i?"text":"password",value:r.password,onChange:e=>u("password",e.target.value),className:"w-full px-3 py-2 pr-10 border rounded-md focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent "+(l.password?"border-red-500":"border-gray-300"),placeholder:t?"Leave blank to keep current password":"Enter password for customer login"}),it.jsx("button",{type:"button",onClick:()=>c(!i),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 transition-colors",title:i?"Hide password":"Show password",children:i?it.jsx(g,{className:"w-5 h-5"}):it.jsx(p,{className:"w-5 h-5"})})]}),l.password&&it.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.password}),it.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t?"Customer will use this password to log in. Leave blank to keep current password.":"Customer will use this password to log in to their account."})]})})]}),it.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[it.jsxs("h3",{className:"text-lg font-medium text-charcoal mb-4 flex items-center gap-2",children:[it.jsx(k,{className:"w-5 h-5 text-gold"}),"Location Information"]}),it.jsx("div",{className:"grid grid-cols-1 gap-4",children:it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal mb-1",children:"Home Location"}),it.jsx("input",{type:"text",value:r.home_location,onChange:e=>u("home_location",e.target.value),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent "+(l.home_location?"border-red-500":"border-gray-300"),placeholder:"Enter customer's preferred location (e.g., Downtown, Uptown)"}),l.home_location&&it.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.home_location}),it.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Customer's preferred or primary location for orders and communications"})]})})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal mb-1",children:"Additional Notes"}),it.jsx("textarea",{value:r.notes,onChange:e=>u("notes",e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent",placeholder:"Any additional notes about this customer..."})]}),"ACTIVE"!==r.status&&it.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[it.jsxs("h4",{className:"font-medium text-yellow-800 mb-2",children:["INACTIVE"===r.status?"Inactive":"SUSPENDED"===r.status?"Suspended":r.status," Status Information"]}),it.jsxs("p",{className:"text-sm text-yellow-700",children:["INACTIVE"===r.status&&"Customer will not receive any communications and cannot access services. Can be reactivated at any time.","SUSPENDED"===r.status&&"Customer account is suspended due to policy violations or administrative reasons. Contact support for reactivation."]})]})]})}),it.jsxs("div",{className:"flex justify-end gap-3 p-6 border-t border-gray-200",children:[it.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"Cancel"}),it.jsx("button",{onClick:d,className:"px-6 py-2 bg-gold-gradient text-charcoal rounded-md hover:shadow-lg transition-all font-medium",children:t?"Update Customer":"Create Customer"})]})]})})},Fs=({customer:t,locations:s,onClose:a,onEdit:r,onStatusChange:n})=>{const[l,o]=e.useState(!1),[i,c]=e.useState(t.status);if(!t)return null;const d=e=>{const t=s.find(t=>t.id===e);return t?t.name:"Unknown Location"},m=e=>{const t=s.find(t=>t.id===e);return t?t.address:"Address not found"},u=e=>{if(e.homeLocation){const t=s.find(t=>t.id===e.homeLocation);if(t)return t.name}if(e.home_location)return e.home_location;if(e.location_details&&e.location_details.length>0){const t=e.location_details.find(e=>e.is_home);if(t)return t.name}return"No Home Location"},x=e=>{switch(e){case"ACTIVE":return"text-green-600 bg-green-100";case"INACTIVE":return"text-red-600 bg-red-100";case"SUSPENDED":return"text-yellow-600 bg-yellow-100";default:return"text-gray-600 bg-gray-100"}},h=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Not set",g=e=>e?new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"Not set",p=(e=>{switch(e){case"ACTIVE":return C;case"INACTIVE":default:return b;case"SUSPENDED":return E}})(t.status),f=s.find(e=>e.id===t.homeLocation)||null;return it.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:e=>{e.target===e.currentTarget&&a()},children:it.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[it.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-gold/10 to-gold/5",children:[it.jsxs("div",{className:"flex items-center gap-4",children:[it.jsx("div",{className:"w-12 h-12 bg-gold/20 rounded-full flex items-center justify-center hidden sm:flex",children:it.jsx(F,{className:"w-6 h-6 text-gold"})}),it.jsxs("div",{children:[it.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-charcoal",children:t.name}),it.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[it.jsx(p,{className:"w-4 h-4"}),it.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${x(t.status)}`,children:t.status})]})]})]}),it.jsxs("div",{className:"flex items-center gap-2",children:[it.jsx("button",{onClick:()=>r(t),className:"p-2 bg-gold/10 hover:bg-gold/20 rounded-lg transition-colors",title:"Edit Customer",children:it.jsx(D,{className:"w-5 h-5 text-gold"})}),it.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:it.jsx(O,{className:"w-6 h-6 text-gray-500"})})]})]}),it.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:it.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[it.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[it.jsxs("h3",{className:"text-lg font-semibold text-charcoal mb-4 flex items-center gap-2",children:[it.jsx(F,{className:"w-5 h-5 text-gold"}),"Contact Information"]}),it.jsxs("div",{className:"space-y-4",children:[it.jsxs("div",{className:"flex items-center gap-3",children:[it.jsx(v,{className:"w-5 h-5 text-gray-500"}),it.jsxs("div",{children:[it.jsx("p",{className:"text-sm text-gray-600",children:"Email Address"}),it.jsx("p",{className:"font-medium text-charcoal",children:t.email})]})]}),it.jsxs("div",{className:"flex items-center gap-3",children:[it.jsx(N,{className:"w-5 h-5 text-gray-500"}),it.jsxs("div",{children:[it.jsx("p",{className:"text-sm text-gray-600",children:"Phone Number"}),it.jsx("p",{className:"font-medium text-charcoal",children:t.phone})]})]}),it.jsxs("div",{className:"flex items-center gap-3",children:[it.jsx(S,{className:"w-5 h-5 text-gray-500"}),it.jsxs("div",{children:[it.jsx("p",{className:"text-sm text-gray-600",children:"Customer Since"}),it.jsx("p",{className:"font-medium text-charcoal",children:h(t.createdAt)})]})]})]})]}),it.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[it.jsxs("h3",{className:"text-lg font-semibold text-charcoal mb-4 flex items-center gap-2",children:[it.jsx(k,{className:"w-5 h-5 text-gold"}),"Location Access"]}),(f||"No Home Location"!==u(t))&&it.jsxs("div",{className:"mb-4 p-3 bg-gold/10 rounded-lg border-l-4 border-gold",children:[it.jsx("p",{className:"text-sm text-gold-dark font-medium mb-1",children:"Home Location"}),it.jsx("p",{className:"font-semibold text-charcoal",children:f?f.name:u(t)}),f&&f.address&&it.jsx("p",{className:"text-sm text-gray-600",children:f.address})]}),it.jsxs("div",{children:[it.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Accessible Locations (",t.location_details?.length||t.locations?.length||0,")"]}),it.jsx("div",{className:"space-y-2",children:t.location_details?.length>0?t.location_details.map(e=>{const t=e.is_home;return it.jsx("div",{className:"p-2 rounded border "+(t?"bg-gold/5 border-gold/20":"bg-white border-gray-200"),children:it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsxs("div",{children:[it.jsx("p",{className:"font-medium text-charcoal",children:e.name}),e.address&&it.jsx("p",{className:"text-xs text-gray-500",children:e.address})]}),t&&it.jsx("span",{className:"text-xs bg-gold text-charcoal px-2 py-1 rounded",children:"HOME"})]})},e.id)}):t.locations?.map(e=>{const s=e===t.homeLocation;return it.jsx("div",{className:"p-2 rounded border "+(s?"bg-gold/5 border-gold/20":"bg-white border-gray-200"),children:it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsxs("div",{children:[it.jsx("p",{className:"font-medium text-charcoal",children:d(e)}),it.jsx("p",{className:"text-xs text-gray-500",children:m(e)})]}),s&&it.jsx("span",{className:"text-xs bg-gold text-charcoal px-2 py-1 rounded",children:"HOME"})]})},e)})})]})]}),it.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[it.jsxs("h3",{className:"text-lg font-semibold text-charcoal mb-4 flex items-center gap-2",children:[it.jsx(me,{className:"w-5 h-5 text-gold"}),"Status Management"]}),it.jsxs("div",{className:"space-y-4",children:[it.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border",children:[it.jsxs("div",{children:[it.jsx("p",{className:"font-medium text-charcoal",children:"Current Status"}),it.jsxs("p",{className:"text-sm text-gray-600",children:["ACTIVE"===t.status&&"Customer receives all communications and can access services","INACTIVE"===t.status&&"Customer does not receive communications or access services","SUSPENDED"===t.status&&"Customer account is temporarily suspended"]})]}),it.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${x(t.status)}`,children:t.status})]}),it.jsxs("div",{className:"flex items-center gap-2",children:[it.jsx("button",{onClick:()=>o(!0),className:"px-4 py-2 bg-gold-gradient text-charcoal rounded-md hover:shadow-lg transition-all text-sm font-medium",children:"Change Status"}),"ACTIVE"!==t.status&&it.jsx("button",{onClick:()=>n(t.id,"ACTIVE"),className:"px-4 py-2 bg-green-100 text-green-700 rounded-md hover:bg-green-200 transition-colors text-sm font-medium",children:"Reactivate"})]}),l&&it.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-60 p-4",onClick:e=>{e.target===e.currentTarget&&(o(!1),c(t.status))},children:it.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[it.jsx("h4",{className:"text-lg font-semibold text-charcoal mb-4",children:"Change Customer Status"}),it.jsx("div",{className:"space-y-3 mb-4",children:[{value:"ACTIVE",label:"Active",desc:"Customer receives communications and can access services"},{value:"INACTIVE",label:"Inactive",desc:"Customer will not receive any communications"},{value:"SUSPENDED",label:"Suspended",desc:"Customer account is temporarily suspended"}].map(e=>it.jsxs("label",{className:"flex items-center space-x-3",children:[it.jsx("input",{type:"radio",value:e.value,checked:i===e.value,onChange:e=>c(e.target.value),className:"w-4 h-4 text-gold focus:ring-gold"}),it.jsxs("div",{children:[it.jsx("span",{className:"font-medium text-charcoal",children:e.label}),it.jsx("p",{className:"text-sm text-gray-600",children:e.desc})]})]},e.value))}),it.jsxs("div",{className:"flex justify-end gap-3",children:[it.jsx("button",{onClick:()=>{o(!1),c(t.status)},className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"Cancel"}),it.jsx("button",{onClick:()=>{i!==t.status&&n(t.id,i),o(!1)},className:"px-4 py-2 bg-gold-gradient text-charcoal rounded-md hover:shadow-lg transition-all font-medium",children:"Update Status"})]})]})})]})]}),it.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[it.jsxs("h3",{className:"text-lg font-semibold text-charcoal mb-4 flex items-center gap-2",children:[it.jsx(ue,{className:"w-5 h-5 text-gold"}),"Available Features"]}),it.jsxs("div",{className:"space-y-3",children:[it.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg "+("ACTIVE"===t.status?"bg-green-50 border border-green-200":"bg-gray-100 border border-gray-200"),children:[it.jsxs("div",{className:"flex items-center gap-2",children:[it.jsx(xe,{className:"w-4 h-4 "+("ACTIVE"===t.status?"text-green-600":"text-gray-400")}),it.jsx("span",{className:"text-sm font-medium "+("ACTIVE"===t.status?"text-green-700":"text-gray-500"),children:"Communications"})]}),it.jsx("span",{className:"text-xs px-2 py-1 rounded "+("ACTIVE"===t.status?"bg-green-200 text-green-800":"bg-gray-200 text-gray-600"),children:"ACTIVE"===t.status?"Enabled":"Disabled"})]}),it.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg "+("ACTIVE"===t.status?"bg-green-50 border border-green-200":"bg-gray-100 border border-gray-200"),children:[it.jsxs("div",{className:"flex items-center gap-2",children:[it.jsx(he,{className:"w-4 h-4 "+("ACTIVE"===t.status?"text-green-600":"text-gray-400")}),it.jsx("span",{className:"text-sm font-medium "+("ACTIVE"===t.status?"text-green-700":"text-gray-500"),children:"Table Registration & Ordering"})]}),it.jsx("span",{className:"text-xs px-2 py-1 rounded "+("ACTIVE"===t.status?"bg-green-200 text-green-800":"bg-gray-200 text-gray-600"),children:"ACTIVE"===t.status?"Enabled":"Disabled"})]}),it.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-yellow-50 border border-yellow-200",children:[it.jsxs("div",{className:"flex items-center gap-2",children:[it.jsx(ue,{className:"w-4 h-4 text-yellow-600"}),it.jsx("span",{className:"text-sm font-medium text-yellow-700",children:"Loyalty Program"})]}),it.jsx("span",{className:"text-xs px-2 py-1 rounded bg-yellow-200 text-yellow-800",children:"Coming Soon"})]})]})]}),t.notes&&it.jsxs("div",{className:"lg:col-span-2 bg-gray-50 rounded-lg p-6",children:[it.jsx("h3",{className:"text-lg font-semibold text-charcoal mb-4",children:"Additional Notes"}),it.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:t.notes})]})]})}),it.jsxs("div",{className:"flex justify-between items-center p-6 border-t border-gray-200 bg-gray-50",children:[it.jsxs("div",{className:"text-sm text-gray-500",children:["Customer ID: ",t.id," | Created: ",h(t.createdAt)," at ",g(t.createdAt),t.updatedAt&&t.updatedAt!==t.createdAt&&it.jsxs(it.Fragment,{children:[" | Last Updated: ",h(t.updatedAt)," at ",g(t.updatedAt)]})]}),it.jsx("button",{onClick:a,className:"px-6 py-2 bg-charcoal text-cream rounded-md hover:bg-charcoal/80 transition-colors",children:"Close"})]})]})})},qs={BRONZE:{name:"Bronze",minPoints:0,maxPoints:499,multiplier:1,color:"bg-amber-100 text-amber-800",icon:"bronze"},SILVER:{name:"Silver",minPoints:500,maxPoints:999,multiplier:1.5,color:"bg-gray-100 text-gray-800",icon:"silver"},GOLD:{name:"Gold",minPoints:1e3,maxPoints:2499,multiplier:2,color:"bg-gold/20 text-gold",icon:"gold"},PLATINUM:{name:"Platinum",minPoints:2500,maxPoints:1/0,multiplier:2.5,color:"bg-purple-100 text-purple-800",icon:"platinum"}},Ms=()=>{const{user:t}=wt(),[s,a]=e.useState([]),[r,n]=e.useState([]),[l,o]=e.useState(!1),[i,c]=e.useState(null),[d,m]=e.useState(null),[u,x]=e.useState(""),[h,g]=e.useState("All"),[f,y]=e.useState("All"),[j,w]=e.useState(!1),S=t?.role||"General User",A=Ps(S,"customers","create"),T=Ps(S,"customers","edit"),R=Ps(S,"customers","delete"),P=Ps(S,"customers","manage_status");e.useEffect(()=>{O(),F()},[]);const O=async()=>{try{const e=await vt.getCustomers();if(e.success){const t=e.customers||[];a(t)}else console.error("Failed to load customers:",e.error),alert("Failed to load customers: "+(e.error||"Unknown error")),a([])}catch(e){console.error("Error loading customers:",e.message||e),alert("Error loading customers: "+(e.message||e)),a([])}},F=async()=>{try{const e=await vt.getLocations();e.success?n(e.locations||[]):(console.error("Failed to load locations:",e.error),n([]))}catch(e){console.error("Error loading locations:",e),n([])}},q=(e,t)=>{if(0===e.length)return void alert("No customer data to export");const s=Object.keys(e[0]),a=[s.join(","),...e.map(e=>s.map(t=>{const s=e[t]||"";return"string"==typeof s&&(s.includes(",")||s.includes('"'))?`"${s.replace(/"/g,'""')}"`:s}).join(","))].join("\n"),r=new Blob([a],{type:"text/csv;charset=utf-8;"}),n=document.createElement("a"),l=URL.createObjectURL(r);n.setAttribute("href",l),n.setAttribute("download",t),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n)},M=(e,t)=>{if(0===e.length)return void alert("No customer data to export");const s=JSON.stringify(e,null,2),a=new Blob([s],{type:"application/json;charset=utf-8;"}),r=document.createElement("a"),n=URL.createObjectURL(a);r.setAttribute("href",n),r.setAttribute("download",t),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r)},z=s.filter(e=>{const t=e.name.toLowerCase().includes(u.toLowerCase())||e.email.toLowerCase().includes(u.toLowerCase())||e.phone.includes(u),s="All"===h||e.status===h,a="All"===f||e.locations?.includes(f)||e.homeLocation===f||e.location_details&&e.location_details.some(e=>e.id===f)||e.home_location&&B(f)===e.home_location;return t&&s&&a}),U=Is(z,S,t?.location),B=e=>{const t=r.find(t=>t.id===e);return t?t.name:"Unknown Location"},V=e=>{if(e.homeLocation){const t=r.find(t=>t.id===e.homeLocation);if(t)return t.name}if(e.home_location&&e.home_location.trim())return e.home_location;if(e.location_details&&e.location_details.length>0){const t=e.location_details.find(e=>!0===e.is_home||1===e.is_home||"1"===e.is_home||!0===e.home||1===e.home||"1"===e.home);return t?t.name:e.location_details[0].name||"Unknown Location"}return"No Home Location"},H=e=>{switch(e){case"ACTIVE":return"text-green-600 bg-green-100";case"INACTIVE":return"text-red-600 bg-red-100";case"SUSPENDED":return"text-yellow-600 bg-yellow-100";default:return"text-gray-600 bg-gray-100"}},W={total:U.length,active:U.filter(e=>"ACTIVE"===e.status).length,inactive:U.filter(e=>"INACTIVE"===e.status).length,suspended:U.filter(e=>"SUSPENDED"===e.status).length};return it.jsxs("div",{className:"space-y-6",children:[it.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[it.jsxs("div",{children:[it.jsx("h2",{className:"text-2xl font-bold text-charcoal",children:"Customer Management"}),it.jsx("p",{className:"text-gray-600",children:"Manage customer accounts, status, and location access"})]}),it.jsxs("div",{className:"flex gap-3",children:[A&&it.jsxs("button",{onClick:()=>o(!0),className:"bg-gold-gradient text-charcoal px-6 py-3 rounded-md hover:shadow-lg transition-all flex items-center gap-2 font-medium",children:[it.jsx(I,{className:"w-5 h-5"}),"Add Customer"]}),it.jsxs("button",{onClick:()=>w(!0),className:"bg-gold-gradient text-charcoal px-6 py-3 rounded-md hover:shadow-lg transition-all flex items-center gap-2 font-medium",title:"Export Customer Data",children:[it.jsx(_,{className:"w-5 h-5"}),"Export"]})]})]}),it.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[it.jsx("div",{className:"bg-white p-6 rounded-lg shadow border-l-4 border-blue-500",children:it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsxs("div",{children:[it.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Customers"}),it.jsx("p",{className:"text-2xl font-bold text-charcoal",children:W.total})]}),it.jsx($,{className:"w-8 h-8 text-blue-500"})]})}),it.jsx("div",{className:"bg-white p-6 rounded-lg shadow border-l-4 border-green-500",children:it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsxs("div",{children:[it.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active"}),it.jsx("p",{className:"text-2xl font-bold text-green-600",children:W.active})]}),it.jsx(C,{className:"w-8 h-8 text-green-500"})]})}),it.jsx("div",{className:"bg-white p-6 rounded-lg shadow border-l-4 border-yellow-500",children:it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsxs("div",{children:[it.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Suspended"}),it.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:W.suspended})]}),it.jsx(E,{className:"w-8 h-8 text-yellow-500"})]})}),it.jsx("div",{className:"bg-white p-6 rounded-lg shadow border-l-4 border-red-500",children:it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsxs("div",{children:[it.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Inactive"}),it.jsx("p",{className:"text-2xl font-bold text-red-600",children:W.inactive})]}),it.jsx(b,{className:"w-8 h-8 text-red-500"})]})})]}),it.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:it.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[it.jsxs("div",{className:"relative",children:[it.jsx(K,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),it.jsx("input",{type:"text",placeholder:"Search customers...",value:u,onChange:e=>x(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent"})]}),it.jsxs("div",{className:"relative",children:[it.jsx(re,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),it.jsxs("select",{value:h,onChange:e=>g(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent appearance-none",children:[it.jsx("option",{value:"All",children:"All Statuses"}),it.jsx("option",{value:"ACTIVE",children:"Active"}),it.jsx("option",{value:"INACTIVE",children:"Inactive"}),it.jsx("option",{value:"SUSPENDED",children:"Suspended"})]})]}),it.jsxs("div",{className:"relative",children:[it.jsx(k,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),it.jsxs("select",{value:f,onChange:e=>y(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent appearance-none",children:[it.jsx("option",{value:"All",children:"All Locations"}),r.map(e=>it.jsx("option",{value:e.id,children:e.name},e.id))]})]})]})}),it.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:0===U.length?it.jsxs("div",{className:"p-8 text-center",children:[it.jsx($,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),it.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No customers found"}),it.jsx("p",{className:"text-gray-500 mb-6",children:0===s.length?"Get started by adding your first customer.":"Try adjusting your search or filter criteria."}),A&&0===s.length&&it.jsx("button",{onClick:()=>o(!0),className:"bg-gold-gradient text-charcoal px-6 py-3 rounded-md hover:shadow-lg transition-all font-medium",children:"Add Your First Customer"})]}):it.jsx("div",{className:"overflow-x-auto mobile-table-container",children:it.jsxs("table",{className:"min-w-full divide-y divide-gray-200",style:{minWidth:"800px"},children:[it.jsx("thead",{className:"bg-gray-50",children:it.jsxs("tr",{children:[it.jsx("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),it.jsx("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),it.jsx("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),it.jsx("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Home Location"}),it.jsx("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Locations Access"}),it.jsx("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),it.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:U.map(e=>{const t=(e=>{switch(e){case"ACTIVE":return C;case"INACTIVE":default:return b;case"SUSPENDED":return E}})(e.status);return it.jsxs("tr",{onClick:()=>m(e),className:"hover:bg-gray-50 cursor-pointer",children:[it.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap",children:it.jsxs("div",{className:"flex items-center",children:[it.jsx("div",{className:"w-8 sm:w-10 h-8 sm:h-10 bg-gold/20 rounded-full flex items-center justify-center hidden sm:flex",children:it.jsx("span",{className:"text-xs sm:text-sm font-bold text-gold",children:e.name.charAt(0).toUpperCase()})}),it.jsxs("div",{className:"ml-0 sm:ml-4 min-w-0",children:[it.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),it.jsxs("div",{className:"text-xs sm:text-sm text-gray-500 truncate",children:["ID: ",String(e.id).slice(-8)]})]})]})}),it.jsxs("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap",children:[it.jsxs("div",{className:"text-xs sm:text-sm text-gray-900 flex items-center gap-1 truncate",children:[it.jsx(v,{className:"w-3 sm:w-4 h-3 sm:h-4 text-gray-400 flex-shrink-0"}),it.jsx("span",{className:"truncate",children:e.email})]}),it.jsxs("div",{className:"text-xs sm:text-sm text-gray-500 flex items-center gap-1 truncate",children:[it.jsx(N,{className:"w-3 sm:w-4 h-3 sm:h-4 text-gray-400 flex-shrink-0"}),it.jsx("span",{className:"truncate",children:e.phone})]})]}),it.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap",children:it.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium gap-1 ${H(e.status)}`,children:[it.jsx(t,{className:"w-3 h-3"}),e.status]})}),it.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap text-xs sm:text-sm text-gray-900",children:it.jsx("span",{className:"truncate block",children:V(e)})}),it.jsxs("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap text-xs sm:text-sm text-gray-500",children:[e.location_details?.length||e.locations?.length||0," location",1!==(e.location_details?.length||e.locations?.length||0)?"s":""]}),it.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap text-sm font-medium",children:it.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[it.jsx("button",{onClick:t=>{t.stopPropagation(),m(e)},className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50",title:"View Details",children:it.jsx(p,{className:"w-3 sm:w-4 h-3 sm:h-4"})}),T&&it.jsx("button",{onClick:t=>{t.stopPropagation(),c(e)},className:"text-gold hover:text-gold-dark p-1 rounded hover:bg-gold/10",title:"Edit Customer",children:it.jsx(D,{className:"w-3 sm:w-4 h-3 sm:h-4"})}),R&&it.jsx("button",{onClick:t=>{t.stopPropagation(),(async e=>{if(window.confirm("Are you sure you want to delete this customer? This action cannot be undone."))try{const t=await vt.deleteCustomer(e);t.success?(await O(),d&&d.id===e&&m(null)):(console.error("Failed to delete customer:",t.error),alert("Failed to delete customer: "+t.error))}catch(t){console.error("Error deleting customer:",t),alert("Error deleting customer: "+t.message)}})(e.id)},className:"text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-50",title:"Delete Customer",children:it.jsx(L,{className:"w-3 sm:w-4 h-3 sm:h-4"})})]})})]},e.id)})})]})})}),(l||i)&&it.jsx(Ls,{customer:i,onSave:i?e=>(async(e,t)=>{try{const s=await vt.updateCustomer(e,t);if(s.success){if(await O(),c(null),d&&d.id===e){const t=await vt.getCustomer(e);t.success&&m(t.customer)}}else console.error("Failed to update customer:",s.error),alert("Failed to update customer: "+s.error)}catch(s){console.error("Error updating customer:",s),alert("Error updating customer: "+s.message)}})(i.id,e):async e=>{try{const t=await vt.createCustomer(e);t.success?(await O(),o(!1)):(console.error("Failed to add customer:",t.error),alert("Failed to add customer: "+t.error))}catch(t){console.error("Error adding customer:",t),alert("Error adding customer: "+t.message)}},onClose:()=>{o(!1),c(null)}}),d&&it.jsx(Fs,{customer:d,locations:r,onClose:()=>m(null),onEdit:e=>{m(null),c(e)},onStatusChange:P?async(e,t)=>{try{const a=s.find(t=>t.id===e);if(!a)return;const r={...a,status:t},n=await vt.updateCustomer(e,r);if(n.success){if(await O(),d&&d.id===e){const t=await vt.getCustomer(e);t.success&&m(t.customer)}}else console.error("Failed to change customer status:",n.error),alert("Failed to change customer status: "+n.error)}catch(a){console.error("Error changing customer status:",a),alert("Error changing customer status: "+a.message)}}:void 0}),j&&it.jsx($s,{totalCustomers:U.length,locations:r,onExport:(e,a,r="All",n="All")=>{let l=s.filter(e=>{const t="All"===r||e.status===r,s="All"===n||e.locations?.includes(n)||e.homeLocation===n||e.location_details&&e.location_details.some(e=>e.id===n)||e.home_location&&B(n)===e.home_location;return t&&s});l=Is(l,S,t?.location);const o=l.map(e=>{const t=((e=0)=>e>=qs.PLATINUM.minPoints?qs.PLATINUM:e>=qs.GOLD.minPoints?qs.GOLD:e>=qs.SILVER.minPoints?qs.SILVER:qs.BRONZE)(e.loyaltyPoints),s={id:e.id,name:e.name,email:e.email,phone:e.phone,status:e.status,loyaltyTier:t.name,loyaltyPoints:e.loyaltyPoints||0,totalOrders:e.totalOrders||0,totalSpent:e.totalSpent||0,homeLocation:V(e),createdAt:e.createdAt,updatedAt:e.updatedAt};if(a&&a.length>0){const e={};return a.forEach(t=>{s.hasOwnProperty(t)&&(e[t]=s[t])}),e}return s});"csv"===e?q(o,`customers-export-${(new Date).toISOString().split("T")[0]}.csv`):"json"===e&&M(o,`customers-export-${(new Date).toISOString().split("T")[0]}.json`),w(!1)},onClose:()=>w(!1)})]})},$s=({totalCustomers:t,locations:s,onExport:a,onClose:r})=>{const[n,l]=e.useState("csv"),[o,i]=e.useState([]),[c,d]=e.useState("All"),[m,u]=e.useState("All"),[x,h]=e.useState(!0),g=[{key:"id",label:"Customer ID",default:!0},{key:"name",label:"Name",default:!0},{key:"email",label:"Email",default:!0},{key:"phone",label:"Phone",default:!0},{key:"status",label:"Status",default:!0},{key:"loyaltyTier",label:"Loyalty Tier",default:!0},{key:"loyaltyPoints",label:"Loyalty Points",default:!1},{key:"totalOrders",label:"Total Orders",default:!1},{key:"totalSpent",label:"Total Spent",default:!1},{key:"homeLocation",label:"Home Location",default:!1},{key:"createdAt",label:"Created Date",default:!1},{key:"updatedAt",label:"Updated Date",default:!1}];e.useEffect(()=>{i(x?g.map(e=>e.key):g.filter(e=>e.default).map(e=>e.key))},[x]);return it.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:it.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[it.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[it.jsxs("div",{children:[it.jsx("h3",{className:"text-lg font-semibold text-charcoal",children:"Export Customer Data"}),it.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[t," customers available for export"]})]}),it.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:it.jsx(Q,{className:"w-6 h-6"})})]}),it.jsx("div",{className:"p-6",children:it.jsxs("div",{className:"space-y-6",children:[it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal/70 mb-3",children:"Export Format"}),it.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[it.jsxs("label",{className:"flex items-center p-3 border-2 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[it.jsx("input",{type:"radio",name:"format",value:"csv",checked:"csv"===n,onChange:e=>l(e.target.value),className:"mr-3"}),it.jsxs("div",{children:[it.jsx("div",{className:"font-medium text-charcoal",children:"CSV"}),it.jsx("div",{className:"text-sm text-gray-600",children:"Excel compatible format"})]})]}),it.jsxs("label",{className:"flex items-center p-3 border-2 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[it.jsx("input",{type:"radio",name:"format",value:"json",checked:"json"===n,onChange:e=>l(e.target.value),className:"mr-3"}),it.jsxs("div",{children:[it.jsx("div",{className:"font-medium text-charcoal",children:"JSON"}),it.jsx("div",{className:"text-sm text-gray-600",children:"Structured data format"})]})]})]})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal/70 mb-3",children:"Filters"}),it.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[it.jsxs("div",{children:[it.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-2",children:"Status"}),it.jsxs("select",{value:c,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent text-sm",children:[it.jsx("option",{value:"All",children:"All Statuses"}),it.jsx("option",{value:"Active",children:"Active"}),it.jsx("option",{value:"Inactive",children:"Inactive"}),it.jsx("option",{value:"Paused",children:"Paused"})]})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-2",children:"Location"}),it.jsxs("select",{value:m,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent text-sm",children:[it.jsx("option",{value:"All",children:"All Locations"}),s.map(e=>it.jsx("option",{value:e.id,children:e.name},e.id))]})]})]})]}),it.jsxs("div",{children:[it.jsxs("div",{className:"flex justify-between items-center mb-3",children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal/70",children:"Fields to Include"}),it.jsxs("label",{className:"flex items-center text-sm",children:[it.jsx("input",{type:"checkbox",checked:x,onChange:e=>h(e.target.checked),className:"mr-2"}),"Select All"]})]}),it.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto border border-gray-200 rounded-lg p-3",children:g.map(e=>it.jsxs("label",{className:"flex items-center text-sm cursor-pointer hover:bg-gray-50 p-2 rounded",children:[it.jsx("input",{type:"checkbox",checked:o.includes(e.key),onChange:()=>{return t=e.key,void i(e=>{const s=e.includes(t)?e.filter(e=>e!==t):[...e,t];return h(s.length===g.length),s});var t},className:"mr-2"}),e.label]},e.key))}),it.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[o.length," of ",g.length," fields selected"]})]})]})}),it.jsxs("div",{className:"flex justify-end gap-3 p-6 border-t border-gray-200",children:[it.jsx("button",{onClick:r,className:"px-4 py-2 bg-gray-200 text-charcoal rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),it.jsxs("button",{onClick:()=>{0!==o.length?a(n,o,c,m):alert("Please select at least one field to export")},className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-all flex items-center gap-2",children:[it.jsx(_,{className:"w-4 h-4"}),"Export Data"]})]})]})})};const zs=new class{constructor(){this._settingsCache=null}async getAllOrders(){try{const e=await pt.getAllOrders();return e.success?e.orders||[]:(console.error("Failed to get orders:",e.error),[])}catch(e){return console.error("Error getting orders:",e),[]}}async getOrder(e){try{return(await this.getAllOrders()).find(t=>t.order_number===e)}catch(t){return console.error("Error getting order:",t),null}}isValidOrderNumber(e){const t=e.toString().trim();return t.length>0&&/^[0-9]+$/.test(t)}async addOrder(e){try{const t=await pt.addOrder(e);if(t.success)return t.order;throw new Error(t.error)}catch(t){throw console.error("Error adding order:",t),t}}async updateOrderStatus(e,t,s=null,a=null){try{const r=await pt.updateOrderStatus(e,t,s,a);if(r.success)return r.order;throw new Error(r.error)}catch(r){throw console.error("Error updating order status:",r),r}}async deleteOrder(e,t=null,s=null){try{const a=await pt.deleteOrder(e,t,s);if(a.success)return{orderNumber:e,deleted:!0};throw new Error(a.error)}catch(a){throw console.error("Error deleting order:",a),a}}async getSettings(){if(this._settingsCache)return this._settingsCache;try{const e=await pt.getTableSettings();return e.success?(this._settingsCache=e.settings,this._settingsCache):(console.error("Failed to get settings:",e.error),{})}catch(e){return console.error("Error getting settings:",e),{}}}async isValidTableNumber(e){try{const t=e.toString().trim().toUpperCase();return t.length>0&&(/^[0-9]+$/.test(t)||/^P[0-9]+$/.test(t)||/^B[0-9]+$/.test(t))}catch(t){return console.error("Error validating table number:",t),!1}}async getTableArea(e){try{const t=e.toString().trim().toUpperCase();return/^[0-9]+$/.test(t)?"dining":/^P[0-9]+$/.test(t)?"patio":/^B[0-9]+$/.test(t)?"bar":"unknown"}catch(t){return console.error("Error getting table area:",t),"unknown"}}async getAllMappings(){try{const e=await pt.getAllMappings();return e.success?e.mappings||[]:(console.error("Failed to get mappings:",e.error),[])}catch(e){return console.error("Error getting mappings:",e),[]}}async getActiveMapping(e){try{return(await this.getAllMappings()).find(t=>t.order_number===e&&"active"===t.status)}catch(t){return console.error("Error getting active mapping:",t),null}}async getMappingByTable(e){try{return(await this.getAllMappings()).filter(t=>t.table_number.toString().toUpperCase()===e.toString().toUpperCase()&&"active"===t.status)}catch(t){return console.error("Error getting mapping by table:",t),[]}}async submitTableMapping(e,t,s="customer"){try{if(!this.isValidOrderNumber(t))throw new Error("Please enter a valid order number (numbers only).");if(!(await this.isValidTableNumber(e)))throw new Error("Invalid table number. Please check your table number and try again.");if("customer"===s){const s=await pt.submitTableMapping(e,t);if(s.success)return s.mapping;throw new Error(s.error)}{const s=await pt.submitManualMapping(e,t);if(s.success)return s.mapping;throw new Error(s.error)}}catch(a){throw console.error("Error submitting table mapping:",a),a}}async markDelivered(e,t="staff",s=null,a=null){try{const r=await pt.markDelivered(e,t,s,a);if(r.success)return r.mapping;throw new Error(r.error)}catch(r){throw console.error("Error marking as delivered:",r),r}}async clearMapping(e,t="manual_clear"){try{const s=await pt.clearMapping(e,t);if(s.success)return s.mapping;throw new Error(s.error)}catch(s){throw console.error("Error clearing mapping:",s),s}}async getAnalytics(){try{const e=await pt.getAnalytics();return e.success?e.analytics:(console.error("Failed to get analytics:",e.error),{})}catch(e){return console.error("Error getting analytics:",e),{}}}async exportDailyLog(){try{const[e,t]=await Promise.all([this.getAllOrders(),this.getAllMappings()]),s=(new Date).toISOString().split("T")[0],a=t.filter(e=>new Date(e.created_at).toISOString().split("T")[0]===s);return{date:s,mappings:a,orders:e.filter(e=>new Date(e.created_at).toISOString().split("T")[0]===s),summary:{totalSubmissions:a.length,delivered:a.filter(e=>"delivered"===e.status).length,active:a.filter(e=>"active"===e.status).length}}}catch(e){return console.error("Error exporting daily log:",e),{date:(new Date).toISOString().split("T")[0],mappings:[],orders:[],summary:{}}}}generateCSVContent(e){if(!e.mappings||0===e.mappings.length)return"No data available for export";const t=[["Date","Time","Order Number","Table Number","Area","Status","Source","Customer Name"].join(",")];return e.mappings.forEach(e=>{const s=new Date(e.created_at),a=[s.toISOString().split("T")[0],s.toLocaleTimeString(),e.order_number,e.table_number,e.area||"unknown",e.status||"unknown",e.source||"unknown",e.customer_name||"Walk-in Customer"];t.push(a.join(","))}),t.push(""),t.push(`Summary for ${e.date}`),t.push(`Total Submissions,${e.summary.totalSubmissions||0}`),t.push(`Delivered,${e.summary.delivered||0}`),t.push(`Active,${e.summary.active||0}`),t.join("\n")}},Us="new_order",Bs="order_updated",Vs="order_delivered",Hs="order_ready",Ws="table_changed",Qs="high",Js="medium",Gs="low",Ks="orderNotifications",Ys="employeeNotificationReadStatus",Xs="notificationSettings";const Zs=new class{constructor(){this._settingsCache={soundEnabled:!0,desktopNotifications:!0,showToasts:!0,autoMarkReadAfter:3e5,maxNotifications:100}}async getNotificationsForEmployee(e,t=null,s=50){try{const a=await pt.getEmployeeNotifications(e);if(a.success){let e=a.notifications||[];return t&&(e=e.filter(e=>!e.location||e.location===t)),e.sort((e,t)=>new Date(t.created_at||t.timestamp)-new Date(e.created_at||e.timestamp)).slice(0,s)}return console.error("Failed to get employee notifications:",a.error),[]}catch(a){return console.error("Error getting employee notifications:",a),[]}}async getUnreadCount(e){try{return(await this.getNotificationsForEmployee(e)).filter(e=>!e.is_read).length}catch(t){return console.error("Error getting unread count:",t),0}}async markNotificationAsRead(e){try{return await pt.markNotificationAsRead(e)}catch(t){return console.error("Error marking notification as read:",t),{success:!1,error:t.message}}}async markAllNotificationsAsRead(){try{return await pt.markAllNotificationsAsRead()}catch(e){return console.error("Error marking all notifications as read:",e),{success:!1,error:e.message}}}async deleteNotification(e){try{return await pt.deleteNotification(e)}catch(t){return console.error("Error deleting notification:",t),{success:!1,error:t.message}}}createNotification({type:e,title:t,message:s,orderNumber:a,tableNumber:r,customerName:n=null,location:l=null,priority:o=Js,data:i={}}){const c={id:Date.now().toString()+Math.random().toString(36).substr(2,9),type:e,title:t,message:s,orderNumber:a,tableNumber:r,customerName:n,location:l,priority:o,data:i,timestamp:(new Date).toISOString(),isActive:!0},d=this.getAllNotifications();d.unshift(c);const m=this.getSettings();return d.length>m.maxNotifications&&d.splice(m.maxNotifications),localStorage.setItem(Ks,JSON.stringify(d)),this.triggerSystemNotification(c),c}notifyNewTableSubmission(e,t,s=null,a=null){return this.createNotification({type:Us,title:"New Table Assignment",message:`Customer seated at Table ${e} with Order #${t}`,orderNumber:t,tableNumber:e,customerName:s,location:a,priority:Qs,data:{area:this.getTableArea(e),submitTime:(new Date).toISOString()}})}notifyOrderStatusChange(e,t,s,a,r="System"){return this.createNotification({type:Bs,title:" Order Status Updated",message:`Order #${e} at Table ${t}: ${{pending:"Order is pending",preparing:"Order is being prepared",ready:"Order is ready for delivery",delivered:"Order has been delivered",completed:"Order completed"}[a]}`,orderNumber:e,tableNumber:t,priority:"ready"===a?Qs:Js,data:{oldStatus:s,newStatus:a,updatedBy:r,updateTime:(new Date).toISOString()}})}notifyTableChange(e,t,s,a="Customer request"){return this.createNotification({type:Ws,title:" Table Changed",message:`Order #${e} moved from Table ${t} to Table ${s}`,orderNumber:e,tableNumber:s,priority:Js,data:{oldTable:t,newTable:s,reason:a,changeTime:(new Date).toISOString()}})}notifyOrderReady(e,t,s="Kitchen"){return this.createNotification({type:Hs,title:" Order Ready!",message:`Order #${e} is ready for delivery to Table ${t}`,orderNumber:e,tableNumber:t,priority:Qs,data:{preparedBy:s,readyTime:(new Date).toISOString(),requiresDelivery:!0}})}notifyOrderDelivered(e,t,s="Staff"){return this.createNotification({type:Vs,title:" Order Delivered",message:`Order #${e} successfully delivered to Table ${t}`,orderNumber:e,tableNumber:t,priority:Gs,data:{deliveredBy:s,deliveryTime:(new Date).toISOString()}})}markAsRead(e,t){const s=this.getEmployeeReadStatus(t);s[e]={readAt:(new Date).toISOString(),readBy:t},localStorage.setItem(Ys,JSON.stringify({...JSON.parse(localStorage.getItem(Ys)||"{}"),[t]:s}))}markAllAsRead(e){const t=this.getNotificationsForEmployee(e),s=this.getEmployeeReadStatus(e),a=(new Date).toISOString();t.forEach(t=>{s[t.id]={readAt:a,readBy:e}});const r=JSON.parse(localStorage.getItem(Ys)||"{}");r[e]=s,localStorage.setItem(Ys,JSON.stringify(r))}getEmployeeReadStatus(e){return JSON.parse(localStorage.getItem(Ys)||"{}")[e]||{}}dismissNotification(e){const t=this.getAllNotifications().map(t=>t.id===e?{...t,isActive:!1,dismissedAt:(new Date).toISOString()}:t);localStorage.setItem(Ks,JSON.stringify(t))}getActiveNotifications(e,t=null){return this.getNotificationsForEmployee(e,t).filter(e=>!1!==e.isActive)}triggerSystemNotification(e){const t=this.getSettings();if(!t.desktopNotifications)return;const s=window.location.pathname,a=s.includes("/seating")||s.includes("/success")||"/"===s;a||this.showToastNotification(e),t.soundEnabled&&!a&&this.playNotificationSound(e.priority)}showToastNotification(e){const t=document.createElement("div");t.className="toast-notification",t.style.cssText=`\n      position: fixed;\n      bottom: 20px;\n      right: 20px;\n      background-color: #fff;\n      color: #333;\n      padding: 12px 16px;\n      border-radius: 4px;\n      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);\n      z-index: 9999;\n      max-width: 300px;\n      font-family: system-ui, -apple-system, sans-serif;\n      transition: opacity 0.3s ease-in-out;\n      border-left: 4px solid ${e.priority===Qs?"#f44336":e.priority===Js?"#ff9800":"#4caf50"};\n    `;const s=document.createElement("div");s.textContent=e.title,s.style.cssText="font-weight: bold; margin-bottom: 5px;",t.appendChild(s);const a=document.createElement("div");a.textContent=e.message,a.style.cssText="font-size: 14px;",t.appendChild(a),document.body.appendChild(t);const r=e.priority===Qs?1e4:5e3;t.addEventListener("click",()=>{t.style.opacity="0",setTimeout(()=>{document.body.contains(t)&&document.body.removeChild(t)},300)}),setTimeout(()=>{t.style.opacity="0",setTimeout(()=>{document.body.contains(t)&&document.body.removeChild(t)},300)},r)}playNotificationSound(e){try{const t=new(window.AudioContext||window.webkitAudioContext),s=t.createOscillator(),a=t.createGain();s.connect(a),a.connect(t.destination),e===Qs?(s.frequency.setValueAtTime(800,t.currentTime),s.frequency.setValueAtTime(600,t.currentTime+.1),a.gain.setValueAtTime(.3,t.currentTime),a.gain.exponentialRampToValueAtTime(.01,t.currentTime+.5),s.start(t.currentTime),s.stop(t.currentTime+.5)):e===Js?(s.frequency.setValueAtTime(600,t.currentTime),a.gain.setValueAtTime(.2,t.currentTime),a.gain.exponentialRampToValueAtTime(.01,t.currentTime+.3),s.start(t.currentTime),s.stop(t.currentTime+.3)):(s.frequency.setValueAtTime(400,t.currentTime),a.gain.setValueAtTime(.1,t.currentTime),a.gain.exponentialRampToValueAtTime(.01,t.currentTime+.2),s.start(t.currentTime),s.stop(t.currentTime+.2))}catch(t){console.log("Audio notification not available:",t)}}getAllNotifications(){try{return JSON.parse(localStorage.getItem(Ks)||"[]")}catch(e){return console.error("Error getting notifications from localStorage:",e),[]}}getSettings(){const e={soundEnabled:!0,desktopNotifications:!0,showToasts:!0,autoMarkReadAfter:3e5,maxNotifications:100};try{const t=JSON.parse(localStorage.getItem(Xs)||"{}");return{...e,...t}}catch(t){return console.error("Error getting notification settings:",t),e}}updateSettings(e){const t={...this.getSettings(),...e};localStorage.setItem(Xs,JSON.stringify(t))}getTableArea(e){const t=e.toString().toUpperCase();return/^[0-9]+$/.test(t)?"dining":t.startsWith("P")?"patio":t.startsWith("B")?"bar":"unknown"}cleanupOldNotifications(e=7){const t=new Date(Date.now()-24*e*60*60*1e3),s=this.getAllNotifications().filter(e=>new Date(e.timestamp)>t);localStorage.setItem(Ks,JSON.stringify(s))}getNotificationStats(e=7){const t=this.getAllNotifications(),s=new Date(Date.now()-24*e*60*60*1e3),a=t.filter(e=>new Date(e.timestamp)>s);return{total:a.length,byType:a.reduce((e,t)=>(e[t.type]=(e[t.type]||0)+1,e),{}),byPriority:a.reduce((e,t)=>(e[t.priority]=(e[t.priority]||0)+1,e),{}),dailyBreakdown:a.reduce((e,t)=>{const s=new Date(t.timestamp).toISOString().split("T")[0];return e[s]=(e[s]||0)+1,e},{})}}},ea=()=>{const{user:t}=wt(),[s,a]=e.useState([]),[r,n]=e.useState([]),[l,o]=e.useState({}),[i,c]=e.useState(!1),[d,m]=e.useState(!1),[u,x]=e.useState(""),[h,g]=e.useState("active"),[p,f]=e.useState("all"),[b,y]=e.useState(!1),j=t?.role||t?.userType||"General User",v=Ps(j,"tableTracking","create"),N=Ps(j,"tableTracking","edit"),w=Ps(j,"tableTracking","delete");console.log("TableTracking Debug:",{user:t,currentUserType:j,canCreate:v,canEdit:N,canDelete:w}),e.useEffect(()=>{S()},[]);const S=async()=>{y(!0);try{console.log(" Loading admin table tracking data...");const[e,t,s]=await Promise.all([zs.getAllMappings(),zs.getAllOrders(),zs.getAnalytics()]);console.log(" Raw API response data:",{mappingsData:e,ordersData:t,analyticsData:s}),console.log(" Data analysis:",{mappingsCount:e?.length||0,ordersCount:t?.length||0,uniqueOrderNumbers:t?[...new Set(t.map(e=>e.orderNumber||e.order_number))]:[],orderNumbers:t?.map(e=>e.orderNumber||e.order_number)||[],duplicateOrders:t?t.length-[...new Set(t.map(e=>e.orderNumber||e.order_number))].length:0}),a(Array.isArray(e)?e:[]),n(Array.isArray(t)?t:[]),o(s||{}),console.log(" Admin table tracking data loaded successfully")}catch(e){console.error(" Error loading data:",e),a([]),n([]),o({})}finally{setTimeout(()=>y(!1),500)}},E=(s||[]).filter(e=>{try{const t=e?.order_number||e?.orderNumber||"",s=e?.table_number||e?.tableNumber||"",a=t.toString().includes(u)||s.toString().toUpperCase().includes(u.toUpperCase());return a&&("all"===h||e?.status===h)&&("all"===p||(e?.area||"unknown")===p)}catch(t){return console.error("Error filtering mapping:",t,e),!1}}),A=e=>{switch(e){case"active":return"text-blue-600 bg-blue-100";case"delivered":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}},T=e=>{switch(e){case"pending":return"text-yellow-600 bg-yellow-100";case"preparing":return"text-blue-600 bg-blue-100";case"ready":return"text-purple-600 bg-purple-100";case"delivered":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}},_=e=>{switch(e){case"dining":return"text-purple-600 bg-purple-100";case"patio":return"text-green-600 bg-green-100";case"bar":return"text-orange-600 bg-orange-100";default:return"text-gray-600 bg-gray-100"}},R=e=>{if(!e)return"N/A";try{return new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch(t){return"Invalid time"}},P=e=>{if(!e)return"Unknown";try{const t=Math.floor((Date.now()-new Date(e).getTime())/6e4);return t<1?"Just now":1===t?"1 min ago":`${t} mins ago`}catch(t){return"Unknown time"}},O=l.dailyStats?.[(new Date).toISOString().split("T")[0]]||{submissions:0,deliveries:0};return it.jsxs("div",{className:"space-y-6",children:[it.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[it.jsxs("div",{children:[it.jsx("h2",{className:"text-2xl font-bold text-charcoal",children:"Table Tracking Management"}),it.jsx("p",{className:"text-gray-600",children:"Monitor and manage customer table assignments"})]}),it.jsxs("div",{className:"flex flex-col gap-3 w-full sm:w-auto",children:[it.jsxs("button",{onClick:S,disabled:b,className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors disabled:opacity-50 w-full sm:w-auto mobile-hide-button-icons",children:[it.jsx(ge,{className:"w-4 h-4 "+(b?"animate-spin":"")}),it.jsx("span",{className:"mobile-text-content",children:"Refresh"})]}),v&&it.jsxs("div",{className:"flex gap-3 w-full sm:w-auto",children:[it.jsxs("button",{onClick:()=>m(!0),className:"bg-gold-gradient text-charcoal px-4 py-2 rounded-md hover:shadow-lg transition-all flex items-center justify-center gap-2 flex-1 sm:flex-none mobile-hide-button-icons",children:[it.jsx(I,{className:"w-4 h-4"}),it.jsx("span",{className:"mobile-text-content",children:"Manual Entry"})]}),it.jsxs("button",{onClick:()=>c(!0),className:"bg-gold-gradient text-charcoal px-4 py-2 rounded-md hover:shadow-lg transition-all flex items-center justify-center gap-2 flex-1 sm:flex-none mobile-hide-button-icons",children:[it.jsx(I,{className:"w-4 h-4"}),it.jsx("span",{className:"mobile-text-content",children:"Add Order"})]})]})]})]}),it.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[it.jsx("div",{className:"bg-white p-6 rounded-lg shadow border-l-4 border-blue-500",children:it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsxs("div",{children:[it.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Today's Submissions"}),it.jsx("p",{className:"text-2xl font-bold text-charcoal",children:O.submissions})]}),it.jsx(k,{className:"w-8 h-8 text-blue-500"})]})}),it.jsx("div",{className:"bg-white p-6 rounded-lg shadow border-l-4 border-green-500",children:it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsxs("div",{children:[it.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Delivered"}),it.jsx("p",{className:"text-2xl font-bold text-green-600",children:O.deliveries})]}),it.jsx(C,{className:"w-8 h-8 text-green-500"})]})}),it.jsx("div",{className:"bg-white p-6 rounded-lg shadow border-l-4 border-yellow-500",children:it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsxs("div",{children:[it.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Mappings"}),it.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:s.filter(e=>"active"===e.status).length})]}),it.jsx($,{className:"w-8 h-8 text-yellow-500"})]})})]}),it.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:it.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[it.jsxs("div",{className:"relative",children:[it.jsx(K,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),it.jsx("input",{type:"text",placeholder:"Search orders or tables...",value:u,onChange:e=>x(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent"})]}),it.jsxs("select",{value:h,onChange:e=>g(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent",children:[it.jsx("option",{value:"all",children:"All Statuses"}),it.jsx("option",{value:"active",children:"Active"}),it.jsx("option",{value:"delivered",children:"Delivered"}),it.jsx("option",{value:"cleared",children:"Cleared"})]}),it.jsxs("select",{value:p,onChange:e=>f(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent",children:[it.jsx("option",{value:"all",children:"All Areas"}),it.jsx("option",{value:"dining",children:"Dining Room"}),it.jsx("option",{value:"patio",children:"Patio"}),it.jsx("option",{value:"bar",children:"Bar"}),it.jsx("option",{value:"unknown",children:"Unknown"})]})]})}),it.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:0===E.length?it.jsxs("div",{className:"p-8 text-center",children:[it.jsx(k,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),it.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No mappings found"}),it.jsx("p",{className:"text-gray-500 mb-6",children:0===s.length?"No table mappings have been submitted yet.":"Try adjusting your search or filter criteria."})]}):it.jsx("div",{className:"overflow-x-auto",children:it.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[it.jsx("thead",{className:"bg-gray-50",children:it.jsxs("tr",{children:[it.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order Details"}),it.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),it.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Table & Area"}),it.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time"}),it.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Mapping Status"}),it.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order Status"}),it.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Source"}),it.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),it.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:E.map(e=>it.jsxs("tr",{className:"hover:bg-gray-50",children:[it.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:it.jsxs("div",{className:"flex items-center",children:[it.jsx("div",{className:"w-10 h-10 bg-gold/20 rounded-full flex items-center justify-center hidden-480",children:it.jsx(pe,{className:"w-5 h-5 text-gold"})}),it.jsxs("div",{className:"ml-4",children:[it.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["Order #",e.order_number||e.orderNumber,(()=>{const t=e.order_number||e.orderNumber,a=s.filter(e=>(e.order_number||e.orderNumber)===t&&"active"===e.status).length;return a>1?it.jsxs("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[a," locations"]}):null})()]}),it.jsxs("div",{className:"text-sm text-gray-500",children:[e.updateCount>0&&it.jsxs("span",{className:"text-orange-600",children:["Updated ",e.updateCount," time(s)"]}),e.submission_id&&it.jsxs("span",{className:"text-xs text-gray-400 block",children:["ID: ",e.submission_id?.split("_")[3]||"N/A"]})]})]})]})}),it.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[it.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.customer_name||e.customerName||"Walk-in Customer"}),it.jsx("div",{className:"text-sm text-gray-500",children:e.customer_phone||e.customerPhone||"No phone"})]}),it.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[it.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["Table ",e.table_number||e.tableNumber]}),it.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${_(e.area||"unknown")}`,children:e.area||"unknown"})]}),it.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[it.jsx("div",{className:"text-sm font-medium text-gray-900",children:R(e.created_at||e.createdAt)}),it.jsx("div",{className:"text-sm text-gray-500",children:P(e.created_at||e.createdAt)})]}),it.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:it.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${A(e.status)}`,children:e.status})}),it.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(()=>{const t=e.specific_order?.status||e.specificOrder?.status||"pending";return it.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${T(t)}`,children:t})})()}),it.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:it.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+("customer"===e.source?"text-green-600 bg-green-100":"text-blue-600 bg-blue-100"),children:e.source})}),it.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:it.jsx("div",{className:"flex items-center gap-2",children:(()=>{const s=e.order_number||e.orderNumber,a=e.table_number||e.tableNumber,r=e.specific_order?.status||e.specificOrder?.status||"pending";return it.jsxs(it.Fragment,{children:[N&&"active"===e.status&&it.jsxs("select",{value:r,onChange:t=>(async(e,t,s,a)=>{try{console.log("Updating order status:",{orderNumber:e,newStatus:t,tableNumber:s,mappingId:a}),await zs.updateOrderStatus(e,t,a,s),await S(),console.log("Order status updated successfully")}catch(r){console.error("Error updating order status:",r),alert("Error updating order status: "+r.message)}})(s,t.target.value,a,e.id),className:`text-xs font-medium px-2.5 py-1.5 rounded-md border focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent ${T(r)} min-w-[100px]`,title:"Update Order Status",children:[it.jsx("option",{value:"pending",children:"Pending"}),it.jsx("option",{value:"preparing",children:"Preparing"}),it.jsx("option",{value:"ready",children:"Ready"}),it.jsx("option",{value:"delivered",children:"Delivered"}),it.jsx("option",{value:"completed",children:"Completed"})]}),"active"===e.status&&N&&it.jsx("button",{onClick:()=>(async(e,s,a)=>{try{await zs.markDelivered(e,t?.name||"Admin",s,a),await S()}catch(r){alert("Error marking as delivered: "+r.message)}})(e.order_number||e.orderNumber,e.id,e.table_number||e.tableNumber),className:"text-green-600 hover:text-green-900 p-1 rounded hover:bg-green-50",title:"Mark as Delivered",children:it.jsx(C,{className:"w-4 h-4"})}),w&&it.jsx("button",{onClick:()=>(async(e,t=null,s=null)=>{if(window.confirm("Are you sure you want to DELETE this order? This will permanently remove the order and clear its table mapping."))try{await zs.deleteOrder(e,t,s),await S(),alert("Order deleted successfully!")}catch(a){alert("Error deleting order: "+a.message)}})(e.order_number||e.orderNumber,e.id,e.table_number||e.tableNumber),className:"text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-50",title:"Delete Order",children:it.jsx(L,{className:"w-4 h-4"})})]})})()})})]},e.id))})]})})}),d&&it.jsx(ta,{onSubmit:async(e,t)=>{try{await zs.submitTableMapping(e,t,"admin"),await S(),m(!1),alert("Table mapping added successfully!")}catch(s){alert(s.message)}},onClose:()=>m(!1)}),i&&it.jsx(sa,{onSubmit:async e=>{try{await zs.addOrder(e),await S(),c(!1),alert("Order added successfully!")}catch(t){alert("Error adding order: "+t.message)}},onClose:()=>c(!1)})]})},ta=({onSubmit:t,onClose:s})=>{const[a,r]=e.useState({tableNumber:"",orderNumber:""}),[n,l]=e.useState({});return it.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:it.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[it.jsx("h3",{className:"text-lg font-semibold text-charcoal mb-4",children:"Manual Table Entry"}),it.jsxs("form",{onSubmit:e=>{e.preventDefault();const s={};a.tableNumber||(s.tableNumber="Table number is required"),a.orderNumber||(s.orderNumber="Order number is required"),Object.keys(s).length>0?l(s):t(a.tableNumber,a.orderNumber)},className:"space-y-4",children:[it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal mb-1",children:"Table Number *"}),it.jsx("input",{type:"text",value:a.tableNumber,onChange:e=>r(t=>({...t,tableNumber:e.target.value.toUpperCase()})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent",placeholder:"e.g., 12, P3, B1"}),n.tableNumber&&it.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.tableNumber})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal mb-1",children:"Order Number *"}),it.jsx("input",{type:"text",value:a.orderNumber,onChange:e=>r(t=>({...t,orderNumber:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent",placeholder:"e.g., 4837"}),n.orderNumber&&it.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.orderNumber})]}),it.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[it.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"Cancel"}),it.jsx("button",{type:"submit",className:"px-4 py-2 bg-gold-gradient text-charcoal rounded-md hover:shadow-lg transition-all",children:"Add Mapping"})]})]})]})})},sa=({onSubmit:t,onClose:s})=>{const[a,r]=e.useState({orderNumber:"",customerName:"",status:"pending"});return it.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:it.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[it.jsx("h3",{className:"text-lg font-semibold text-charcoal mb-4",children:"Add New Order"}),it.jsxs("form",{onSubmit:e=>{e.preventDefault(),a.orderNumber&&t(a)},className:"space-y-4",children:[it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal mb-1",children:"Order Number *"}),it.jsx("input",{type:"text",value:a.orderNumber,onChange:e=>r(t=>({...t,orderNumber:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent",placeholder:"e.g., 4840",required:!0})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal mb-1",children:"Customer Name"}),it.jsx("input",{type:"text",value:a.customerName,onChange:e=>r(t=>({...t,customerName:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent",placeholder:"Walk-in Customer"})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal mb-1",children:"Status"}),it.jsxs("select",{value:a.status,onChange:e=>r(t=>({...t,status:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent",children:[it.jsx("option",{value:"pending",children:"Pending"}),it.jsx("option",{value:"preparing",children:"Preparing"}),it.jsx("option",{value:"ready",children:"Ready"})]})]}),it.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[it.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"Cancel"}),it.jsx("button",{type:"submit",className:"px-4 py-2 bg-gold-gradient text-charcoal rounded-md hover:shadow-lg transition-all",children:"Add Order"})]})]})]})})},aa=()=>{const[t,s]=e.useState([]),[a,r]=e.useState([]),[n,l]=e.useState([]),[o,i]=e.useState(null),[c,d]=e.useState(!1),[m,u]=e.useState(!1),[x,h]=e.useState(null),[g,f]=e.useState("all"),[b,y]=e.useState("all"),[j,v]=e.useState("");e.useEffect(()=>{N(),w()},[]);const N=()=>{const e=localStorage.getItem("employees");if(e){const t=JSON.parse(e);s(t.filter(e=>"ACTIVE"===e.status))}},w=()=>{const e=localStorage.getItem("performanceReports"),t=localStorage.getItem("performanceInteractions");e&&r(JSON.parse(e)),t&&l(JSON.parse(t))},k=e=>e?`${e.personalInfo?.firstName||e.name||"Employee"} ${e.personalInfo?.lastName||""}`.trim():"Unknown Employee",S=e=>a.filter(t=>t.employeeId===e),C=e=>n.filter(t=>t.employeeId===e),E=()=>{let e=t;return j.trim()&&(e=e.filter(e=>{const t=k(e).toLowerCase(),s=(e.email||"").toLowerCase(),a=(e.location?.name||"").toLowerCase();return t.includes(j.toLowerCase())||s.includes(j.toLowerCase())||a.includes(j.toLowerCase())})),"all"!==g&&(e=e.filter(e=>{const t=S(e.id),s=t.sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt))[0];return"excellent"===g?s?.overallRating>=4.5:"good"===g?s?.overallRating>=3.5&&s?.overallRating<4.5:"needs-improvement"===g?s?.overallRating<3.5:"no-reports"!==g||0===t.length})),e};return it.jsxs("div",{className:"space-y-6",children:[it.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[it.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-100",children:it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsxs("div",{children:[it.jsx("p",{className:"text-sm font-medium text-charcoal/70",children:"Total Employees"}),it.jsx("p",{className:"text-2xl font-bold text-charcoal",children:t.length})]}),it.jsx("div",{className:"p-3 bg-blue-100 rounded-xl",children:it.jsx(F,{className:"w-6 h-6 text-blue-600"})})]})}),it.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-100",children:it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsxs("div",{children:[it.jsx("p",{className:"text-sm font-medium text-charcoal/70",children:"Total Reports"}),it.jsx("p",{className:"text-2xl font-bold text-charcoal",children:a.length})]}),it.jsx("div",{className:"p-3 bg-green-100 rounded-xl",children:it.jsx(Q,{className:"w-6 h-6 text-green-600"})})]})}),it.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-100",children:it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsxs("div",{children:[it.jsx("p",{className:"text-sm font-medium text-charcoal/70",children:"Avg Rating"}),it.jsx("p",{className:"text-2xl font-bold text-charcoal",children:a.length>0?(a.reduce((e,t)=>e+t.overallRating,0)/a.length).toFixed(1):"0.0"})]}),it.jsx("div",{className:"p-3 bg-yellow-100 rounded-xl",children:it.jsx(ue,{className:"w-6 h-6 text-yellow-600"})})]})}),it.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-100",children:it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsxs("div",{children:[it.jsx("p",{className:"text-sm font-medium text-charcoal/70",children:"Interactions"}),it.jsx("p",{className:"text-2xl font-bold text-charcoal",children:n.length})]}),it.jsx("div",{className:"p-3 bg-purple-100 rounded-xl",children:it.jsx(xe,{className:"w-6 h-6 text-purple-600"})})]})})]}),it.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-100",children:it.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[it.jsx("div",{className:"flex-1",children:it.jsxs("div",{className:"relative",children:[it.jsx(K,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),it.jsx("input",{type:"text",placeholder:"Search employees...",value:j,onChange:e=>v(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent"})]})}),it.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[it.jsxs("select",{value:g,onChange:e=>f(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent bg-white min-w-0 flex-shrink-0",children:[it.jsx("option",{value:"all",children:"All Performance"}),it.jsx("option",{value:"excellent",children:"Excellent (4.5+)"}),it.jsx("option",{value:"good",children:"Good (3.5-4.4)"}),it.jsx("option",{value:"needs-improvement",children:"Needs Improvement (<3.5)"}),it.jsx("option",{value:"no-reports",children:"No Reports"})]}),it.jsxs("button",{onClick:()=>d(!0),className:"bg-gold-gradient text-charcoal px-4 py-2 rounded-lg hover:shadow-lg transition-all flex items-center justify-center gap-2 whitespace-nowrap min-w-0 flex-shrink-0",children:[it.jsx(I,{className:"w-4 h-4 hidden sm:inline"}),"New Report"]})]})]})}),it.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-100 overflow-hidden",children:[it.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-brand-navy to-brand-navy/90 border-b border-gold/20",children:[it.jsx("h3",{className:"text-lg font-semibold text-cream",children:"Employee Performance Overview"}),it.jsx("p",{className:"text-sm text-cream/80",children:"Manage performance reports and feedback for all employees"})]}),it.jsxs("div",{className:"overflow-x-auto",children:[it.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[it.jsx("thead",{className:"bg-gray-50",children:it.jsxs("tr",{children:[it.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-charcoal uppercase tracking-wider",children:"Employee"}),it.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-charcoal uppercase tracking-wider",children:"Performance Status"}),it.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-charcoal uppercase tracking-wider",children:"Latest Report"}),it.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-charcoal uppercase tracking-wider",children:"Total Reports"}),it.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-charcoal uppercase tracking-wider",children:"Interactions"}),it.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-charcoal uppercase tracking-wider",children:"Actions"})]})}),it.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:E().map(e=>{const t=(e=>{const t=S(e.id);if(0===t.length)return{status:"No Reports",color:"bg-gray-100 text-gray-600",rating:null};const s=t.sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt))[0].overallRating;return s>=4.5?{status:"Excellent",color:"bg-green-100 text-green-700",rating:s}:s>=3.5?{status:"Good",color:"bg-blue-100 text-blue-700",rating:s}:s>=2.5?{status:"Satisfactory",color:"bg-yellow-100 text-yellow-700",rating:s}:{status:"Needs Improvement",color:"bg-red-100 text-red-700",rating:s}})(e),s=S(e.id),a=C(e.id),r=s.sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt))[0];return it.jsxs("tr",{className:"hover:bg-gold/5 transition-all duration-200",children:[it.jsx("td",{className:"px-6 py-5 whitespace-nowrap",children:it.jsxs("div",{className:"flex items-center gap-3",children:[it.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-100 to-indigo-100 rounded-full items-center justify-center hidden sm:flex",children:it.jsx(F,{className:"w-5 h-5 text-blue-600"})}),it.jsxs("div",{children:[it.jsx("div",{className:"text-sm font-semibold text-charcoal",children:k(e)}),it.jsx("div",{className:"text-xs text-charcoal/60",children:e.email}),it.jsx("div",{className:"text-xs text-charcoal/50",children:e.location?.name||"No location"})]})]})}),it.jsx("td",{className:"px-6 py-5 whitespace-nowrap",children:it.jsxs("div",{className:"flex items-center gap-2",children:[it.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${t.color}`,children:t.status}),t.rating&&it.jsxs("div",{className:"flex items-center gap-1",children:[it.jsx(ue,{className:"w-3 h-3 text-yellow-500 fill-current hidden sm:inline"}),it.jsx("span",{className:"text-xs font-medium text-charcoal",children:t.rating.toFixed(1)})]})]})}),it.jsx("td",{className:"px-6 py-5 whitespace-nowrap text-sm text-charcoal",children:r?it.jsxs("div",{children:[it.jsx("div",{className:"font-medium",children:new Date(r.createdAt).toLocaleDateString()}),it.jsx("div",{className:"text-xs text-charcoal/60",children:r.type||"Performance Review"})]}):it.jsx("span",{className:"text-charcoal/50",children:"No reports"})}),it.jsx("td",{className:"px-6 py-5 whitespace-nowrap",children:it.jsxs("div",{className:"flex items-center gap-2",children:[it.jsx(Q,{className:"w-4 h-4 text-blue-600 hidden sm:inline"}),it.jsx("span",{className:"text-sm font-medium text-charcoal",children:s.length})]})}),it.jsx("td",{className:"px-6 py-5 whitespace-nowrap",children:it.jsxs("div",{className:"flex items-center gap-2",children:[it.jsx(xe,{className:"w-4 h-4 text-purple-600 hidden sm:inline"}),it.jsx("span",{className:"text-sm font-medium text-charcoal",children:a.length})]})}),it.jsx("td",{className:"px-6 py-5 whitespace-nowrap",children:it.jsxs("div",{className:"flex items-center gap-2",children:[it.jsx("button",{onClick:()=>{i(e),h(e)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-all",title:"View Details",children:it.jsx(p,{className:"w-4 h-4"})}),it.jsx("button",{onClick:()=>{i(e),d(!0)},className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-all",title:"New Report",children:it.jsx(I,{className:"w-4 h-4"})}),it.jsx("button",{onClick:()=>{i(e),u(!0)},className:"p-2 text-purple-600 hover:bg-purple-50 rounded-lg transition-all",title:"Add Feedback",children:it.jsx(xe,{className:"w-4 h-4"})})]})})]},e.id)})})]}),0===E().length&&it.jsxs("div",{className:"text-center py-12",children:[it.jsx(F,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),it.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No employees found"}),it.jsx("p",{className:"text-gray-500",children:"Try adjusting your search or filter criteria."})]})]})]}),c&&it.jsx(ra,{employee:o,onClose:()=>{d(!1),i(null)},onSave:e=>{const t={id:Date.now().toString(),employeeId:o?.id||e.employeeId,employeeName:o?k(o):"",createdAt:(new Date).toISOString(),createdBy:"Admin",...e},s=[...a,t];r(s),localStorage.setItem("performanceReports",JSON.stringify(s)),t.employeeId&&ft.notifyPerformanceReport(t.employeeId,t.type||"Performance Review",t.overallRating),d(!1),i(null)},employees:t}),m&&it.jsx(na,{employee:o,onClose:()=>{u(!1),i(null)},onSave:e=>{const t={id:Date.now().toString(),employeeId:o.id,employeeName:k(o),type:"feedback",createdAt:(new Date).toISOString(),createdBy:"Admin",...e},s=[...n,t];l(s),localStorage.setItem("performanceInteractions",JSON.stringify(s)),ft.notifyFeedback(o.id,e.subject),u(!1),i(null)}}),x&&it.jsx(la,{employee:x,reports:S(x.id),interactions:C(x.id),onClose:()=>{h(null),i(null)},onDeleteReport:e=>{const t=a.filter(t=>t.id!==e);r(t),localStorage.setItem("performanceReports",JSON.stringify(t))},onDeleteInteraction:e=>{const t=n.filter(t=>t.id!==e);l(t),localStorage.setItem("performanceInteractions",JSON.stringify(t))}})]})},ra=({employee:t,employees:s,onClose:a,onSave:r})=>{const[n,l]=e.useState({employeeId:t?.id||"",type:"Performance Review",reviewPeriod:"monthly",ratings:{punctuality:3,workQuality:3,teamwork:3,communication:3,customerService:3,initiative:3},strengths:"",areasForImprovement:"",goals:"",notes:"",overallRating:3});e.useEffect(()=>{const e=Object.values(n.ratings).reduce((e,t)=>e+t,0)/Object.values(n.ratings).length;l(t=>({...t,overallRating:Number(e.toFixed(1))}))},[n.ratings]);const o=(e,t)=>it.jsxs("div",{className:"flex items-center gap-1",children:[[1,2,3,4,5].map(s=>it.jsx("button",{onClick:()=>((e,t)=>{l(s=>({...s,ratings:{...s.ratings,[e]:t}}))})(e,s),className:`w-6 h-6 ${s<=t?"text-yellow-500 fill-current":"text-gray-300"} hover:text-yellow-400 transition-colors`,children:it.jsx(ue,{className:"w-full h-full"})},s)),it.jsxs("span",{className:"text-sm font-medium text-charcoal ml-2",children:[t,".0"]})]});return it.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:it.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[95vh] overflow-hidden flex flex-col",children:[it.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 flex-shrink-0",children:[it.jsx("h3",{className:"text-xl font-semibold text-charcoal",children:"New Performance Report"}),it.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",children:it.jsx("span",{className:"text-2xl",children:""})})]}),it.jsx("div",{className:"p-6 overflow-y-auto flex-1 min-h-0",children:it.jsxs("div",{className:"space-y-6 pb-4",children:[!t&&it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal/70 mb-2",children:"Select Employee"}),it.jsxs("select",{value:n.employeeId,onChange:e=>l({...n,employeeId:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent",children:[it.jsx("option",{value:"",children:"Choose an employee..."}),s.map(e=>it.jsxs("option",{value:e.id,children:[`${e.personalInfo?.firstName||e.name||"Employee"} ${e.personalInfo?.lastName||""}`.trim()," - ",e.location?.name]},e.id))]})]}),it.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal/70 mb-2",children:"Report Type"}),it.jsxs("select",{value:n.type,onChange:e=>l({...n,type:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent",children:[it.jsx("option",{value:"Performance Review",children:"Performance Review"}),it.jsx("option",{value:"90-Day Review",children:"90-Day Review"}),it.jsx("option",{value:"Annual Review",children:"Annual Review"}),it.jsx("option",{value:"Disciplinary Action",children:"Disciplinary Action"}),it.jsx("option",{value:"Recognition",children:"Recognition"})]})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal/70 mb-2",children:"Review Period"}),it.jsxs("select",{value:n.reviewPeriod,onChange:e=>l({...n,reviewPeriod:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent",children:[it.jsx("option",{value:"weekly",children:"Weekly"}),it.jsx("option",{value:"monthly",children:"Monthly"}),it.jsx("option",{value:"quarterly",children:"Quarterly"}),it.jsx("option",{value:"annual",children:"Annual"})]})]})]}),it.jsxs("div",{children:[it.jsx("h4",{className:"text-lg font-semibold text-charcoal mb-4",children:"Performance Ratings"}),it.jsx("div",{className:"space-y-4",children:[{key:"punctuality",label:"Punctuality & Attendance"},{key:"workQuality",label:"Work Quality & Accuracy"},{key:"teamwork",label:"Teamwork & Collaboration"},{key:"communication",label:"Communication Skills"},{key:"customerService",label:"Customer Service"},{key:"initiative",label:"Initiative & Problem Solving"}].map(e=>it.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[it.jsx("span",{className:"font-medium text-charcoal",children:e.label}),o(e.key,n.ratings[e.key])]},e.key))})]}),it.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsx("span",{className:"text-lg font-semibold text-charcoal",children:"Overall Rating"}),it.jsxs("div",{className:"flex items-center gap-2",children:[it.jsx("div",{className:"flex items-center",children:[1,2,3,4,5].map(e=>it.jsx(ue,{className:"w-6 h-6 "+(e<=n.overallRating?"text-yellow-500 fill-current":"text-gray-300")},e))}),it.jsx("span",{className:"text-xl font-bold text-charcoal",children:n.overallRating})]})]})}),it.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal/70 mb-2",children:"Strengths & Achievements"}),it.jsx("textarea",{value:n.strengths,onChange:e=>l({...n,strengths:e.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent",placeholder:"What has this employee done well?"})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal/70 mb-2",children:"Areas for Improvement"}),it.jsx("textarea",{value:n.areasForImprovement,onChange:e=>l({...n,areasForImprovement:e.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent",placeholder:"What areas need development?"})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal/70 mb-2",children:"Goals & Action Items"}),it.jsx("textarea",{value:n.goals,onChange:e=>l({...n,goals:e.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent",placeholder:"Set specific goals and action items"})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal/70 mb-2",children:"Additional Notes"}),it.jsx("textarea",{value:n.notes,onChange:e=>l({...n,notes:e.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent",placeholder:"Any additional comments or observations"})]})]})]})}),it.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 p-6 border-t border-gray-200 flex-shrink-0 bg-white",children:[it.jsx("button",{onClick:a,className:"px-4 py-2 bg-gray-200 text-charcoal rounded-md hover:bg-gray-300 transition-colors order-2 sm:order-1",children:"Cancel"}),it.jsxs("button",{onClick:()=>{n.employeeId?r(n):alert("Please select an employee")},className:"px-6 py-2 bg-gold-gradient text-charcoal rounded-md hover:shadow-lg transition-all flex items-center justify-center gap-2 order-1 sm:order-2",children:[it.jsx(Q,{className:"w-4 h-4"}),"Save Report"]})]})]})})},na=({employee:t,onClose:s,onSave:a})=>{const[r,n]=e.useState({type:"general",subject:"",message:"",priority:"medium",followUpRequired:!1,followUpDate:""});return it.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:it.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full",children:[it.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[it.jsxs("h3",{className:"text-xl font-semibold text-charcoal",children:["Add Feedback for ",t?.personalInfo?.firstName||t?.name||"Employee"]}),it.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:it.jsx("span",{className:"text-2xl",children:""})})]}),it.jsxs("div",{className:"p-6 space-y-4",children:[it.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal/70 mb-2",children:"Type"}),it.jsxs("select",{value:r.type,onChange:e=>n({...r,type:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent",children:[it.jsx("option",{value:"general",children:"General Feedback"}),it.jsx("option",{value:"recognition",children:"Recognition"}),it.jsx("option",{value:"coaching",children:"Coaching"}),it.jsx("option",{value:"correction",children:"Correction"}),it.jsx("option",{value:"development",children:"Development"})]})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal/70 mb-2",children:"Priority"}),it.jsxs("select",{value:r.priority,onChange:e=>n({...r,priority:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent",children:[it.jsx("option",{value:"low",children:"Low"}),it.jsx("option",{value:"medium",children:"Medium"}),it.jsx("option",{value:"high",children:"High"}),it.jsx("option",{value:"urgent",children:"Urgent"})]})]})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal/70 mb-2",children:"Subject"}),it.jsx("input",{type:"text",value:r.subject,onChange:e=>n({...r,subject:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent",placeholder:"Brief subject line"})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal/70 mb-2",children:"Message"}),it.jsx("textarea",{value:r.message,onChange:e=>n({...r,message:e.target.value}),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent",placeholder:"Detailed feedback message"})]}),it.jsxs("div",{className:"flex items-center gap-4",children:[it.jsxs("label",{className:"flex items-center gap-2",children:[it.jsx("input",{type:"checkbox",checked:r.followUpRequired,onChange:e=>n({...r,followUpRequired:e.target.checked}),className:"w-4 h-4 text-gold focus:ring-gold rounded"}),it.jsx("span",{className:"text-sm text-charcoal",children:"Follow-up required"})]}),r.followUpRequired&&it.jsx("div",{children:it.jsx("input",{type:"date",value:r.followUpDate,onChange:e=>n({...r,followUpDate:e.target.value}),className:"px-3 py-1 border border-gray-300 rounded focus:ring-2 focus:ring-gold focus:border-transparent text-sm"})})]})]}),it.jsxs("div",{className:"flex justify-end gap-3 p-6 border-t border-gray-200",children:[it.jsx("button",{onClick:s,className:"px-4 py-2 bg-gray-200 text-charcoal rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),it.jsxs("button",{onClick:()=>{r.subject.trim()&&r.message.trim()?a(r):alert("Please fill in the subject and message")},className:"px-6 py-2 bg-gold-gradient text-charcoal rounded-md hover:shadow-lg transition-all flex items-center gap-2",children:[it.jsx(te,{className:"w-4 h-4"}),"Send Feedback"]})]})]})})},la=({employee:t,reports:s,interactions:a,onClose:r,onDeleteReport:n,onDeleteInteraction:l})=>{const[o,i]=e.useState("reports");return it.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:it.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[it.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[it.jsxs("div",{children:[it.jsxs("h3",{className:"text-xl font-semibold text-charcoal",children:[(c=t,`${c.personalInfo?.firstName||c.name||"Employee"} ${c.personalInfo?.lastName||""}`.trim())," - Performance Details"]}),it.jsxs("p",{className:"text-sm text-charcoal/60",children:[t.email,"  ",t.location?.name]})]}),it.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:it.jsx("span",{className:"text-2xl",children:""})})]}),it.jsxs("div",{className:"flex border-b border-gray-200",children:[it.jsxs("button",{onClick:()=>i("reports"),className:"px-6 py-3 text-sm font-medium border-b-2 "+("reports"===o?"border-gold text-gold":"border-transparent text-charcoal/60 hover:text-charcoal"),children:["Performance Reports (",s.length,")"]}),it.jsxs("button",{onClick:()=>i("interactions"),className:"px-6 py-3 text-sm font-medium border-b-2 "+("interactions"===o?"border-gold text-gold":"border-transparent text-charcoal/60 hover:text-charcoal"),children:["Interactions (",a.length,")"]})]}),it.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:["reports"===o&&it.jsx("div",{className:"space-y-6",children:0===s.length?it.jsxs("div",{className:"text-center py-12",children:[it.jsx(Q,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),it.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Performance Reports"}),it.jsx("p",{className:"text-gray-500",children:"No performance reports have been created for this employee yet."})]}):s.sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt)).map(e=>it.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[it.jsxs("div",{className:"flex justify-between items-start mb-4",children:[it.jsxs("div",{children:[it.jsx("h4",{className:"text-lg font-semibold text-charcoal",children:e.type}),it.jsxs("p",{className:"text-sm text-charcoal/60",children:[new Date(e.createdAt).toLocaleDateString(),"  Created by ",e.createdBy]})]}),it.jsxs("div",{className:"flex items-center gap-3",children:[it.jsxs("div",{className:"flex items-center gap-1",children:[it.jsx(ue,{className:"w-5 h-5 text-yellow-500 fill-current"}),it.jsx("span",{className:"font-semibold text-charcoal",children:e.overallRating})]}),it.jsx("button",{onClick:()=>n(e.id),className:"p-1 text-red-600 hover:bg-red-50 rounded",title:"Delete Report",children:it.jsx(L,{className:"w-4 h-4"})})]})]}),it.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[it.jsxs("div",{children:[it.jsx("h5",{className:"font-medium text-charcoal mb-3",children:"Individual Ratings"}),it.jsx("div",{className:"space-y-2",children:Object.entries(e.ratings).map(([e,t])=>it.jsxs("div",{className:"flex justify-between items-center",children:[it.jsx("span",{className:"text-sm text-charcoal",children:{punctuality:"Punctuality & Attendance",workQuality:"Work Quality & Accuracy",teamwork:"Teamwork & Collaboration",communication:"Communication Skills",customerService:"Customer Service",initiative:"Initiative & Problem Solving"}[e]}),it.jsxs("div",{className:"flex items-center gap-1",children:[[1,2,3,4,5].map(e=>it.jsx(ue,{className:"w-3 h-3 "+(e<=t?"text-yellow-500 fill-current":"text-gray-300")},e)),it.jsx("span",{className:"text-sm font-medium text-charcoal ml-1",children:t})]})]},e))})]}),it.jsxs("div",{className:"space-y-4",children:[e.strengths&&it.jsxs("div",{children:[it.jsx("h5",{className:"font-medium text-charcoal mb-2",children:"Strengths & Achievements"}),it.jsx("p",{className:"text-sm text-charcoal/80 bg-white p-3 rounded border",children:e.strengths})]}),e.areasForImprovement&&it.jsxs("div",{children:[it.jsx("h5",{className:"font-medium text-charcoal mb-2",children:"Areas for Improvement"}),it.jsx("p",{className:"text-sm text-charcoal/80 bg-white p-3 rounded border",children:e.areasForImprovement})]}),e.goals&&it.jsxs("div",{children:[it.jsx("h5",{className:"font-medium text-charcoal mb-2",children:"Goals & Action Items"}),it.jsx("p",{className:"text-sm text-charcoal/80 bg-white p-3 rounded border",children:e.goals})]}),e.notes&&it.jsxs("div",{children:[it.jsx("h5",{className:"font-medium text-charcoal mb-2",children:"Additional Notes"}),it.jsx("p",{className:"text-sm text-charcoal/80 bg-white p-3 rounded border",children:e.notes})]})]})]})]},e.id))}),"interactions"===o&&it.jsx("div",{className:"space-y-4",children:0===a.length?it.jsxs("div",{className:"text-center py-12",children:[it.jsx(xe,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),it.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Interactions"}),it.jsx("p",{className:"text-gray-500",children:"No feedback or interactions have been recorded for this employee yet."})]}):a.sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt)).map(e=>it.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[it.jsxs("div",{className:"flex justify-between items-start mb-3",children:[it.jsxs("div",{className:"flex items-center gap-2",children:[it.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("recognition"===e.type?"bg-green-100 text-green-700":"coaching"===e.type?"bg-blue-100 text-blue-700":"correction"===e.type?"bg-orange-100 text-orange-700":"development"===e.type?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-700"),children:e.type.charAt(0).toUpperCase()+e.type.slice(1)}),it.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("urgent"===e.priority?"bg-red-100 text-red-700":"high"===e.priority?"bg-orange-100 text-orange-700":"medium"===e.priority?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"),children:e.priority})]}),it.jsxs("div",{className:"flex items-center gap-2",children:[it.jsx("span",{className:"text-xs text-charcoal/60",children:new Date(e.createdAt).toLocaleDateString()}),it.jsx("button",{onClick:()=>l(e.id),className:"p-1 text-red-600 hover:bg-red-50 rounded",title:"Delete Interaction",children:it.jsx(L,{className:"w-3 h-3"})})]})]}),it.jsx("h4",{className:"font-medium text-charcoal mb-2",children:e.subject}),it.jsx("p",{className:"text-sm text-charcoal/80 mb-3",children:e.message}),e.followUpRequired&&it.jsxs("div",{className:"flex items-center gap-2 text-xs text-orange-600",children:[it.jsx(E,{className:"w-3 h-3"}),it.jsxs("span",{children:["Follow-up required",e.followUpDate?` by ${new Date(e.followUpDate).toLocaleDateString()}`:""]})]})]},e.id))})]})]})});var c};function oa(e,t){return function(){return e.apply(t,arguments)}}const{toString:ia}=Object.prototype,{getPrototypeOf:ca}=Object,{iterator:da,toStringTag:ma}=Symbol,ua=(e=>t=>{const s=ia.call(t);return e[s]||(e[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),xa=e=>(e=e.toLowerCase(),t=>ua(t)===e),ha=e=>t=>typeof t===e,{isArray:ga}=Array,pa=ha("undefined");function fa(e){return null!==e&&!pa(e)&&null!==e.constructor&&!pa(e.constructor)&&ja(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const ba=xa("ArrayBuffer");const ya=ha("string"),ja=ha("function"),va=ha("number"),Na=e=>null!==e&&"object"==typeof e,wa=e=>{if("object"!==ua(e))return!1;const t=ca(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||ma in e||da in e)},ka=xa("Date"),Sa=xa("File"),Ca=xa("Blob"),Ea=xa("FileList"),Aa=xa("URLSearchParams"),[Ta,_a,Ra,Pa]=["ReadableStream","Request","Response","Headers"].map(xa);function Oa(e,t,{allOwnKeys:s=!1}={}){if(null==e)return;let a,r;if("object"!=typeof e&&(e=[e]),ga(e))for(a=0,r=e.length;a<r;a++)t.call(null,e[a],a,e);else{if(fa(e))return;const r=s?Object.getOwnPropertyNames(e):Object.keys(e),n=r.length;let l;for(a=0;a<n;a++)l=r[a],t.call(null,e[l],l,e)}}function Ia(e,t){if(fa(e))return null;t=t.toLowerCase();const s=Object.keys(e);let a,r=s.length;for(;r-- >0;)if(a=s[r],t===a.toLowerCase())return a;return null}const Da="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,La=e=>!pa(e)&&e!==Da;const Fa=(e=>t=>e&&t instanceof e)("undefined"!=typeof Uint8Array&&ca(Uint8Array)),qa=xa("HTMLFormElement"),Ma=(({hasOwnProperty:e})=>(t,s)=>e.call(t,s))(Object.prototype),$a=xa("RegExp"),za=(e,t)=>{const s=Object.getOwnPropertyDescriptors(e),a={};Oa(s,(s,r)=>{let n;!1!==(n=t(s,r,e))&&(a[r]=n||s)}),Object.defineProperties(e,a)};const Ua=xa("AsyncFunction"),Ba=(Va="function"==typeof setImmediate,Ha=ja(Da.postMessage),Va?setImmediate:Ha?(Wa=`axios@${Math.random()}`,Qa=[],Da.addEventListener("message",({source:e,data:t})=>{e===Da&&t===Wa&&Qa.length&&Qa.shift()()},!1),e=>{Qa.push(e),Da.postMessage(Wa,"*")}):e=>setTimeout(e));var Va,Ha,Wa,Qa;const Ja="undefined"!=typeof queueMicrotask?queueMicrotask.bind(Da):"undefined"!=typeof process&&process.nextTick||Ba,Ga={isArray:ga,isArrayBuffer:ba,isBuffer:fa,isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||ja(e.append)&&("formdata"===(t=ua(e))||"object"===t&&ja(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&ba(e.buffer),t},isString:ya,isNumber:va,isBoolean:e=>!0===e||!1===e,isObject:Na,isPlainObject:wa,isEmptyObject:e=>{if(!Na(e)||fa(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(t){return!1}},isReadableStream:Ta,isRequest:_a,isResponse:Ra,isHeaders:Pa,isUndefined:pa,isDate:ka,isFile:Sa,isBlob:Ca,isRegExp:$a,isFunction:ja,isStream:e=>Na(e)&&ja(e.pipe),isURLSearchParams:Aa,isTypedArray:Fa,isFileList:Ea,forEach:Oa,merge:function e(){const{caseless:t,skipUndefined:s}=La(this)&&this||{},a={},r=(r,n)=>{const l=t&&Ia(a,n)||n;wa(a[l])&&wa(r)?a[l]=e(a[l],r):wa(r)?a[l]=e({},r):ga(r)?a[l]=r.slice():s&&pa(r)||(a[l]=r)};for(let n=0,l=arguments.length;n<l;n++)arguments[n]&&Oa(arguments[n],r);return a},extend:(e,t,s,{allOwnKeys:a}={})=>(Oa(t,(t,a)=>{s&&ja(t)?e[a]=oa(t,s):e[a]=t},{allOwnKeys:a}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,s,a)=>{e.prototype=Object.create(t.prototype,a),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),s&&Object.assign(e.prototype,s)},toFlatObject:(e,t,s,a)=>{let r,n,l;const o={};if(t=t||{},null==e)return t;do{for(r=Object.getOwnPropertyNames(e),n=r.length;n-- >0;)l=r[n],a&&!a(l,e,t)||o[l]||(t[l]=e[l],o[l]=!0);e=!1!==s&&ca(e)}while(e&&(!s||s(e,t))&&e!==Object.prototype);return t},kindOf:ua,kindOfTest:xa,endsWith:(e,t,s)=>{e=String(e),(void 0===s||s>e.length)&&(s=e.length),s-=t.length;const a=e.indexOf(t,s);return-1!==a&&a===s},toArray:e=>{if(!e)return null;if(ga(e))return e;let t=e.length;if(!va(t))return null;const s=new Array(t);for(;t-- >0;)s[t]=e[t];return s},forEachEntry:(e,t)=>{const s=(e&&e[da]).call(e);let a;for(;(a=s.next())&&!a.done;){const s=a.value;t.call(e,s[0],s[1])}},matchAll:(e,t)=>{let s;const a=[];for(;null!==(s=e.exec(t));)a.push(s);return a},isHTMLForm:qa,hasOwnProperty:Ma,hasOwnProp:Ma,reduceDescriptors:za,freezeMethods:e=>{za(e,(t,s)=>{if(ja(e)&&-1!==["arguments","caller","callee"].indexOf(s))return!1;const a=e[s];ja(a)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")}))})},toObjectSet:(e,t)=>{const s={},a=e=>{e.forEach(e=>{s[e]=!0})};return ga(e)?a(e):a(String(e).split(t)),s},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,s){return t.toUpperCase()+s}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:Ia,global:Da,isContextDefined:La,isSpecCompliantForm:function(e){return!!(e&&ja(e.append)&&"FormData"===e[ma]&&e[da])},toJSONObject:e=>{const t=new Array(10),s=(e,a)=>{if(Na(e)){if(t.indexOf(e)>=0)return;if(fa(e))return e;if(!("toJSON"in e)){t[a]=e;const r=ga(e)?[]:{};return Oa(e,(e,t)=>{const n=s(e,a+1);!pa(n)&&(r[t]=n)}),t[a]=void 0,r}}return e};return s(e,0)},isAsyncFn:Ua,isThenable:e=>e&&(Na(e)||ja(e))&&ja(e.then)&&ja(e.catch),setImmediate:Ba,asap:Ja,isIterable:e=>null!=e&&ja(e[da])};function Ka(e,t,s,a,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),s&&(this.config=s),a&&(this.request=a),r&&(this.response=r,this.status=r.status?r.status:null)}Ga.inherits(Ka,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ga.toJSONObject(this.config),code:this.code,status:this.status}}});const Ya=Ka.prototype,Xa={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Xa[e]={value:e}}),Object.defineProperties(Ka,Xa),Object.defineProperty(Ya,"isAxiosError",{value:!0}),Ka.from=(e,t,s,a,r,n)=>{const l=Object.create(Ya);Ga.toFlatObject(e,l,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);const o=e&&e.message?e.message:"Error",i=null==t&&e?e.code:t;return Ka.call(l,o,i,s,a,r),e&&null==l.cause&&Object.defineProperty(l,"cause",{value:e,configurable:!0}),l.name=e&&e.name||"Error",n&&Object.assign(l,n),l};function Za(e){return Ga.isPlainObject(e)||Ga.isArray(e)}function er(e){return Ga.endsWith(e,"[]")?e.slice(0,-2):e}function tr(e,t,s){return e?e.concat(t).map(function(e,t){return e=er(e),!s&&t?"["+e+"]":e}).join(s?".":""):t}const sr=Ga.toFlatObject(Ga,{},null,function(e){return/^is[A-Z]/.test(e)});function ar(e,t,s){if(!Ga.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const a=(s=Ga.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!Ga.isUndefined(t[e])})).metaTokens,r=s.visitor||c,n=s.dots,l=s.indexes,o=(s.Blob||"undefined"!=typeof Blob&&Blob)&&Ga.isSpecCompliantForm(t);if(!Ga.isFunction(r))throw new TypeError("visitor must be a function");function i(e){if(null===e)return"";if(Ga.isDate(e))return e.toISOString();if(Ga.isBoolean(e))return e.toString();if(!o&&Ga.isBlob(e))throw new Ka("Blob is not supported. Use a Buffer instead.");return Ga.isArrayBuffer(e)||Ga.isTypedArray(e)?o&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,s,r){let o=e;if(e&&!r&&"object"==typeof e)if(Ga.endsWith(s,"{}"))s=a?s:s.slice(0,-2),e=JSON.stringify(e);else if(Ga.isArray(e)&&function(e){return Ga.isArray(e)&&!e.some(Za)}(e)||(Ga.isFileList(e)||Ga.endsWith(s,"[]"))&&(o=Ga.toArray(e)))return s=er(s),o.forEach(function(e,a){!Ga.isUndefined(e)&&null!==e&&t.append(!0===l?tr([s],a,n):null===l?s:s+"[]",i(e))}),!1;return!!Za(e)||(t.append(tr(r,s,n),i(e)),!1)}const d=[],m=Object.assign(sr,{defaultVisitor:c,convertValue:i,isVisitable:Za});if(!Ga.isObject(e))throw new TypeError("data must be an object");return function e(s,a){if(!Ga.isUndefined(s)){if(-1!==d.indexOf(s))throw Error("Circular reference detected in "+a.join("."));d.push(s),Ga.forEach(s,function(s,n){!0===(!(Ga.isUndefined(s)||null===s)&&r.call(t,s,Ga.isString(n)?n.trim():n,a,m))&&e(s,a?a.concat(n):[n])}),d.pop()}}(e),t}function rr(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function nr(e,t){this._pairs=[],e&&ar(e,this,t)}const lr=nr.prototype;function or(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function ir(e,t,s){if(!t)return e;const a=s&&s.encode||or;Ga.isFunction(s)&&(s={serialize:s});const r=s&&s.serialize;let n;if(n=r?r(t,s):Ga.isURLSearchParams(t)?t.toString():new nr(t,s).toString(a),n){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e}lr.append=function(e,t){this._pairs.push([e,t])},lr.toString=function(e){const t=e?function(t){return e.call(this,t,rr)}:rr;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};class cr{constructor(){this.handlers=[]}use(e,t,s){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!s&&s.synchronous,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Ga.forEach(this.handlers,function(t){null!==t&&e(t)})}}const dr={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},mr={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:nr,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},ur="undefined"!=typeof window&&"undefined"!=typeof document,xr="object"==typeof navigator&&navigator||void 0,hr=ur&&(!xr||["ReactNative","NativeScript","NS"].indexOf(xr.product)<0),gr="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,pr=ur&&window.location.href||"http://localhost",fr={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:ur,hasStandardBrowserEnv:hr,hasStandardBrowserWebWorkerEnv:gr,navigator:xr,origin:pr},Symbol.toStringTag,{value:"Module"})),...mr};function br(e){function t(e,s,a,r){let n=e[r++];if("__proto__"===n)return!0;const l=Number.isFinite(+n),o=r>=e.length;if(n=!n&&Ga.isArray(a)?a.length:n,o)return Ga.hasOwnProp(a,n)?a[n]=[a[n],s]:a[n]=s,!l;a[n]&&Ga.isObject(a[n])||(a[n]=[]);return t(e,s,a[n],r)&&Ga.isArray(a[n])&&(a[n]=function(e){const t={},s=Object.keys(e);let a;const r=s.length;let n;for(a=0;a<r;a++)n=s[a],t[n]=e[n];return t}(a[n])),!l}if(Ga.isFormData(e)&&Ga.isFunction(e.entries)){const s={};return Ga.forEachEntry(e,(e,a)=>{t(function(e){return Ga.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),a,s,0)}),s}return null}const yr={transitional:dr,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const s=t.getContentType()||"",a=s.indexOf("application/json")>-1,r=Ga.isObject(e);r&&Ga.isHTMLForm(e)&&(e=new FormData(e));if(Ga.isFormData(e))return a?JSON.stringify(br(e)):e;if(Ga.isArrayBuffer(e)||Ga.isBuffer(e)||Ga.isStream(e)||Ga.isFile(e)||Ga.isBlob(e)||Ga.isReadableStream(e))return e;if(Ga.isArrayBufferView(e))return e.buffer;if(Ga.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let n;if(r){if(s.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return ar(e,new fr.classes.URLSearchParams,{visitor:function(e,t,s,a){return fr.isNode&&Ga.isBuffer(e)?(this.append(t,e.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...t})}(e,this.formSerializer).toString();if((n=Ga.isFileList(e))||s.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return ar(n?{"files[]":e}:e,t&&new t,this.formSerializer)}}return r||a?(t.setContentType("application/json",!1),function(e,t,s){if(Ga.isString(e))try{return(t||JSON.parse)(e),Ga.trim(e)}catch(a){if("SyntaxError"!==a.name)throw a}return(s||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||yr.transitional,s=t&&t.forcedJSONParsing,a="json"===this.responseType;if(Ga.isResponse(e)||Ga.isReadableStream(e))return e;if(e&&Ga.isString(e)&&(s&&!this.responseType||a)){const s=!(t&&t.silentJSONParsing)&&a;try{return JSON.parse(e,this.parseReviver)}catch(r){if(s){if("SyntaxError"===r.name)throw Ka.from(r,Ka.ERR_BAD_RESPONSE,this,null,this.response);throw r}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:fr.classes.FormData,Blob:fr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ga.forEach(["delete","get","head","post","put","patch"],e=>{yr.headers[e]={}});const jr=Ga.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),vr=Symbol("internals");function Nr(e){return e&&String(e).trim().toLowerCase()}function wr(e){return!1===e||null==e?e:Ga.isArray(e)?e.map(wr):String(e)}function kr(e,t,s,a,r){return Ga.isFunction(a)?a.call(this,t,s):(r&&(t=s),Ga.isString(t)?Ga.isString(a)?-1!==t.indexOf(a):Ga.isRegExp(a)?a.test(t):void 0:void 0)}let Sr=class{constructor(e){e&&this.set(e)}set(e,t,s){const a=this;function r(e,t,s){const r=Nr(t);if(!r)throw new Error("header name must be a non-empty string");const n=Ga.findKey(a,r);(!n||void 0===a[n]||!0===s||void 0===s&&!1!==a[n])&&(a[n||t]=wr(e))}const n=(e,t)=>Ga.forEach(e,(e,s)=>r(e,s,t));if(Ga.isPlainObject(e)||e instanceof this.constructor)n(e,t);else if(Ga.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))n((e=>{const t={};let s,a,r;return e&&e.split("\n").forEach(function(e){r=e.indexOf(":"),s=e.substring(0,r).trim().toLowerCase(),a=e.substring(r+1).trim(),!s||t[s]&&jr[s]||("set-cookie"===s?t[s]?t[s].push(a):t[s]=[a]:t[s]=t[s]?t[s]+", "+a:a)}),t})(e),t);else if(Ga.isObject(e)&&Ga.isIterable(e)){let s,a,r={};for(const t of e){if(!Ga.isArray(t))throw TypeError("Object iterator must return a key-value pair");r[a=t[0]]=(s=r[a])?Ga.isArray(s)?[...s,t[1]]:[s,t[1]]:t[1]}n(r,t)}else null!=e&&r(t,e,s);return this}get(e,t){if(e=Nr(e)){const s=Ga.findKey(this,e);if(s){const e=this[s];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=s.exec(e);)t[a[1]]=a[2];return t}(e);if(Ga.isFunction(t))return t.call(this,e,s);if(Ga.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Nr(e)){const s=Ga.findKey(this,e);return!(!s||void 0===this[s]||t&&!kr(0,this[s],s,t))}return!1}delete(e,t){const s=this;let a=!1;function r(e){if(e=Nr(e)){const r=Ga.findKey(s,e);!r||t&&!kr(0,s[r],r,t)||(delete s[r],a=!0)}}return Ga.isArray(e)?e.forEach(r):r(e),a}clear(e){const t=Object.keys(this);let s=t.length,a=!1;for(;s--;){const r=t[s];e&&!kr(0,this[r],r,e,!0)||(delete this[r],a=!0)}return a}normalize(e){const t=this,s={};return Ga.forEach(this,(a,r)=>{const n=Ga.findKey(s,r);if(n)return t[n]=wr(a),void delete t[r];const l=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,s)=>t.toUpperCase()+s)}(r):String(r).trim();l!==r&&delete t[r],t[l]=wr(a),s[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Ga.forEach(this,(s,a)=>{null!=s&&!1!==s&&(t[a]=e&&Ga.isArray(s)?s.join(", "):s)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const s=new this(e);return t.forEach(e=>s.set(e)),s}static accessor(e){const t=(this[vr]=this[vr]={accessors:{}}).accessors,s=this.prototype;function a(e){const a=Nr(e);t[a]||(!function(e,t){const s=Ga.toCamelCase(" "+t);["get","set","has"].forEach(a=>{Object.defineProperty(e,a+s,{value:function(e,s,r){return this[a].call(this,t,e,s,r)},configurable:!0})})}(s,e),t[a]=!0)}return Ga.isArray(e)?e.forEach(a):a(e),this}};function Cr(e,t){const s=this||yr,a=t||s,r=Sr.from(a.headers);let n=a.data;return Ga.forEach(e,function(e){n=e.call(s,n,r.normalize(),t?t.status:void 0)}),r.normalize(),n}function Er(e){return!(!e||!e.__CANCEL__)}function Ar(e,t,s){Ka.call(this,null==e?"canceled":e,Ka.ERR_CANCELED,t,s),this.name="CanceledError"}function Tr(e,t,s){const a=s.config.validateStatus;s.status&&a&&!a(s.status)?t(new Ka("Request failed with status code "+s.status,[Ka.ERR_BAD_REQUEST,Ka.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s)):e(s)}Sr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Ga.reduceDescriptors(Sr.prototype,({value:e},t)=>{let s=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[s]=e}}}),Ga.freezeMethods(Sr),Ga.inherits(Ar,Ka,{__CANCEL__:!0});const _r=(e,t,s=3)=>{let a=0;const r=function(e,t){e=e||10;const s=new Array(e),a=new Array(e);let r,n=0,l=0;return t=void 0!==t?t:1e3,function(o){const i=Date.now(),c=a[l];r||(r=i),s[n]=o,a[n]=i;let d=l,m=0;for(;d!==n;)m+=s[d++],d%=e;if(n=(n+1)%e,n===l&&(l=(l+1)%e),i-r<t)return;const u=c&&i-c;return u?Math.round(1e3*m/u):void 0}}(50,250);return function(e,t){let s,a,r=0,n=1e3/t;const l=(t,n=Date.now())=>{r=n,s=null,a&&(clearTimeout(a),a=null),e(...t)};return[(...e)=>{const t=Date.now(),o=t-r;o>=n?l(e,t):(s=e,a||(a=setTimeout(()=>{a=null,l(s)},n-o)))},()=>s&&l(s)]}(s=>{const n=s.loaded,l=s.lengthComputable?s.total:void 0,o=n-a,i=r(o);a=n;e({loaded:n,total:l,progress:l?n/l:void 0,bytes:o,rate:i||void 0,estimated:i&&l&&n<=l?(l-n)/i:void 0,event:s,lengthComputable:null!=l,[t?"download":"upload"]:!0})},s)},Rr=(e,t)=>{const s=null!=e;return[a=>t[0]({lengthComputable:s,total:e,loaded:a}),t[1]]},Pr=e=>(...t)=>Ga.asap(()=>e(...t)),Or=fr.hasStandardBrowserEnv?((e,t)=>s=>(s=new URL(s,fr.origin),e.protocol===s.protocol&&e.host===s.host&&(t||e.port===s.port)))(new URL(fr.origin),fr.navigator&&/(msie|trident)/i.test(fr.navigator.userAgent)):()=>!0,Ir=fr.hasStandardBrowserEnv?{write(e,t,s,a,r,n){const l=[e+"="+encodeURIComponent(t)];Ga.isNumber(s)&&l.push("expires="+new Date(s).toGMTString()),Ga.isString(a)&&l.push("path="+a),Ga.isString(r)&&l.push("domain="+r),!0===n&&l.push("secure"),document.cookie=l.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Dr(e,t,s){let a=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(a||0==s)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Lr=e=>e instanceof Sr?{...e}:e;function Fr(e,t){t=t||{};const s={};function a(e,t,s,a){return Ga.isPlainObject(e)&&Ga.isPlainObject(t)?Ga.merge.call({caseless:a},e,t):Ga.isPlainObject(t)?Ga.merge({},t):Ga.isArray(t)?t.slice():t}function r(e,t,s,r){return Ga.isUndefined(t)?Ga.isUndefined(e)?void 0:a(void 0,e,0,r):a(e,t,0,r)}function n(e,t){if(!Ga.isUndefined(t))return a(void 0,t)}function l(e,t){return Ga.isUndefined(t)?Ga.isUndefined(e)?void 0:a(void 0,e):a(void 0,t)}function o(s,r,n){return n in t?a(s,r):n in e?a(void 0,s):void 0}const i={url:n,method:n,data:n,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:o,headers:(e,t,s)=>r(Lr(e),Lr(t),0,!0)};return Ga.forEach(Object.keys({...e,...t}),function(a){const n=i[a]||r,l=n(e[a],t[a],a);Ga.isUndefined(l)&&n!==o||(s[a]=l)}),s}const qr=e=>{const t=Fr({},e);let{data:s,withXSRFToken:a,xsrfHeaderName:r,xsrfCookieName:n,headers:l,auth:o}=t;if(t.headers=l=Sr.from(l),t.url=ir(Dr(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&l.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),Ga.isFormData(s))if(fr.hasStandardBrowserEnv||fr.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(Ga.isFunction(s.getHeaders)){const e=s.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(([e,s])=>{t.includes(e.toLowerCase())&&l.set(e,s)})}if(fr.hasStandardBrowserEnv&&(a&&Ga.isFunction(a)&&(a=a(t)),a||!1!==a&&Or(t.url))){const e=r&&n&&Ir.read(n);e&&l.set(r,e)}return t},Mr="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise(function(t,s){const a=qr(e);let r=a.data;const n=Sr.from(a.headers).normalize();let l,o,i,c,d,{responseType:m,onUploadProgress:u,onDownloadProgress:x}=a;function h(){c&&c(),d&&d(),a.cancelToken&&a.cancelToken.unsubscribe(l),a.signal&&a.signal.removeEventListener("abort",l)}let g=new XMLHttpRequest;function p(){if(!g)return;const a=Sr.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders());Tr(function(e){t(e),h()},function(e){s(e),h()},{data:m&&"text"!==m&&"json"!==m?g.response:g.responseText,status:g.status,statusText:g.statusText,headers:a,config:e,request:g}),g=null}g.open(a.method.toUpperCase(),a.url,!0),g.timeout=a.timeout,"onloadend"in g?g.onloadend=p:g.onreadystatechange=function(){g&&4===g.readyState&&(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))&&setTimeout(p)},g.onabort=function(){g&&(s(new Ka("Request aborted",Ka.ECONNABORTED,e,g)),g=null)},g.onerror=function(t){const a=new Ka(t&&t.message?t.message:"Network Error",Ka.ERR_NETWORK,e,g);a.event=t||null,s(a),g=null},g.ontimeout=function(){let t=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const r=a.transitional||dr;a.timeoutErrorMessage&&(t=a.timeoutErrorMessage),s(new Ka(t,r.clarifyTimeoutError?Ka.ETIMEDOUT:Ka.ECONNABORTED,e,g)),g=null},void 0===r&&n.setContentType(null),"setRequestHeader"in g&&Ga.forEach(n.toJSON(),function(e,t){g.setRequestHeader(t,e)}),Ga.isUndefined(a.withCredentials)||(g.withCredentials=!!a.withCredentials),m&&"json"!==m&&(g.responseType=a.responseType),x&&([i,d]=_r(x,!0),g.addEventListener("progress",i)),u&&g.upload&&([o,c]=_r(u),g.upload.addEventListener("progress",o),g.upload.addEventListener("loadend",c)),(a.cancelToken||a.signal)&&(l=t=>{g&&(s(!t||t.type?new Ar(null,e,g):t),g.abort(),g=null)},a.cancelToken&&a.cancelToken.subscribe(l),a.signal&&(a.signal.aborted?l():a.signal.addEventListener("abort",l)));const f=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(a.url);f&&-1===fr.protocols.indexOf(f)?s(new Ka("Unsupported protocol "+f+":",Ka.ERR_BAD_REQUEST,e)):g.send(r||null)})},$r=(e,t)=>{const{length:s}=e=e?e.filter(Boolean):[];if(t||s){let s,a=new AbortController;const r=function(e){if(!s){s=!0,l();const t=e instanceof Error?e:this.reason;a.abort(t instanceof Ka?t:new Ar(t instanceof Error?t.message:t))}};let n=t&&setTimeout(()=>{n=null,r(new Ka(`timeout ${t} of ms exceeded`,Ka.ETIMEDOUT))},t);const l=()=>{e&&(n&&clearTimeout(n),n=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(r):e.removeEventListener("abort",r)}),e=null)};e.forEach(e=>e.addEventListener("abort",r));const{signal:o}=a;return o.unsubscribe=()=>Ga.asap(l),o}},zr=function*(e,t){let s=e.byteLength;if(s<t)return void(yield e);let a,r=0;for(;r<s;)a=r+t,yield e.slice(r,a),r=a},Ur=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:s}=await t.read();if(e)break;yield s}}finally{await t.cancel()}},Br=(e,t,s,a)=>{const r=async function*(e,t){for await(const s of Ur(e))yield*zr(s,t)}(e,t);let n,l=0,o=e=>{n||(n=!0,a&&a(e))};return new ReadableStream({async pull(e){try{const{done:t,value:a}=await r.next();if(t)return o(),void e.close();let n=a.byteLength;if(s){let e=l+=n;s(e)}e.enqueue(new Uint8Array(a))}catch(t){throw o(t),t}},cancel:e=>(o(e),r.return())},{highWaterMark:2})},{isFunction:Vr}=Ga,Hr=(({Request:e,Response:t})=>({Request:e,Response:t}))(Ga.global),{ReadableStream:Wr,TextEncoder:Qr}=Ga.global,Jr=(e,...t)=>{try{return!!e(...t)}catch(s){return!1}},Gr=e=>{e=Ga.merge.call({skipUndefined:!0},Hr,e);const{fetch:t,Request:s,Response:a}=e,r=t?Vr(t):"function"==typeof fetch,n=Vr(s),l=Vr(a);if(!r)return!1;const o=r&&Vr(Wr),i=r&&("function"==typeof Qr?(e=>t=>e.encode(t))(new Qr):async e=>new Uint8Array(await new s(e).arrayBuffer())),c=n&&o&&Jr(()=>{let e=!1;const t=new s(fr.origin,{body:new Wr,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),d=l&&o&&Jr(()=>Ga.isReadableStream(new a("").body)),m={stream:d&&(e=>e.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!m[e]&&(m[e]=(t,s)=>{let a=t&&t[e];if(a)return a.call(t);throw new Ka(`Response type '${e}' is not supported`,Ka.ERR_NOT_SUPPORT,s)})});const u=async(e,t)=>{const a=Ga.toFiniteNumber(e.getContentLength());return null==a?(async e=>{if(null==e)return 0;if(Ga.isBlob(e))return e.size;if(Ga.isSpecCompliantForm(e)){const t=new s(fr.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Ga.isArrayBufferView(e)||Ga.isArrayBuffer(e)?e.byteLength:(Ga.isURLSearchParams(e)&&(e+=""),Ga.isString(e)?(await i(e)).byteLength:void 0)})(t):a};return async e=>{let{url:r,method:l,data:o,signal:i,cancelToken:x,timeout:h,onDownloadProgress:g,onUploadProgress:p,responseType:f,headers:b,withCredentials:y="same-origin",fetchOptions:j}=qr(e),v=t||fetch;f=f?(f+"").toLowerCase():"text";let N=$r([i,x&&x.toAbortSignal()],h),w=null;const k=N&&N.unsubscribe&&(()=>{N.unsubscribe()});let S;try{if(p&&c&&"get"!==l&&"head"!==l&&0!==(S=await u(b,o))){let e,t=new s(r,{method:"POST",body:o,duplex:"half"});if(Ga.isFormData(o)&&(e=t.headers.get("content-type"))&&b.setContentType(e),t.body){const[e,s]=Rr(S,_r(Pr(p)));o=Br(t.body,65536,e,s)}}Ga.isString(y)||(y=y?"include":"omit");const t=n&&"credentials"in s.prototype,i={...j,signal:N,method:l.toUpperCase(),headers:b.normalize().toJSON(),body:o,duplex:"half",credentials:t?y:void 0};w=n&&new s(r,i);let x=await(n?v(w,j):v(r,i));const h=d&&("stream"===f||"response"===f);if(d&&(g||h&&k)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=x[t]});const t=Ga.toFiniteNumber(x.headers.get("content-length")),[s,r]=g&&Rr(t,_r(Pr(g),!0))||[];x=new a(Br(x.body,65536,s,()=>{r&&r(),k&&k()}),e)}f=f||"text";let C=await m[Ga.findKey(m,f)||"text"](x,e);return!h&&k&&k(),await new Promise((t,s)=>{Tr(t,s,{data:C,headers:Sr.from(x.headers),status:x.status,statusText:x.statusText,config:e,request:w})})}catch(C){if(k&&k(),C&&"TypeError"===C.name&&/Load failed|fetch/i.test(C.message))throw Object.assign(new Ka("Network Error",Ka.ERR_NETWORK,e,w),{cause:C.cause||C});throw Ka.from(C,C&&C.code,e,w)}}},Kr=new Map,Yr=e=>{let t=e?e.env:{};const{fetch:s,Request:a,Response:r}=t,n=[a,r,s];let l,o,i=n.length,c=Kr;for(;i--;)l=n[i],o=c.get(l),void 0===o&&c.set(l,o=i?new Map:Gr(t)),c=o;return o};Yr();const Xr={http:null,xhr:Mr,fetch:{get:Yr}};Ga.forEach(Xr,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(s){}Object.defineProperty(e,"adapterName",{value:t})}});const Zr=e=>`- ${e}`,en=e=>Ga.isFunction(e)||null===e||!1===e,tn=(e,t)=>{e=Ga.isArray(e)?e:[e];const{length:s}=e;let a,r;const n={};for(let l=0;l<s;l++){let s;if(a=e[l],r=a,!en(a)&&(r=Xr[(s=String(a)).toLowerCase()],void 0===r))throw new Ka(`Unknown adapter '${s}'`);if(r&&(Ga.isFunction(r)||(r=r.get(t))))break;n[s||"#"+l]=r}if(!r){const e=Object.entries(n).map(([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build"));throw new Ka("There is no suitable adapter to dispatch the request "+(s?e.length>1?"since :\n"+e.map(Zr).join("\n"):" "+Zr(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return r};function sn(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ar(null,e)}function an(e){sn(e),e.headers=Sr.from(e.headers),e.data=Cr.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return tn(e.adapter||yr.adapter,e)(e).then(function(t){return sn(e),t.data=Cr.call(e,e.transformResponse,t),t.headers=Sr.from(t.headers),t},function(t){return Er(t)||(sn(e),t&&t.response&&(t.response.data=Cr.call(e,e.transformResponse,t.response),t.response.headers=Sr.from(t.response.headers))),Promise.reject(t)})}const rn="1.12.2",nn={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{nn[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const ln={};nn.transitional=function(e,t,s){function a(e,t){return"[Axios v"+rn+"] Transitional option '"+e+"'"+t+(s?". "+s:"")}return(s,r,n)=>{if(!1===e)throw new Ka(a(r," has been removed"+(t?" in "+t:"")),Ka.ERR_DEPRECATED);return t&&!ln[r]&&(ln[r]=!0,console.warn(a(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(s,r,n)}},nn.spelling=function(e){return(t,s)=>(console.warn(`${s} is likely a misspelling of ${e}`),!0)};const on={assertOptions:function(e,t,s){if("object"!=typeof e)throw new Ka("options must be an object",Ka.ERR_BAD_OPTION_VALUE);const a=Object.keys(e);let r=a.length;for(;r-- >0;){const n=a[r],l=t[n];if(l){const t=e[n],s=void 0===t||l(t,n,e);if(!0!==s)throw new Ka("option "+n+" must be "+s,Ka.ERR_BAD_OPTION_VALUE);continue}if(!0!==s)throw new Ka("Unknown option "+n,Ka.ERR_BAD_OPTION)}},validators:nn},cn=on.validators;let dn=class{constructor(e){this.defaults=e||{},this.interceptors={request:new cr,response:new cr}}async request(e,t){try{return await this._request(e,t)}catch(s){if(s instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{s.stack?t&&!String(s.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(s.stack+="\n"+t):s.stack=t}catch(a){}}throw s}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=Fr(this.defaults,t);const{transitional:s,paramsSerializer:a,headers:r}=t;void 0!==s&&on.assertOptions(s,{silentJSONParsing:cn.transitional(cn.boolean),forcedJSONParsing:cn.transitional(cn.boolean),clarifyTimeoutError:cn.transitional(cn.boolean)},!1),null!=a&&(Ga.isFunction(a)?t.paramsSerializer={serialize:a}:on.assertOptions(a,{encode:cn.function,serialize:cn.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),on.assertOptions(t,{baseUrl:cn.spelling("baseURL"),withXsrfToken:cn.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let n=r&&Ga.merge(r.common,r[t.method]);r&&Ga.forEach(["delete","get","head","post","put","patch","common"],e=>{delete r[e]}),t.headers=Sr.concat(n,r);const l=[];let o=!0;this.interceptors.request.forEach(function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,l.unshift(e.fulfilled,e.rejected))});const i=[];let c;this.interceptors.response.forEach(function(e){i.push(e.fulfilled,e.rejected)});let d,m=0;if(!o){const e=[an.bind(this),void 0];for(e.unshift(...l),e.push(...i),d=e.length,c=Promise.resolve(t);m<d;)c=c.then(e[m++],e[m++]);return c}d=l.length;let u=t;for(;m<d;){const e=l[m++],t=l[m++];try{u=e(u)}catch(x){t.call(this,x);break}}try{c=an.call(this,u)}catch(x){return Promise.reject(x)}for(m=0,d=i.length;m<d;)c=c.then(i[m++],i[m++]);return c}getUri(e){return ir(Dr((e=Fr(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}};Ga.forEach(["delete","get","head","options"],function(e){dn.prototype[e]=function(t,s){return this.request(Fr(s||{},{method:e,url:t,data:(s||{}).data}))}}),Ga.forEach(["post","put","patch"],function(e){function t(t){return function(s,a,r){return this.request(Fr(r||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}dn.prototype[e]=t(),dn.prototype[e+"Form"]=t(!0)});const mn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(mn).forEach(([e,t])=>{mn[t]=e});const un=function e(t){const s=new dn(t),a=oa(dn.prototype.request,s);return Ga.extend(a,dn.prototype,s,{allOwnKeys:!0}),Ga.extend(a,s,null,{allOwnKeys:!0}),a.create=function(s){return e(Fr(t,s))},a}(yr);un.Axios=dn,un.CanceledError=Ar,un.CancelToken=class e{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const s=this;this.promise.then(e=>{if(!s._listeners)return;let t=s._listeners.length;for(;t-- >0;)s._listeners[t](e);s._listeners=null}),this.promise.then=e=>{let t;const a=new Promise(e=>{s.subscribe(e),t=e}).then(e);return a.cancel=function(){s.unsubscribe(t)},a},e(function(e,a,r){s.reason||(s.reason=new Ar(e,a,r),t(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let t;return{token:new e(function(e){t=e}),cancel:t}}},un.isCancel=Er,un.VERSION=rn,un.toFormData=ar,un.AxiosError=Ka,un.Cancel=un.CanceledError,un.all=function(e){return Promise.all(e)},un.spread=function(e){return function(t){return e.apply(null,t)}},un.isAxiosError=function(e){return Ga.isObject(e)&&!0===e.isAxiosError},un.mergeConfig=Fr,un.AxiosHeaders=Sr,un.formToJSON=e=>br(Ga.isHTMLForm(e)?new FormData(e):e),un.getAdapter=tn,un.HttpStatusCode=mn,un.default=un;const{Axios:xn,AxiosError:hn,CanceledError:gn,isCancel:pn,CancelToken:fn,VERSION:bn,all:yn,Cancel:jn,isAxiosError:vn,spread:Nn,toFormData:wn,AxiosHeaders:kn,HttpStatusCode:Sn,formToJSON:Cn,getAdapter:En,mergeConfig:An}=un;const Tn=new class{constructor(){this.api=un.create({baseURL:"https://woodfire.food/api/v1",headers:{"Content-Type":"application/json",Accept:"application/json"}}),this.api.interceptors.request.use(e=>{const t=this.getToken();return t&&(e.headers.Authorization=`Bearer ${t}`),e}),this.api.interceptors.response.use(e=>e,e=>(401===e.response?.status&&(this.clearToken(),window.location.href="/login"),Promise.reject(e)))}getToken(){return localStorage.getItem("employee_token")||localStorage.getItem("admin_token")}clearToken(){localStorage.removeItem("employee_token"),localStorage.removeItem("admin_token")}async getTickets(e={}){try{return(await this.api.get("/admin/tickets",{params:e})).data}catch(t){throw console.error("Error fetching tickets:",t),t}}async getTicketById(e){try{return(await this.api.get(`/admin/tickets/${e}`)).data}catch(t){throw console.error("Error fetching ticket:",t),t}}async updateTicket(e,t){try{return(await this.api.put(`/admin/tickets/${e}`,t)).data}catch(s){throw console.error("Error updating ticket:",s),s}}async archiveTicket(e){try{return(await this.api.post(`/admin/tickets/${e}/archive`)).data}catch(t){throw console.error("Error archiving ticket:",t),t}}async deleteTicket(e){try{return(await this.api.delete(`/admin/tickets/${e}`)).data}catch(t){throw console.error("Error deleting ticket:",t),t}}async addTicketResponse(e,t){try{return(await this.api.post(`/admin/tickets/${e}/responses`,t)).data}catch(s){throw console.error("Error adding ticket response:",s),s}}async getTicketStatistics(){try{return(await this.api.get("/admin/tickets/statistics")).data}catch(e){throw console.error("Error fetching ticket statistics:",e),e}}async getEmployeeTickets(e={}){try{return(await this.api.get("/employee/tickets",{params:e})).data}catch(t){throw console.error("Error fetching employee tickets:",t),t}}async createTicket(e){try{return(await this.api.post("/employee/tickets",e)).data}catch(t){throw console.error("Error creating ticket:",t),t}}async getEmployeeTicketById(e){try{return(await this.api.get(`/employee/tickets/${e}`)).data}catch(t){throw console.error("Error fetching employee ticket:",t),t}}async getTicketConfiguration(){try{return(await this.api.get("/admin/tickets/configuration")).data}catch(e){throw console.error("Error fetching ticket configuration:",e),e}}transformTicketForFrontend(e){return{id:e.id?.toString()||e.id,employeeId:e.employee_id,employeeName:e.employee_name,title:e.title,description:e.description,category:e.category,priority:e.priority,status:e.status,location:e.location,archived:e.archived,createdAt:e.created_at,updatedAt:e.updated_at,responses:e.responses?.map(e=>({id:e.id?.toString()||e.id,message:e.message,respondedBy:e.responded_by,respondedAt:e.responded_at,internal:e.internal}))||[],employee:e.employee||null}}transformTicketsForFrontend(e){return e.map(e=>this.transformTicketForFrontend(e))}getStatusColor(e){const t={open:"bg-blue-100 text-blue-700","in-progress":"bg-yellow-100 text-yellow-700",resolved:"bg-green-100 text-green-700",closed:"bg-gray-100 text-gray-700"};return t[e]||t.open}getPriorityColor(e){const t={low:"bg-green-100 text-green-700",medium:"bg-yellow-100 text-yellow-700",high:"bg-orange-100 text-orange-700",urgent:"bg-red-100 text-red-700"};return t[e]||t.medium}getCategoryIcon(e){const t={"broken-equipment":"Wrench","software-issue":"Monitor","pos-problem":"CreditCard","kitchen-equipment":"Utensils","facility-issue":"AlertTriangle",other:"Tag"};return t[e]||t.other}handleApiError(e){return e.response?.data?.message?e.response.data.message:e.message?e.message:"An unexpected error occurred"}},_n=()=>{const[t,s]=e.useState([]),[a,r]=e.useState([]),[n,l]=e.useState(null),[o,i]=e.useState(!1),[c,d]=e.useState(!1),[m,u]=e.useState("all"),[x,h]=e.useState("all"),[g,f]=e.useState("all"),[b,y]=e.useState(""),[j,v]=e.useState(!1),[N,w]=e.useState(!0),[k,S]=e.useState(null),A=[{id:"broken-equipment",label:"Broken Equipment",icon:be,color:"text-red-600"},{id:"software-issue",label:"Software Issue",icon:ye,color:"text-blue-600"},{id:"pos-problem",label:"POS Problem",icon:je,color:"text-purple-600"},{id:"kitchen-equipment",label:"Kitchen Equipment",icon:ve,color:"text-orange-600"},{id:"facility-issue",label:"Facility Issue",icon:q,color:"text-yellow-600"},{id:"other",label:"Other",icon:Ne,color:"text-gray-600"}],T=[{id:"low",label:"Low",color:"bg-green-100 text-green-700"},{id:"medium",label:"Medium",color:"bg-yellow-100 text-yellow-700"},{id:"high",label:"High",color:"bg-orange-100 text-orange-700"},{id:"urgent",label:"Urgent",color:"bg-red-100 text-red-700"}],_=[{id:"open",label:"Open",color:"bg-blue-100 text-blue-700",icon:E},{id:"in-progress",label:"In Progress",color:"bg-yellow-100 text-yellow-700",icon:E},{id:"resolved",label:"Resolved",color:"bg-green-100 text-green-700",icon:C},{id:"closed",label:"Closed",color:"bg-gray-100 text-gray-700",icon:C}];e.useEffect(()=>{R()},[j]),e.useEffect(()=>{if(b||"all"!==m||"all"!==x||"all"!==g){const e=setTimeout(()=>{R()},300);return()=>clearTimeout(e)}},[b,m,x,g]);const R=async()=>{try{w(!0),S(null);const e={archived:j?"true":"false",status:m,category:x,priority:g,search:b},t=await Tn.getTickets(e);if(t.success){const e=Tn.transformTicketsForFrontend(t.data.tickets);s(e)}else S("Failed to load tickets")}catch(e){console.error("Error loading tickets:",e),S(Tn.handleApiError(e))}finally{w(!1)}},P=async(e,a)=>{try{const r=await Tn.updateTicket(e,a);if(r.success){const a=Tn.transformTicketForFrontend(r.data);s(t.map(t=>t.id===e?a:t))}}catch(r){console.error("Error updating ticket:",r),S(Tn.handleApiError(r))}},O=e=>{const s=t.find(t=>t.employeeId===e);return s?.employeeName?s.employeeName:"Unknown Employee"},I=()=>t,D=(()=>{const e=t.filter(e=>!e.archived);return{total:e.length,open:e.filter(e=>"open"===e.status).length,inProgress:e.filter(e=>"in-progress"===e.status).length,resolved:e.filter(e=>"resolved"===e.status).length,urgent:e.filter(e=>"urgent"===e.priority).length,avgResponseTime:"2.3 hours"}})();return N?it.jsx("div",{className:"space-y-6",children:it.jsxs("div",{className:"flex items-center justify-center py-12",children:[it.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gold"}),it.jsx("span",{className:"ml-3 text-charcoal",children:"Loading tickets..."})]})}):k?it.jsx("div",{className:"space-y-6",children:it.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[it.jsxs("div",{className:"flex items-center",children:[it.jsx(q,{className:"w-5 h-5 text-red-600 mr-2"}),it.jsxs("span",{className:"text-red-800",children:["Error: ",k]})]}),it.jsx("button",{onClick:()=>{S(null),R()},className:"mt-3 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Retry"})]})}):it.jsxs("div",{className:"space-y-6",children:[it.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-6 gap-4",children:[it.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 border border-gray-100",children:it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsxs("div",{children:[it.jsx("p",{className:"text-xs font-medium text-charcoal/70",children:"Total Tickets"}),it.jsx("p",{className:"text-xl font-bold text-charcoal",children:D.total})]}),it.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:it.jsx(fe,{className:"w-5 h-5 text-blue-600"})})]})}),it.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 border border-gray-100",children:it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsxs("div",{children:[it.jsx("p",{className:"text-xs font-medium text-charcoal/70",children:"Open"}),it.jsx("p",{className:"text-xl font-bold text-blue-600",children:D.open})]}),it.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:it.jsx(E,{className:"w-5 h-5 text-blue-600"})})]})}),it.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 border border-gray-100",children:it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsxs("div",{children:[it.jsx("p",{className:"text-xs font-medium text-charcoal/70",children:"In Progress"}),it.jsx("p",{className:"text-xl font-bold text-yellow-600",children:D.inProgress})]}),it.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:it.jsx(E,{className:"w-5 h-5 text-yellow-600"})})]})}),it.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 border border-gray-100",children:it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsxs("div",{children:[it.jsx("p",{className:"text-xs font-medium text-charcoal/70",children:"Resolved"}),it.jsx("p",{className:"text-xl font-bold text-green-600",children:D.resolved})]}),it.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:it.jsx(C,{className:"w-5 h-5 text-green-600"})})]})}),it.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 border border-gray-100",children:it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsxs("div",{children:[it.jsx("p",{className:"text-xs font-medium text-charcoal/70",children:"Urgent"}),it.jsx("p",{className:"text-xl font-bold text-red-600",children:D.urgent})]}),it.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:it.jsx(q,{className:"w-5 h-5 text-red-600"})})]})}),it.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 border border-gray-100",children:it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsxs("div",{children:[it.jsx("p",{className:"text-xs font-medium text-charcoal/70",children:"Avg Response"}),it.jsx("p",{className:"text-sm font-bold text-charcoal",children:D.avgResponseTime})]}),it.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:it.jsx(E,{className:"w-5 h-5 text-purple-600"})})]})})]}),it.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-100",children:it.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[it.jsx("div",{className:"flex-1",children:it.jsxs("div",{className:"relative",children:[it.jsx(K,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),it.jsx("input",{type:"text",placeholder:"Search tickets by employee, title, description, or category...",value:b,onChange:e=>y(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent"})]})}),it.jsxs("div",{className:"flex flex-wrap gap-3",children:[it.jsxs("select",{value:m,onChange:e=>u(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent bg-white text-sm",children:[it.jsx("option",{value:"all",children:"All Status"}),_.map(e=>it.jsx("option",{value:e.id,children:e.label},e.id))]}),it.jsxs("select",{value:x,onChange:e=>h(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent bg-white text-sm",children:[it.jsx("option",{value:"all",children:"All Categories"}),A.map(e=>it.jsx("option",{value:e.id,children:e.label},e.id))]}),it.jsxs("select",{value:g,onChange:e=>f(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent bg-white text-sm",children:[it.jsx("option",{value:"all",children:"All Priorities"}),T.map(e=>it.jsx("option",{value:e.id,children:e.label},e.id))]}),it.jsxs("button",{onClick:()=>v(!j),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${j?"bg-gray-200 text-gray-800":"bg-gold-gradient text-charcoal hover:shadow-lg"} flex items-center gap-2`,children:[it.jsx(we,{className:"w-4 h-4"}),j?"Show Active":"Show Archived"]})]})]})}),it.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-100 overflow-hidden",children:[it.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-brand-navy to-brand-navy/90 border-b border-gold/20",children:it.jsxs("div",{className:"flex justify-between items-center",children:[it.jsxs("div",{children:[it.jsx("h3",{className:"text-lg font-semibold text-cream",children:"Support Tickets"}),it.jsx("p",{className:"text-sm text-cream/80",children:j?"Archived tickets":"Active support tickets from employees"})]}),it.jsx("div",{className:"text-right text-cream/80",children:it.jsxs("p",{className:"text-sm",children:["Showing ",I().length," of ",j?t.filter(e=>e.archived).length:t.filter(e=>!e.archived).length," tickets"]})})]})}),it.jsxs("div",{className:"overflow-x-auto",children:[it.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[it.jsx("thead",{className:"bg-gray-50",children:it.jsxs("tr",{children:[it.jsx("th",{className:"px-4 py-4 text-left text-xs font-bold text-charcoal uppercase tracking-wider",children:"Priority"}),it.jsx("th",{className:"px-4 py-4 text-left text-xs font-bold text-charcoal uppercase tracking-wider",children:"Ticket"}),it.jsx("th",{className:"px-4 py-4 text-left text-xs font-bold text-charcoal uppercase tracking-wider",children:"Employee"}),it.jsx("th",{className:"px-4 py-4 text-left text-xs font-bold text-charcoal uppercase tracking-wider",children:"Category"}),it.jsx("th",{className:"px-4 py-4 text-left text-xs font-bold text-charcoal uppercase tracking-wider",children:"Status"}),it.jsx("th",{className:"px-4 py-4 text-left text-xs font-bold text-charcoal uppercase tracking-wider",children:"Created"}),it.jsx("th",{className:"px-4 py-4 text-left text-xs font-bold text-charcoal uppercase tracking-wider",children:"Actions"})]})}),it.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:I().map(e=>{const a=(r=e.category,A.find(e=>e.id===r)||A[A.length-1]);var r;const n=(o=e.priority,T.find(e=>e.id===o)||T[1]);var o;const c=(m=e.status,_.find(e=>e.id===m)||_[0]);var m;const u=a.icon;return c.icon,it.jsxs("tr",{className:"hover:bg-gold/5 transition-all duration-200",children:[it.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:it.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${n.color}`,children:n.label})}),it.jsx("td",{className:"px-4 py-4",children:it.jsxs("div",{className:"flex items-start gap-3",children:[it.jsx("div",{className:`p-2 rounded-lg bg-gray-100 ${a.color} hidden sm:block`,children:it.jsx(u,{className:"w-4 h-4"})}),it.jsxs("div",{className:"flex-1 min-w-0",children:[it.jsx("div",{className:"text-sm font-semibold text-charcoal line-clamp-1",children:e.title}),it.jsx("div",{className:"text-xs text-charcoal/70 line-clamp-2 mt-1",children:e.description}),e.location&&it.jsxs("div",{className:"text-xs text-charcoal/50 mt-1",children:[" ",e.location]})]})]})}),it.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:it.jsxs("div",{className:"flex items-center gap-2",children:[it.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-100 to-indigo-100 rounded-full items-center justify-center hidden sm:flex",children:it.jsx(F,{className:"w-4 h-4 text-blue-600"})}),it.jsx("div",{children:it.jsx("div",{className:"text-sm font-medium text-charcoal",children:O(e.employeeId)})})]})}),it.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:it.jsxs("span",{className:"inline-flex items-center gap-2 px-2 py-1 rounded-lg bg-gray-100 text-gray-700 text-xs font-medium",children:[it.jsx(u,{className:`w-3 h-3 ${a.color} hidden sm:inline`}),a.label]})}),it.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:it.jsx("div",{className:"flex items-center gap-2",children:it.jsx("select",{value:e.status,onChange:t=>{P(e.id,{status:t.target.value}),ft.notifyTicketStatusUpdate(e.employeeId,e.title,t.target.value)},className:`text-xs font-medium px-2 py-1 rounded-lg border-0 focus:ring-2 focus:ring-gold ${c.color}`,children:_.map(e=>it.jsx("option",{value:e.id,children:e.label},e.id))})})}),it.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-charcoal",children:it.jsxs("div",{children:[it.jsx("div",{children:new Date(e.createdAt).toLocaleDateString()}),it.jsx("div",{className:"text-xs text-charcoal/60",children:new Date(e.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})}),it.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:it.jsxs("div",{className:"flex items-center gap-2",children:[it.jsx("button",{onClick:()=>{l(e),i(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-all",title:"View Details",children:it.jsx(p,{className:"w-4 h-4"})}),it.jsx("button",{onClick:()=>{l(e),d(!0)},className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-all",title:"Send Response",children:it.jsx(ne,{className:"w-4 h-4"})}),!j&&it.jsx("button",{onClick:()=>(async e=>{try{if((await Tn.archiveTicket(e)).success){const s=t.find(t=>t.id===e);s&&ft.notifyTicketArchived(s.employeeId,s.title),R()}}catch(s){console.error("Error archiving ticket:",s),S(Tn.handleApiError(s))}})(e.id),className:"p-2 text-orange-600 hover:bg-orange-50 rounded-lg transition-all",title:"Archive Ticket",children:it.jsx(we,{className:"w-4 h-4"})}),it.jsx("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to permanently delete this ticket? This action cannot be undone."))try{(await Tn.deleteTicket(e)).success&&s(t.filter(t=>t.id!==e))}catch(a){console.error("Error deleting ticket:",a),S(Tn.handleApiError(a))}})(e.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Delete Ticket",children:it.jsx(L,{className:"w-4 h-4"})})]})})]},e.id)})})]}),0===I().length&&it.jsxs("div",{className:"text-center py-12",children:[it.jsx(fe,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),it.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:j?"No archived tickets":"No tickets found"}),it.jsx("p",{className:"text-gray-500",children:j?"No tickets have been archived yet.":"Try adjusting your search or filter criteria."})]})]})]}),o&&n&&it.jsx(Rn,{ticket:n,employee:a.find(e=>e.id===n.employeeId),onClose:()=>{i(!1),l(null)},onUpdateStatus:e=>{P(n.id,{status:e}),ft.notifyTicketStatusUpdate(n.employeeId,n.title,e)}}),c&&n&&it.jsx(Pn,{ticket:n,onClose:()=>{d(!1),l(null)},onSendResponse:async e=>{try{const t={message:e.message,internal:e.internal||!1,update_status:e.updateStatus||!1,new_status:e.newStatus};(await Tn.addTicketResponse(n.id,t)).success&&(R(),e.internal||ft.notifyTicketResponse(n.employeeId,n.title,e.message),d(!1),l(null))}catch(t){console.error("Error sending response:",t),S(Tn.handleApiError(t))}}})]})},Rn=({ticket:e,employee:t,onClose:s,onUpdateStatus:a})=>{const r=(e=>{const t=[{id:"broken-equipment",label:"Broken Equipment",icon:be,color:"text-red-600"},{id:"software-issue",label:"Software Issue",icon:ye,color:"text-blue-600"},{id:"pos-problem",label:"POS Problem",icon:je,color:"text-purple-600"},{id:"kitchen-equipment",label:"Kitchen Equipment",icon:ve,color:"text-orange-600"},{id:"facility-issue",label:"Facility Issue",icon:q,color:"text-yellow-600"},{id:"other",label:"Other",icon:Ne,color:"text-gray-600"}];return t.find(t=>t.id===e)||t[t.length-1]})(e.category),n=r.icon;return it.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:it.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[it.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[it.jsxs("div",{className:"flex items-center gap-3",children:[it.jsx("div",{className:`p-2 rounded-lg bg-gray-100 ${r.color}`,children:it.jsx(n,{className:"w-6 h-6"})}),it.jsxs("div",{children:[it.jsx("h3",{className:"text-xl font-semibold text-charcoal",children:e.title}),it.jsxs("p",{className:"text-sm text-charcoal/60",children:["Ticket #",e.id.slice(-8).toUpperCase()]})]})]}),it.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:it.jsx("span",{className:"text-2xl",children:""})})]}),it.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:it.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[it.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[it.jsxs("div",{children:[it.jsx("h4",{className:"font-semibold text-charcoal mb-3",children:"Description"}),it.jsx("p",{className:"text-charcoal/80 bg-gray-50 p-4 rounded-lg",children:e.description})]}),e.responses&&e.responses.length>0&&it.jsxs("div",{children:[it.jsx("h4",{className:"font-semibold text-charcoal mb-3",children:"Response History"}),it.jsx("div",{className:"space-y-3",children:e.responses.map(e=>it.jsxs("div",{className:"p-4 rounded-lg "+(e.internal?"bg-yellow-50 border border-yellow-200":"bg-blue-50 border border-blue-200"),children:[it.jsxs("div",{className:"flex justify-between items-start mb-2",children:[it.jsxs("span",{className:"font-medium text-charcoal",children:[e.respondedBy,e.internal&&it.jsx("span",{className:"text-xs text-orange-600 ml-2",children:"(Internal Note)"})]}),it.jsx("span",{className:"text-xs text-charcoal/60",children:new Date(e.respondedAt).toLocaleString()})]}),it.jsx("p",{className:"text-charcoal/80",children:e.message})]},e.id))})]})]}),it.jsxs("div",{className:"space-y-6",children:[it.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[it.jsx("h4",{className:"font-semibold text-charcoal mb-3",children:"Employee Information"}),it.jsxs("div",{className:"space-y-2",children:[it.jsxs("div",{className:"flex items-center gap-2",children:[it.jsx(F,{className:"w-4 h-4 text-gray-600"}),it.jsxs("span",{className:"text-sm text-charcoal",children:[t?.personalInfo?.firstName||t?.name||"Unknown"," ",t?.personalInfo?.lastName||""]})]}),it.jsx("div",{className:"text-sm text-charcoal/70",children:t?.email}),it.jsx("div",{className:"text-sm text-charcoal/70",children:t?.location?.name})]})]}),it.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[it.jsx("h4",{className:"font-semibold text-charcoal mb-3",children:"Ticket Details"}),it.jsxs("div",{className:"space-y-3",children:[it.jsxs("div",{children:[it.jsx("span",{className:"text-sm font-medium text-charcoal/70",children:"Category:"}),it.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[it.jsx(n,{className:`w-4 h-4 ${r.color}`}),it.jsx("span",{className:"text-sm text-charcoal",children:r.label})]})]}),it.jsxs("div",{children:[it.jsx("span",{className:"text-sm font-medium text-charcoal/70",children:"Priority:"}),it.jsx("span",{className:"inline-block px-2 py-1 rounded-full text-xs font-medium mt-1 "+("urgent"===e.priority?"bg-red-100 text-red-700":"high"===e.priority?"bg-orange-100 text-orange-700":"medium"===e.priority?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"),children:e.priority?.charAt(0).toUpperCase()+e.priority?.slice(1)})]}),it.jsxs("div",{children:[it.jsx("span",{className:"text-sm font-medium text-charcoal/70",children:"Status:"}),it.jsxs("select",{value:e.status,onChange:e=>a(e.target.value),className:"block w-full mt-1 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-gold focus:border-transparent",children:[it.jsx("option",{value:"open",children:"Open"}),it.jsx("option",{value:"in-progress",children:"In Progress"}),it.jsx("option",{value:"resolved",children:"Resolved"}),it.jsx("option",{value:"closed",children:"Closed"})]})]}),e.location&&it.jsxs("div",{children:[it.jsx("span",{className:"text-sm font-medium text-charcoal/70",children:"Location:"}),it.jsx("p",{className:"text-sm text-charcoal mt-1",children:e.location})]}),it.jsxs("div",{children:[it.jsx("span",{className:"text-sm font-medium text-charcoal/70",children:"Created:"}),it.jsxs("p",{className:"text-sm text-charcoal mt-1",children:[new Date(e.createdAt).toLocaleDateString()," at ",new Date(e.createdAt).toLocaleTimeString()]})]}),e.updatedAt&&e.updatedAt!==e.createdAt&&it.jsxs("div",{children:[it.jsx("span",{className:"text-sm font-medium text-charcoal/70",children:"Last Updated:"}),it.jsxs("p",{className:"text-sm text-charcoal mt-1",children:[new Date(e.updatedAt).toLocaleDateString()," at ",new Date(e.updatedAt).toLocaleTimeString()]})]})]})]})]})]})})]})})},Pn=({ticket:t,onClose:s,onSendResponse:a})=>{const[r,n]=e.useState({message:"",internal:!1,updateStatus:!1,newStatus:"in-progress"});return it.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:it.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full",children:[it.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[it.jsxs("h3",{className:"text-xl font-semibold text-charcoal",children:["Respond to: ",t.title]}),it.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:it.jsx("span",{className:"text-2xl",children:""})})]}),it.jsxs("div",{className:"p-6 space-y-4",children:[it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal/70 mb-2",children:"Response Message"}),it.jsx("textarea",{value:r.message,onChange:e=>n({...r,message:e.target.value}),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent",placeholder:"Type your response to the employee..."})]}),it.jsx("div",{className:"flex items-center gap-4",children:it.jsxs("label",{className:"flex items-center gap-2",children:[it.jsx("input",{type:"checkbox",checked:r.internal,onChange:e=>n({...r,internal:e.target.checked}),className:"w-4 h-4 text-gold focus:ring-gold rounded"}),it.jsx("span",{className:"text-sm text-charcoal",children:"Internal note (not sent to employee)"})]})}),it.jsxs("div",{className:"flex items-center gap-4",children:[it.jsxs("label",{className:"flex items-center gap-2",children:[it.jsx("input",{type:"checkbox",checked:r.updateStatus,onChange:e=>n({...r,updateStatus:e.target.checked}),className:"w-4 h-4 text-gold focus:ring-gold rounded"}),it.jsx("span",{className:"text-sm text-charcoal",children:"Update ticket status"})]}),r.updateStatus&&it.jsxs("select",{value:r.newStatus,onChange:e=>n({...r,newStatus:e.target.value}),className:"px-3 py-1 border border-gray-300 rounded focus:ring-2 focus:ring-gold focus:border-transparent text-sm",children:[it.jsx("option",{value:"in-progress",children:"In Progress"}),it.jsx("option",{value:"resolved",children:"Resolved"}),it.jsx("option",{value:"closed",children:"Closed"})]})]})]}),it.jsxs("div",{className:"flex justify-end gap-3 p-6 border-t border-gray-200",children:[it.jsx("button",{onClick:s,className:"px-4 py-2 bg-gray-200 text-charcoal rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),it.jsxs("button",{onClick:()=>{r.message.trim()?a(r):alert("Please enter a response message")},className:"px-6 py-2 bg-gold-gradient text-charcoal rounded-md hover:shadow-lg transition-all flex items-center gap-2",children:[it.jsx(te,{className:"w-4 h-4"}),"Send Response"]})]})]})})};const On=new class{constructor(){this.storageKeys={shoutouts:"employeeShoutouts",rewards:"employeeRewards",achievements:"employeeAchievements",performance:"employeePerformance",rewardTypes:"rewardTypes",badges:"employeeBadges"},this.initializeDefaultData()}initializeDefaultData(){if(!localStorage.getItem(this.storageKeys.rewardTypes)){const e=[{id:"points_50",name:"50 Points",type:"points",value:50,description:"Recognition points for good performance",icon:""},{id:"points_100",name:"100 Points",type:"points",value:100,description:"Recognition points for excellent performance",icon:""},{id:"gift_card_10",name:"$10 Gift Card",type:"gift_card",value:10,description:"Restaurant gift card reward",icon:""},{id:"extra_break",name:"Extra 15min Break",type:"benefit",value:15,description:"Additional break time",icon:""},{id:"parking_spot",name:"Premium Parking Spot",type:"benefit",value:1,description:"Reserved parking spot for the week",icon:""}];localStorage.setItem(this.storageKeys.rewardTypes,JSON.stringify(e))}if(!localStorage.getItem(this.storageKeys.badges)){const e=[{id:"customer_service_star",name:"Customer Service Star",description:"Exceptional customer service",icon:"",color:"gold",criteria:"Outstanding customer feedback and service quality"},{id:"team_player",name:"Team Player",description:"Excellent teamwork and collaboration",icon:"",color:"blue",criteria:"Consistently helps colleagues and works well in teams"},{id:"efficiency_expert",name:"Efficiency Expert",description:"Outstanding efficiency and productivity",icon:"",color:"yellow",criteria:"Consistently meets and exceeds performance targets"},{id:"innovation_champion",name:"Innovation Champion",description:"Creative problem solving and innovation",icon:"",color:"purple",criteria:"Brings innovative ideas and solutions to the workplace"},{id:"mentor_master",name:"Mentor Master",description:"Excellent at training and mentoring new staff",icon:"",color:"green",criteria:"Successfully mentors and trains new employees"},{id:"attendance_ace",name:"Attendance Ace",description:"Perfect attendance record",icon:"",color:"orange",criteria:"Maintains excellent attendance and punctuality"}];localStorage.setItem(this.storageKeys.badges,JSON.stringify(e))}}createShoutout(e){const t=this.getAllShoutouts(),s={id:Date.now().toString()+Math.random().toString(36).substr(2,9),...e,createdAt:(new Date).toISOString(),likes:0,likedBy:[],comments:[]};return t.push(s),localStorage.setItem(this.storageKeys.shoutouts,JSON.stringify(t)),this.updateEmployeePerformance(e.employeeId,"shoutout_received",{shoutoutId:s.id,recognizedBy:e.recognizedBy,category:e.category}),s}getAllShoutouts(){return JSON.parse(localStorage.getItem(this.storageKeys.shoutouts)||"[]")}getShoutoutsByEmployee(e){return this.getAllShoutouts().filter(t=>t.employeeId===e)}getRecentShoutouts(e=10){return this.getAllShoutouts().sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt)).slice(0,e)}likeShoutout(e,t){const s=this.getAllShoutouts(),a=s.find(t=>t.id===e);return a&&!a.likedBy.includes(t)&&(a.likes+=1,a.likedBy.push(t),localStorage.setItem(this.storageKeys.shoutouts,JSON.stringify(s))),a}giveReward(e){const t=this.getAllRewards(),s={id:Date.now().toString()+Math.random().toString(36).substr(2,9),...e,createdAt:(new Date).toISOString(),status:"pending",redeemedAt:null};return t.push(s),localStorage.setItem(this.storageKeys.rewards,JSON.stringify(t)),this.updateEmployeePerformance(e.employeeId,"reward_received",{rewardId:s.id,rewardType:e.type,value:e.value}),s}getAllRewards(){return JSON.parse(localStorage.getItem(this.storageKeys.rewards)||"[]")}getRewardsByEmployee(e){return this.getAllRewards().filter(t=>t.employeeId===e)}getPendingRewards(e){return this.getRewardsByEmployee(e).filter(e=>"pending"===e.status)}redeemReward(e,t){const s=this.getAllRewards(),a=s.find(s=>s.id===e&&s.employeeId===t);return a&&"pending"===a.status&&(a.status="redeemed",a.redeemedAt=(new Date).toISOString(),localStorage.setItem(this.storageKeys.rewards,JSON.stringify(s)),this.updateEmployeePerformance(t,"reward_redeemed",{rewardId:e,redeemedAt:a.redeemedAt})),a}getRewardTypes(){return JSON.parse(localStorage.getItem(this.storageKeys.rewardTypes)||"[]")}awardBadge(e,t,s,a){const r=this.getAllAchievements(),n=this.getBadgeTypes().find(e=>e.id===t);if(!n)return null;if(r.find(s=>s.employeeId===e&&s.badgeId===t))return null;const l={id:Date.now().toString()+Math.random().toString(36).substr(2,9),employeeId:e,badgeId:t,badge:n,awardedBy:s,reason:a,awardedAt:(new Date).toISOString()};return r.push(l),localStorage.setItem(this.storageKeys.achievements,JSON.stringify(r)),this.updateEmployeePerformance(e,"badge_earned",{badgeId:t,badgeName:n.name,awardedBy:s}),l}getAllAchievements(){return JSON.parse(localStorage.getItem(this.storageKeys.achievements)||"[]")}getEmployeeBadges(e){return this.getAllAchievements().filter(t=>t.employeeId===e)}getBadgeTypes(){return JSON.parse(localStorage.getItem(this.storageKeys.badges)||"[]")}updateEmployeePerformance(e,t,s){const a=this.getAllPerformance();let r=a.find(t=>t.employeeId===e);r||(r={employeeId:e,totalPoints:0,totalShoutouts:0,totalRewards:0,totalBadges:0,activities:[],lastUpdated:(new Date).toISOString()},a.push(r));const n={id:Date.now().toString()+Math.random().toString(36).substr(2,9),action:t,data:s,timestamp:(new Date).toISOString()};switch(r.activities.push(n),r.lastUpdated=(new Date).toISOString(),t){case"shoutout_received":r.totalShoutouts+=1,r.totalPoints+=25;break;case"reward_received":r.totalRewards+=1,"points"===s.rewardType&&(r.totalPoints+=s.value);break;case"badge_earned":r.totalBadges+=1,r.totalPoints+=100}return localStorage.setItem(this.storageKeys.performance,JSON.stringify(a)),r}getAllPerformance(){return JSON.parse(localStorage.getItem(this.storageKeys.performance)||"[]")}getEmployeePerformance(e){return this.getAllPerformance().find(t=>t.employeeId===e)||{employeeId:e,totalPoints:0,totalShoutouts:0,totalRewards:0,totalBadges:0,activities:[]}}getTopPerformers(e=10){return this.getAllPerformance().sort((e,t)=>t.totalPoints-e.totalPoints).slice(0,e)}getRecognitionStats(e=null){const t=e?this.getShoutoutsByEmployee(e):this.getAllShoutouts(),s=e?this.getRewardsByEmployee(e):this.getAllRewards(),a=e?this.getEmployeeBadges(e):this.getAllAchievements();return{totalShoutouts:t.length,totalRewards:s.length,totalBadges:a.length,recentActivity:[...t,...s,...a].sort((e,t)=>new Date(t.createdAt||t.awardedAt)-new Date(e.createdAt||e.awardedAt)).slice(0,10)}}getShoutoutCategories(){return[{id:"customer_service",name:"Customer Service Excellence",icon:"",color:"blue"},{id:"teamwork",name:"Outstanding Teamwork",icon:"",color:"green"},{id:"efficiency",name:"Exceptional Efficiency",icon:"",color:"yellow"},{id:"leadership",name:"Leadership Skills",icon:"",color:"purple"},{id:"innovation",name:"Creative Innovation",icon:"",color:"orange"},{id:"reliability",name:"Dependability",icon:"",color:"red"},{id:"training",name:"Mentoring & Training",icon:"",color:"indigo"},{id:"attitude",name:"Positive Attitude",icon:"",color:"pink"}]}searchRecognition(e,t="all"){const s=e.toLowerCase();let a=[];if("all"===t||"shoutouts"===t){const e=this.getAllShoutouts().filter(e=>e.message.toLowerCase().includes(s)||e.employeeName.toLowerCase().includes(s)||e.category.toLowerCase().includes(s)).map(e=>({...e,type:"shoutout"}));a=[...a,...e]}if("all"===t||"rewards"===t){const e=this.getAllRewards().filter(e=>e.reason.toLowerCase().includes(s)||e.employeeName.toLowerCase().includes(s)).map(e=>({...e,type:"reward"}));a=[...a,...e]}if("all"===t||"badges"===t){const e=this.getAllAchievements().filter(e=>e.badge.name.toLowerCase().includes(s)||e.reason.toLowerCase().includes(s)).map(e=>({...e,type:"badge"}));a=[...a,...e]}return a.sort((e,t)=>new Date(t.createdAt||t.awardedAt)-new Date(e.createdAt||e.awardedAt))}},In=()=>{const{user:t}=wt(),[s,a]=e.useState("overview"),[r,n]=e.useState(""),[l,o]=e.useState("all"),[i,c]=e.useState([]),[d,m]=e.useState([]),[u,x]=e.useState([]),[h,g]=e.useState([]),[p,f]=e.useState([]),[b,y]=e.useState({}),[j,v]=e.useState(!1),[N,w]=e.useState("shoutout");e.useEffect(()=>{k()},[]);const k=()=>{const e=JSON.parse(localStorage.getItem("employees")||"[]");c(e),m(On.getRecentShoutouts(20)),x(On.getAllRewards().slice(0,20)),g(On.getAllAchievements().slice(0,20)),f(On.getTopPerformers(10)),y(On.getRecognitionStats())},C=e=>{w(e),v(!0)},E=()=>{let e=[];return"all"!==l&&"shoutouts"!==l||(e=[...e,...d.map(e=>({...e,type:"shoutout"}))]),"all"!==l&&"rewards"!==l||(e=[...e,...u.map(e=>({...e,type:"reward"}))]),"all"!==l&&"badges"!==l||(e=[...e,...h.map(e=>({...e,type:"badge"}))]),r?e.filter(e=>e.employeeName?.toLowerCase().includes(r.toLowerCase())||e.message?.toLowerCase().includes(r.toLowerCase())||e.reason?.toLowerCase().includes(r.toLowerCase())||e.badge?.name?.toLowerCase().includes(r.toLowerCase())):e.sort((e,t)=>new Date(t.createdAt||t.awardedAt)-new Date(e.createdAt||t.awardedAt))},A=e=>{const t=new Date(e),s=(new Date-t)/36e5;return s<1?"Just now":s<24?`${Math.floor(s)}h ago`:s<168?`${Math.floor(s/24)}d ago`:t.toLocaleDateString()},T=e=>{const t=On.getShoutoutCategories().find(t=>t.id===e);return t?t.icon:""},_=({icon:e,title:t,value:s,trend:a,color:r="blue"})=>it.jsx("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6 border-l-4 border-l-blue-500",children:it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsxs("div",{className:"flex-1",children:[it.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:t}),it.jsx("p",{className:"text-xl sm:text-3xl font-bold text-gray-900 mt-1",children:s}),a&&it.jsxs("div",{className:"flex items-center mt-2 text-xs sm:text-sm",children:[it.jsx(Ce,{className:"w-3 h-3 sm:w-4 sm:h-4 text-green-500 mr-1"}),it.jsxs("span",{className:"text-green-600",children:[a,"% this month"]})]})]}),it.jsx("div",{className:`p-2 sm:p-3 rounded-full bg-${r}-100 flex-shrink-0`,children:it.jsx(e,{className:`w-6 h-6 sm:w-8 sm:h-8 text-${r}-600`})})]})}),R=({item:e})=>{const t="shoutout"===e.type,s="reward"===e.type,a="badge"===e.type;return it.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6 mb-4 hover:shadow-xl transition-all duration-300",children:[it.jsxs("div",{className:"flex flex-col xs:flex-row xs:items-start xs:justify-between mb-4 gap-3",children:[it.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[it.jsxs("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full flex items-center justify-center flex-shrink-0 "+(t?"bg-blue-100":s?"bg-green-100":"bg-purple-100"),children:[t&&it.jsx(ne,{className:"w-5 h-5 sm:w-6 sm:h-6 text-blue-600"}),s&&it.jsx(ke,{className:"w-5 h-5 sm:w-6 sm:h-6 text-green-600"}),a&&it.jsx(Se,{className:"w-5 h-5 sm:w-6 sm:h-6 text-purple-600"})]}),it.jsxs("div",{className:"flex-1 min-w-0",children:[it.jsxs("h3",{className:"font-semibold text-gray-900 text-sm sm:text-base break-words",children:[e.employeeName,it.jsxs("span",{className:"block xs:inline",children:[t&&it.jsxs("span",{className:"text-xs sm:text-sm text-gray-600 ml-0 xs:ml-2",children:[" ",T(e.category)," ",On.getShoutoutCategories().find(t=>t.id===e.category)?.name]}),s&&it.jsxs("span",{className:"text-xs sm:text-sm text-gray-600 ml-0 xs:ml-2",children:[" ",e.rewardName||e.name]}),a&&it.jsxs("span",{className:"text-xs sm:text-sm text-gray-600 ml-0 xs:ml-2",children:[" ",e.badge.icon," ",e.badge.name]})]})]}),it.jsxs("p",{className:"text-xs sm:text-sm text-gray-500",children:[t&&`Recognized by ${e.recognizedBy}`,s&&`Rewarded by ${e.givenBy}`,a&&`Badge awarded by ${e.awardedBy}`,"  ",A(e.createdAt||e.awardedAt)]})]})]}),it.jsxs("div",{className:"flex items-center gap-2 xs:flex-shrink-0",children:[t&&e.likes>0&&it.jsxs("div",{className:"flex items-center gap-1 text-red-500",children:[it.jsx(Ae,{className:"w-4 h-4 fill-current"}),it.jsx("span",{className:"text-sm",children:e.likes})]}),s&&it.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("pending"===e.status?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:e.status})]})]}),it.jsx("p",{className:"text-sm sm:text-base text-gray-700 mb-4 break-words",children:e.message||e.reason}),s&&e.value&&it.jsx("div",{className:"bg-green-50 rounded-lg p-3 mb-3",children:it.jsxs("div",{className:"flex items-center gap-2",children:[it.jsx("span",{className:"text-xl sm:text-2xl flex-shrink-0",children:e.icon||""}),it.jsxs("div",{className:"flex-1 min-w-0",children:[it.jsx("p",{className:"font-medium text-green-800 text-sm sm:text-base break-words",children:e.name}),it.jsx("p",{className:"text-xs sm:text-sm text-green-600 break-words",children:e.description})]})]})}),a&&it.jsx("div",{className:`bg-${e.badge.color}-50 rounded-lg p-3 mb-3 border-2 border-${e.badge.color}-200`,children:it.jsxs("div",{className:"flex items-center gap-3",children:[it.jsx("span",{className:"text-2xl sm:text-3xl flex-shrink-0",children:e.badge.icon}),it.jsxs("div",{className:"flex-1 min-w-0",children:[it.jsx("p",{className:"font-bold text-gray-800 text-sm sm:text-base break-words",children:e.badge.name}),it.jsx("p",{className:"text-xs sm:text-sm text-gray-600 break-words",children:e.badge.description}),it.jsxs("p",{className:"text-xs text-gray-500 mt-1 break-words",children:["Criteria: ",e.badge.criteria]})]})]})})]})},P=()=>{const[s,a]=e.useState({employeeId:"",employeeName:"",message:"",reason:"",category:"customer_service",rewardType:"points_50",badgeId:"customer_service_star"});return it.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-3 sm:p-4",children:it.jsx("div",{className:"bg-white rounded-xl sm:rounded-2xl shadow-2xl max-w-md w-full max-h-[95vh] sm:max-h-[90vh] overflow-y-auto",children:it.jsxs("div",{className:"p-4 sm:p-6",children:[it.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[it.jsxs("h2",{className:"text-lg sm:text-2xl font-bold text-gray-900",children:["shoutout"===N&&"Give Shout-out","reward"===N&&"Give Reward","badge"===N&&"Award Badge"]}),it.jsx("button",{onClick:()=>v(!1),className:"text-gray-400 hover:text-gray-600 text-xl sm:text-2xl",children:""})]}),it.jsxs("form",{onSubmit:e=>{e.preventDefault();const r=i.find(e=>e.id===s.employeeId);if(!r)return;const n={employeeId:s.employeeId,employeeName:r.name,recognizedBy:t.name,givenBy:t.name,awardedBy:t.name};if("shoutout"===N)On.createShoutout({...n,message:s.message,category:s.category});else if("reward"===N){const e=On.getRewardTypes().find(e=>e.id===s.rewardType);On.giveReward({...n,...e,reason:s.reason})}else"badge"===N&&On.awardBadge(s.employeeId,s.badgeId,t.name,s.reason);v(!1),a({employeeId:"",employeeName:"",message:"",reason:"",category:"customer_service",rewardType:"points_50",badgeId:"customer_service_star"}),k()},className:"space-y-4",children:[it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Employee"}),it.jsxs("select",{value:s.employeeId,onChange:e=>a({...s,employeeId:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[it.jsx("option",{value:"",children:"Choose an employee..."}),i.map(e=>it.jsxs("option",{value:e.id,children:[e.name," - ",e.position]},e.id))]})]}),"shoutout"===N&&it.jsxs(it.Fragment,{children:[it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),it.jsx("select",{value:s.category,onChange:e=>a({...s,category:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:On.getShoutoutCategories().map(e=>it.jsxs("option",{value:e.id,children:[e.icon," ",e.name]},e.id))})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Recognition Message"}),it.jsx("textarea",{value:s.message,onChange:e=>a({...s,message:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"4",placeholder:"Share what made this employee stand out...",required:!0})]})]}),"reward"===N&&it.jsxs(it.Fragment,{children:[it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reward Type"}),it.jsx("select",{value:s.rewardType,onChange:e=>a({...s,rewardType:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:On.getRewardTypes().map(e=>it.jsxs("option",{value:e.id,children:[e.icon," ",e.name," - ",e.description]},e.id))})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason for Reward"}),it.jsx("textarea",{value:s.reason,onChange:e=>a({...s,reason:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"3",placeholder:"Why is this employee receiving this reward?",required:!0})]})]}),"badge"===N&&it.jsxs(it.Fragment,{children:[it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Badge Type"}),it.jsx("select",{value:s.badgeId,onChange:e=>a({...s,badgeId:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:On.getBadgeTypes().map(e=>it.jsxs("option",{value:e.id,children:[e.icon," ",e.name," - ",e.description]},e.id))})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason for Badge"}),it.jsx("textarea",{value:s.reason,onChange:e=>a({...s,reason:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"3",placeholder:"Explain why this employee deserves this badge...",required:!0})]})]}),it.jsxs("div",{className:"flex gap-3 pt-4",children:[it.jsx("button",{type:"button",onClick:()=>v(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium",children:"Cancel"}),it.jsxs("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium",children:["shoutout"===N&&"Give Shout-out","reward"===N&&"Give Reward","badge"===N&&"Award Badge"]})]})]})]})})})};return it.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-3 sm:p-6",children:[it.jsxs("div",{className:"max-w-7xl mx-auto",children:[it.jsx("div",{className:"mb-6 sm:mb-8",children:it.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[it.jsxs("div",{children:[it.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-1 sm:mb-2",children:"Employee Recognition"}),it.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Celebrate achievements and motivate your team"})]}),it.jsxs("div",{className:"flex flex-col xs:flex-row gap-2 xs:gap-3",children:[it.jsxs("button",{onClick:()=>C("shoutout"),className:"flex items-center justify-center gap-2 bg-blue-600 text-white px-3 xs:px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm xs:text-base",children:[it.jsx(ne,{className:"w-4 h-4 xs:w-5 xs:h-5"}),it.jsx("span",{className:"hidden xs:inline",children:"Give "}),"Shout-out"]}),it.jsxs("button",{onClick:()=>C("reward"),className:"flex items-center justify-center gap-2 bg-green-600 text-white px-3 xs:px-4 py-2 rounded-lg hover:bg-green-700 transition-colors text-sm xs:text-base",children:[it.jsx(ke,{className:"w-4 h-4 xs:w-5 xs:h-5"}),it.jsx("span",{className:"hidden xs:inline",children:"Give "}),"Reward"]}),it.jsxs("button",{onClick:()=>C("badge"),className:"flex items-center justify-center gap-2 bg-purple-600 text-white px-3 xs:px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors text-sm xs:text-base",children:[it.jsx(Se,{className:"w-4 h-4 xs:w-5 xs:h-5"}),it.jsx("span",{className:"hidden xs:inline",children:"Award "}),"Badge"]})]})]})}),it.jsx("div",{className:"flex flex-nowrap gap-1 sm:gap-2 mb-6 sm:mb-8 border-b border-gray-200 overflow-x-auto",children:[{id:"overview",name:"Overview",icon:Ce},{id:"activity",name:"Activity",icon:S},{id:"leaderboard",name:"Leaders",icon:Ee}].map(e=>it.jsxs("button",{onClick:()=>a(e.id),className:"flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-2 sm:py-3 rounded-t-lg transition-colors text-xs sm:text-base whitespace-nowrap min-w-fit "+(s===e.id?"border-b-2 border-blue-500 text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:[it.jsx(e.icon,{className:"w-4 h-4 sm:w-5 sm:h-5"}),it.jsx("span",{className:"hidden xs:inline sm:hidden lg:inline",children:e.name}),it.jsx("span",{className:"xs:hidden sm:inline lg:hidden",children:e.name.split(" ")[0]})]},e.id))}),"overview"===s&&it.jsxs("div",{className:"space-y-8",children:[it.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[it.jsx(_,{icon:ne,title:"Total Shout-outs",value:b.totalShoutouts||0,trend:12,color:"blue"}),it.jsx(_,{icon:ke,title:"Rewards Given",value:b.totalRewards||0,trend:8,color:"green"}),it.jsx(_,{icon:Se,title:"Badges Awarded",value:b.totalBadges||0,trend:15,color:"purple"}),it.jsx(_,{icon:$,title:"Active Employees",value:i.length,trend:3,color:"orange"})]}),it.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-4 sm:p-6",children:[it.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[it.jsx("h2",{className:"text-lg sm:text-2xl font-bold text-gray-900",children:"Recent Recognition"}),it.jsxs("button",{onClick:()=>a("activity"),className:"text-blue-600 hover:text-blue-800 font-medium flex items-center gap-1 text-sm sm:text-base",children:[it.jsx("span",{className:"hidden xs:inline",children:"View "}),"All ",it.jsx(W,{className:"w-4 h-4"})]})]}),it.jsx("div",{className:"space-y-4",children:b.recentActivity?.slice(0,5).map((e,t)=>it.jsx(R,{item:e},t))})]})]}),"activity"===s&&it.jsxs("div",{className:"space-y-6",children:[it.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-4 sm:p-6",children:it.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[it.jsxs("div",{className:"flex-1 relative",children:[it.jsx(K,{className:"w-4 h-4 sm:w-5 sm:h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),it.jsx("input",{type:"text",placeholder:"Search employees...",value:r,onChange:e=>n(e.target.value),className:"w-full pl-9 sm:pl-10 pr-4 py-2 sm:py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base"})]}),it.jsxs("div",{className:"relative",children:[it.jsx(re,{className:"w-4 h-4 sm:w-5 sm:h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),it.jsxs("select",{value:l,onChange:e=>o(e.target.value),className:"w-full sm:w-auto pl-9 sm:pl-10 pr-8 py-2 sm:py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none bg-white text-sm sm:text-base",children:[it.jsx("option",{value:"all",children:"All"}),it.jsx("option",{value:"shoutouts",children:"Shout-outs"}),it.jsx("option",{value:"rewards",children:"Rewards"}),it.jsx("option",{value:"badges",children:"Badges"})]})]})]})}),it.jsx("div",{className:"space-y-4",children:E().length>0?E().map((e,t)=>it.jsx(R,{item:e},t)):it.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 sm:p-12 text-center",children:[it.jsx(Ee,{className:"w-12 h-12 sm:w-16 sm:h-16 mx-auto text-gray-300 mb-4"}),it.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-600 mb-2",children:"No Recognition Found"}),it.jsx("p",{className:"text-sm sm:text-base text-gray-500",children:"Start recognizing your team's great work!"})]})})]}),"leaderboard"===s&&it.jsx("div",{className:"space-y-6",children:it.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-4 sm:p-6",children:[it.jsx("h2",{className:"text-lg sm:text-2xl font-bold text-gray-900 mb-4 sm:mb-6",children:"Top Performers"}),it.jsx("div",{className:"space-y-3 sm:space-y-4",children:p.map((e,t)=>{const s=i.find(t=>t.id===e.employeeId);return it.jsxs("div",{className:"flex flex-col xs:flex-row xs:items-center xs:justify-between p-3 sm:p-4 bg-gray-50 rounded-xl gap-3",children:[it.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 flex-1",children:[it.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full flex items-center justify-center font-bold text-white text-sm sm:text-base flex-shrink-0 "+(0===t?"bg-yellow-500":1===t?"bg-gray-400":2===t?"bg-orange-500":"bg-blue-500"),children:t+1}),it.jsxs("div",{className:"flex-1 min-w-0",children:[it.jsx("h3",{className:"font-semibold text-gray-900 text-sm sm:text-base break-words",children:s?.name||"Unknown Employee"}),it.jsx("p",{className:"text-xs sm:text-sm text-gray-600 break-words",children:s?.position||"Position not set"})]})]}),it.jsxs("div",{className:"flex items-center gap-3 xs:gap-6 text-xs sm:text-sm",children:[it.jsxs("div",{className:"text-center",children:[it.jsxs("div",{className:"flex items-center gap-1 text-blue-600",children:[it.jsx(ue,{className:"w-3 h-3 sm:w-4 sm:h-4 fill-current"}),it.jsx("span",{className:"font-bold",children:e.totalPoints})]}),it.jsx("span",{className:"text-gray-500 text-xs",children:"Points"})]}),it.jsxs("div",{className:"text-center",children:[it.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[it.jsx(ne,{className:"w-3 h-3 sm:w-4 sm:h-4"}),it.jsx("span",{className:"font-bold",children:e.totalShoutouts})]}),it.jsx("span",{className:"text-gray-500 text-xs",children:"Shout-outs"})]}),it.jsxs("div",{className:"text-center",children:[it.jsxs("div",{className:"flex items-center gap-1 text-purple-600",children:[it.jsx(Se,{className:"w-3 h-3 sm:w-4 sm:h-4"}),it.jsx("span",{className:"font-bold",children:e.totalBadges})]}),it.jsx("span",{className:"text-gray-500 text-xs",children:"Badges"})]})]})]},e.employeeId)})})]})})]}),j&&it.jsx(P,{})]})},Dn=()=>{const e=(()=>{const e=[{isOnSite:!0,networkName:"Restaurant_WiFi_Bartlesville",location:"Bartlesville",locationId:"bartlesville",ipRange:"192.168.1.x",confidence:.95},{isOnSite:!0,networkName:"Restaurant_WiFi_Tulsa",location:"Tulsa",locationId:"tulsa",ipRange:"192.168.2.x",confidence:.98},{isOnSite:!1,networkName:"Public_WiFi",location:"Unknown",locationId:null,ipRange:"10.0.0.x",confidence:0},{isOnSite:!1,networkName:"Home_Network",location:"Home",locationId:null,ipRange:"192.168.0.x",confidence:0}],t=localStorage.getItem("simulatedNetworkScenario");let s=0;return s=t?parseInt(t,10)%e.length:Math.floor(2*Math.random()),e[s]})();return{locationId:e.locationId,locationName:e.location,networkName:e.networkName,verified:e.isOnSite,confidence:e.confidence}},Ln=(e,t=new Date)=>{const s=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][t.getDay()];let a=[];if(e.manualSchedule?.times?.[s]?.isWorking){const t=e.manualSchedule.times[s];t.clockIn&&t.clockOut&&a.push({type:"manual",startTime:t.clockIn,endTime:t.clockOut,source:"manual_schedule"})}if(e.schedule?.availability?.[s]){const t=e.schedule.availability[s];Object.entries(t).forEach(([e,t])=>{if(t){const t={morning:{start:"06:00",end:"14:00"},afternoon:{start:"14:00",end:"22:00"},evening:{start:"22:00",end:"06:00"}};t[e]&&a.push({type:"automatic",startTime:t[e].start,endTime:t[e].end,shiftType:e,source:"automatic_schedule"})}})}return a},Fn=(e,t=new Date)=>{const[s,a]=e.split(":").map(Number),r=new Date(t);r.setHours(s,a,0,0);const n=Math.round((t-r)/6e4);return{isWithinGrace:n>=-5&&n<=5,isEarly:n<-5,isLate:n>5,minutesEarly:n<0?Math.abs(n):0,minutesLate:n>0?n:0,timeDifference:n}},qn=async(e,t,s=new Date)=>{const a=await(async(e,t)=>{try{if("CLOCK_IN_RESTAURANT_GENERAL"!==t)return{success:!1,error:"Invalid QR code for clock-in",errorType:"INVALID_QR"};if(!e)return{success:!1,error:"Employee must be logged in to clock in",errorType:"NOT_LOGGED_IN"};const s=Dn();if(!s.verified)return{success:!1,error:"Must be on restaurant network to clock in",errorType:"LOCATION_VERIFICATION_FAILED",locationInfo:s};const a=$n(e);if(a&&!a.clockOutTime)return{success:!1,error:"Already clocked in. Please clock out first.",errorType:"ALREADY_CLOCKED_IN",existingEntry:a};const r=Ln(e);if(0===r.length)return{success:!1,error:"No scheduled shift found for today",errorType:"NO_SHIFT_SCHEDULED"};const n=new Date;let l=null,o=null;for(const e of r){const t=Fn(e.startTime,n);(!l||Math.abs(t.timeDifference)<Math.abs(o.timeDifference))&&(l=e,o=t)}return{success:!0,shift:l,graceStatus:o,locationInfo:s,requiresApproval:!o.isWithinGrace}}catch(s){return{success:!1,error:`Clock-in validation failed: ${s.message}`,errorType:"VALIDATION_ERROR"}}})(e,t);if(!a.success)return a;try{const t={id:Bn(),employeeId:e.id,date:Vn(s),clockInTime:Hn(s),clockOutTime:null,scheduledShift:a.shift,graceStatus:a.graceStatus,locationInfo:a.locationInfo,status:a.requiresApproval?"PENDING_APPROVAL":"APPROVED",approvalRequired:a.requiresApproval,approvalReason:a.requiresApproval?a.graceStatus.isEarly?"EARLY_CLOCK_IN":"LATE_CLOCK_IN":null,createdAt:s.toISOString(),updatedAt:s.toISOString()};return Qn(t),Jn(e.id,{isCurrentlyClocked:!0,currentTimeEntryId:t.id,lastClockIn:t.clockInTime,currentShift:a.shift}),a.requiresApproval&&Gn({type:"CLOCK_IN_APPROVAL",employeeId:e.id,timeEntryId:t.id,reason:t.approvalReason,requestedAt:s.toISOString(),graceStatus:a.graceStatus,shift:a.shift}),{success:!0,timeEntry:t,requiresApproval:a.requiresApproval,message:a.requiresApproval?"Clock-in recorded but requires manager approval":"Successfully clocked in"}}catch(r){return{success:!1,error:`Failed to process clock-in: ${r.message}`,errorType:"PROCESSING_ERROR"}}},Mn=async(e,t,s=new Date)=>{const a=await(async(e,t)=>{try{if("CLOCK_OUT_RESTAURANT_GENERAL"!==t)return{success:!1,error:"Invalid QR code for clock-out",errorType:"INVALID_QR"};if(!e)return{success:!1,error:"Employee must be logged in to clock out",errorType:"NOT_LOGGED_IN"};const s=Dn();if(!s.verified)return{success:!1,error:"Must be on restaurant network to clock out",errorType:"LOCATION_VERIFICATION_FAILED",locationInfo:s};const a=$n(e);return!a||a.clockOutTime?{success:!1,error:"Not currently clocked in. Please clock in first.",errorType:"NOT_CLOCKED_IN"}:{success:!0,currentEntry:a,locationInfo:s}}catch(s){return{success:!1,error:`Clock-out validation failed: ${s.message}`,errorType:"VALIDATION_ERROR"}}})(e,t);if(!a.success)return a;try{const t=a.currentEntry;return t.clockOutTime=Hn(s),t.totalHours=Wn(t.clockInTime,t.clockOutTime),t.updatedAt=s.toISOString(),Qn(t),Jn(e.id,{isCurrentlyClocked:!1,currentTimeEntryId:null,lastClockOut:t.clockOutTime,currentShift:null}),{success:!0,timeEntry:t,message:"Successfully clocked out",hoursWorked:t.totalHours}}catch(r){return{success:!1,error:`Failed to process clock-out: ${r.message}`,errorType:"PROCESSING_ERROR"}}},$n=e=>{const t=JSON.parse(localStorage.getItem("timeEntries")||"[]"),s=Vn(new Date);return t.find(t=>t.employeeId===e.id&&t.date===s&&!t.clockOutTime)},zn=e=>JSON.parse(localStorage.getItem("employeeClockStatuses")||"{}")[e]||{isCurrentlyClocked:!1,currentTimeEntryId:null,lastClockIn:null,lastClockOut:null,currentShift:null},Un=(e,t=null)=>{let s=JSON.parse(localStorage.getItem("timeEntries")||"[]").filter(t=>t.employeeId===e);return t&&(s=s.filter(e=>{const s=new Date(e.date);return s>=t.start&&s<=t.end})),s.sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt))},Bn=()=>"te_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),Vn=e=>e.toISOString().split("T")[0],Hn=e=>e.toTimeString().split(" ")[0].substring(0,5),Wn=(e,t)=>{const[s,a]=e.split(":").map(Number),[r,n]=t.split(":").map(Number),l=60*s+a;let o=60*r+n;o<l&&(o+=1440);return((o-l)/60).toFixed(2)},Qn=e=>{const t=JSON.parse(localStorage.getItem("timeEntries")||"[]"),s=t.findIndex(t=>t.id===e.id);s>=0?t[s]=e:t.push(e),localStorage.setItem("timeEntries",JSON.stringify(t))},Jn=(e,t)=>{const s=JSON.parse(localStorage.getItem("employeeClockStatuses")||"{}");s[e]={...s[e],...t},localStorage.setItem("employeeClockStatuses",JSON.stringify(s))},Gn=e=>{const t=JSON.parse(localStorage.getItem("approvalRequests")||"[]");e.id="ar_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),e.status="PENDING",t.push(e),localStorage.setItem("approvalRequests",JSON.stringify(t))},Kn=(e,t)=>{const s=JSON.parse(localStorage.getItem("employees")||"[]"),a=s.findIndex(t=>t.id===e);if(-1===a)return;const r=s[a];"SCHEDULE_OVERRIDE"===t.type?(r.scheduleOverrides||(r.scheduleOverrides={}),Object.entries(t.dayChanges).forEach(([e,s])=>{r.scheduleOverrides[e]={...s,effectiveDate:t.effectiveDate,approvedAt:(new Date).toISOString()}})):"PERMANENT_CHANGE"===t.type&&r.schedule&&r.schedule.availability&&Object.entries(t.dayChanges).forEach(([e,t])=>{r.schedule.availability[e]=t}),s[a]=r,localStorage.setItem("employees",JSON.stringify(s))},Yn=e=>{const t=JSON.parse(localStorage.getItem("employeeNotifications")||"[]"),s={id:"emp_avl_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),employeeId:e.employeeId,type:"AVAILABILITY_CHANGE_RESPONSE",title:`Schedule change ${e.status.toLowerCase()}`,message:"APPROVED"===e.status?"Your availability change request has been approved.":"Your availability change request has been denied.",createdAt:(new Date).toISOString(),read:!1,requestId:e.id};t.push(s),localStorage.setItem("employeeNotifications",JSON.stringify(t))},Xn=()=>{const{user:t}=wt(),[s,a]=e.useState([]),[r,n]=e.useState([]),[l,o]=e.useState([]),[i,c]=e.useState([]),[d,m]=e.useState(null),[u,x]=e.useState([]),[h,g]=e.useState("approvals"),[p,f]=e.useState("all"),[b,y]=e.useState(""),[j,v]=e.useState("all"),[N,w]=e.useState("all"),[A,T]=e.useState("all"),[R,P]=e.useState("timeEntries"),[O,I]=e.useState([]),[D,L]=e.useState([]),[M,z]=e.useState([]),[U,B]=e.useState({start:new Date((new Date).setDate((new Date).getDate()-7)).toISOString().split("T")[0],end:(new Date).toISOString().split("T")[0]});e.useEffect(()=>{V();const e=setInterval(V,3e4);return()=>clearInterval(e)},[]);const V=()=>{const e=JSON.parse(localStorage.getItem("approvalRequests")||"[]").filter(e=>"PENDING"===e.status);a(e);const t=JSON.parse(localStorage.getItem("availabilityChangeRequests")||"[]").filter(e=>"PENDING"===e.status);n(t);const s=JSON.parse(localStorage.getItem("employees")||"[]").filter(e=>"ACTIVE"===e.status);c(s);const r=s.map(e=>{const t=zn(e.id);return{...e,clockStatus:t,isCurrentlyClocked:t.isCurrentlyClocked}}).filter(e=>e.isCurrentlyClocked);o(r)},H=async(e,s,a="")=>{try{const r=((e,t,s,a="")=>{const r=JSON.parse(localStorage.getItem("approvalRequests")||"[]"),n=r.find(t=>t.id===e);if(!n)return{success:!1,error:"Approval request not found"};if(n.status=t?"APPROVED":"DENIED",n.approvedBy=s,n.approvedAt=(new Date).toISOString(),n.approvalNotes=a,"CLOCK_IN_APPROVAL"===n.type){const e=JSON.parse(localStorage.getItem("timeEntries")||"[]"),r=e.find(e=>e.id===n.timeEntryId);r&&(r.status=t?"APPROVED":"DENIED",r.approvedBy=s,r.approvedAt=(new Date).toISOString(),r.approvalNotes=a,localStorage.setItem("timeEntries",JSON.stringify(e)))}return localStorage.setItem("approvalRequests",JSON.stringify(r)),{success:!0,message:`Request ${t?"approved":"denied"} successfully`}})(e,s,t.id,a);r.success?(V(),alert(`Request ${s?"approved":"denied"} successfully`)):alert(`Error: ${r.error}`)}catch(r){alert(`Error processing approval: ${r.message}`)}},W=async(e,s,a="")=>{try{const r=((e,t,s,a="")=>{try{const r=JSON.parse(localStorage.getItem("availabilityChangeRequests")||"[]"),n=r.find(t=>t.id===e);return n?(n.status=t?"APPROVED":"DENIED",n.approvedBy=s,n.approvedAt=(new Date).toISOString(),n.approvalNotes=a,t&&Kn(n.employeeId,n.changes),localStorage.setItem("availabilityChangeRequests",JSON.stringify(r)),Yn(n),{success:!0,message:`Request ${t?"approved":"denied"} successfully`}):{success:!1,error:"Request not found"}}catch(r){return{success:!1,error:`Failed to process approval: ${r.message}`,errorType:"APPROVAL_ERROR"}}})(e,s,t.id,a);r.success?(V(),alert(`Availability change ${s?"approved":"denied"} successfully`)):alert(`Error: ${r.error}`)}catch(r){alert(`Error processing availability change: ${r.message}`)}},Q=(e,t)=>{if(!e||!t)return 0;const[s,a]=e.split(":").map(Number),[r,n]=t.split(":").map(Number),l=60*s+a;let o=60*r+n;return o<l&&(o+=1440),(o-l)/60},J=e=>{if(!e)return"N/A";const[t,s]=e.split(":"),a=parseInt(t);return`${0===a?12:a>12?a-12:a}:${s} ${a>=12?"PM":"AM"}`},G=e=>{if(!e)return"N/A";const t=new Date,[s,a]=e.split(":").map(Number),r=new Date(t);r.setHours(s,a,0,0);const n=Math.floor((t-r)/6e4);return`${Math.floor(n/60)}h ${n%60}m`},X=()=>l.filter(e=>{if("all"!==j){if(!(e.assignments?.departments||[]).includes(j))return!1}if("all"!==N){if((e.personalInfo?.position||"")!==N)return!1}if("all"!==A){if(!(e.assignments?.areas||[]).includes(A))return!1}if(b){if(!`${e.personalInfo?.firstName} ${e.personalInfo?.lastName}`.toLowerCase().includes(b.toLowerCase()))return!1}return!0});return it.jsxs("div",{className:"space-y-4 xs:space-y-6",children:[it.jsxs("div",{className:"flex flex-col xs:flex-row xs:items-center xs:justify-between gap-3 xs:gap-4",children:[it.jsxs("div",{children:[it.jsx("h2",{className:"text-xl xs:text-2xl font-bold font-display text-charcoal",children:"Time Tracking Management"}),it.jsx("p",{className:"text-charcoal/60 mt-1 text-sm xs:text-base",children:"Manage employee time tracking, approvals, and reports"})]}),it.jsxs("button",{onClick:V,className:"bg-brand-navy text-cream px-3 xs:px-4 py-2 rounded-lg hover:bg-brand-navy/90 transition-colors flex items-center gap-2 text-sm xs:text-base w-full xs:w-auto justify-center",children:[it.jsx(ge,{className:"w-4 h-4"}),"Refresh"]})]}),it.jsxs("div",{className:"grid grid-cols-1 xs:grid-cols-2 md:grid-cols-3 gap-3 xs:gap-4",children:[it.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4 xs:p-6",children:it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsxs("div",{children:[it.jsx("p",{className:"text-xs xs:text-sm font-medium text-charcoal/60",children:"Pending Approvals"}),it.jsx("p",{className:"text-xl xs:text-2xl font-bold text-charcoal mt-1",children:s.length+r.length})]}),it.jsx("div",{className:"p-2 xs:p-3 bg-yellow-50 rounded-lg",children:it.jsx(q,{className:"w-5 h-5 xs:w-6 xs:h-6 text-yellow-600"})})]})}),it.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4 xs:p-6",children:it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsxs("div",{children:[it.jsx("p",{className:"text-xs xs:text-sm font-medium text-charcoal/60",children:"Currently Clocked In"}),it.jsx("p",{className:"text-xl xs:text-2xl font-bold text-charcoal mt-1",children:l.length})]}),it.jsx("div",{className:"p-2 xs:p-3 bg-green-50 rounded-lg",children:it.jsx($,{className:"w-5 h-5 xs:w-6 xs:h-6 text-green-600"})})]})}),it.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4 xs:p-6",children:it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsxs("div",{children:[it.jsx("p",{className:"text-xs xs:text-sm font-medium text-charcoal/60",children:"Active Employees"}),it.jsx("p",{className:"text-xl xs:text-2xl font-bold text-charcoal mt-1",children:i.length})]}),it.jsx("div",{className:"p-2 xs:p-3 bg-blue-50 rounded-lg",children:it.jsx(F,{className:"w-5 h-5 xs:w-6 xs:h-6 text-blue-600"})})]})})]}),it.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[it.jsx("div",{className:"border-b border-gray-200",children:it.jsx("nav",{className:"flex space-x-4 xs:space-x-8 px-3 xs:px-6 overflow-x-auto",children:[{key:"approvals",label:"Approval Queue",icon:q},{key:"roster",label:"Live Roster",icon:$},{key:"reports",label:"Time Reports",icon:S}].map(e=>it.jsxs("button",{onClick:()=>g(e.key),className:"flex items-center gap-2 py-3 xs:py-4 px-1 border-b-2 font-medium text-xs xs:text-sm whitespace-nowrap "+(h===e.key?"border-brand-navy text-brand-navy":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[it.jsx(e.icon,{className:"w-3 h-3 xs:w-4 xs:h-4"}),it.jsx("span",{className:"hidden xs:inline",children:e.label}),it.jsx("span",{className:"xs:hidden",children:e.label.split(" ")[0]}),"approvals"===e.key&&s.length>0&&it.jsx("span",{className:"bg-red-100 text-red-800 text-xs rounded-full px-2 py-1",children:s.length})]},e.key))})}),it.jsxs("div",{className:"p-3 xs:p-6",children:["approvals"===h&&it.jsx("div",{children:0===s.length&&0===r.length?it.jsxs("div",{className:"text-center py-8",children:[it.jsx(C,{className:"w-12 h-12 text-green-500 mx-auto mb-4"}),it.jsx("h3",{className:"text-lg font-semibold text-charcoal mb-2",children:"No Pending Approvals"}),it.jsx("p",{className:"text-charcoal/60",children:"All requests are up to date"})]}):it.jsxs("div",{className:"space-y-6",children:[s.length>0&&it.jsxs("div",{children:[it.jsx("h4",{className:"text-lg font-semibold text-charcoal mb-4",children:"Clock-In Approvals"}),it.jsx("div",{className:"space-y-4",children:s.map(e=>{const t=i.find(t=>t.id===e.employeeId);return it.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:it.jsxs("div",{className:"flex items-start justify-between",children:[it.jsxs("div",{className:"flex-1",children:[it.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[it.jsxs("h4",{className:"font-semibold text-charcoal",children:[t?.personalInfo?.firstName," ",t?.personalInfo?.lastName]}),it.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("EARLY_CLOCK_IN"===e.reason?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"),children:"EARLY_CLOCK_IN"===e.reason?"Early Clock-In":"Late Clock-In"})]}),it.jsxs("div",{className:"text-sm text-charcoal/70 space-y-1",children:[it.jsxs("p",{children:["Requested at: ",new Date(e.requestedAt).toLocaleString()]}),e.graceStatus&&it.jsx("p",{children:"EARLY_CLOCK_IN"===e.reason?`${e.graceStatus.minutesEarly} minutes early`:`${e.graceStatus.minutesLate} minutes late`}),e.shift&&it.jsxs("p",{children:["Scheduled shift: ",J(e.shift.startTime)," - ",J(e.shift.endTime)]})]})]}),it.jsxs("div",{className:"flex items-center gap-2",children:[it.jsxs("button",{onClick:()=>H(e.id,!0,"Manager approved"),className:"bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center gap-1",children:[it.jsx(C,{className:"w-4 h-4"}),"Approve"]}),it.jsxs("button",{onClick:()=>H(e.id,!1,"Manager denied"),className:"bg-red-600 text-white px-3 py-2 rounded-lg hover:bg-red-700 transition-colors flex items-center gap-1",children:[it.jsx(Y,{className:"w-4 h-4"}),"Deny"]})]})]})},e.id)})})]}),r.length>0&&it.jsxs("div",{children:[it.jsx("h4",{className:"text-lg font-semibold text-charcoal mb-4",children:"Schedule Change Requests"}),it.jsx("div",{className:"space-y-4",children:r.map(e=>{const t=i.find(t=>t.id===e.employeeId);return it.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:it.jsxs("div",{className:"flex items-start justify-between",children:[it.jsxs("div",{className:"flex-1",children:[it.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[it.jsxs("h4",{className:"font-semibold text-charcoal",children:[t?.personalInfo?.firstName," ",t?.personalInfo?.lastName]}),it.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:"Schedule Change"})]}),it.jsxs("div",{className:"text-sm text-charcoal/70 space-y-1",children:[it.jsxs("p",{children:["Requested at: ",new Date(e.requestedAt).toLocaleString()]}),it.jsxs("p",{children:["Reason: ",e.reason]}),it.jsxs("p",{children:["Change type: ","PERMANENT_CHANGE"===e.changes?.type?"Permanent":"Temporary Override"]})]})]}),it.jsxs("div",{className:"flex items-center gap-2",children:[it.jsxs("button",{onClick:()=>W(e.id,!0,"Manager approved schedule change"),className:"bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center gap-1",children:[it.jsx(C,{className:"w-4 h-4"}),"Approve"]}),it.jsxs("button",{onClick:()=>W(e.id,!1,"Manager denied schedule change"),className:"bg-red-600 text-white px-3 py-2 rounded-lg hover:bg-red-700 transition-colors flex items-center gap-1",children:[it.jsx(Y,{className:"w-4 h-4"}),"Deny"]})]})]})},e.id)})})]})]})}),"roster"===h&&it.jsxs("div",{children:[it.jsxs("div",{className:"mb-4 xs:mb-6 grid grid-cols-1 xs:grid-cols-2 lg:grid-cols-4 gap-3 xs:gap-4",children:[it.jsxs("div",{className:"xs:col-span-2 lg:col-span-1",children:[it.jsx("label",{className:"block text-xs xs:text-sm font-medium text-charcoal mb-1 xs:mb-2",children:"Search"}),it.jsxs("div",{className:"relative",children:[it.jsx(K,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),it.jsx("input",{type:"text",placeholder:"Search employees...",value:b,onChange:e=>y(e.target.value),className:"w-full pl-10 pr-3 py-2 xs:py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-navy focus:border-transparent text-sm xs:text-base"})]})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-xs xs:text-sm font-medium text-charcoal mb-1 xs:mb-2",children:"Department"}),it.jsxs("select",{value:j,onChange:e=>v(e.target.value),className:"w-full px-3 py-2 xs:py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-navy focus:border-transparent text-sm xs:text-base",children:[it.jsx("option",{value:"all",children:"All Departments"}),(()=>{const e=new Set;return i.forEach(t=>{t.assignments?.departments&&t.assignments.departments.forEach(t=>e.add(t))}),Array.from(e)})().map(e=>it.jsx("option",{value:e,children:e},e))]})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-xs xs:text-sm font-medium text-charcoal mb-1 xs:mb-2",children:"Role"}),it.jsxs("select",{value:N,onChange:e=>w(e.target.value),className:"w-full px-3 py-2 xs:py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-navy focus:border-transparent text-sm xs:text-base",children:[it.jsx("option",{value:"all",children:"All Roles"}),(()=>{const e=new Set;return i.forEach(t=>{t.personalInfo?.position&&e.add(t.personalInfo.position)}),Array.from(e)})().map(e=>it.jsx("option",{value:e,children:e},e))]})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-xs xs:text-sm font-medium text-charcoal mb-1 xs:mb-2",children:"Area"}),it.jsxs("select",{value:A,onChange:e=>T(e.target.value),className:"w-full px-3 py-2 xs:py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-navy focus:border-transparent text-sm xs:text-base",children:[it.jsx("option",{value:"all",children:"All Areas"}),(()=>{const e=new Set;return i.forEach(t=>{t.assignments?.areas&&t.assignments.areas.forEach(t=>e.add(t))}),Array.from(e)})().map(e=>it.jsx("option",{value:e,children:e},e))]})]})]}),it.jsxs("div",{className:"flex flex-col xs:flex-row xs:items-center xs:justify-between gap-2 xs:gap-0 mb-3 xs:mb-4",children:[it.jsxs("p",{className:"text-xs xs:text-sm text-charcoal/60",children:["Showing ",X().length," of ",l.length," clocked-in employees"]}),("all"!==j||"all"!==N||"all"!==A||b)&&it.jsxs("button",{onClick:()=>{v("all"),w("all"),T("all"),y("")},className:"text-brand-navy hover:text-brand-navy/80 text-xs xs:text-sm flex items-center gap-1 w-full xs:w-auto justify-center xs:justify-start",children:[it.jsx(re,{className:"w-3 h-3 xs:w-4 xs:h-4"}),"Clear filters"]})]}),0===l.length?it.jsxs("div",{className:"text-center py-8",children:[it.jsx(E,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),it.jsx("h3",{className:"text-lg font-semibold text-charcoal mb-2",children:"No One Currently Clocked In"}),it.jsx("p",{className:"text-charcoal/60",children:"Employees will appear here when they clock in"})]}):0===X().length?it.jsxs("div",{className:"text-center py-8",children:[it.jsx(re,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),it.jsx("h3",{className:"text-lg font-semibold text-charcoal mb-2",children:"No Employees Match Filters"}),it.jsx("p",{className:"text-charcoal/60",children:"Try adjusting your filter criteria"})]}):it.jsxs("div",{children:[it.jsx("div",{className:"hidden xs:block overflow-x-auto",children:it.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[it.jsx("thead",{className:"bg-gray-50",children:it.jsxs("tr",{children:[it.jsx("th",{className:"px-4 xs:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),it.jsx("th",{className:"px-4 xs:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),it.jsx("th",{className:"px-4 xs:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Clock In Time"}),it.jsx("th",{className:"px-4 xs:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Elapsed Time"}),it.jsx("th",{className:"px-4 xs:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"})]})}),it.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:X().map(e=>it.jsxs("tr",{children:[it.jsx("td",{className:"px-4 xs:px-6 py-3 xs:py-4 whitespace-nowrap",children:it.jsxs("div",{className:"flex items-center",children:[it.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-3 animate-pulse"}),it.jsxs("div",{children:[it.jsxs("div",{className:"text-xs xs:text-sm font-medium text-charcoal",children:[e.personalInfo?.firstName," ",e.personalInfo?.lastName]}),it.jsx("div",{className:"text-xs text-charcoal/60",children:e.personalInfo?.position||"Team Member"})]})]})}),it.jsx("td",{className:"px-4 xs:px-6 py-3 xs:py-4 whitespace-nowrap text-xs xs:text-sm text-charcoal",children:e.assignments?.departments?.join(", ")||"Unassigned"}),it.jsx("td",{className:"px-4 xs:px-6 py-3 xs:py-4 whitespace-nowrap text-xs xs:text-sm text-charcoal",children:J(e.clockStatus.lastClockIn)}),it.jsx("td",{className:"px-4 xs:px-6 py-3 xs:py-4 whitespace-nowrap text-xs xs:text-sm text-charcoal",children:G(e.clockStatus.lastClockIn)}),it.jsx("td",{className:"px-4 xs:px-6 py-3 xs:py-4 whitespace-nowrap text-xs xs:text-sm text-charcoal",children:it.jsxs("span",{className:"flex items-center gap-1",children:[it.jsx(k,{className:"w-3 h-3 xs:w-4 xs:h-4 text-charcoal/60"}),e.location?.name||"Unknown"]})})]},e.id))})]})}),it.jsx("div",{className:"xs:hidden space-y-3",children:X().map(e=>it.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm",children:[it.jsxs("div",{className:"flex items-start justify-between mb-3",children:[it.jsxs("div",{className:"flex items-center gap-3",children:[it.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),it.jsxs("div",{children:[it.jsxs("div",{className:"text-sm font-medium text-charcoal",children:[e.personalInfo?.firstName," ",e.personalInfo?.lastName]}),it.jsx("div",{className:"text-xs text-charcoal/60",children:e.personalInfo?.position||"Team Member"})]})]}),it.jsx("span",{className:"text-xs text-charcoal/50",children:G(e.clockStatus.lastClockIn)})]}),it.jsxs("div",{className:"space-y-2 text-xs",children:[it.jsxs("div",{className:"flex justify-between",children:[it.jsx("span",{className:"text-charcoal/60",children:"Department:"}),it.jsx("span",{className:"text-charcoal font-medium",children:e.assignments?.departments?.join(", ")||"Unassigned"})]}),it.jsxs("div",{className:"flex justify-between",children:[it.jsx("span",{className:"text-charcoal/60",children:"Clock In:"}),it.jsx("span",{className:"text-charcoal font-medium",children:J(e.clockStatus.lastClockIn)})]}),it.jsxs("div",{className:"flex justify-between",children:[it.jsx("span",{className:"text-charcoal/60",children:"Location:"}),it.jsxs("span",{className:"text-charcoal font-medium flex items-center gap-1",children:[it.jsx(k,{className:"w-3 h-3 text-charcoal/60"}),e.location?.name||"Unknown"]})]})]})]},e.id))})]})]}),"reports"===h&&it.jsxs("div",{children:[it.jsxs("div",{className:"mb-4 xs:mb-6 grid grid-cols-1 xs:grid-cols-2 lg:grid-cols-4 gap-3 xs:gap-4",children:[it.jsxs("div",{children:[it.jsx("label",{className:"block text-xs xs:text-sm font-medium text-charcoal mb-1 xs:mb-2",children:"Report Type"}),it.jsxs("select",{value:R,onChange:e=>P(e.target.value),className:"w-full px-3 py-2 xs:py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-navy focus:border-transparent text-sm xs:text-base",children:[it.jsx("option",{value:"timeEntries",children:"Time Entries"}),it.jsx("option",{value:"plannedVsActual",children:"Planned vs Actual"}),it.jsx("option",{value:"lateEarly",children:"Late/Early Events"}),it.jsx("option",{value:"forgotClockOut",children:"Forgot Clock-Out"})]})]}),("timeEntries"===R||"plannedVsActual"===R)&&it.jsxs("div",{className:"xs:col-span-2 lg:col-span-1",children:[it.jsx("label",{className:"block text-xs xs:text-sm font-medium text-charcoal mb-1 xs:mb-2",children:"Select Employee"}),it.jsxs("select",{value:d||"",onChange:e=>{e.target.value&&("timeEntries"===R?(e=>{const t=new Date(U.start),s=new Date(U.end),a=Un(e,{start:t,end:s});x(a),m(e)})(e.target.value):"plannedVsActual"===R&&(e=>{const t=new Date(U.start),s=new Date(U.end),a=JSON.parse(localStorage.getItem("schedules")||"[]").filter(a=>a.employeeId===e&&new Date(a.date)>=t&&new Date(a.date)<=s),r=Un(e,{start:t,end:s}),n=a.map(e=>{const t=r.find(t=>t.date===e.date),s=e.startTime,a=e.endTime,n=t?.clockInTime,l=t?.clockOutTime,o=Q(s,a),i=t?.totalHours||0;return{date:e.date,plannedStart:s,plannedEnd:a,actualStart:n,actualEnd:l,plannedHours:o,actualHours:i,variance:i-o,status:t?.status||"NO_SHOW"}});I(n),m(e)})(e.target.value))},className:"w-full px-3 py-2 xs:py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-navy focus:border-transparent text-sm xs:text-base",children:[it.jsx("option",{value:"",children:"Choose an employee..."}),i.map(e=>it.jsxs("option",{value:e.id,children:[e.personalInfo?.firstName," ",e.personalInfo?.lastName]},e.id))]})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-xs xs:text-sm font-medium text-charcoal mb-1 xs:mb-2",children:"Start Date"}),it.jsx("input",{type:"date",value:U.start,onChange:e=>B({...U,start:e.target.value}),className:"w-full px-3 py-2 xs:py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-navy focus:border-transparent text-sm xs:text-base"})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-xs xs:text-sm font-medium text-charcoal mb-1 xs:mb-2",children:"End Date"}),it.jsx("input",{type:"date",value:U.end,onChange:e=>B({...U,end:e.target.value}),className:"w-full px-3 py-2 xs:py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-navy focus:border-transparent text-sm xs:text-base"})]})]}),("lateEarly"===R||"forgotClockOut"===R)&&it.jsx("div",{className:"mb-4 xs:mb-6",children:it.jsxs("button",{onClick:()=>{"lateEarly"===R?(()=>{const e=new Date(U.start),t=new Date(U.end),s=JSON.parse(localStorage.getItem("approvalRequests")||"[]").filter(s=>{const a=new Date(s.requestedAt);return a>=e&&a<=t&&("LATE_CLOCK_IN"===s.reason||"EARLY_CLOCK_IN"===s.reason)}).map(e=>{const t=i.find(t=>t.id===e.employeeId);return{...e,employeeName:`${t?.personalInfo?.firstName||""} ${t?.personalInfo?.lastName||""}`,department:t?.assignments?.departments?.join(", ")||"Unassigned"}});L(s)})():"forgotClockOut"===R&&(()=>{const e=new Date(U.start),t=new Date(U.end),s=JSON.parse(localStorage.getItem("nudgeResponses")||"[]").filter(s=>{const a=new Date(s.timestamp);return a>=e&&a<=t}).map(e=>{const t=i.find(t=>t.id===e.employeeId);return{...e,employeeName:`${t?.personalInfo?.firstName||""} ${t?.personalInfo?.lastName||""}`,department:t?.assignments?.departments?.join(", ")||"Unassigned"}});z(s)})()},className:"bg-brand-navy text-cream px-3 xs:px-4 py-2 xs:py-2.5 rounded-lg hover:bg-brand-navy/90 transition-colors flex items-center gap-2 text-sm xs:text-base w-full xs:w-auto justify-center",children:[it.jsx(S,{className:"w-4 h-4"}),"Generate Report"]})}),"timeEntries"===R&&d&&it.jsxs("div",{children:[it.jsxs("div",{className:"flex flex-col xs:flex-row xs:items-center xs:justify-between gap-2 xs:gap-0 mb-3 xs:mb-4",children:[it.jsx("h3",{className:"text-base xs:text-lg font-semibold text-charcoal",children:"Time Entries Report"}),it.jsxs("button",{className:"bg-gray-100 text-charcoal px-3 xs:px-4 py-2 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2 text-sm xs:text-base w-full xs:w-auto justify-center",children:[it.jsx(_,{className:"w-4 h-4"}),"Export"]})]}),0===u.length?it.jsxs("div",{className:"text-center py-8",children:[it.jsx(S,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),it.jsx("h4",{className:"text-lg font-semibold text-charcoal mb-2",children:"No Time Entries"}),it.jsx("p",{className:"text-charcoal/60",children:"No time entries found for the selected date range"})]}):it.jsxs("div",{children:[it.jsx("div",{className:"hidden xs:block overflow-x-auto",children:it.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[it.jsx("thead",{className:"bg-gray-50",children:it.jsxs("tr",{children:[it.jsx("th",{className:"px-4 xs:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),it.jsx("th",{className:"px-4 xs:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Clock In"}),it.jsx("th",{className:"px-4 xs:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Clock Out"}),it.jsx("th",{className:"px-4 xs:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Hours"}),it.jsx("th",{className:"px-4 xs:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),it.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(e=>it.jsxs("tr",{children:[it.jsx("td",{className:"px-4 xs:px-6 py-3 xs:py-4 whitespace-nowrap text-xs xs:text-sm text-charcoal",children:new Date(e.date).toLocaleDateString()}),it.jsx("td",{className:"px-4 xs:px-6 py-3 xs:py-4 whitespace-nowrap text-xs xs:text-sm text-charcoal",children:J(e.clockInTime)}),it.jsx("td",{className:"px-4 xs:px-6 py-3 xs:py-4 whitespace-nowrap text-xs xs:text-sm text-charcoal",children:J(e.clockOutTime)}),it.jsx("td",{className:"px-4 xs:px-6 py-3 xs:py-4 whitespace-nowrap text-xs xs:text-sm text-charcoal",children:e.totalHours||"In Progress"}),it.jsx("td",{className:"px-4 xs:px-6 py-3 xs:py-4 whitespace-nowrap",children:it.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+("APPROVED"===e.status?"bg-green-100 text-green-800":"PENDING_APPROVAL"===e.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:e.status.replace("_"," ")})})]},e.id))})]})}),it.jsx("div",{className:"xs:hidden space-y-3",children:u.map(e=>it.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm",children:[it.jsxs("div",{className:"flex justify-between items-start mb-3",children:[it.jsx("div",{className:"text-sm font-medium text-charcoal",children:new Date(e.date).toLocaleDateString()}),it.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+("APPROVED"===e.status?"bg-green-100 text-green-800":"PENDING_APPROVAL"===e.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:e.status.replace("_"," ")})]}),it.jsxs("div",{className:"space-y-2 text-xs",children:[it.jsxs("div",{className:"flex justify-between",children:[it.jsx("span",{className:"text-charcoal/60",children:"Clock In:"}),it.jsx("span",{className:"text-charcoal font-medium",children:J(e.clockInTime)})]}),it.jsxs("div",{className:"flex justify-between",children:[it.jsx("span",{className:"text-charcoal/60",children:"Clock Out:"}),it.jsx("span",{className:"text-charcoal font-medium",children:J(e.clockOutTime)})]}),it.jsxs("div",{className:"flex justify-between",children:[it.jsx("span",{className:"text-charcoal/60",children:"Total Hours:"}),it.jsx("span",{className:"text-charcoal font-medium",children:e.totalHours||"In Progress"})]})]})]},e.id))})]})]}),"plannedVsActual"===R&&d&&it.jsxs("div",{children:[it.jsxs("div",{className:"flex flex-col xs:flex-row xs:items-center xs:justify-between gap-2 xs:gap-0 mb-3 xs:mb-4",children:[it.jsx("h3",{className:"text-base xs:text-lg font-semibold text-charcoal",children:"Planned vs Actual Hours Report"}),it.jsxs("button",{className:"bg-gray-100 text-charcoal px-3 xs:px-4 py-2 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2 text-sm xs:text-base w-full xs:w-auto justify-center",children:[it.jsx(_,{className:"w-4 h-4"}),"Export"]})]}),0===O.length?it.jsxs("div",{className:"text-center py-8",children:[it.jsx(S,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),it.jsx("h4",{className:"text-lg font-semibold text-charcoal mb-2",children:"No Schedule Data"}),it.jsx("p",{className:"text-charcoal/60",children:"No scheduled shifts found for the selected date range"})]}):it.jsx("div",{className:"overflow-x-auto",children:it.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[it.jsx("thead",{className:"bg-gray-50",children:it.jsxs("tr",{children:[it.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),it.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Planned Hours"}),it.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actual Hours"}),it.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Variance"}),it.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),it.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:O.map((e,t)=>it.jsxs("tr",{children:[it.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-charcoal",children:new Date(e.date).toLocaleDateString()}),it.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-charcoal",children:[e.plannedHours.toFixed(1),"h (",J(e.plannedStart)," - ",J(e.plannedEnd),")"]}),it.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-charcoal",children:[e.actualHours.toFixed(1),"h (",J(e.actualStart)," - ",J(e.actualEnd),")"]}),it.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:it.jsxs("span",{className:"font-medium "+(e.variance>0?"text-green-600":e.variance<0?"text-red-600":"text-gray-600"),children:[e.variance>0?"+":"",e.variance.toFixed(1),"h"]})}),it.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:it.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+("APPROVED"===e.status?"bg-green-100 text-green-800":"NO_SHOW"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:e.status.replace("_"," ")})})]},t))})]})})]}),"lateEarly"===R&&it.jsxs("div",{children:[it.jsxs("div",{className:"flex flex-col xs:flex-row xs:items-center xs:justify-between gap-2 xs:gap-0 mb-3 xs:mb-4",children:[it.jsx("h3",{className:"text-base xs:text-lg font-semibold text-charcoal",children:"Late/Early Clock-In Events Report"}),it.jsxs("button",{className:"bg-gray-100 text-charcoal px-3 xs:px-4 py-2 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2 text-sm xs:text-base w-full xs:w-auto justify-center",children:[it.jsx(_,{className:"w-4 h-4"}),"Export"]})]}),0===D.length?it.jsxs("div",{className:"text-center py-8",children:[it.jsx(C,{className:"w-12 h-12 text-green-500 mx-auto mb-4"}),it.jsx("h4",{className:"text-lg font-semibold text-charcoal mb-2",children:"No Late/Early Events"}),it.jsx("p",{className:"text-charcoal/60",children:"No late or early clock-in events found for the selected date range"})]}):it.jsx("div",{className:"overflow-x-auto",children:it.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[it.jsx("thead",{className:"bg-gray-50",children:it.jsxs("tr",{children:[it.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),it.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),it.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Event Type"}),it.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Minutes Off"}),it.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date/Time"}),it.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),it.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:D.map(e=>it.jsxs("tr",{children:[it.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-charcoal",children:e.employeeName}),it.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-charcoal",children:e.department}),it.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:it.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+("EARLY_CLOCK_IN"===e.reason?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"),children:"EARLY_CLOCK_IN"===e.reason?"Early":"Late"})}),it.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-charcoal",children:e.graceStatus?"EARLY_CLOCK_IN"===e.reason?`${e.graceStatus.minutesEarly} min early`:`${e.graceStatus.minutesLate} min late`:"N/A"}),it.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-charcoal",children:new Date(e.requestedAt).toLocaleString()}),it.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:it.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+("APPROVED"===e.status?"bg-green-100 text-green-800":"DENIED"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:e.status||"PENDING"})})]},e.id))})]})})]}),"forgotClockOut"===R&&it.jsxs("div",{children:[it.jsxs("div",{className:"flex flex-col xs:flex-row xs:items-center xs:justify-between gap-2 xs:gap-0 mb-3 xs:mb-4",children:[it.jsx("h3",{className:"text-base xs:text-lg font-semibold text-charcoal",children:"Forgot Clock-Out Resolutions Report"}),it.jsxs("button",{className:"bg-gray-100 text-charcoal px-3 xs:px-4 py-2 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2 text-sm xs:text-base w-full xs:w-auto justify-center",children:[it.jsx(_,{className:"w-4 h-4"}),"Export"]})]}),0===M.length?it.jsxs("div",{className:"text-center py-8",children:[it.jsx(C,{className:"w-12 h-12 text-green-500 mx-auto mb-4"}),it.jsx("h4",{className:"text-lg font-semibold text-charcoal mb-2",children:"No Forgot Clock-Out Events"}),it.jsx("p",{className:"text-charcoal/60",children:"No forgot clock-out events found for the selected date range"})]}):it.jsx("div",{className:"overflow-x-auto",children:it.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[it.jsx("thead",{className:"bg-gray-50",children:it.jsxs("tr",{children:[it.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),it.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),it.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nudge Response"}),it.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Clock Out Time"}),it.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Response Time"}),it.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Resolution"})]})}),it.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:M.map(e=>it.jsxs("tr",{children:[it.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-charcoal",children:e.employeeName}),it.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-charcoal",children:e.department}),it.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-charcoal",children:e.response||"No response"}),it.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-charcoal",children:J(e.clockOutTime)}),it.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-charcoal",children:new Date(e.timestamp).toLocaleString()}),it.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:it.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+(e.resolved?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.resolved?"RESOLVED":"PENDING"})})]},e.id))})]})})]}),!d&&("timeEntries"===R||"plannedVsActual"===R)&&it.jsxs("div",{className:"text-center py-8",children:[it.jsx(F,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),it.jsx("h4",{className:"text-lg font-semibold text-charcoal mb-2",children:"Select an Employee"}),it.jsxs("p",{className:"text-charcoal/60",children:["Choose an employee to view their ","timeEntries"===R?"time entries":"planned vs actual hours"," report"]})]})]})]})]})]})};const Zn=new class{constructor(){this.api=un.create({baseURL:"https://woodfire.food/api/v1",headers:{"Content-Type":"application/json",Accept:"application/json"}}),this.api.interceptors.request.use(e=>{const t=this.getToken();return t&&(e.headers.Authorization=`Bearer ${t}`),e}),this.api.interceptors.response.use(e=>e,e=>(401===e.response?.status&&(this.clearToken(),window.location.href="/login"),Promise.reject(e)))}getToken(){return localStorage.getItem("employee_token")||localStorage.getItem("admin_token")}clearToken(){}async getMyRequests(e={}){return(await this.api.get("/employee/time-off",{params:e})).data}async createRequest(e){return(await this.api.post("/employee/time-off",e)).data}async cancelRequest(e){return(await this.api.post(`/employee/time-off/${e}/cancel`)).data}async getRequests(e={}){return(await this.api.get("/admin/time-off",{params:e})).data}async updateStatus(e,{status:t,decision_notes:s}){return(await this.api.post(`/admin/time-off/${e}/status`,{status:t,decision_notes:s})).data}transformForEmployee(e){return e.map(this.transformOneForEmployee)}transformOneForEmployee=e=>({id:e.id?.toString()||e.id,employeeId:e.employee_id,startDate:e.start_date,endDate:e.end_date,type:e.type,reason:e.reason,notes:e.notes,status:e.status,submittedDate:e.submitted_at?new Date(e.submitted_at).toISOString().split("T")[0]:null});handleApiError(e){return e.response?.data?.message?e.response.data.message:e.message?e.message:"An unexpected error occurred"}},el=()=>{const[t,s]=e.useState([]),[a,r]=e.useState(!0),[n,l]=e.useState(null),[o,i]=e.useState("all"),[c,d]=e.useState("all"),[m,u]=e.useState(""),[x,h]=e.useState({start:"",end:""}),[g,f]=e.useState(!1),[b,y]=e.useState(null);e.useEffect(()=>{j()},[]),e.useEffect(()=>{const e=setTimeout(()=>{j()},m?300:0);return()=>clearTimeout(e)},[o,c,m,x.start,x.end]);const j=async()=>{try{r(!0),l(null);const e={};"all"!==o&&(e.status=o),"all"!==c&&(e.type=c),m.trim()&&(e.search=m.trim()),x.start&&(e.start_date=x.start),x.end&&(e.end_date=x.end);const t=await Zn.getRequests(e);if(t?.success){const e=(t.data.requests||[]).map(e=>({id:e.id?.toString()||e.id,employeeId:e.employee?.id||e.employee_id,employeeName:e.employee?.name||e.employee_name||"Employee",startDate:e.start_date,endDate:e.end_date,type:e.type,reason:e.reason,notes:e.notes,status:e.status,submittedAt:e.submitted_at,decidedAt:e.decided_at}));s(e)}else l("Failed to load time off requests")}catch(e){l(Zn.handleApiError(e))}finally{r(!1)}},v=async(e,t,s="")=>{try{l(null);const a=await Zn.updateStatus(e,{status:t,decision_notes:s});a?.success?j():l("Failed to update status")}catch(a){l(Zn.handleApiError(a))}},N=e=>{const t={approved:"bg-green-50 text-green-700 border-green-200",rejected:"bg-red-50 text-red-700 border-red-200",pending:"bg-yellow-50 text-yellow-700 border-yellow-200",cancelled:"bg-gray-50 text-gray-700 border-gray-200"},s={approved:it.jsx(C,{className:"w-4 h-4"}),rejected:it.jsx(Y,{className:"w-4 h-4"}),pending:it.jsx(q,{className:"w-4 h-4"}),cancelled:it.jsx(E,{className:"w-4 h-4"})};return it.jsxs("span",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-medium border ${t[e]||t.pending}`,children:[s[e]||s.pending,e.charAt(0).toUpperCase()+e.slice(1)]})};return it.jsxs("div",{className:"space-y-6",children:[it.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-100",children:it.jsx("div",{className:"flex items-center justify-between",children:it.jsxs("div",{className:"flex items-center gap-3",children:[it.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:it.jsx(S,{className:"w-5 h-5 text-blue-600"})}),it.jsxs("div",{children:[it.jsx("h3",{className:"text-lg font-semibold text-charcoal",children:"Time Off Requests"}),it.jsx("p",{className:"text-sm text-charcoal/60",children:"Review and manage employee time off requests"})]})]})})}),it.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 border border-gray-100",children:it.jsxs("div",{className:"space-y-4",children:[it.jsxs("div",{className:"relative w-full",children:[it.jsx(K,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),it.jsx("input",{type:"text",placeholder:"Search by employee, reason...",value:m,onChange:e=>u(e.target.value),className:"w-full pl-9 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent"})]}),it.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[it.jsx("div",{children:it.jsxs("select",{value:o,onChange:e=>i(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent",children:[it.jsx("option",{value:"all",children:"All Status"}),it.jsx("option",{value:"pending",children:"Pending"}),it.jsx("option",{value:"approved",children:"Approved"}),it.jsx("option",{value:"rejected",children:"Rejected"}),it.jsx("option",{value:"cancelled",children:"Cancelled"})]})}),it.jsx("div",{children:it.jsxs("select",{value:c,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent",children:[it.jsx("option",{value:"all",children:"All Types"}),it.jsx("option",{value:"vacation",children:"Vacation"}),it.jsx("option",{value:"sick",children:"Sick"}),it.jsx("option",{value:"personal",children:"Personal"}),it.jsx("option",{value:"emergency",children:"Emergency"}),it.jsx("option",{value:"other",children:"Other"})]})}),it.jsx("div",{children:it.jsx("input",{type:"date",value:x.start,onChange:e=>h({...x,start:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent",placeholder:"Start date"})}),it.jsxs("div",{className:"flex items-center gap-2",children:[it.jsx("span",{className:"text-gray-500 text-sm hidden sm:inline",children:"to"}),it.jsx("input",{type:"date",value:x.end,onChange:e=>h({...x,end:e.target.value}),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent",placeholder:"End date"})]})]})]})}),it.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-100 overflow-x-auto",children:it.jsxs("table",{className:"min-w-full",children:[it.jsx("thead",{className:"bg-gray-50",children:it.jsxs("tr",{children:[it.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-charcoal uppercase tracking-wider",children:"Employee"}),it.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-charcoal uppercase tracking-wider",children:"Dates"}),it.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-charcoal uppercase tracking-wider",children:"Type"}),it.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-charcoal uppercase tracking-wider",children:"Reason"}),it.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-charcoal uppercase tracking-wider",children:"Status"}),it.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-charcoal uppercase tracking-wider",children:"Submitted"}),it.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-charcoal uppercase tracking-wider",children:"Actions"})]})}),it.jsx("tbody",{className:"divide-y divide-gray-100",children:a?it.jsx("tr",{children:it.jsx("td",{className:"px-4 py-6 text-center text-gray-500",colSpan:7,children:"Loading..."})}):n?it.jsx("tr",{children:it.jsx("td",{className:"px-4 py-6 text-center text-red-600",colSpan:7,children:n})}):0===t.length?it.jsx("tr",{children:it.jsx("td",{className:"px-4 py-6 text-center text-gray-500",colSpan:7,children:"No time off requests found"})}):t.map(e=>it.jsxs("tr",{className:"hover:bg-gold/5 transition-colors",children:[it.jsx("td",{className:"px-4 py-3",children:it.jsxs("div",{className:"flex items-center gap-2",children:[it.jsx("div",{className:"w-8 h-8 bg-blue-100 text-blue-800 rounded-full flex items-center justify-center",children:it.jsx(F,{className:"w-4 h-4"})}),it.jsx("div",{className:"text-sm text-charcoal font-medium",children:e.employeeName})]})}),it.jsxs("td",{className:"px-4 py-3 text-sm text-charcoal",children:[new Date(e.startDate).toLocaleDateString()," - ",new Date(e.endDate).toLocaleDateString()]}),it.jsx("td",{className:"px-4 py-3 text-sm capitalize text-charcoal/80",children:e.type}),it.jsx("td",{className:"px-4 py-3 text-sm text-charcoal/80 max-w-xs whitespace-normal break-words",title:e.reason,children:e.reason||"-"}),it.jsx("td",{className:"px-4 py-3",children:N(e.status)}),it.jsx("td",{className:"px-4 py-3 text-sm text-charcoal/60",children:e.submittedAt?new Date(e.submittedAt).toLocaleDateString():"-"}),it.jsx("td",{className:"px-4 py-3",children:it.jsx("div",{className:"flex items-center gap-2",children:it.jsx("button",{type:"button",onClick:()=>{y(e),f(!0)},className:"p-2 rounded-md border border-gray-300 hover:bg-gray-50",title:"View details","aria-label":"View details",children:it.jsx(p,{className:"w-4 h-4"})})})})]},e.id))})]})}),g&&b&&it.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[it.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>f(!1)}),it.jsxs("div",{className:"relative bg-white w-full max-w-2xl rounded-lg shadow-xl border border-gray-200 mx-4",children:[it.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100",children:[it.jsxs("div",{className:"flex items-center gap-2",children:[it.jsx("div",{className:"p-2 bg-blue-50 rounded-md",children:it.jsx(Q,{className:"w-4 h-4 text-blue-600"})}),it.jsx("h4",{className:"text-charcoal font-semibold",children:"Time Off Details"})]}),it.jsx("button",{className:"p-1 rounded hover:bg-gray-100",onClick:()=>f(!1),"aria-label":"Close",children:it.jsx(O,{className:"w-5 h-5 text-gray-600"})})]}),it.jsxs("div",{className:"p-4 space-y-4 max-h-[70vh] overflow-y-auto",children:[it.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[it.jsxs("div",{children:[it.jsx("span",{className:"text-charcoal/60",children:"Employee"}),it.jsx("div",{className:"font-medium",children:b.employeeName})]}),it.jsxs("div",{children:[it.jsx("span",{className:"text-charcoal/60",children:"Type"}),it.jsx("div",{className:"font-medium capitalize",children:b.type})]}),it.jsxs("div",{children:[it.jsx("span",{className:"text-charcoal/60",children:"Dates"}),it.jsxs("div",{className:"font-medium",children:[new Date(b.startDate).toLocaleDateString()," - ",new Date(b.endDate).toLocaleDateString()]})]}),it.jsxs("div",{children:[it.jsx("span",{className:"text-charcoal/60",children:"Submitted"}),it.jsx("div",{className:"font-medium",children:b.submittedAt?new Date(b.submittedAt).toLocaleString():"-"})]}),it.jsxs("div",{className:"sm:col-span-2",children:[it.jsx("span",{className:"text-charcoal/60",children:"Status"}),it.jsx("div",{className:"mt-1",children:N(b.status)})]})]}),it.jsxs("div",{children:[it.jsx("h5",{className:"text-sm font-semibold text-charcoal mb-1",children:"Reason"}),it.jsx("textarea",{readOnly:!0,rows:6,className:"w-full text-sm text-charcoal/90 bg-gray-50 border border-gray-200 rounded-md p-3 resize-y",value:b.reason||""})]}),it.jsxs("div",{children:[it.jsx("h5",{className:"text-sm font-semibold text-charcoal mb-1",children:"Additional Notes"}),it.jsx("textarea",{readOnly:!0,rows:4,className:"w-full text-sm text-charcoal/90 bg-gray-50 border border-gray-200 rounded-md p-3 resize-y",value:b.notes||""})]})]}),it.jsxs("div",{className:"p-4 border-t border-gray-100 flex items-center justify-end gap-2",children:[it.jsx("button",{className:"px-4 py-2 text-sm rounded-md border border-gray-300 hover:bg-gray-50",onClick:()=>f(!1),children:"Close"}),"pending"===b.status&&it.jsxs("div",{className:"flex items-center gap-2",children:[it.jsx("button",{onClick:()=>{v(b.id,"approved"),f(!1)},className:"px-4 py-2 bg-green-600 text-white text-sm rounded-md hover:bg-green-700",children:"Approve"}),it.jsx("button",{onClick:()=>{v(b.id,"rejected"),f(!1)},className:"px-4 py-2 bg-red-600 text-white text-sm rounded-md hover:bg-red-700",children:"Reject"})]})]})]})]})]})},tl=({isOpen:t,onClose:s,userTypes:a})=>{const[r,n]=e.useState(()=>{const e=localStorage.getItem("customUserTypes");return e?JSON.parse(e):[]}),[l,o]=e.useState(""),[i,c]=e.useState(""),[d,m]=e.useState(""),u=()=>{if(l.trim()&&!a.includes(l)&&!r.includes(l)){const e=[...r,l.trim()];n(e),localStorage.setItem("customUserTypes",JSON.stringify(e)),o("")}},x=[...a,...r],h=()=>{if(i.trim()){const e=`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(i)}`;m(e)}};return t?it.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:it.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[it.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-6 border-b border-gray-200",children:[it.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-charcoal",children:"System Settings"}),it.jsx("button",{onClick:s,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:it.jsx(O,{className:"w-6 h-6 text-gray-500"})})]}),it.jsxs("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6 space-y-6 sm:space-y-8",children:[it.jsxs("div",{className:"bg-gray-50 rounded-lg shadow p-6",children:[it.jsx("h3",{className:"text-lg font-medium text-charcoal mb-4",children:"User Types"}),it.jsxs("div",{className:"mb-6",children:[it.jsx("h4",{className:"text-sm font-medium text-charcoal/70 mb-3",children:"Default User Types"}),it.jsx("div",{className:"flex flex-wrap gap-2",children:a.map(e=>it.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-gray-100 text-gray-800",children:e},e))})]}),it.jsxs("div",{className:"mb-6",children:[it.jsx("h4",{className:"text-sm font-medium text-charcoal/70 mb-3",children:"Custom User Types"}),r.length>0?it.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:r.map(e=>it.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-gold/10 text-gold-dark",children:[e,it.jsx("button",{onClick:()=>(e=>{const t=r.filter(t=>t!==e);n(t),localStorage.setItem("customUserTypes",JSON.stringify(t))})(e),className:"ml-2 text-red-500 hover:text-red-700",children:it.jsx(L,{className:"w-3 h-3"})})]},e))}):it.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"No custom user types added yet."}),it.jsxs("div",{className:"flex gap-2",children:[it.jsx("input",{type:"text",value:l,onChange:e=>o(e.target.value),placeholder:"Enter new user type",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent",onKeyPress:e=>"Enter"===e.key&&u()}),it.jsxs("button",{onClick:u,disabled:!l.trim(),className:"px-4 py-2 bg-gold-gradient text-charcoal rounded-md hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 mobile-hide-button-icons",children:[it.jsx(I,{className:"w-4 h-4"}),it.jsx("span",{className:"mobile-text-content",children:"Add"})]})]})]}),it.jsxs("div",{className:"border-t pt-4",children:[it.jsxs("h4",{className:"text-sm font-medium text-charcoal/70 mb-3",children:["All Available User Types (",x.length,")"]}),it.jsx("div",{className:"flex flex-wrap gap-2",children:x.map(e=>it.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm "+(a.includes(e)?"bg-gray-100 text-gray-800":"bg-gold/10 text-gold-dark"),children:e},e))})]})]}),it.jsxs("div",{className:"bg-gray-50 rounded-lg shadow p-6",children:[it.jsx("h3",{className:"text-lg font-medium text-charcoal mb-4",children:"System Information"}),it.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[it.jsxs("div",{children:[it.jsx("span",{className:"font-medium text-charcoal/70",children:"Version:"}),it.jsx("span",{className:"ml-2 text-charcoal",children:"1.0.0"})]}),it.jsxs("div",{children:[it.jsx("span",{className:"font-medium text-charcoal/70",children:"Last Updated:"}),it.jsx("span",{className:"ml-2 text-charcoal",children:(new Date).toLocaleDateString()})]}),it.jsxs("div",{children:[it.jsx("span",{className:"font-medium text-charcoal/70",children:"Storage:"}),it.jsx("span",{className:"ml-2 text-charcoal",children:"Local Storage"})]}),it.jsxs("div",{children:[it.jsx("span",{className:"font-medium text-charcoal/70",children:"Environment:"}),it.jsx("span",{className:"ml-2 text-charcoal",children:"Development"})]})]})]}),it.jsxs("div",{className:"bg-gray-50 rounded-lg shadow p-6",children:[it.jsxs("h3",{className:"text-lg font-medium text-charcoal mb-4 flex items-center gap-2",children:[it.jsx(T,{className:"w-5 h-5 text-gold"}),"QR Code Generator"]}),it.jsxs("div",{className:"space-y-4",children:[it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal/70 mb-2",children:"Enter text or URL to generate QR code:"}),it.jsxs("div",{className:"flex gap-2",children:[it.jsx("input",{type:"text",value:i,onChange:e=>c(e.target.value),placeholder:"Enter text, URL, or data for QR code",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent min-w-0",onKeyPress:e=>"Enter"===e.key&&h()}),it.jsxs("button",{onClick:h,disabled:!i.trim(),className:"px-4 py-2 bg-gold-gradient text-charcoal rounded-md hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 mobile-hide-button-icons whitespace-nowrap",children:[it.jsx(T,{className:"w-4 h-4"}),it.jsx("span",{className:"mobile-text-content",children:"Generate"})]})]})]}),d&&it.jsx("div",{className:"border-t pt-4",children:it.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[it.jsx("div",{className:"bg-white p-4 rounded-lg border-2 border-gray-200",children:it.jsx("img",{src:d,alt:"Generated QR Code",className:"w-48 h-48"})}),it.jsxs("div",{className:"flex gap-2",children:[it.jsxs("button",{onClick:()=>{if(d){const e=document.createElement("a");e.href=d,e.download="qr-code.png",e.click()}},className:"px-4 py-2 bg-charcoal text-cream rounded-md hover:bg-charcoal/80 transition-colors flex items-center gap-2 mobile-hide-button-icons",children:[it.jsx(_,{className:"w-4 h-4"}),it.jsx("span",{className:"mobile-text-content",children:"Download"})]}),it.jsxs("button",{onClick:()=>{d&&(navigator.clipboard.writeText(d),alert("QR code link copied to clipboard!"))},className:"px-4 py-2 bg-gray-100 text-charcoal rounded-md hover:bg-gray-200 transition-colors flex items-center gap-2 mobile-hide-button-icons",children:[it.jsx(Te,{className:"w-4 h-4"}),it.jsx("span",{className:"mobile-text-content",children:"Copy Link"})]})]})]})})]})]}),it.jsxs("div",{className:"bg-gray-50 rounded-lg shadow p-6",children:[it.jsx("h3",{className:"text-lg font-medium text-charcoal mb-4",children:"Data Management"}),it.jsxs("div",{className:"space-y-4",children:[it.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 p-4 bg-yellow-50 rounded-lg",children:[it.jsxs("div",{className:"flex-1",children:[it.jsx("h4",{className:"font-medium text-charcoal",children:"Export Data"}),it.jsx("p",{className:"text-sm text-charcoal/70",children:"Download all admin users and locations data"})]}),it.jsxs("button",{onClick:()=>{const e={adminUsers:JSON.parse(localStorage.getItem("adminUsers")||"[]"),adminLocations:JSON.parse(localStorage.getItem("adminLocations")||"[]"),customUserTypes:JSON.parse(localStorage.getItem("customUserTypes")||"[]"),employees:JSON.parse(localStorage.getItem("employees")||"[]"),exportDate:(new Date).toISOString()},t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download=`restaurant-data-${(new Date).toISOString().split("T")[0]}.json`,a.click(),URL.revokeObjectURL(s)},className:"px-4 py-2 bg-charcoal text-cream rounded-md hover:bg-charcoal/80 transition-colors flex items-center gap-2 mobile-hide-button-icons whitespace-nowrap",children:[it.jsx(_,{className:"w-4 h-4"}),it.jsx("span",{className:"mobile-text-content",children:"Export"})]})]}),it.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 p-4 bg-red-50 rounded-lg",children:[it.jsxs("div",{className:"flex-1",children:[it.jsx("h4",{className:"font-medium text-charcoal",children:"Clear All Data"}),it.jsx("p",{className:"text-sm text-charcoal/70",children:"Remove all admin users and locations (cannot be undone)"})]}),it.jsx("button",{onClick:()=>{window.confirm("Are you sure you want to clear all data? This cannot be undone.")&&(localStorage.removeItem("adminUsers"),localStorage.removeItem("adminLocations"),localStorage.removeItem("customUserTypes"),window.location.reload())},className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors whitespace-nowrap",children:"Clear Data"})]})]})]})]}),it.jsx("div",{className:"flex justify-end gap-3 p-6 border-t border-gray-200",children:it.jsx("button",{onClick:s,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"Close"})})]})}):null},sl=()=>{const{user:t,logout:s}=wt(),[a,r]=e.useState(!1),[n,l]=e.useState(!1),[o,i]=e.useState(!1),[c,d]=e.useState("undefined"!=typeof window?window.innerWidth:1024),m=e.useRef(null),u=e.useRef(null),x=t?.role||"manager",h=Ds(x),g=[{id:"dashboard",title:"Dashboard",icon:Ce},...h.modules.map(e=>{let t;switch(e.id){case"employees":default:t=$;break;case"users":t=z;break;case"locations":t=k;break;case"customers":t=Ie;break;case"onboarding":t=ee;break;case"training":t=V;break;case"communication":t=ne;break;case"table-tracking":t=Oe;break;case"performance":t=Pe;break;case"tickets":t=fe;break;case"recognition":t=Ee;break;case"faq":t=ae;break;case"time-tracking":t=E;break;case"time-off":t=S}return{...e,icon:t}})],[p,f]=e.useState("dashboard");e.useEffect(()=>{!p&&g.length>0&&f(g[0].id),p&&!g.find(e=>e.id===p)&&f(g[0]?.id||null)},[g.map(e=>e.id).join("|")]);const[b,y]=e.useState([]),[j,v]=e.useState([]),[N,w]=e.useState(null),[C,A]=e.useState(!0),[T,_]=e.useState("employees"),P=["owner","admin","manager","hiring_manager","expo"];e.useEffect(()=>{(async()=>{try{A(!0);const e=await vt.getDashboard();e.success?(w(e.data),console.log("Dashboard data loaded:",e.data)):console.error("Failed to load dashboard data:",e.error)}catch(e){console.error("Error loading dashboard data:",e)}finally{A(!1)}})(),(async()=>{try{console.log("Loading locations...");const e=await vt.getLocations();console.log("Locations API response:",e),e.success?(console.log("Setting locations:",e.locations),v(e.locations)):console.error("Failed to load locations:",e.error)}catch(e){console.error("Error loading locations:",e)}})()},[]);return e.useEffect(()=>{const e=()=>{const e=window.innerWidth;d(e),e<=640&&o&&i(!1)};return d(window.innerWidth),i(!1),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e.useEffect(()=>{const e=e=>{m.current&&!m.current.contains(e.target)&&r(!1)};if(a)return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[a]),e.useEffect(()=>{const e=e=>{if(u.current&&!u.current.contains(e.target)&&o){const t=document.querySelector('[aria-label="Open menu"], [aria-label="Close menu"]');t&&!t.contains(e.target)&&i(!1)}};if(o)return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[o]),it.jsxs("div",{className:"h-screen bg-cream flex overflow-hidden",children:[o&&it.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30",onClick:()=>i(!1)}),it.jsxs("div",{ref:u,className:"w-64 bg-brand-navy text-cream shadow-2xl border-r border-gold/20 flex flex-col fixed h-full z-40 transition-transform duration-300 ease-in-out "+(o?"translate-x-0":"-translate-x-full"),children:[it.jsx("div",{className:"p-6 border-b border-gold/20",children:it.jsxs("div",{className:"flex items-center gap-3",children:[it.jsx("div",{className:"show-540-up",children:it.jsx(At,{size:"sm"})}),it.jsxs("div",{className:"show-540-up",children:[it.jsx("h1",{className:"font-display text-xl font-bold text-gold",children:"Woodfire.food"}),it.jsx("p",{className:"text-cream/80 text-sm font-medium tracking-wide",children:"Admin Dashboard"})]})]})}),it.jsx("nav",{className:"flex-1 px-4 py-6 overflow-y-auto",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:it.jsx("div",{className:"space-y-2",children:g.map(e=>{const t=e.icon;return it.jsxs("button",{onClick:()=>{return t=e.id,f(t),void i(!1);var t},className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left transition-all "+(p===e.id?"bg-gold/20 text-gold border border-gold/30":"text-cream/80 hover:bg-cream/10 hover:text-cream"),children:[it.jsx(t,{className:"w-5 h-5"}),it.jsx("span",{className:"font-medium",children:e.title})]},e.id)})})})]}),it.jsxs("div",{className:"flex-1 flex flex-col w-full",children:[it.jsx("div",{className:"bg-brand-navy text-cream shadow-lg border-b border-gold/20 fixed top-0 w-full z-20",children:it.jsx("div",{className:"px-4 py-4",children:it.jsxs("div",{className:"flex justify-between items-center",children:[c<=640&&it.jsx("div",{className:"mr-2",children:it.jsx(Dt,{isOpen:o,onClick:()=>i(!o)})}),c>640&&it.jsx("button",{onClick:()=>i(!o),className:"p-2 rounded-lg text-cream hover:bg-gold/20 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-gold/30 mr-2","aria-label":o?"Collapse sidebar":"Expand sidebar",children:o?it.jsx(_e,{className:"w-5 h-5"}):it.jsx(W,{className:"w-5 h-5"})}),it.jsxs("div",{className:"flex-1",children:[it.jsxs("h1",{className:"text-xl font-bold text-gold hide-1024-down",children:["dashboard"===p&&"Dashboard","employees"===p&&"Employee Management","users"===p&&"Admin User Management","locations"===p&&"Location Management","customers"===p&&"Customer Management","onboarding"===p&&"Onboarding Content Management","training"===p&&"Training Module Management","communication"===p&&"Communication Management","table-tracking"===p&&"Table Tracking Management","performance"===p&&"Performance Management","tickets"===p&&"Ticket Management","recognition"===p&&"Employee Recognition","faq"===p&&"FAQ Management","time-tracking"===p&&"Time Tracking","time-off"===p&&"Time Off"]}),it.jsxs("p",{className:"text-sm text-cream/70 hide-1024-down",children:["dashboard"===p&&"Overview of restaurant operations and key metrics","employees"===p&&"Manage employee profiles and onboarding status","users"===p&&"Manage admin users and their permissions","locations"===p&&"Configure restaurant locations","customers"===p&&"Manage customer accounts, status, and location access","onboarding"===p&&"Manage onboarding pages and content","training"===p&&"Create and manage training modules with QR codes","communication"===p&&"Communicate with employees and manage messages","table-tracking"===p&&"Track customer seating and order delivery","performance"===p&&"Track employee performance reports, feedback, and ratings","tickets"===p&&"Manage support tickets and employee assistance requests","recognition"===p&&"Recognize employee achievements with shout-outs, rewards, and badges","faq"===p&&"Manage frequently asked questions","time-tracking"===p&&"Manage employee time tracking, approvals, and reports","time-off"===p&&"Review and manage employee time off requests"]})]}),it.jsxs("div",{className:"flex items-center gap-2",children:[it.jsx("div",{className:"relative",children:it.jsx(ns,{children:it.jsx(rs,{})})}),it.jsxs("div",{className:"relative",ref:m,children:[it.jsxs("button",{onClick:()=>r(!a),className:"flex items-center gap-2 px-2 py-2 rounded-lg text-cream hover:bg-gold/20 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-gold/30",children:[it.jsx("div",{className:"w-8 h-8 bg-gold/20 rounded-full flex items-center justify-center border-2 border-gold/30",children:it.jsx("span",{className:"text-sm font-bold text-gold",children:t?.name?.charAt(0)?.toUpperCase()||"A"})}),it.jsxs("div",{className:"hide-900-down text-left",children:[it.jsx("p",{className:"text-sm font-medium text-cream",children:t?.name||"Admin"}),it.jsx("p",{className:"text-xs text-cream/60",children:x})]}),it.jsx(R,{className:"w-4 h-4 text-cream/70 transition-transform duration-200 "+(a?"rotate-180":"")})]}),a&&it.jsxs("div",{className:"absolute right-0 top-full mt-2 w-48 bg-white rounded-lg shadow-xl border border-gray-200 z-50 py-2 animate-fadeIn",children:[c<=900&&it.jsxs("div",{className:"px-4 py-3 border-b border-gray-100",children:[it.jsx("p",{className:"text-sm font-medium text-gray-900",children:t?.name||"Admin"}),it.jsx("p",{className:"text-xs text-gray-500",children:x}),it.jsx("p",{className:"text-xs text-gray-400",children:"Owner"===x?"All Locations":t?.location||"Location not set"})]}),it.jsxs("button",{onClick:()=>{r(!1),l(!0)},className:"w-full flex items-center gap-3 px-4 py-2 text-left text-gray-700 hover:bg-gold/10 hover:text-charcoal transition-colors duration-150",children:[it.jsx(X,{className:"w-4 h-4"}),it.jsx("span",{children:"Settings"})]}),it.jsx("div",{className:"border-t border-gray-100 my-1"}),it.jsxs("button",{onClick:()=>{r(!1),s()},className:"w-full flex items-center gap-3 px-4 py-2 text-left text-red-600 hover:bg-red-50 hover:text-red-700 transition-colors duration-150",children:[it.jsx(Re,{className:"w-4 h-4"}),it.jsx("span",{children:"Logout"})]})]})]})]})]})})}),it.jsx("div",{className:"flex-1 overflow-y-auto",style:{marginTop:"80px"},children:it.jsxs("div",{className:"p-4",children:[0===g.length&&it.jsx("div",{className:"bg-white rounded-lg shadow p-8 text-center text-gray-600",children:"You do not have access to any admin modules. Please contact an Owner for permissions."}),"dashboard"===p&&it.jsx(rl,{dashboardData:N,loading:C}),"employees"===p&&it.jsxs("div",{className:"space-y-4",children:[it.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-2 w-full overflow-x-auto",children:it.jsxs("div",{className:"inline-flex gap-2",children:[it.jsx("button",{onClick:()=>_("employees"),className:"px-3 py-1.5 rounded-md text-sm font-medium border transition-colors "+("employees"===T?"bg-gold text-charcoal border-gold":"bg-white text-charcoal/70 border-gray-200 hover:bg-gray-50"),children:"Employees"}),it.jsx("button",{onClick:()=>_("departments"),className:"px-3 py-1.5 rounded-md text-sm font-medium border transition-colors "+("departments"===T?"bg-gold text-charcoal border-gold":"bg-white text-charcoal/70 border-gray-200 hover:bg-gray-50"),children:"Department Structure"}),it.jsx("button",{onClick:()=>_("roles"),className:"px-3 py-1.5 rounded-md text-sm font-medium border transition-colors "+("roles"===T?"bg-gold text-charcoal border-gold":"bg-white text-charcoal/70 border-gray-200 hover:bg-gray-50"),children:"Role Assignments"})]})}),"employees"===T&&it.jsx(Wt,{}),"departments"===T&&it.jsx(es,{}),"roles"===T&&it.jsx(ts,{})]}),"users"===p&&it.jsx(al,{users:b,setUsers:y,locations:j,userTypes:P}),"locations"===p&&it.jsx(qt,{locations:j,setLocations:v}),"customers"===p&&it.jsx(Ms,{}),"onboarding"===p&&it.jsx(ls,{}),"training"===p&&it.jsx(is,{}),"communication"===p&&it.jsx(js,{}),"table-tracking"===p&&it.jsx(ea,{}),"performance"===p&&it.jsx(aa,{}),"tickets"===p&&it.jsx(_n,{}),"recognition"===p&&it.jsx(In,{}),"faq"===p&&it.jsx(xs,{}),"time-tracking"===p&&it.jsx(Xn,{}),"time-off"===p&&it.jsx(el,{})]})})]}),it.jsx(tl,{isOpen:n,onClose:()=>l(!1),userTypes:P})]})},al=({users:t,setUsers:s,locations:a,userTypes:r})=>{const{user:n}=wt(),[l,o]=e.useState(!1),[i,c]=e.useState(null),d=n?.role||"manager",m=Ps(d,"users","create"),u=Ps(d,"users","edit"),x=Ps(d,"users","delete"),h=u||x;e.useEffect(()=>{(async()=>{try{const e=await vt.getAdminUsers();if(e.success){const t=e.users.map(e=>({id:e.id,name:e.name,email:e.email,userType:e.role,location:e.location?e.location.name:e.department||"Not Assigned"}));s(t)}}catch(e){console.error("Error loading admin users:",e)}})()},[]);return it.jsxs("div",{children:[it.jsxs("div",{className:"flex justify-between items-center mb-6",children:[it.jsx("h2",{className:"text-xl font-semibold text-charcoal",children:"Admin Users"}),m&&it.jsxs("button",{onClick:()=>o(!0),className:"bg-gold-gradient text-charcoal px-4 py-2 rounded-md hover:shadow-lg transition-all flex items-center gap-2",children:[it.jsx(I,{className:"w-4 h-4"}),"Add User"]})]}),it.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[it.jsx("div",{className:"overflow-x-auto mobile-table-container",children:it.jsxs("table",{className:"min-w-full divide-y divide-gray-200 mobile-table",children:[it.jsx("thead",{className:"bg-gray-50",children:it.jsxs("tr",{children:[it.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),it.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),it.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User Type"}),it.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),h&&it.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),it.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>it.jsxs("tr",{children:[it.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.name}),it.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.email}),it.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:{owner:"Owner",admin:"Admin",manager:"Manager",hiring_manager:"Hiring Manager",expo:"Expo"}[e.userType]||e.userType}),it.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:"owner"===e.userType?it.jsx("span",{className:"text-gold font-medium",children:"All Locations"}):e.location||"Not Assigned"}),h&&it.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[u&&it.jsx("button",{onClick:()=>c(e),className:"text-gold hover:text-gold-dark mr-3",children:it.jsx(D,{className:"w-4 h-4"})}),x&&it.jsx("button",{onClick:()=>(async e=>{if(x){if(window.confirm("Are you sure you want to deactivate this user?"))try{const a=await vt.deactivateAdminUser(e);if(a.success){const a=t.filter(t=>t.id!==e);s(a),alert("User deactivated successfully!")}else alert(`Failed to deactivate user: ${a.error}`)}catch(a){console.error("Error deactivating user:",a),alert(`Error deactivating user: ${a.message}`)}}else alert("You do not have permission to delete users.")})(e.id),className:"text-red-600 hover:text-red-900",children:it.jsx(L,{className:"w-4 h-4"})})]})]},e.id))})]})}),0===t.length&&it.jsx("div",{className:"text-center py-8 text-gray-500",children:"No admin users found. Add your first user to get started."})]}),(l||i)&&it.jsx(Lt,{user:i,locations:console.log("Passing locations to UserModal:",a)||a,userTypes:r,onSave:i?e=>(async(e,a)=>{if(u)try{const r=[],n=await vt.updateAdminPermissions(e,r);if(n.success){const r=t.map(t=>t.id===e?{...t,name:a.name,email:a.email,userType:a.userType,location:a.location}:t);s(r),c(null),alert("User updated successfully!")}else alert(`Failed to update user: ${n.error}`)}catch(r){console.error("Error updating user:",r),alert(`Error updating user: ${r.message}`)}else alert("You do not have permission to edit users.")})(i.id,e):async e=>{if(m)try{const r={first_name:e.name.split(" ")[0]||e.name,last_name:e.name.split(" ").slice(1).join(" ")||"User",email:e.email,password:e.password,password_confirmation:e.password,role:e.userType,phone:e.phone||null,location_id:e.location&&""!==e.location?parseInt(e.location):null,department:e.location?a.find(t=>t.id===parseInt(e.location))?.name:null,notes:`Created by ${n?.name||"Admin"}`},l=await vt.createAdminUser(r);if(l.success){const e={id:l.user.id,name:l.user.name,email:l.user.email,userType:l.user.role,location:l.user.location?l.user.location.name:l.user.department||"Not Assigned"};s([...t,e]),o(!1),alert("Admin user created successfully!")}else alert(`Failed to create user: ${l.error}`)}catch(r){console.error("Error creating user:",r),alert(`Error creating user: ${r.message}`)}else alert("You do not have permission to add users.")},onClose:()=>{o(!1),c(null)}})]})},rl=({dashboardData:t,loading:s})=>{const[a,r]=e.useState(null),[n,l]=e.useState(null),[o,i]=e.useState(null),[c,d]=e.useState([]);return e.useEffect(()=>{if(t?.dashboard_data?.statistics){const e=t.dashboard_data.statistics,s={total:e.total_employees||0,active:e.approved_employees||0,new:e.pending_employees||0,interview:e.employees_by_stage?.interview||0,onboarding:(e.employees_by_stage?.location_selected||0)+(e.employees_by_stage?.questionnaire_completed||0),fullyOnboarded:e.employees_by_stage?.active||0},a={totalAssigned:e.training?.total_assignments||0,totalCompleted:e.training?.completed_assignments||0,totalOverdue:e.training?.overdue_assignments||0,totalPending:e.training?.pending_assignments||0,completionRate:e.training?.completion_rate||0,moduleStats:[]},n={upcomingAnniversaries:0,thisMonthAnniversaries:0,newMilestones:0,recentMilestones:[]};r(s),l(a),i(n),d([]),console.log("Dashboard stats processed:",{empStats:s,trainingStatsData:a})}},[t]),!s&&a&&n&&o?it.jsxs("div",{className:"space-y-6",children:[it.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mobile-grid",children:[it.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 hover:shadow-lg transition-all duration-300 p-6",children:[it.jsxs("div",{className:"flex items-center justify-between mb-4",children:[it.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:it.jsx($,{className:"w-6 h-6 text-blue-600"})}),it.jsx("span",{className:"text-2xl font-bold text-charcoal",children:a.total})]}),it.jsx("h3",{className:"font-semibold text-charcoal mb-2",children:"Total Employees"}),it.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[it.jsxs("span",{className:"text-green-600 font-medium",children:[a.active," Active"]}),it.jsxs("span",{className:"text-yellow-600 font-medium",children:[a.new," New"]})]})]}),it.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 hover:shadow-lg transition-all duration-300 p-6",children:[it.jsxs("div",{className:"flex items-center justify-between mb-4",children:[it.jsx("div",{className:"p-2 bg-green-50 rounded-lg",children:it.jsx(De,{className:"w-6 h-6 text-green-600"})}),it.jsxs("span",{className:"text-2xl font-bold text-charcoal",children:[n.completionRate,"%"]})]}),it.jsx("h3",{className:"font-semibold text-charcoal mb-2",children:"Training Completion"}),it.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[it.jsxs("span",{className:"text-green-600 font-medium",children:[n.totalCompleted," Done"]}),it.jsxs("span",{className:"text-gray-600 font-medium",children:[n.totalPending," Pending"]})]})]}),it.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 hover:shadow-lg transition-all duration-300 p-6",children:[it.jsxs("div",{className:"flex items-center justify-between mb-4",children:[it.jsx("div",{className:"p-2 bg-gold/10 rounded-lg",children:it.jsx(ke,{className:"w-6 h-6 text-gold"})}),it.jsx("span",{className:"text-2xl font-bold text-charcoal",children:o.upcomingAnniversaries})]}),it.jsx("h3",{className:"font-semibold text-charcoal mb-2",children:"Upcoming Anniversaries"}),it.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[it.jsxs("span",{className:"text-gold font-medium",children:[o.thisMonthAnniversaries," This Month"]}),it.jsxs("span",{className:"text-blue-600 font-medium",children:[o.newMilestones," New"]})]})]}),it.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 hover:shadow-lg transition-all duration-300 p-6",children:[it.jsxs("div",{className:"flex items-center justify-between mb-4",children:[it.jsx("div",{className:"p-2 bg-red-50 rounded-lg",children:it.jsx(q,{className:"w-6 h-6 text-red-600"})}),it.jsx("span",{className:"text-2xl font-bold text-charcoal",children:n.totalOverdue})]}),it.jsx("h3",{className:"font-semibold text-charcoal mb-2",children:"Overdue Training"}),it.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[it.jsxs("span",{className:"text-red-600 font-medium",children:[c.length," Employees"]}),it.jsx("span",{className:"text-orange-600 font-medium",children:"Need Action"})]})]})]}),it.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:[it.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 p-6",children:[it.jsxs("div",{className:"flex items-center justify-between mb-4",children:[it.jsx("h3",{className:"font-semibold text-charcoal",children:"Employee Status Breakdown"}),it.jsx(Le,{className:"w-5 h-5 text-gray-400"})]}),it.jsx("div",{className:"space-y-3",children:[{label:"Active",count:a.active,color:"bg-green-500",textColor:"text-green-700"},{label:"New Applicants",count:a.new,color:"bg-blue-500",textColor:"text-blue-700"},{label:"In Interview",count:a.interview,color:"bg-yellow-500",textColor:"text-yellow-700"},{label:"Onboarding",count:a.onboarding,color:"bg-purple-500",textColor:"text-purple-700"},{label:"Fully Onboarded",count:a.fullyOnboarded,color:"bg-green-600",textColor:"text-green-800"}].map(e=>it.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[it.jsxs("div",{className:"flex items-center gap-3",children:[it.jsx("div",{className:`w-3 h-3 rounded-full ${e.color}`}),it.jsx("span",{className:"text-sm font-medium text-charcoal",children:e.label})]}),it.jsx("span",{className:`text-sm font-bold ${e.textColor}`,children:e.count})]},e.label))})]}),it.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 p-6",children:[it.jsxs("div",{className:"flex items-center justify-between mb-4",children:[it.jsx("h3",{className:"font-semibold text-charcoal",children:"Recent Anniversary Milestones"}),it.jsx(S,{className:"w-5 h-5 text-gray-400"})]}),o.recentMilestones.length>0?it.jsx("div",{className:"space-y-3",children:o.recentMilestones.map((e,t)=>it.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gradient-to-r from-gold/10 to-gold/5 rounded-lg border border-gold/20",children:[it.jsx(ke,{className:"w-4 h-4 text-gold flex-shrink-0"}),it.jsxs("div",{className:"flex-1 min-w-0",children:[it.jsx("p",{className:"text-sm font-medium text-charcoal truncate",children:e.employeeName}),it.jsx("p",{className:"text-xs text-gold font-semibold",children:e.milestone})]})]},t))}):it.jsxs("div",{className:"text-center py-6 text-gray-500",children:[it.jsx(ke,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),it.jsx("p",{className:"text-sm",children:"No recent milestones"})]})]}),it.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 p-6",children:[it.jsxs("div",{className:"flex items-center justify-between mb-4",children:[it.jsx("h3",{className:"font-semibold text-charcoal",children:"Overdue Training Alerts"}),it.jsx(q,{className:"w-5 h-5 text-red-400"})]}),c.length>0?it.jsx("div",{className:"space-y-3",children:c.map((e,t)=>it.jsxs("div",{className:"flex items-center gap-3 p-3 bg-red-50 rounded-lg border border-red-200",children:[it.jsx(q,{className:"w-4 h-4 text-red-500 flex-shrink-0"}),it.jsxs("div",{className:"flex-1 min-w-0",children:[it.jsx("p",{className:"text-sm font-medium text-charcoal truncate",children:e.employeeName}),it.jsxs("p",{className:"text-xs text-red-600 font-semibold",children:[e.totalOverdue," overdue module",1!==e.totalOverdue?"s":""]})]})]},t))}):it.jsxs("div",{className:"text-center py-6 text-gray-500",children:[it.jsx(C,{className:"w-8 h-8 mx-auto mb-2 text-green-300"}),it.jsx("p",{className:"text-sm",children:"No overdue training!"})]})]})]}),n.moduleStats.length>0&&it.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 p-6",children:[it.jsxs("div",{className:"flex items-center justify-between mb-4",children:[it.jsx("h3",{className:"font-semibold text-charcoal",children:"Training Module Performance"}),it.jsx(Ce,{className:"w-5 h-5 text-gray-400"})]}),it.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.moduleStats.slice(0,6).map((e,t)=>it.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[it.jsxs("div",{className:"flex items-center justify-between mb-2",children:[it.jsx("h4",{className:"text-sm font-medium text-charcoal truncate flex-1 mr-2",children:e.moduleTitle}),it.jsxs("span",{className:"text-xs font-bold px-2 py-1 rounded-full "+(e.completionRate>=80?"bg-green-100 text-green-700":e.completionRate>=50?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"),children:[e.completionRate,"%"]})]}),it.jsx("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:it.jsxs("span",{children:[e.completed,"/",e.assigned," completed"]})}),it.jsx("div",{className:"mt-2 bg-gray-200 rounded-full h-2",children:it.jsx("div",{className:"h-2 rounded-full transition-all duration-300 "+(e.completionRate>=80?"bg-green-500":e.completionRate>=50?"bg-yellow-500":"bg-red-500"),style:{width:`${e.completionRate}%`}})})]},t))})]})]}):it.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[...Array(4)].map((e,t)=>it.jsxs("div",{className:"bg-white rounded-lg shadow border border-gray-100 p-6 animate-pulse",children:[it.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),it.jsx("div",{className:"h-8 bg-gray-200 rounded mb-2"}),it.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]},t))})},nl=({employeeData:t,setEmployeeData:s})=>{const{user:a}=wt(),[r,n]=e.useState(!1),[l,o]=e.useState(!1),[i,c]=e.useState(""),[d,m]=e.useState(!1),[u,x]=e.useState({first_name:"",last_name:"",email:"",phone:"",mailing_address:"",requested_hours:"",emergency_contact:"",emergency_phone:""});e.useEffect(()=>{if(t){const e=t.employee||t,s=t.personal_info||e.personal_info||e.profile_data?.personal_info||{};console.log("Employee data:",t),console.log("Personal info:",s),x({first_name:s.first_name||e.first_name||"",last_name:s.last_name||e.last_name||"",email:s.email||e.email||"",phone:s.phone||e.phone||"",mailing_address:s.mailing_address||"",requested_hours:s.requested_hours||"",emergency_contact:s.emergency_contact||"",emergency_phone:s.emergency_phone||""})}},[t]);const h=u.mailing_address&&u.requested_hours;return u.first_name&&u.last_name&&u.phone,it.jsxs("div",{className:"space-y-8",children:[it.jsx("div",{className:"bg-brand-navy rounded-xl shadow-lg overflow-hidden border border-gold/20",children:it.jsx("div",{className:"bg-gradient-to-r from-gold/10 to-transparent p-6",children:it.jsxs("div",{className:"flex items-start gap-4",children:[it.jsx("div",{className:"p-3 bg-gold/20 backdrop-blur-sm rounded-lg mobile-hide-header-icons",children:it.jsx(F,{className:"w-6 h-6 text-gold"})}),it.jsxs("div",{className:"flex-1",children:[it.jsx("h3",{className:"text-xl font-bold text-gold mb-1",children:"Personal Information"}),it.jsx("p",{className:"text-cream/80 text-sm mb-4 leading-relaxed",children:"Keep your personal information up to date for payroll, emergency contacts, and scheduling preferences."}),!h&&it.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-orange-500/20 text-orange-200 rounded-lg text-sm",children:[it.jsx(q,{className:"w-4 h-4"}),it.jsx("span",{children:"Complete required fields to continue"})]}),h&&!r&&it.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-green-500/20 text-green-200 rounded-lg text-sm",children:[it.jsx(C,{className:"w-4 h-4"}),it.jsx("span",{children:"Information is complete and up to date"})]})]})]})})}),d&&it.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:it.jsxs("div",{className:"flex items-center gap-2",children:[it.jsx(C,{className:"w-5 h-5 text-green-600"}),it.jsx("p",{className:"text-green-800 font-medium",children:"Personal information updated successfully!"})]})}),i&&it.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:it.jsxs("div",{className:"flex items-center gap-2",children:[it.jsx(q,{className:"w-5 h-5 text-red-600"}),it.jsx("p",{className:"text-red-800 font-medium",children:i})]})}),it.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50/30 rounded-xl shadow-lg border border-gray-100/50 overflow-hidden",children:[it.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 px-6 py-4 border-b border-blue-100",children:it.jsxs("div",{className:"flex justify-between items-center",children:[it.jsxs("h3",{className:"text-lg font-bold text-charcoal flex items-center gap-3",children:[it.jsx("div",{className:"p-2 bg-blue-100 rounded-lg mobile-hide-header-icons",children:it.jsx(F,{className:"w-5 h-5 text-blue-600"})}),"Edit Personal Details"]}),r?it.jsxs("div",{className:"flex gap-2",children:[it.jsx("button",{onClick:()=>n(!1),className:"px-4 py-2 bg-gray-200 text-charcoal rounded-lg hover:bg-gray-300 transition-colors text-sm font-medium mobile-secondary-button",children:"Cancel"}),it.jsxs("button",{onClick:async()=>{o(!0),c(""),m(!1);try{const t=await jt.updatePersonalInfo(u);if(t.success){try{const e=await jt.getEmployeeProfile();e.success&&s(e.data)}catch(e){console.error("Error reloading profile after update:",e)}n(!1),m(!0),setTimeout(()=>{m(!1)},3e3)}else c(t.error||"Failed to update personal information")}catch(e){console.error("Error updating personal info:",e),c("Something went wrong. Please try again.")}finally{o(!1)}},disabled:l,className:"inline-flex items-center gap-2 px-4 py-2 bg-gold text-brand-navy rounded-lg text-sm font-medium hover:bg-gold/90 transition-all duration-200 shadow-md hover:shadow-lg mobile-hide-button-icons mobile-primary-button disabled:opacity-50 disabled:cursor-not-allowed",children:[l?it.jsx("div",{className:"w-4 h-4 border-2 border-brand-navy/30 border-t-brand-navy rounded-full animate-spin"}):it.jsx(M,{className:"w-4 h-4"}),it.jsx("span",{className:"mobile-desktop-text",children:l?"Saving...":"Save Changes"}),it.jsx("span",{className:"mobile-short-text",children:l?"Saving...":"Save"})]})]}):it.jsxs("button",{onClick:()=>n(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-gold text-brand-navy rounded-lg text-sm font-medium hover:bg-gold/90 transition-all duration-200 shadow-md hover:shadow-lg mobile-hide-button-icons mobile-primary-button",children:[it.jsx(D,{className:"w-4 h-4"}),it.jsx("span",{className:"mobile-desktop-text",children:"Edit Information"}),it.jsx("span",{className:"mobile-short-text",children:"Edit"})]})]})}),it.jsx("div",{className:"p-6",children:it.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mobile-grid",children:[it.jsxs("div",{className:"space-y-4",children:[it.jsx("h4",{className:"font-medium text-charcoal/70 border-b pb-2",children:"Basic Information"}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal/70 mb-2",children:"First Name"}),it.jsxs("div",{className:"relative",children:[it.jsx(F,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-charcoal/50"}),it.jsx("input",{type:"text",value:u.first_name,onChange:e=>x({...u,first_name:e.target.value}),disabled:!r,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent disabled:bg-gray-50 disabled:text-gray-500",placeholder:"Enter your first name"})]})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal/70 mb-2",children:"Last Name"}),it.jsxs("div",{className:"relative",children:[it.jsx(F,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-charcoal/50"}),it.jsx("input",{type:"text",value:u.last_name,onChange:e=>x({...u,last_name:e.target.value}),disabled:!r,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent disabled:bg-gray-50 disabled:text-gray-500",placeholder:"Enter your last name"})]})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal/70 mb-2",children:"Email Address"}),it.jsxs("div",{className:"relative",children:[it.jsx(v,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-charcoal/50"}),it.jsx("input",{type:"email",value:u.email,onChange:e=>x({...u,email:e.target.value}),disabled:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg bg-gray-50 text-gray-500",placeholder:"your.email@example.com"})]}),it.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed. Contact admin if needed."})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal/70 mb-2",children:"Phone Number"}),it.jsxs("div",{className:"relative",children:[it.jsx(N,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-charcoal/50"}),it.jsx("input",{type:"tel",value:u.phone,onChange:e=>x({...u,phone:e.target.value}),disabled:!r,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent disabled:bg-gray-50 disabled:text-gray-500",placeholder:"+1234567890 or (555) 123-4567"})]})]})]}),it.jsxs("div",{className:"space-y-4",children:[it.jsx("h4",{className:"font-medium text-charcoal/70 border-b pb-2",children:"Required Information"}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal/70 mb-2",children:"Mailing Address *"}),it.jsxs("div",{className:"relative",children:[it.jsx(k,{className:"absolute left-3 top-3 w-4 h-4 text-charcoal/50"}),it.jsx("textarea",{value:u.mailing_address,onChange:e=>x({...u,mailing_address:e.target.value}),disabled:!r,rows:3,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent disabled:bg-gray-50 disabled:text-gray-500",placeholder:"Enter your complete mailing address"})]}),!u.mailing_address&&it.jsx("p",{className:"text-xs text-red-500 mt-1",children:"This field is required"})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal/70 mb-2",children:"Requested Hours Per Week *"}),it.jsxs("div",{className:"relative",children:[it.jsx(E,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-charcoal/50"}),it.jsx("input",{type:"number",value:u.requested_hours,onChange:e=>x({...u,requested_hours:e.target.value}),disabled:!r,min:"1",max:"40",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent disabled:bg-gray-50 disabled:text-gray-500",placeholder:"Enter desired hours per week"})]}),!u.requested_hours&&it.jsx("p",{className:"text-xs text-red-500 mt-1",children:"This field is required"})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal/70 mb-2",children:"Emergency Contact Name"}),it.jsxs("div",{className:"relative",children:[it.jsx(F,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-charcoal/50"}),it.jsx("input",{type:"text",value:u.emergency_contact,onChange:e=>x({...u,emergency_contact:e.target.value}),disabled:!r,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent disabled:bg-gray-50 disabled:text-gray-500",placeholder:"Emergency contact full name"})]})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal/70 mb-2",children:"Emergency Contact Phone"}),it.jsxs("div",{className:"relative",children:[it.jsx(N,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-charcoal/50"}),it.jsx("input",{type:"tel",value:u.emergency_phone,onChange:e=>x({...u,emergency_phone:e.target.value}),disabled:!r,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent disabled:bg-gray-50 disabled:text-gray-500",placeholder:"Emergency contact phone"})]})]})]})]})})]})]})},ll=({employeeData:t,setEmployeeData:s,onboardingPages:a,onboardingProgress:r,refreshOnboardingData:n})=>{const[l,o]=e.useState(null),[i,c]=e.useState(!1),[d,m]=e.useState([]),[u,x]=e.useState({}),[h,g]=e.useState(!0),[p,f]=e.useState(""),[b,y]=e.useState({completed:0,total:0});e.useEffect(()=>{(async()=>{try{g(!0),f("");const e=await jt.getOnboardingPages();if(e.success){m(e.pages||[]);const t=e.progress||{};x(t);const s=Object.values(t).filter(e=>"completed"===e).length;y({completed:s,total:e.pages?.length||0})}else{f(e.error||"Failed to load onboarding data");const t=j();y(t)}}catch(e){f("Error loading onboarding data"),console.error("Error loading onboarding data:",e);const t=j();y(t)}finally{g(!1)}})()},[t,r]);const j=()=>{const e=Object.keys(u).length>0?u:r;if(!e)return{completed:0,total:a?.length||0};return{completed:Object.values(e).filter(e=>"completed"===e).length,total:a?.length||0}},v=d.length>0?d:a||[],N=h?{completed:0,total:0}:b;return h||0!==v.length?h?it.jsxs("div",{className:"flex items-center justify-center py-12",children:[it.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gold"}),it.jsx("span",{className:"ml-3 text-charcoal/70",children:"Loading onboarding data..."})]}):it.jsxs("div",{className:"space-y-6",children:[p&&it.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:it.jsxs("div",{className:"flex items-start gap-3",children:[it.jsx(q,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),it.jsxs("div",{children:[it.jsx("h4",{className:"font-medium text-red-800",children:"Error"}),it.jsx("p",{className:"text-red-700 text-sm mt-1",children:p})]})]})}),it.jsx("div",{className:"bg-brand-navy rounded-xl shadow-lg overflow-hidden border border-gold/20",children:it.jsx("div",{className:"bg-gradient-to-r from-gold/10 to-transparent p-6",children:it.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:justify-between gap-4 sm:gap-0",children:[it.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[it.jsx("div",{className:"p-3 bg-gold/20 backdrop-blur-sm rounded-lg flex-shrink-0 mobile-hide-header-icons",children:it.jsx($,{className:"w-6 h-6 text-gold"})}),it.jsxs("div",{className:"flex-1 min-w-0",children:[it.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gold mb-2",children:"Employee Onboarding"}),it.jsx("p",{className:"text-cream/80 text-xs mb-4 leading-relaxed",children:"Complete your onboarding by reading and acknowledging all required documents. Each document provides essential information about policies, procedures, and expectations."})]})]}),it.jsxs("div",{className:"flex items-center gap-3 text-gold/90 text-sm flex-shrink-0",children:[it.jsxs("div",{className:"flex items-center gap-2",children:[it.jsx("div",{className:"w-2 h-2 bg-gold rounded-full"}),it.jsxs("span",{children:[N.completed," of ",N.total," completed"]})]}),it.jsxs("div",{className:"flex items-center gap-2",children:[it.jsx(E,{className:"w-4 h-4"}),it.jsx("span",{children:"Digital signature required"})]})]})]})})}),it.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50/50 rounded-2xl shadow-xl border border-gray-100/50 overflow-hidden",children:[it.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 px-8 py-6 border-b border-blue-100",children:it.jsxs("h3",{className:"text-2xl font-bold text-charcoal flex items-center gap-3",children:[it.jsx("div",{className:"p-2 bg-blue-100 rounded-xl mobile-hide-header-icons",children:it.jsx(Ce,{className:"w-6 h-6 text-blue-600"})}),"Onboarding Progress"]})}),it.jsxs("div",{className:"p-8",children:[it.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 md:gap-6 mb-8 mobile-grid",children:[it.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-gray-100/50 rounded-xl shadow-lg p-6 border border-gray-100",children:[it.jsxs("div",{className:"flex items-center justify-between mb-4",children:[it.jsxs("div",{children:[it.jsx("p",{className:"text-2xl font-bold text-charcoal mb-1",children:N.total}),it.jsx("p",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Total Pages"})]}),it.jsx("div",{className:"p-3 bg-gradient-to-br from-gray-400 to-gray-600 rounded-xl shadow-md",children:it.jsx(Q,{className:"w-6 h-6 text-white"})})]}),it.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[it.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full mr-2"}),it.jsx("span",{children:"Required to complete"})]})]}),it.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-yellow-100/50 rounded-xl shadow-lg p-6 border border-amber-100",children:[it.jsxs("div",{className:"flex items-center justify-between mb-4",children:[it.jsxs("div",{children:[it.jsx("p",{className:"text-2xl font-bold text-amber-600 mb-1",children:N.total-N.completed}),it.jsx("p",{className:"text-xs font-semibold text-amber-600 uppercase tracking-wide",children:"Remaining"})]}),it.jsx("div",{className:"p-3 bg-gradient-to-br from-amber-400 to-orange-500 rounded-xl shadow-md",children:it.jsx(E,{className:"w-6 h-6 text-white"})})]}),it.jsxs("div",{className:"flex items-center text-xs text-amber-600",children:[it.jsx("div",{className:"w-2 h-2 bg-amber-500 rounded-full mr-2"}),it.jsx("span",{children:"Awaiting completion"})]})]}),it.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-100/50 rounded-xl shadow-lg p-6 border border-green-100",children:[it.jsxs("div",{className:"flex items-center justify-between mb-4",children:[it.jsxs("div",{children:[it.jsx("p",{className:"text-2xl font-bold text-green-600 mb-1",children:N.completed}),it.jsx("p",{className:"text-xs font-semibold text-green-600 uppercase tracking-wide",children:"Completed"})]}),it.jsx("div",{className:"p-3 bg-gradient-to-br from-green-400 to-green-600 rounded-xl shadow-md",children:it.jsx(C,{className:"w-6 h-6 text-white"})})]}),it.jsxs("div",{className:"flex items-center text-xs text-green-600",children:[it.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),it.jsx("span",{children:"Successfully acknowledged"})]})]})]}),it.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-white rounded-xl p-6 border border-gray-100",children:[it.jsxs("div",{className:"flex justify-between items-center mb-4",children:[it.jsx("h4",{className:"font-semibold text-charcoal text-lg",children:"Overall Progress"}),it.jsxs("span",{className:"text-2xl font-bold text-charcoal",children:[Math.round(N.completed/(N.total||1)*100),"%"]})]}),it.jsx("div",{className:"relative",children:it.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 shadow-inner",children:it.jsx("div",{className:"bg-gradient-to-r from-blue-400 to-indigo-500 h-4 rounded-full transition-all duration-500 shadow-lg relative overflow-hidden",style:{width:N.completed/(N.total||1)*100+"%"},children:it.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-pulse"})})})}),it.jsxs("div",{className:"mt-3 flex justify-between text-sm text-gray-600",children:[it.jsx("span",{children:"Start onboarding"}),it.jsx("span",{children:"Ready to work"})]})]}),N.completed<N.total&&it.jsx("div",{className:"mt-6 bg-gradient-to-r from-amber-50 to-yellow-50 border border-amber-200 rounded-xl p-6",children:it.jsxs("div",{className:"flex items-center gap-4",children:[it.jsx("div",{className:"p-3 bg-amber-100 rounded-xl mobile-hide-header-icons",children:it.jsx(q,{className:"w-6 h-6 text-amber-600"})}),it.jsxs("div",{children:[it.jsx("h4",{className:"font-bold text-amber-800 text-lg mb-1",children:"Complete Your Onboarding"}),it.jsxs("p",{className:"text-amber-700 text-sm leading-relaxed",children:["You have ",N.total-N.completed," remaining onboarding pages to complete. Each document requires your digital signature to acknowledge understanding."]})]})]})}),N.completed===N.total&&it.jsx("div",{className:"mt-6 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl p-6",children:it.jsxs("div",{className:"flex items-center gap-4",children:[it.jsx("div",{className:"p-3 bg-green-100 rounded-xl mobile-hide-header-icons",children:it.jsx(C,{className:"w-6 h-6 text-green-600"})}),it.jsxs("div",{children:[it.jsx("h4",{className:"font-bold text-green-800 text-lg mb-1",children:"Onboarding Complete!"}),it.jsx("p",{className:"text-green-700 text-sm leading-relaxed",children:"Congratulations! You have completed all onboarding requirements and are ready to begin working."})]})]})})]})]}),it.jsxs("div",{className:"space-y-6",children:[it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsxs("h3",{className:"text-2xl font-bold text-charcoal flex items-center gap-3",children:[it.jsx("div",{className:"p-2 bg-purple-100 rounded-xl mobile-hide-header-icons",children:it.jsx(Q,{className:"w-6 h-6 text-purple-600"})}),"Onboarding Documents"]}),it.jsxs("div",{className:"text-sm text-gray-500",children:[v.length," documents required"]})]}),it.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:v.map((e,s)=>{const a=(r=e.id,u[r]||"not_started");var r;const n=(e=>t?.onboardingCompletions?.[e])(e.id),l=(i=e.icon||"BookOpen",{BookOpen:ee,Calendar:S,Award:Se,User:F,FileText:Q,Bell:Z,Clock:E,AlertTriangle:q}[i]||ee);var i;return it.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50/30 rounded-xl shadow-lg border border-gray-100/50 overflow-hidden hover:shadow-xl transition-all duration-300",children:[it.jsx("div",{className:"h-1 bg-gradient-to-r "+("completed"===a?"from-green-400 to-emerald-500":"from-amber-400 to-orange-500")}),it.jsxs("div",{className:"p-4 md:p-5 flex flex-col h-full",children:[it.jsxs("div",{className:"flex items-start gap-3 md:gap-4 mb-4",children:[it.jsx("div",{className:"p-2 md:p-3 rounded-xl shadow-md transition-all duration-200 flex-shrink-0 "+("completed"===a?"bg-gradient-to-br from-green-50 to-emerald-100 border border-green-200":"bg-gradient-to-br from-amber-50 to-orange-100 border border-amber-200"),children:"completed"===a?it.jsx(C,{className:"w-5 h-5 md:w-6 md:h-6 text-green-600"}):it.jsx(l,{className:"w-5 h-5 md:w-6 md:h-6 text-amber-600"})}),it.jsxs("div",{className:"flex-1 min-w-0",children:[it.jsx("h4",{className:"text-sm font-bold text-charcoal mb-1 line-clamp-2",children:e.title}),it.jsx("p",{className:"text-gray-600 text-xs leading-relaxed mb-3 line-clamp-2",children:"completed"===a?`Acknowledged on ${new Date(n).toLocaleDateString()}`:"Review and digitally sign to acknowledge understanding"}),it.jsxs("div",{className:"flex items-center gap-1 text-blue-600 text-xs mb-2",children:[it.jsx(Fe,{className:"w-3 h-3"}),it.jsx("span",{className:"font-medium",children:"Digital signature required"})]}),"completed"===a&&n&&it.jsxs("div",{className:"flex items-center gap-1 text-green-600 text-xs",children:[it.jsx(C,{className:"w-3 h-3"}),it.jsxs("span",{className:"font-medium",children:["Signed ",new Date(n).toLocaleDateString()]})]})]})]}),it.jsxs("div",{className:"mt-auto flex justify-between items-center",children:["completed"===a?it.jsx("div",{}):it.jsx("div",{className:"px-2 py-1 rounded-full text-xs font-medium uppercase tracking-wide bg-amber-100 text-amber-700",children:"PENDING"}),"completed"===a?it.jsx("div",{className:"px-2 py-1 rounded-full text-xs font-medium uppercase tracking-wide bg-green-100 text-green-700",children:"COMPLETED"}):it.jsxs("button",{onClick:()=>(e=>{o(e),c(!0)})(e),className:"inline-flex items-center gap-1 px-2 md:px-3 py-1.5 md:py-2 bg-gold text-brand-navy rounded-lg text-xs font-medium hover:bg-gold/90 transition-all duration-200 shadow-md hover:shadow-lg",children:[it.jsx(Fe,{className:"w-3 h-3"}),it.jsx("span",{className:"hidden sm:inline",children:"Read &"})," Acknowledge"]})]})]})]},e.id)})})]}),i&&l&&it.jsx(ol,{page:l,onClose:()=>{c(!1),o(null)},onAcknowledge:async(e,r)=>{try{f("");const i=await jt.completeOnboardingPage(e,r);if(i.success){if(i.employee&&s(i.employee),n&&await n(),i.progress){x(i.progress);const e=Object.values(i.progress).filter(e=>"completed"===e).length;y({completed:e,total:d.length||a?.length||0})}c(!1),o(null);const e=`${t.personalInfo?.firstName||t.name||"Employee"} ${t.personalInfo?.lastName||""}`;ft.createNotification("ONBOARDING_PROGRESS",{title:"Onboarding Page Completed",message:`${e.trim()} completed: ${l.title}`,employeeId:t.id,employeeName:e.trim(),completedPage:l.title});const r=d.length||a?.length||0;(i.progress?Object.values(i.progress).filter(e=>"completed"===e).length:0)===r&&ft.notifyOnboardingComplete({id:t.id,name:e.trim()})}else f(i.error||"Failed to complete onboarding page"),alert("Failed to complete onboarding page. Please try again.")}catch(i){f("Error completing onboarding page"),console.error("Error completing onboarding page:",i),alert("Error completing onboarding page. Please try again.")}},apiOnboardingPages:d})]}):it.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[it.jsx(ee,{className:"w-16 h-16 text-gray-400 mb-4"}),it.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"No Onboarding Pages Available"}),it.jsx("p",{className:"text-gray-500 text-center max-w-md",children:"Please contact your administrator to set up onboarding documents."})]})},ol=({page:t,onClose:s,onAcknowledge:a,apiOnboardingPages:r=[]})=>{const[l,o]=e.useState(""),[i,c]=e.useState(!1),d={title:t.title||"Onboarding Content",content:t.content||"<p>Please complete this onboarding step. Contact your administrator if you need assistance.</p>"};return n.createPortal(it.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",style:{zIndex:9999},onClick:e=>{e.target===e.currentTarget&&s()},children:it.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-[100%] sm:w-full sm:max-w-4xl max-h-[80vh] sm:max-h-[75vh] flex flex-col overflow-hidden",children:[it.jsxs("div",{className:"flex justify-between items-center p-4 sm:p-6 border-b border-gray-200 flex-shrink-0",children:[it.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-charcoal line-clamp-1 flex-1 mr-4",children:d.title}),it.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 text-2xl flex-shrink-0",children:""})]}),it.jsx("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:it.jsx("div",{className:"prose max-w-none text-charcoal",dangerouslySetInnerHTML:{__html:d.content},onScroll:e=>{const t=e.target;(t.scrollTop+t.clientHeight)/t.scrollHeight>=.8&&c(!0)}})}),it.jsx("div",{className:"border-t border-gray-100 p-4 sm:p-8 bg-gradient-to-br from-gray-50/50 to-white flex-shrink-0",children:it.jsxs("div",{className:"space-y-6",children:[!i&&it.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-yellow-50 border border-amber-200 rounded-xl p-4",children:it.jsxs("div",{className:"flex items-center gap-3",children:[it.jsx("div",{className:"p-2 bg-amber-100 rounded-lg mobile-hide-header-icons",children:it.jsx(q,{className:"w-5 h-5 text-amber-600"})}),it.jsx("p",{className:"text-amber-800 text-sm font-medium",children:"Please scroll through the entire document to continue."})]})}),it.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:it.jsxs("div",{className:"flex items-center gap-3",children:[it.jsx("input",{type:"checkbox",id:"readConfirm",checked:i,onChange:e=>c(e.target.checked),className:"w-5 h-5 text-gold focus:ring-gold focus:ring-2 rounded"}),it.jsx("label",{htmlFor:"readConfirm",className:"text-sm font-medium text-charcoal select-none cursor-pointer",children:"I have read and understand the above information"})]})}),i&&it.jsxs("div",{className:"space-y-6",children:[it.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[it.jsx("label",{className:"block text-sm font-semibold text-charcoal mb-3",children:"Digital Signature"}),it.jsx("input",{type:"text",value:l,onChange:e=>o(e.target.value),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-gold focus:border-gold transition-all duration-200 text-charcoal font-medium",placeholder:"Type your full name to acknowledge"}),it.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"By signing below, you acknowledge that you have read and understood this document."})]}),it.jsxs("div",{className:"flex justify-between gap-3",children:[it.jsx("button",{onClick:s,className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-all duration-200 font-medium text-sm",children:"Cancel"}),it.jsx("button",{onClick:()=>{l.trim()?a(t.id,l):alert("Please enter your digital signature")},disabled:!l.trim(),className:"px-6 py-3 rounded-lg font-medium transition-all duration-200 text-sm "+(l.trim()?"bg-gold text-brand-navy hover:bg-gold/90 shadow-lg hover:shadow-xl":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:"I Acknowledge"})]})]})]})})]})}),document.body)};const il=h(Xe()),cl=({data:e,size:t=150})=>it.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[it.jsx("div",{className:"bg-white border-2 border-gray-300 p-3 rounded-lg shadow-sm",style:{width:t+24,height:t+24},children:it.jsx(il,{value:e,size:t,level:"M",includeMargin:!1,className:"w-full h-full"})}),it.jsx("p",{className:"text-xs text-gray-600 font-mono bg-gray-100 px-2 py-1 rounded",children:e})]}),dl=({employeeData:t,setEmployeeData:s})=>{const[a,r]=e.useState(!1),[n,l]=e.useState(""),[o,i]=e.useState(null),[c,d]=e.useState(!1),[m,u]=e.useState(!1),[x,h]=e.useState(null),[g,p]=e.useState("manual"),[f,b]=e.useState(!1);e.useRef(null),e.useRef(null);const[y,j]=e.useState([]),[v,N]=e.useState(!1),[w,k]=e.useState(null);e.useEffect(()=>{S()},[]);const S=async()=>{try{N(!0),k(null);const e=await jt.getTrainingModules();if(e.success){const t=e.modules||[],s=e.assignments||[];console.log("Loaded training modules from database:",t),console.log("Training assignments:",s),j(t)}else console.error("Failed to load training modules:",e.error),k(e.error||"Failed to load training modules"),ft.showError(e.error||"Failed to load training modules")}catch(e){console.error("Error loading training modules:",e),k("Failed to load training modules"),ft.showError("Failed to load training modules")}finally{N(!1)}},A=e=>{const s=y.find(t=>t.id===e);return!(!s||"completed"!==s.assignment_status)||(t?.training_assignments?.some(t=>t.module_id===e&&"completed"===t.status)||!1)},_=(()=>{if(!Array.isArray(y)||0===y.length)return t?.training_assignments?.filter(e=>"completed"===e.status)||[];return y.filter(e=>"completed"===e.assignment_status)})().length,R=(()=>{if(!Array.isArray(y)||0===y.length)return t?.training_assignments?.filter(e=>"unlocked"===e.status||"in_progress"===e.status)||[];return y.filter(e=>["unlocked","in_progress"].includes(e.assignment_status))})().length;return it.jsxs("div",{className:"space-y-8",children:[v&&it.jsxs("div",{className:"flex items-center justify-center py-8",children:[it.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),it.jsx("span",{className:"ml-2 text-gray-600",children:"Loading training modules..."})]}),w&&it.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:it.jsxs("div",{className:"flex items-center",children:[it.jsx(q,{className:"w-5 h-5 text-red-600 mr-2"}),it.jsxs("div",{children:[it.jsx("p",{className:"text-red-800 font-medium",children:"Failed to load training modules"}),it.jsx("p",{className:"text-red-600 text-sm",children:w}),it.jsx("button",{onClick:S,className:"mt-2 text-blue-600 text-sm underline hover:text-blue-800",children:"Try again"})]})]})}),it.jsx("div",{className:"bg-brand-navy rounded-xl shadow-lg overflow-hidden border border-gold/20",children:it.jsx("div",{className:"bg-gradient-to-r from-gold/10 to-transparent p-6",children:it.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:justify-between gap-4 sm:gap-0",children:[it.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[it.jsx("div",{className:"p-3 bg-gold/20 backdrop-blur-sm rounded-lg flex-shrink-0 mobile-hide-hero-icon",children:it.jsx(T,{className:"w-6 h-6 text-gold"})}),it.jsxs("div",{className:"flex-1 min-w-0",children:[it.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gold mb-2",children:"Training Instructions"}),it.jsx("p",{className:"text-cream/80 text-xs mb-4 leading-relaxed",children:"Access training modules by scanning QR codes located throughout the restaurant. Each training station has a unique code that unlocks specific content."})]})]}),it.jsxs("button",{onClick:()=>r(!0),className:"inline-flex items-center justify-center gap-2 px-4 py-2 bg-gold text-brand-navy rounded-lg text-sm font-medium hover:bg-gold/90 transition-all duration-200 shadow-md hover:shadow-lg w-full sm:w-auto sm:flex-shrink-0",children:[it.jsx(T,{className:"w-4 h-4"}),"Scan QR Code"]})]})})}),it.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50/50 rounded-2xl shadow-xl border border-gray-100/50 overflow-hidden",children:[it.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 px-8 py-6 border-b border-purple-100 training-header-mobile",children:it.jsxs("h3",{className:"text-2xl font-bold text-charcoal flex items-center gap-3 mobile-section-header",children:[it.jsx("div",{className:"p-2 bg-purple-100 rounded-xl mobile-hide-section-header-icon",children:it.jsx(Ce,{className:"w-6 h-6 text-purple-600"})}),"Training Progress"]})}),it.jsxs("div",{className:"p-4 sm:p-8",children:[it.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 md:gap-6 mb-6 md:mb-8",children:[it.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-gray-100/50 rounded-xl shadow-lg p-6 border border-gray-100",children:[it.jsxs("div",{className:"flex items-center justify-between mb-4",children:[it.jsxs("div",{children:[it.jsx("p",{className:"text-2xl font-bold text-charcoal mb-1",children:y.length}),it.jsx("p",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Total Modules"})]}),it.jsx("div",{className:"p-3 bg-gradient-to-br from-gray-400 to-gray-600 rounded-xl shadow-md",children:it.jsx(Q,{className:"w-6 h-6 text-white"})})]}),it.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[it.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full mr-2"}),it.jsx("span",{children:"Available for training"})]})]}),it.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-100/50 rounded-xl shadow-lg p-6 border border-blue-100",children:[it.jsxs("div",{className:"flex items-center justify-between mb-4",children:[it.jsxs("div",{children:[it.jsx("p",{className:"text-2xl font-bold text-blue-600 mb-1",children:R}),it.jsx("p",{className:"text-xs font-semibold text-blue-600 uppercase tracking-wide",children:"Unlocked"})]}),it.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-400 to-blue-600 rounded-xl shadow-md",children:it.jsx(de,{className:"w-6 h-6 text-white transform rotate-180"})})]}),it.jsxs("div",{className:"flex items-center text-xs text-blue-600",children:[it.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),it.jsx("span",{children:"Ready to start"})]})]}),it.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-100/50 rounded-xl shadow-lg p-6 border border-green-100",children:[it.jsxs("div",{className:"flex items-center justify-between mb-4",children:[it.jsxs("div",{children:[it.jsx("p",{className:"text-2xl font-bold text-green-600 mb-1",children:_}),it.jsx("p",{className:"text-xs font-semibold text-green-600 uppercase tracking-wide",children:"Completed"})]}),it.jsx("div",{className:"p-3 bg-gradient-to-br from-green-400 to-green-600 rounded-xl shadow-md",children:it.jsx(C,{className:"w-6 h-6 text-white"})})]}),it.jsxs("div",{className:"flex items-center text-xs text-green-600",children:[it.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),it.jsx("span",{children:"Certification earned"})]})]})]}),it.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-white rounded-xl p-6 border border-gray-100",children:[it.jsxs("div",{className:"flex justify-between items-center mb-4",children:[it.jsx("h4",{className:"font-semibold text-charcoal text-lg",children:"Overall Progress"}),it.jsxs("span",{className:"text-2xl font-bold text-charcoal",children:[y.length>0?Math.round(_/y.length*100):0,"%"]})]}),it.jsx("div",{className:"relative",children:it.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 shadow-inner",children:it.jsx("div",{className:"bg-gradient-to-r from-green-400 to-emerald-500 h-4 rounded-full transition-all duration-500 shadow-lg relative overflow-hidden",style:{width:(y.length>0?_/y.length*100:0)+"%"},children:it.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-pulse"})})})}),it.jsxs("div",{className:"mt-3 flex justify-between text-sm text-gray-600",children:[it.jsx("span",{children:"Start your journey"}),it.jsx("span",{children:"Become certified"})]})]})]})]}),it.jsxs("div",{className:"space-y-6",children:[it.jsx("div",{className:"training-modules-header",children:it.jsxs("div",{className:"flex items-start justify-between gap-3",children:[it.jsxs("h3",{className:"text-2xl font-bold text-charcoal flex items-center gap-3 mobile-section-header training-modules-title flex-1",children:[it.jsx("div",{className:"p-2 bg-indigo-100 rounded-xl mobile-hide-section-header-icon",children:it.jsx(Q,{className:"w-6 h-6 text-indigo-600"})}),"Available Training Modules"]}),it.jsxs("div",{className:"text-sm text-gray-500 training-modules-count flex-shrink-0",children:[y.length," modules available"]})]})}),it.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6 training-modules-grid",children:v?it.jsxs("div",{className:"col-span-full flex items-center justify-center py-12",children:[it.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),it.jsx("span",{className:"ml-2 text-gray-600",children:"Loading training modules..."})]}):0===y.length?it.jsx("div",{className:"col-span-full text-center py-12",children:it.jsxs("div",{className:"text-gray-500 mb-4",children:[it.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-4",children:it.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:it.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),it.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Training Modules Available"}),it.jsx("p",{className:"text-gray-600",children:"No training modules have been assigned to you yet. Please contact your administrator."})]})}):y.map(e=>{const s=e.assignment_status||"not_assigned",a=["unlocked","in_progress","completed"].includes(s)||(e=>{const s=y.find(t=>t.id===e);return!(!s||!["unlocked","in_progress","completed"].includes(s.assignment_status))||t?.training_assignments?.some(t=>t.module_id===e&&("unlocked"===t.status||"in_progress"===t.status||"completed"===t.status))||!1})(e.id),n="completed"===s||A(e.id),l=e.completed_at||(e=>{const s=y.find(t=>t.id===e);if(s&&s.completed_at)return s.completed_at;const a=t?.training_assignments?.find(t=>t.module_id===e&&"completed"===t.status);return a?a.completed_at:null})(e.id);return it.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50/30 rounded-xl shadow-lg border border-gray-100/50 overflow-hidden hover:shadow-xl transition-all duration-300",children:[it.jsx("div",{className:"h-1 bg-gradient-to-r "+(n?"from-green-400 to-emerald-500":a?"from-blue-400 to-indigo-500":"from-gray-300 to-gray-400")}),it.jsxs("div",{className:"p-4 md:p-5 flex flex-col h-full",children:[it.jsxs("div",{className:"flex items-start gap-3 md:gap-4 mb-4",children:[it.jsx("div",{className:"p-2 md:p-3 rounded-xl shadow-md transition-all duration-200 flex-shrink-0 "+(n?"bg-gradient-to-br from-green-50 to-emerald-100 border border-green-200":a?"bg-gradient-to-br from-blue-50 to-indigo-100 border border-blue-200":"bg-gradient-to-br from-gray-50 to-gray-100 border border-gray-200"),children:n?it.jsx(C,{className:"w-5 h-5 md:w-6 md:h-6 text-green-600"}):a?it.jsx(qe,{className:"w-5 h-5 md:w-6 md:h-6 text-blue-600"}):it.jsx(de,{className:"w-5 h-5 md:w-6 md:h-6 text-gray-500"})}),it.jsxs("div",{className:"flex-1 min-w-0",children:[it.jsx("h4",{className:"text-sm font-bold text-charcoal mb-1 line-clamp-2",children:e.title}),it.jsx("p",{className:"text-gray-600 text-xs leading-relaxed mb-3 line-clamp-2",children:n?`Completed on ${new Date(l).toLocaleDateString()}`:a?"Ready to start training":"Scan QR code to unlock"}),it.jsxs("div",{className:"flex items-center gap-1 text-blue-600 text-xs mb-2",children:[it.jsx(E,{className:"w-3 h-3"}),it.jsx("span",{className:"font-medium",children:"number"==typeof e.duration?`${e.duration} minutes`:e.duration})]}),n&&l&&it.jsxs("div",{className:"flex items-center gap-1 text-green-600 text-xs",children:[it.jsx(C,{className:"w-3 h-3"}),it.jsxs("span",{className:"font-medium",children:["Completed ",new Date(l).toLocaleDateString()]})]})]})]}),!a&&it.jsx("div",{className:"mb-4 bg-gray-50 rounded-lg p-3 border border-gray-200",children:it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsxs("div",{className:"flex-1",children:[it.jsx("p",{className:"text-xs font-medium text-gray-700 mb-1",children:"Scan QR to Unlock"}),it.jsx("p",{className:"text-xs text-gray-500 font-mono truncate",children:e.qr_code||e.qrCode})]}),it.jsx("button",{onClick:()=>{h(e),u(!0)},className:"ml-3 px-2 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 transition-colors whitespace-nowrap",children:"Show QR"})]})}),it.jsxs("div",{className:"mt-auto flex justify-between items-center",children:[it.jsx("div",{className:"px-2 py-1 rounded-full text-xs font-medium uppercase tracking-wide "+(n?"bg-green-100 text-green-700":a?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600"),children:n?"Completed":a?"Unlocked":"Locked"}),a?n?it.jsxs("button",{onClick:async()=>{try{await jt.getTrainingModuleContent(e.id)}catch(t){}i(e),d(!0)},className:"inline-flex items-center justify-center gap-1 px-2 md:px-3 py-1.5 md:py-2 bg-gray-100 text-gray-700 rounded-lg text-xs font-medium hover:bg-gray-200 transition-all duration-200 shadow-md hover:shadow-lg border border-gray-300",children:[it.jsx(Q,{className:"w-3 h-3"}),it.jsx("span",{className:"hidden sm:inline",children:"Review"})]}):it.jsxs("button",{onClick:async()=>{try{await jt.getTrainingModuleContent(e.id)}catch(t){console.warn("Could not load module content before starting:",t)}i(e),d(!0)},className:"inline-flex items-center justify-center gap-1 px-2 md:px-3 py-1.5 md:py-2 bg-blue-600 text-white rounded-lg text-xs font-medium hover:bg-blue-700 transition-all duration-200 shadow-md hover:shadow-lg",children:[it.jsx(qe,{className:"w-3 h-3"}),it.jsx("span",{className:"hidden sm:inline",children:"Start"})]}):it.jsxs("button",{onClick:()=>r(!0),className:"inline-flex items-center justify-center gap-1 px-2 md:px-3 py-1.5 md:py-2 bg-indigo-600 text-white rounded-lg text-xs font-medium hover:bg-indigo-700 transition-all duration-200 shadow-md hover:shadow-lg",children:[it.jsx(T,{className:"w-3 h-3"}),it.jsx("span",{className:"hidden sm:inline",children:"Scan"})]})]})]})]},e.id)})})]}),a&&it.jsx(ul,{onClose:()=>{r(!1),l(""),p("manual"),b(!1)},onScan:async()=>{try{N(!0);const e=n.trim().toUpperCase();if(console.log("Attempting to unlock training module with QR code:",e),!e)return void ft.showError("Please enter a QR code");const t=await jt.unlockTrainingModule(e);if(console.log("QR unlock response:",t),t.success){const e=t.assignment?.module?.title||t.module?.title||"Training module";if(ft.showSuccess(`Training module "${e}" has been unlocked!`),await S(),s){const e=await jt.getEmployeeProfile();e.success&&s(e.employee||e.data)}window.refreshDashboardStats&&window.refreshDashboardStats()}else{const e=t.error||"Invalid QR code. Please try again.";console.error("QR unlock failed:",e),ft.showError(e)}}catch(e){console.error("Error scanning QR code:",e);const t=e.message||"Failed to scan QR code";ft.showError(t)}finally{N(!1)}l(""),r(!1)},scannedCode:n,setScannedCode:l}),c&&o&&it.jsx(ml,{module:o,isCompleted:A(o.id),onClose:()=>{d(!1),i(null)},onComplete:()=>(async e=>{try{N(!0);const t=Math.floor(30*Math.random())+15,a=await jt.completeTrainingModule(e,{timeSpent:t,video_watched:!0,content_reviewed:!0});if(a.success){if(ft.showSuccess("Training module completed successfully!"),await S(),s){const e=await jt.getEmployeeProfile();e.success&&s(e.employee||e.data)}window.refreshDashboardStats&&window.refreshDashboardStats()}else ft.showError(a.error||"Failed to complete training")}catch(t){console.error("Error completing training:",t),ft.showError("Failed to complete training: "+t.message)}finally{N(!1)}d(!1),i(null)})(o.id)}),m&&x&&it.jsx(xl,{module:x,onClose:()=>{u(!1),h(null)}})]})},ml=({module:t,isCompleted:s,onClose:a,onComplete:r})=>{const[l,o]=e.useState(s),i=t.video_url||t.videoUrl,c=(e=>{if(!e)return null;console.log("Converting video URL:",e);const t=e.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/);if(t){const e=t[1],s=`https://www.youtube.com/embed/${e}?rel=0&modestbranding=1`;return console.log("YouTube video ID extracted:",e),console.log("Generated embed URL:",s),s}const s=e.match(/vimeo\.com\/(?:channels\/[A-z]+\/)?([0-9]+)/);if(s)return`https://player.vimeo.com/video/${s[1]}`;return e.includes("/embed/")||e.endsWith(".mp4")||e.endsWith(".webm")||e.endsWith(".ogg"),e})(i),d=!!(m=i)&&(m.endsWith(".mp4")||m.endsWith(".webm")||m.endsWith(".ogg")||m.endsWith(".avi")||m.endsWith(".mov"));var m;return n.createPortal(it.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",style:{zIndex:9999},onClick:e=>{e.target===e.currentTarget&&a()},children:it.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-[100%] sm:w-full sm:max-w-4xl max-h-[80vh] sm:max-h-[75vh] flex flex-col overflow-hidden",children:[it.jsxs("div",{className:"flex justify-between items-center p-4 sm:p-6 border-b border-gray-200 flex-shrink-0",children:[it.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-charcoal line-clamp-1 flex-1 mr-4",children:t.title}),it.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 text-2xl flex-shrink-0",children:""})]}),it.jsxs("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6 space-y-4 sm:space-y-6",children:[i&&it.jsxs("div",{children:[it.jsx("h4",{className:"font-medium text-charcoal mb-3",children:"Training Video"}),it.jsx("div",{className:"aspect-video bg-gray-100 rounded-lg overflow-hidden",children:d?it.jsxs("video",{width:"100%",height:"100%",controls:!0,className:"rounded-lg object-cover",preload:"metadata",onLoadedData:()=>o(!0),children:[it.jsx("source",{src:i,type:"video/mp4"}),it.jsx("source",{src:i,type:"video/webm"}),it.jsx("source",{src:i,type:"video/ogg"}),"Your browser does not support the video tag."]}):c?it.jsx("iframe",{width:"100%",height:"100%",src:c,title:t.title,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0,className:"rounded-lg",loading:"lazy",onLoad:()=>o(!0)}):it.jsx("div",{className:"flex items-center justify-center h-full bg-gray-200 rounded-lg",children:it.jsxs("div",{className:"text-center text-gray-500",children:[it.jsx(qe,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),it.jsx("p",{className:"text-sm",children:"Unable to display video"}),it.jsx("p",{className:"text-xs mt-1",children:it.jsx("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Open video in new tab"})})]})})}),it.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[it.jsx("strong",{children:"Video URL:"}),it.jsx("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline ml-1",children:i})]})]}),it.jsxs("div",{children:[it.jsx("h4",{className:"font-medium text-charcoal mb-3",children:"Training Material"}),it.jsx("div",{className:"prose max-w-none text-charcoal bg-gray-50 p-4 rounded-lg",dangerouslySetInnerHTML:{__html:t.content}})]})]}),it.jsxs("div",{className:"border-t border-gray-200 p-4 sm:p-6 bg-gray-50 flex-shrink-0",children:[!s&&it.jsxs("div",{className:"space-y-4",children:[!l&&i&&it.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:it.jsx("p",{className:"text-blue-800 text-sm",children:"Please watch the video and review the material before completing the training."})}),!i&&it.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:it.jsx("p",{className:"text-green-800 text-sm",children:'Please review the training material below and click "Mark as Completed" when finished.'})}),it.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3",children:[it.jsx("button",{onClick:a,className:"px-4 py-2 bg-gray-200 text-charcoal rounded-md hover:bg-gray-300 transition-colors order-2 sm:order-1",children:"Close"}),it.jsx("button",{onClick:r,disabled:i&&!l,className:"px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed order-1 sm:order-2",children:"Mark as Completed"})]})]}),s&&it.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-3 sm:gap-0",children:[it.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[it.jsx(C,{className:"w-5 h-5"}),it.jsx("span",{className:"font-medium",children:"Training Completed"})]}),it.jsx("button",{onClick:a,className:"px-4 py-2 bg-gray-200 text-charcoal rounded-md hover:bg-gray-300 transition-colors w-full sm:w-auto",children:"Close"})]})]})]})}),document.body)},ul=({onClose:t,onScan:s,scannedCode:a,setScannedCode:r})=>{const[l,o]=e.useState("manual"),[i,c]=e.useState(!1),[d,m]=e.useState(null),u=e.useRef(null),x=e.useRef(null);e.useEffect(()=>("camera"===l&&i&&h(),()=>{g()}),[l,i]);const h=async()=>{try{m(null),x.current=new Ze;const e=await x.current.listVideoInputDevices();if(0===e.length)throw new Error("No camera devices found");const t=e[0].deviceId;await x.current.decodeFromVideoDevice(t,u.current,(e,t)=>{e&&(r(e.getText()),g(),o("manual"),c(!1)),t&&"NotFoundException"!==t.name&&console.error(t)})}catch(e){console.error("Error starting camera:",e),m(e.message||"Failed to access camera"),c(!1),o("manual")}},g=()=>{x.current&&x.current.reset()},p=e=>{o(e),"camera"===e?c(!0):(c(!1),g())};return n.createPortal(it.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",style:{zIndex:9999},onClick:e=>{e.target===e.currentTarget&&t()},children:it.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-[90%] sm:w-full sm:max-w-md p-4 sm:p-6",children:[it.jsxs("div",{className:"flex justify-between items-center mb-4",children:[it.jsx("h3",{className:"text-lg font-semibold text-charcoal",children:"Scan QR Code"}),it.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 text-xl",children:""})]}),it.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1 mb-4",children:[it.jsxs("button",{onClick:()=>p("manual"),className:"flex-1 flex items-center justify-center gap-2 py-2 px-3 rounded-md text-sm font-medium transition-colors "+("manual"===l?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"),children:[it.jsx(j,{className:"w-4 h-4"}),"Manual Entry"]}),it.jsxs("button",{onClick:()=>p("camera"),className:"flex-1 flex items-center justify-center gap-2 py-2 px-3 rounded-md text-sm font-medium transition-colors "+("camera"===l?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"),children:[it.jsx(Me,{className:"w-4 h-4"}),"Camera Scan"]})]}),"manual"===l&&it.jsxs("div",{children:[it.jsx("p",{className:"text-sm text-charcoal/70 mb-4",children:"Enter the QR code from the training station:"}),it.jsx("input",{type:"text",value:a,onChange:e=>r(e.target.value.trim()),placeholder:"Enter QR code (e.g., TRAIN_FOOD_SAFETY_001)",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent mb-4",autoFocus:!0,onKeyDown:e=>{"Enter"===e.key&&a.trim()&&handleQRScan()}})]}),"camera"===l&&it.jsx("div",{className:"mb-4",children:d?it.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-center",children:[it.jsx("p",{className:"text-red-800 text-sm mb-2",children:"Camera Error"}),it.jsx("p",{className:"text-red-600 text-xs",children:d}),it.jsx("button",{onClick:()=>p("manual"),className:"mt-2 text-blue-600 text-sm underline",children:"Switch to manual entry"})]}):it.jsxs("div",{children:[it.jsx("p",{className:"text-sm text-charcoal/70 mb-3 text-center",children:i?"Position QR code in camera view":"Preparing camera..."}),it.jsxs("div",{className:"relative bg-gray-100 rounded-lg overflow-hidden",style:{aspectRatio:"1/1"},children:[it.jsx("video",{ref:u,className:"w-full h-full object-cover",style:{transform:"scaleX(-1)"}}),!i&&it.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:it.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),it.jsx("div",{className:"absolute inset-0 pointer-events-none",children:it.jsxs("div",{className:"absolute inset-4 border-2 border-blue-500 rounded-lg",children:[it.jsx("div",{className:"absolute top-0 left-0 w-4 h-4 border-t-4 border-l-4 border-blue-500"}),it.jsx("div",{className:"absolute top-0 right-0 w-4 h-4 border-t-4 border-r-4 border-blue-500"}),it.jsx("div",{className:"absolute bottom-0 left-0 w-4 h-4 border-b-4 border-l-4 border-blue-500"}),it.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 border-b-4 border-r-4 border-blue-500"})]})})]})]})}),a&&it.jsxs("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:[it.jsx("p",{className:"text-sm text-green-800",children:"Scanned Code:"}),it.jsx("p",{className:"font-mono text-green-700",children:a})]}),it.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3",children:[it.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-200 text-charcoal rounded-md hover:bg-gray-300 transition-colors order-2 sm:order-1",children:"Cancel"}),it.jsx("button",{onClick:()=>{s(),t()},disabled:!a.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed order-1 sm:order-2",children:"Unlock Training"})]})]})}),document.body)},xl=({module:e,onClose:t})=>n.createPortal(it.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",style:{zIndex:9999},onClick:e=>{e.target===e.currentTarget&&t()},children:it.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-[90%] sm:w-full sm:max-w-md p-6",children:[it.jsxs("div",{className:"flex justify-between items-center mb-6",children:[it.jsx("h3",{className:"text-lg font-semibold text-charcoal",children:"Training QR Code"}),it.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 text-xl",children:""})]}),it.jsxs("div",{className:"space-y-4",children:[it.jsxs("div",{className:"text-center",children:[it.jsx("h4",{className:"font-medium text-charcoal mb-2",children:e.title}),it.jsx("p",{className:"text-sm text-gray-600 mb-4",children:e.description}),it.jsxs("div",{className:"flex items-center justify-center gap-2 text-blue-600 text-sm mb-4",children:[it.jsx(E,{className:"w-4 h-4"}),it.jsx("span",{className:"font-medium",children:e.duration})]})]}),it.jsx("div",{className:"flex justify-center bg-gray-50 rounded-lg p-6",children:it.jsx(cl,{data:e.qr_code||e.qrCode,size:200})}),it.jsxs("div",{className:"text-center",children:[it.jsx("p",{className:"text-xs font-medium text-gray-700 mb-1",children:"QR Code:"}),it.jsx("p",{className:"text-sm font-mono text-gray-800 bg-gray-100 px-3 py-2 rounded border break-all",children:e.qr_code||e.qrCode})]})]})]})}),document.body),hl=({user:t,employeeData:s})=>{const[a,r]=e.useState("list"),[n,l]=e.useState([]),[o,i]=e.useState(null),[c,d]=e.useState([]),[m,u]=e.useState("all"),[x,h]=e.useState(""),[g,p]=e.useState(!1),[f,b]=e.useState(!1),y=e.useRef(null),j=e.useRef(null);e.useEffect(()=>{v()},[]),e.useEffect(()=>{if(o)return N(),p(!0),bs(o.id,t.id,"group"===o.type,!1).then(()=>{b(!1),v()}).catch(()=>{}).finally(()=>p(!1)),j.current=setInterval(()=>{N()},2e3),y.current=setInterval(()=>{f&&bs(o.id,t.id,"group"===o.type,!1).then(()=>{b(!1),v()}).catch(()=>{})},1e4),()=>{j.current&&(clearInterval(j.current),j.current=null),y.current&&(clearInterval(y.current),y.current=null)}},[o,f]);const v=async()=>{try{const e=await fs(t.id,!1);l(e)}catch(e){console.error("Error loading conversations:",e),l([])}},N=async()=>{if(o)try{const e=await ys(o.id,!1),s=e.map(e=>({id:e.id,senderId:e.senderId,senderName:e.senderName,senderRole:e.senderRole,content:e.content,textContent:e.textContent,attachments:e.attachments,hasAttachments:e.hasAttachments,timestamp:e.timestamp})).filter((e,t,s)=>s.findIndex(t=>t.id===e.id)===t),a=s.length>c.length||s.length>0&&c.length>0&&s[s.length-1].id!==c[c.length-1]?.id;if(d(s),a&&s.length>0){const e=s[s.length-1];String(e.senderId)!==String(t.id)&&b(!0)}}catch(e){console.error("Error loading messages:",e),d([])}},w=async e=>{if(("string"==typeof e?e:e.content).trim()&&o)try{b(!1),await(async(e,t,s=!1)=>{try{let a;a="object"==typeof t?{content:t.content??"",attachments:t.attachments??[],has_attachments:!!t.hasAttachments}:{content:t,has_attachments:!1};const r=s?`${gs}/admin/communication/conversations/${e}/messages`:`${gs}/employee/communication/conversations/${e}/messages`,n=await fetch(r,{method:"POST",headers:ps(),body:JSON.stringify(a)});if(!n.ok){const e=await n.text().catch(()=>"");throw console.error("Conversation message API error:",n.status,e),new Error("Failed to send message")}return(await n.json()).data}catch(a){throw console.error("Error sending conversation message:",a),a}})(o.id,e,!1),await Promise.all([N(),v()])}catch(t){console.error("Error sending message:",t)}},k=()=>{j.current&&(clearInterval(j.current),j.current=null),y.current&&(clearInterval(y.current),y.current=null),r("list"),i(null),d([]),b(!1)},S=e=>new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),C=()=>{let e=n;if("unread"===m?e=e.filter(e=>e.unreadCount>0):"groups"===m?e=e.filter(e=>"group"===e.type):"private"===m&&(e=e.filter(e=>"private"===e.type)),x.trim()){const t=x.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(t))}return e};return"chat"===a&&o?it.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100/50 h-[600px] grid grid-rows-[auto,1fr,auto]",children:[it.jsx("div",{className:"bg-brand-navy border-b border-gold/20 p-4",children:it.jsxs("div",{className:"flex items-center gap-3",children:[it.jsx("button",{onClick:k,className:"p-2 hover:bg-gold/20 rounded-lg transition-colors",children:it.jsx(P,{className:"w-5 h-5 text-cream"})}),it.jsxs("div",{className:"flex items-center gap-2",children:["group"===o.type?it.jsx($,{className:"w-5 h-5 text-gold"}):it.jsx(F,{className:"w-5 h-5 text-gold"}),it.jsxs("div",{children:[it.jsx("h2",{className:"text-lg font-semibold text-gold",children:o.name}),it.jsxs("p",{className:"text-sm text-cream/80",children:["group"===o.type?"Group Chat":"Private Chat with Management",g&&it.jsx("span",{className:"ml-2 text-gold/60",children:" Marking as read..."})]})]})]})]})}),it.jsx("div",{className:"overflow-y-auto p-4 min-h-0",children:0!==c.length||g?0===c.length&&g?it.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:it.jsxs("div",{className:"text-center",children:[it.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gold mx-auto mb-2"}),it.jsx("p",{className:"font-medium text-sm",children:"Loading messages..."})]})}):it.jsx("div",{className:"flex flex-col space-y-3",children:c.map(e=>{const s=String(e.senderId)===String(t.id);return it.jsx("div",{className:"flex "+(s?"justify-end":"justify-start"),children:it.jsxs("div",{className:"max-w-[70%] px-4 py-3 rounded-lg shadow-sm "+(s?"bg-brand-navy text-cream rounded-br-sm":"bg-gold/10 text-charcoal border border-gold/20 rounded-bl-sm"),children:[!s&&it.jsxs("div",{className:"text-xs font-semibold mb-2 "+("Admin"===e.senderRole?"text-brand-navy":"text-gray-600"),children:[e.senderName," (",e.senderRole,")"]}),it.jsx("div",{className:"text-sm whitespace-pre-wrap",children:e.attachments&&e.attachments.length>0?it.jsxs("div",{className:"space-y-2",children:[e.textContent&&it.jsx("div",{className:"mb-3",children:e.textContent}),e.attachments.map((e,t)=>it.jsx(pl,{attachment:e},t))]}):e.content.includes(" Image:")||e.content.includes(" Document:")?it.jsx(fl,{content:e.content}):e.content}),it.jsx("div",{className:"text-xs opacity-70 mt-1 "+(s?"text-cream/70":"text-charcoal/70"),children:S(e.timestamp)})]})},e.id)})}):it.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:it.jsxs("div",{className:"text-center",children:[it.jsx(ne,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),it.jsx("p",{className:"font-medium",children:"No messages yet"}),it.jsx("p",{className:"text-sm",children:"Send a message to start the conversation"})]})})}),it.jsx("div",{className:"border-t border-gray-200",children:it.jsx(gl,{onSend:w,isMobile:!1})})]}):it.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100/50 overflow-hidden",children:[it.jsxs("div",{className:"bg-brand-navy px-4 py-3 border-b border-gold/20",children:[it.jsxs("h3",{className:"text-lg font-semibold font-display text-gold flex items-center gap-3",children:[it.jsx("div",{className:"p-2 bg-gold/20 backdrop-blur-sm rounded-lg",children:it.jsx(ne,{className:"w-5 h-5 text-gold"})}),"My Conversations"]}),it.jsx("p",{className:"text-cream/80 text-sm mt-1",children:"View messages from management and group discussions"})]}),it.jsxs("div",{className:"p-6",children:[it.jsxs("div",{className:"relative mb-4",children:[it.jsx(K,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),it.jsx("input",{type:"text",placeholder:"Search conversations...",value:x,onChange:e=>h(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]}),it.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[it.jsx("button",{onClick:()=>u("all"),className:"px-3 py-1.5 text-sm font-medium rounded-lg transition-colors "+("all"===m?"bg-gold text-charcoal shadow-sm":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"All"}),it.jsx("button",{onClick:()=>u("unread"),className:"px-3 py-1.5 text-sm font-medium rounded-lg transition-colors "+("unread"===m?"bg-gold text-charcoal shadow-sm":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Unread"}),it.jsx("button",{onClick:()=>u("groups"),className:"px-3 py-1.5 text-sm font-medium rounded-lg transition-colors "+("groups"===m?"bg-gold text-charcoal shadow-sm":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Groups"}),it.jsx("button",{onClick:()=>u("private"),className:"px-3 py-1.5 text-sm font-medium rounded-lg transition-colors "+("private"===m?"bg-gold text-charcoal shadow-sm":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Private"})]}),it.jsx("div",{className:"space-y-3",children:0===C().length?it.jsxs("div",{className:"text-center py-8 text-gray-500",children:[it.jsx(ne,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),it.jsx("p",{className:"font-medium",children:"unread"===m?"No unread messages":"No conversations found"}),it.jsx("p",{className:"text-sm",children:"unread"===m?"All conversations are up to date":"Try adjusting your search or filter"})]}):C().map(e=>{const t=(e=>e.unreadCount>0)(e);return it.jsx("div",{onClick:()=>(async e=>{i(e),r("chat");try{await v()}catch(t){console.error("Error loading conversations:",t)}})(e),className:"p-4 rounded-lg cursor-pointer border transition-colors "+(t?"border-blue-300 bg-blue-50 hover:bg-blue-100":"border-gray-200 hover:bg-gray-50"),children:it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsxs("div",{className:"flex items-center gap-3",children:[it.jsxs("div",{className:"relative",children:[it.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center "+("group"===e.type?"bg-green-100":"bg-blue-100"),children:"group"===e.type?it.jsx($,{className:"w-5 h-5 text-green-600"}):it.jsx(F,{className:"w-5 h-5 text-blue-600"})}),t&&it.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full flex items-center justify-center",children:it.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),it.jsxs("div",{className:"flex-1 min-w-0",children:[it.jsx("div",{className:"font-medium "+(t?"text-gray-900":"text-gray-800"),children:e.name}),it.jsx("div",{className:"text-sm truncate max-w-48 "+(t?"text-gray-600 font-medium":"text-gray-500"),children:e.lastMessage?e.lastMessage.content:"No messages yet"}),it.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"group"===e.type?"Group Chat":"Private Chat with Management"})]})]}),it.jsx("div",{className:"text-xs text-gray-400",children:e.lastMessage?S(e.lastMessage.timestamp):""})]})},e.id)})})]})]})},gl=({onSend:t,isMobile:s=!1})=>{const[a,r]=e.useState(""),[n,l]=e.useState([]),o=e.useRef(null),i=async()=>{if(a.trim()||0!==n.length){if(n.length>0){const e=n.map(e=>new Promise(t=>{const s=new FileReader;s.onload=s=>{t({name:e.name,type:e.type,size:e.size,data:s.target.result})},s.readAsDataURL(e)})),s=await Promise.all(e);t({content:a.trim()||"File attachment",textContent:a.trim(),attachments:s,hasAttachments:!0})}else t({content:a,textContent:a,attachments:[],hasAttachments:!1});r(""),l([])}};return it.jsxs("div",{className:"border-t border-gray-200 "+(s?"p-3":"p-4"),children:[n.length>0&&it.jsx("div",{className:"mb-3 flex flex-wrap gap-2",children:n.map((e,t)=>it.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 px-3 py-2 rounded-lg",children:[e.type.startsWith("image/")?it.jsx(ie,{className:"w-4 h-4 text-blue-600"}):it.jsx(Q,{className:"w-4 h-4 text-green-600"}),it.jsx("span",{className:"text-sm font-medium text-gray-700 truncate max-w-32",children:e.name}),it.jsx("button",{onClick:()=>(e=>{l(t=>t.filter((t,s)=>s!==e))})(t),className:"text-gray-400 hover:text-red-500 transition-colors",children:it.jsx(O,{className:"w-4 h-4"})})]},t))}),it.jsxs("div",{className:"flex items-center gap-3",children:[it.jsx("input",{ref:o,type:"file",multiple:!0,accept:"image/*,.pdf,.doc,.docx,.xls,.xlsx,.txt,.csv",onChange:e=>{const t=Array.from(e.target.files).filter(e=>["image/jpeg","image/png","image/gif","image/webp","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/plain","text/csv"].includes(e.type)&&e.size<=10485760);l(e=>[...e,...t]),e.target.value=""},className:"hidden"}),it.jsx("button",{onClick:()=>{o.current?.click()},className:"flex items-center justify-center text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors border border-gray-300 hover:border-blue-300 "+(s?"w-9 h-9":"w-10 h-10"),title:"Attach files",children:it.jsx(ce,{className:s?"w-4 h-4":"w-5 h-5"})}),it.jsx("input",{type:"text",value:a,onChange:e=>r(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),i())},placeholder:"Type a message...",className:"flex-1 px-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(s?"py-2 h-9 text-sm":"py-2.5 h-10")}),it.jsx("button",{onClick:i,disabled:!a.trim()&&0===n.length,className:"flex items-center justify-center bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors "+(s?"w-9 h-9":"w-10 h-10"),children:it.jsx(te,{className:"w-4 h-4"})})]})]})},pl=({attachment:t})=>{const[s,a]=e.useState(!1),r=t.type.startsWith("image/");return it.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3 max-w-sm",children:[it.jsxs("div",{className:"flex items-center gap-3",children:[it.jsx("div",{className:"flex-shrink-0",children:r?it.jsx("div",{className:"relative",children:it.jsx("img",{src:t.data,alt:t.name,className:"w-12 h-12 object-cover rounded-lg cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>a(!0)})}):it.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:it.jsx(Q,{className:"w-6 h-6 text-blue-600"})})}),it.jsxs("div",{className:"flex-1 min-w-0",children:[it.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",title:t.name,children:t.name}),it.jsx("p",{className:"text-xs text-gray-500",children:(e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]})(t.size)}),it.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r&&it.jsxs("button",{onClick:()=>a(!0),className:"flex items-center gap-1 px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition-colors",children:[it.jsx(p,{className:"w-3 h-3"}),"View"]}),it.jsxs("button",{onClick:()=>{const e=document.createElement("a");e.href=t.data,e.download=t.name,document.body.appendChild(e),e.click(),document.body.removeChild(e)},className:"flex items-center gap-1 px-2 py-1 text-xs bg-green-100 text-green-700 rounded hover:bg-green-200 transition-colors",children:[it.jsx(_,{className:"w-3 h-3"}),"Download"]})]})]})]}),s&&r&&it.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",onClick:()=>a(!1),children:it.jsxs("div",{className:"relative max-w-4xl max-h-full",onClick:e=>e.stopPropagation(),children:[it.jsx("img",{src:t.data,alt:t.name,className:"max-w-full max-h-full object-contain rounded-lg"}),it.jsx("button",{onClick:()=>a(!1),className:"absolute top-2 right-2 w-8 h-8 bg-black bg-opacity-50 text-white rounded-full flex items-center justify-center hover:bg-opacity-75 transition-colors",children:it.jsx(O,{className:"w-4 h-4"})}),it.jsx("div",{className:"absolute bottom-2 left-2 bg-black bg-opacity-50 text-white px-3 py-1 rounded text-sm",children:t.name})]})})]})},fl=({content:e})=>{const t=e.includes(" Image:");return e.split(": ")[1],it.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 border border-gray-200 rounded-lg p-2",children:[t?it.jsx(ie,{className:"w-4 h-4 text-blue-600"}):it.jsx(Q,{className:"w-4 h-4 text-green-600"}),it.jsx("span",{className:"text-sm text-gray-700",children:e}),it.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(Legacy format - no preview available)"})]})},bl=()=>{const[t,s]=e.useState(""),[a,r]=e.useState("all"),[n,l]=e.useState(new Set),[o,i]=e.useState([]),[c,d]=e.useState([]),[m,u]=e.useState(!1);e.useEffect(()=>{x(),h()},[]),e.useEffect(()=>{const e=setTimeout(()=>{x()},300);return()=>clearTimeout(e)},[t,a]);const x=async()=>{try{u(!0);const e={};"all"!==a&&(e.category=a),t&&(e.search=t);const s=await jt.getFaqs(e);s.success?i(s.data):console.error("Failed to load FAQs:",s.error)}catch(e){console.error("Error loading FAQs:",e)}finally{u(!1)}},h=async()=>{try{const e=await jt.getFaqCategories();if(e.success){const t=[{id:"all",name:"All Questions",icon:ae},...Object.entries(e.data).map(([e,t])=>({id:e,name:t,icon:ae}))];d(t)}else d([{id:"all",name:"All Questions",icon:ae},{id:"payroll",name:"Pay & Tips",icon:E},{id:"scheduling",name:"Scheduling",icon:E},{id:"benefits",name:"Benefits",icon:ae},{id:"uniform",name:"Uniform & Dress Code",icon:ae},{id:"training",name:"Training",icon:ae},{id:"policies",name:"Policies",icon:ae}])}catch(e){console.error("Error loading categories:",e),d([{id:"all",name:"All Questions",icon:ae},{id:"payroll",name:"Pay & Tips",icon:E},{id:"scheduling",name:"Scheduling",icon:E},{id:"benefits",name:"Benefits",icon:ae},{id:"uniform",name:"Uniform & Dress Code",icon:ae},{id:"training",name:"Training",icon:ae},{id:"policies",name:"Policies",icon:ae}])}},g=o,p=(e,t)=>{if(!t)return e;const s=new RegExp(`(${t})`,"gi");return e.split(s).map((e,t)=>s.test(e)?it.jsx("span",{className:"bg-yellow-200 text-charcoal font-medium",children:e},t):e)};return it.jsxs("div",{className:"space-y-6",children:[it.jsx("div",{className:"bg-brand-navy rounded-xl shadow-lg overflow-hidden border border-gold/20",children:it.jsx("div",{className:"bg-gradient-to-r from-gold/10 to-transparent p-4 sm:p-6",children:it.jsxs("div",{className:"flex items-start gap-3 sm:gap-4",children:[it.jsx("div",{className:"hidden xs:block p-2 sm:p-3 bg-gold/20 backdrop-blur-sm rounded-lg",children:it.jsx(ae,{className:"w-5 h-5 sm:w-6 sm:h-6 text-gold"})}),it.jsxs("div",{className:"flex-1",children:[it.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gold mb-2",children:"Frequently Asked Questions"}),it.jsx("p",{className:"text-cream/80 text-xs sm:text-sm mb-4 leading-relaxed",children:"Find answers to common questions about working at Woodfire.food. Can't find what you're looking for? Contact management for assistance."})]})]})})}),it.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100/50 overflow-hidden",children:[it.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 px-4 sm:px-6 py-3 sm:py-4 border-b border-purple-100",children:[it.jsxs("h3",{className:"text-base sm:text-lg font-semibold font-display text-charcoal flex items-center gap-2 sm:gap-3",children:[it.jsx("div",{className:"hidden xs:block p-1.5 sm:p-2 bg-purple-100 rounded-lg",children:it.jsx(K,{className:"w-4 h-4 sm:w-5 sm:h-5 text-purple-600"})}),"Search & Filter"]}),it.jsx("p",{className:"text-charcoal/70 text-xs sm:text-sm mt-1",children:"Find specific questions and answers"})]}),it.jsx("div",{className:"p-4 sm:p-6",children:it.jsxs("div",{className:"space-y-4",children:[it.jsxs("div",{className:"relative",children:[it.jsx(K,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-charcoal/50"}),it.jsx("input",{type:"text",value:t,onChange:e=>s(e.target.value),placeholder:"Search FAQ questions...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]}),it.jsxs("div",{children:[it.jsx("p",{className:"text-xs sm:text-sm font-medium text-charcoal/70 mb-2 sm:mb-3",children:"Filter by category:"}),it.jsx("div",{className:"flex flex-wrap gap-2",children:c.map(e=>{const t=e.icon;return it.jsxs("button",{onClick:()=>r(e.id),className:"flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg text-xs sm:text-sm font-medium transition-colors whitespace-nowrap "+(a===e.id?"bg-blue-600 text-white":"bg-gray-100 text-charcoal hover:bg-blue-100"),children:[it.jsx(t,{className:"hidden xs:inline-block w-3 h-3 sm:w-4 sm:h-4"}),e.name]},e.id)})})]}),t&&it.jsxs("p",{className:"text-xs sm:text-sm text-charcoal/70",children:["Found ",g.length," result",1!==g.length?"s":"",' for "',t,'"']})]})})]}),it.jsx("div",{className:"space-y-4",children:m?it.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100/50 p-6 sm:p-8 text-center",children:[it.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-3"}),it.jsx("p",{className:"text-base sm:text-lg font-medium text-charcoal",children:"Loading FAQs..."})]}):0===g.length?it.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100/50 p-6 sm:p-8 text-center",children:[it.jsx(ae,{className:"w-10 h-10 sm:w-12 sm:h-12 mx-auto mb-3 text-gray-300"}),it.jsx("p",{className:"text-base sm:text-lg font-medium text-charcoal mb-2",children:"No questions found"}),it.jsx("p",{className:"text-xs sm:text-sm text-charcoal/60",children:t?`No FAQ items match your search for "${t}"`:"No questions available in this category"})]}):g.map(e=>{const s=n.has(e.id);return it.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100/50 hover:shadow-xl transition-all duration-300",children:[it.jsxs("button",{onClick:()=>(e=>{const t=new Set(n);t.has(e)?t.delete(e):t.add(e),l(t)})(e.id),className:"w-full flex items-center justify-between p-4 sm:p-6 text-left hover:bg-gold/5 focus:outline-none focus:ring-2 focus:ring-gold focus:ring-inset rounded-xl transition-colors",children:[it.jsxs("div",{className:"flex-1 pr-3 sm:pr-4",children:[it.jsx("h4",{className:"text-sm sm:text-base font-medium text-charcoal",children:p(e.question,t)}),it.jsx("p",{className:"text-xs sm:text-sm text-charcoal/60 mt-1 capitalize",children:e.category.replace("-"," ")})]}),s?it.jsx(R,{className:"w-4 h-4 sm:w-5 sm:h-5 text-charcoal/50 flex-shrink-0"}):it.jsx(W,{className:"w-4 h-4 sm:w-5 sm:h-5 text-charcoal/50 flex-shrink-0"})]}),s&&it.jsx("div",{className:"px-4 pb-4 border-t border-gray-100",children:it.jsx("div",{className:"pt-4",children:it.jsx("div",{className:"prose prose-sm max-w-none text-charcoal/80 text-xs sm:text-sm",children:p(e.answer,t)})})})]},e.id)})}),it.jsxs("div",{className:"bg-brand-navy text-cream rounded-lg shadow-md p-4 sm:p-6",children:[it.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gold mb-3 sm:mb-4",children:"Still Need Help?"}),it.jsx("p",{className:"text-cream/80 text-xs sm:text-sm mb-3 sm:mb-4",children:"If you can't find the answer to your question, don't hesitate to reach out to management."}),it.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4 text-xs sm:text-sm",children:[it.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[it.jsx(N,{className:"w-3 h-3 sm:w-4 sm:h-4 text-gold flex-shrink-0"}),it.jsxs("div",{children:[it.jsx("p",{className:"font-medium",children:"Restaurant Phone"}),it.jsx("p",{className:"text-cream/80",children:"(918) 555-0100"})]})]}),it.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[it.jsx(v,{className:"w-3 h-3 sm:w-4 sm:h-4 text-gold flex-shrink-0"}),it.jsxs("div",{children:[it.jsx("p",{className:"font-medium",children:"HR Email"}),it.jsx("p",{className:"text-cream/80 break-all",children:"hr@309311restaurants.com"})]})]})]}),it.jsx("div",{className:"mt-3 sm:mt-4 p-2 sm:p-3 bg-gold/10 rounded-lg",children:it.jsxs("p",{className:"text-cream text-xs",children:[it.jsx("strong",{children:"Emergency Contact:"})," For urgent matters outside business hours, call the emergency line at (918) 555-0199"]})})]})]})},yl=({employeeData:t,onboardingProgress:s,onboardingPages:a,onClose:r,onNavigateToOnboarding:n,onNavigateToPersonalInfo:l})=>{const[o,i]=e.useState(!1),[c,d]=e.useState(0),m=e.useCallback(()=>{if(t?.onboarding_pages_progress)return t.onboarding_pages_progress;const e=a?.length||0;if(!s||0===e)return{completed:0,total:e,is_complete:!1};const r=Object.values(s).filter(e=>"completed"===e).length;return{completed:r,total:e,is_complete:r>=e&&e>0}},[t,a,s]),u=e.useCallback(()=>{if(void 0!==t?.is_personal_info_complete)return t.is_personal_info_complete;const e=t?.personal_info||t?.employee?.personal_info||t?.employee?.profile_data?.personal_info;if(!e)return!1;const s=[t?.first_name||t?.employee?.first_name,t?.last_name||t?.employee?.last_name,t?.email||t?.employee?.email,t?.phone||t?.employee?.phone].every(e=>e&&String(e).trim()),{mailing_address:a,requested_hours:r}=e,n=!!(a&&String(a).trim()&&r&&String(r).trim());return s&&n},[t]),x=m(),h=x.is_complete||0===x.total||x.completed>=x.total,g=u(),p=h&&g;e.useEffect(()=>{i(!(p||!t))},[p,t,a,s,c]),e.useEffect(()=>{a?.length>0&&d(e=>e+1)},[a?.length]);const f=()=>{i(!1),r&&r()};return!o||p?null:it.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",style:{zIndex:9999},children:it.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full max-h-[80vh] flex flex-col",children:[it.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 flex-shrink-0",children:[it.jsxs("div",{className:"flex items-center gap-3",children:[it.jsx(q,{className:"w-6 h-6 text-orange-600"}),it.jsxs("div",{children:[it.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Profile Incomplete"}),it.jsx("p",{className:"text-sm text-gray-600",children:"Complete to access all features"})]})]}),it.jsx("button",{onClick:f,className:"text-gray-400 hover:text-gray-600",children:it.jsx(O,{className:"w-5 h-5"})})]}),it.jsxs("div",{className:"flex-1 scrollable-modal p-6 space-y-4",children:[!g&&it.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:it.jsxs("div",{className:"flex items-start gap-3",children:[it.jsx(F,{className:"w-5 h-5 text-orange-600 mt-0.5"}),it.jsxs("div",{children:[it.jsx("h4",{className:"font-medium text-orange-800",children:"Personal Information Missing"}),it.jsx("p",{className:"text-orange-700 text-sm mt-1",children:"Please complete your mailing address and requested hours."})]})]})}),it.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:it.jsxs("div",{className:"flex items-start gap-3",children:[it.jsx(ee,{className:"w-5 h-5 text-blue-600 mt-0.5"}),it.jsxs("div",{className:"flex-1",children:[it.jsx("h4",{className:"font-medium text-blue-800",children:"Onboarding Progress"}),it.jsx("p",{className:"text-blue-700 text-sm mt-1",children:0===x.total?"No onboarding documents configured":`${x.completed} of ${x.total} pages completed (${x.percentage||Math.round(x.completed/x.total*100)}%)`}),x.total>0&&it.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2 mt-2",children:it.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${x.percentage||(x.total>0?x.completed/x.total*100:0)}%`}})})]})]})}),it.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[it.jsx("h4",{className:"font-medium text-gray-800 mb-3",children:"Required Items:"}),it.jsxs("div",{className:"space-y-2",children:[it.jsxs("div",{className:"flex items-center gap-2 text-sm "+(g?"text-green-700":"text-gray-700"),children:[g?it.jsx(C,{className:"w-4 h-4 text-green-600"}):it.jsx("div",{className:"w-4 h-4 rounded-full border border-gray-400"}),it.jsx("span",{children:"Personal Information"})]}),a&&a.length>0?a.map(e=>{const t="completed"===(a=e.id,s?.[a]||"not-started");var a;return it.jsxs("div",{className:"flex items-center gap-2 text-sm "+(t?"text-green-700":"text-gray-700"),children:[t?it.jsx(C,{className:"w-4 h-4 text-green-600"}):it.jsx("div",{className:"w-4 h-4 rounded-full border border-gray-400"}),it.jsx("span",{children:e.title})]},e.id)}):it.jsx("div",{className:"text-sm text-gray-500 italic",children:"No onboarding documents available. Please contact your administrator."})]})]}),it.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4",children:it.jsxs("p",{className:"text-yellow-800 text-sm",children:[it.jsx("strong",{children:"Important:"})," You must complete your profile and onboarding to access all employee features. This notification will appear each time you log in until completed."]})})]}),it.jsxs("div",{className:"flex gap-3 p-6 border-t border-gray-200 flex-shrink-0",children:[g?x.total>0?it.jsx("button",{onClick:()=>{i(!1),n&&n()},className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Continue Onboarding"}):it.jsx("div",{className:"flex-1 px-4 py-2 bg-green-100 text-green-800 rounded-lg text-center font-medium",children:"Profile Complete"}):it.jsx("button",{onClick:()=>{i(!1),l&&l()},className:"flex-1 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors font-medium",children:"Complete Personal Info"}),it.jsx("button",{onClick:f,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Later"})]})]})})},jl=({employeeId:t})=>{const[s,a]=e.useState([]),[r,n]=e.useState(!1),[l,o]=e.useState(!1),[i,c]=e.useState(null),d=e.useCallback(async()=>{if(t)try{o(!0),c(null);const e=(await Zs.getNotificationsForEmployee(t)).filter(e=>e&&"object"==typeof e&&(e.created_at||e.timestamp)).sort((e,t)=>{try{const s=new Date(t.created_at||t.timestamp);return s-new Date(e.created_at||e.timestamp)}catch(s){return console.error("Error sorting notifications by date:",s),0}}).slice(0,15);a(e)}catch(e){console.error("Error loading employee notifications:",e),c("Failed to load notifications"),a([])}finally{o(!1)}else a([])},[t]);e.useEffect(()=>{d();const e=setInterval(()=>{try{d()}catch(e){console.error("Error in employee notification interval:",e)}},7e3),t=e=>{try{"employeeNotifications"!==e.key&&"notifications"!==e.key||d()}catch(t){console.error("Error handling storage change:",t)}};return window.addEventListener("storage",t),()=>{clearInterval(e),window.removeEventListener("storage",t)}},[d]);const m=async e=>{try{const t=await Zs.markNotificationAsRead(e);t.success?d():console.error("Failed to mark notification as read:",t.error)}catch(t){console.error("Error marking notification as read:",t)}},u=async()=>{try{const e=await Zs.markAllNotificationsAsRead();e.success?d():console.error("Failed to mark all notifications as read:",e.error)}catch(e){console.error("Error marking all notifications as read:",e)}},x=async e=>{try{const t=await Zs.deleteNotification(e);t.success?d():console.error("Failed to delete notification:",t.error)}catch(t){console.error("Error deleting notification:",t)}},h=s.filter(e=>!e.is_read&&!e.read).length,g=e=>{const t=e.created_at||e.timestamp,s=new Date(t),a=new Date,r=Math.floor((a-s)/6e4);return r<1?"Just now":r<60?`${r}m ago`:r<1440?`${Math.floor(r/60)}h ago`:s.toLocaleDateString()};return it.jsxs("div",{className:"relative",children:[it.jsxs("button",{onClick:()=>n(!r),className:"relative p-2 text-cream/80 hover:text-cream transition-colors",children:[it.jsx(Z,{className:"w-6 h-6"}),h>0&&it.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:h>9?"9+":h})]}),r&&it.jsxs(it.Fragment,{children:[it.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4 notification-mobile-modal",onClick:()=>n(!1),children:it.jsxs("div",{className:"w-full max-w-sm bg-white rounded-lg shadow-xl border border-gray-200 max-h-[70vh] overflow-hidden",onClick:e=>e.stopPropagation(),children:[it.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-gray-200",children:[it.jsx("h3",{className:"font-semibold text-charcoal",children:"Notifications"}),it.jsxs("div",{className:"flex items-center gap-1",children:[h>0&&it.jsx("button",{onClick:u,className:"text-xs text-gold hover:text-gold-dark px-2 py-1 bg-gold/10 rounded",children:"Mark all read"}),it.jsx("button",{onClick:()=>n(!1),className:"text-gray-400 hover:text-gray-600 p-1",children:it.jsx(O,{className:"w-4 h-4"})})]})]}),it.jsx("div",{className:"max-h-[50vh] overflow-y-auto",children:0===s.length?it.jsx("div",{className:"p-6 text-center text-gray-500",children:it.jsx("p",{children:"No notifications yet"})}):s.map(e=>it.jsx("div",{className:"p-3 border-b border-gray-100 hover:bg-gray-50 transition-colors "+(e.is_read||e.read?"":"bg-blue-50"),children:it.jsx("div",{className:"flex items-start gap-2",children:it.jsx("div",{className:"flex-1 min-w-0",children:it.jsx("div",{className:"space-y-2",children:it.jsxs("div",{children:[it.jsxs("div",{className:"flex items-start justify-between",children:[it.jsx("p",{className:"font-medium text-charcoal text-sm break-words flex-1",children:e.title}),it.jsx("button",{onClick:()=>x(e.id),className:"text-gray-400 hover:text-red-600 ml-2 flex-shrink-0",children:it.jsx(O,{className:"w-3 h-3"})})]}),it.jsx("p",{className:"text-charcoal/70 text-sm mt-1 break-words",children:e.message}),it.jsxs("div",{className:"flex items-center justify-between mt-1",children:[it.jsx("p",{className:"text-xs text-gray-500",children:g(e)}),!(e.is_read||e.read)&&it.jsx("button",{onClick:()=>m(e.id),className:"text-xs text-gold hover:text-gold-dark px-2 py-1 bg-gold/10 rounded",children:"Mark read"})]})]})})})})},e.id))})]})}),it.jsxs("div",{className:"absolute right-0 top-full mt-2 w-80 bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-hidden notification-desktop-modal",children:[it.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[it.jsx("h3",{className:"font-semibold text-charcoal",children:"Notifications"}),it.jsxs("div",{className:"flex items-center gap-2",children:[h>0&&it.jsx("button",{onClick:u,className:"text-xs text-gold hover:text-gold-dark",children:"Mark all read"}),it.jsx("button",{onClick:()=>n(!1),className:"text-gray-400 hover:text-gray-600",children:it.jsx(O,{className:"w-4 h-4"})})]})]}),it.jsx("div",{className:"max-h-80 overflow-y-auto",children:0===s.length?it.jsx("div",{className:"p-8 text-center text-gray-500",children:it.jsx("p",{children:"No notifications yet"})}):s.map(e=>it.jsx("div",{className:"p-4 border-b border-gray-100 hover:bg-gray-50 transition-colors "+(e.is_read||e.read?"":"bg-blue-50"),children:it.jsx("div",{className:"flex items-start gap-3",children:it.jsx("div",{className:"flex-1 min-w-0",children:it.jsx("div",{className:"flex items-start justify-between",children:it.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[it.jsxs("div",{className:"flex items-start justify-between",children:[it.jsx("p",{className:"font-medium text-charcoal text-sm break-words flex-1",children:e.title}),it.jsx("button",{onClick:()=>x(e.id),className:"text-gray-400 hover:text-red-600 ml-2 flex-shrink-0",children:it.jsx(O,{className:"w-3 h-3"})})]}),it.jsx("p",{className:"text-charcoal/70 text-sm mt-1 break-words",children:e.message}),it.jsxs("div",{className:"flex items-center justify-between mt-2",children:[it.jsx("p",{className:"text-xs text-gray-500",children:g(e)}),!(e.is_read||e.read)&&it.jsx("button",{onClick:()=>m(e.id),className:"text-xs text-gold hover:text-gold-dark",children:"Mark read"})]})]})})})})},e.id))})]})]})]})},vl=({employeeData:t,setEmployeeData:s})=>{const[a,r]=e.useState([]),[n,l]=e.useState(!0),[o,i]=e.useState(null),[c,d]=e.useState(!1),[m,u]=e.useState({startDate:"",endDate:"",reason:"",type:"vacation",notes:""}),[x,h]=e.useState("all");e.useEffect(()=>{g()},[t?.id]);const g=async()=>{try{l(!0),i(null);const e={};x&&"all"!==x&&(e.status=x);const t=await Zn.getMyRequests(e);if(t?.success){const e=Zn.transformForEmployee(t.data.requests||[]);r(e)}else i("Failed to load time off requests")}catch(e){i(Zn.handleApiError(e))}finally{l(!1)}},f=e=>{switch(e){case"approved":return"text-green-600 bg-green-50 border-green-200";case"rejected":return"text-red-600 bg-red-50 border-red-200";case"pending":return"text-yellow-600 bg-yellow-50 border-yellow-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},y=e=>{switch(e){case"approved":return it.jsx(C,{className:"w-4 h-4"});case"rejected":return it.jsx(Y,{className:"w-4 h-4"});case"pending":return it.jsx(b,{className:"w-4 h-4"});default:return it.jsx(E,{className:"w-4 h-4"})}};e.useEffect(()=>{const e=setTimeout(()=>{g()},300);return()=>clearTimeout(e)},[x]);const j=a.filter(e=>"all"===x||e.status===x),v=(e,t)=>{const s=new Date(e),a=new Date(t),r=Math.abs(a-s);return Math.ceil(r/864e5)+1};return it.jsxs("div",{className:"space-y-8",children:[it.jsx("div",{className:"bg-brand-navy rounded-xl shadow-lg overflow-hidden border border-gold/20",children:it.jsx("div",{className:"bg-gradient-to-r from-gold/10 to-transparent p-4 sm:p-6",children:it.jsxs("div",{className:"flex items-start gap-3 sm:gap-4",children:[it.jsx("div",{className:"p-2 sm:p-3 bg-gold/20 backdrop-blur-sm rounded-lg mobile-hide-hero-icon",children:it.jsx(S,{className:"w-5 h-5 sm:w-6 sm:h-6 text-gold"})}),it.jsxs("div",{className:"flex-1 min-w-0",children:[it.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gold mb-2",children:"Time Off Requests"}),it.jsx("p",{className:"text-cream/80 text-sm mb-3 sm:mb-4 leading-relaxed",children:"Submit and track your vacation and leave requests. Plan your time off and stay informed about approval status."}),it.jsxs("button",{onClick:()=>d(!0),className:"inline-flex items-center gap-2 px-3 sm:px-4 py-2 bg-gold text-brand-navy rounded-lg text-sm font-medium hover:bg-gold/90 transition-all duration-200 shadow-md hover:shadow-lg w-full sm:w-auto justify-center sm:justify-start",children:[it.jsx(I,{className:"w-4 h-4"}),"New Request"]})]})]})})}),c&&it.jsx("div",{className:"fixed inset-0 bg-gray-600/40 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:it.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-5 border border-gray-100",children:[it.jsx("h3",{className:"text-lg font-bold text-charcoal mb-4",children:"Request Time Off"}),it.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{i(null),l(!0);const e={start_date:m.startDate,end_date:m.endDate,type:m.type,reason:m.reason,notes:m.notes||""},t=await Zn.createRequest(e);if(t?.success){const e=Zn.transformOneForEmployee(t.data);r(t=>[e,...t]),u({startDate:"",endDate:"",reason:"",type:"vacation",notes:""}),d(!1)}else i("Failed to submit time off request")}catch(t){i(Zn.handleApiError(t))}finally{l(!1)}},className:"space-y-3",children:[it.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal mb-1",children:"Start Date"}),it.jsx("input",{type:"date",value:m.startDate,onChange:e=>u({...m,startDate:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gold/50",required:!0})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal mb-1",children:"End Date"}),it.jsx("input",{type:"date",value:m.endDate,onChange:e=>u({...m,endDate:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gold/50",required:!0})]})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal mb-1",children:"Type"}),it.jsxs("select",{value:m.type,onChange:e=>u({...m,type:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gold/50",required:!0,children:[it.jsx("option",{value:"vacation",children:"Vacation"}),it.jsx("option",{value:"sick",children:"Sick Leave"}),it.jsx("option",{value:"personal",children:"Personal"}),it.jsx("option",{value:"emergency",children:"Emergency"})]})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal mb-1",children:"Reason"}),it.jsx("input",{type:"text",value:m.reason,onChange:e=>u({...m,reason:e.target.value}),placeholder:"Brief reason for time off",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gold/50",required:!0})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal mb-1",children:"Additional Notes (Optional)"}),it.jsx("textarea",{value:m.notes,onChange:e=>u({...m,notes:e.target.value}),placeholder:"Any additional information...",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gold/50"})]}),it.jsxs("div",{className:"flex justify-end gap-3 pt-3",children:[it.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 border border-gray-300 text-charcoal rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),it.jsxs("button",{type:"submit",className:"bg-gold text-brand-navy px-6 py-2 rounded-md hover:bg-gold/90 transition-colors flex items-center gap-2 font-medium",children:[it.jsx(te,{className:"w-4 h-4"}),"Submit Request"]})]})]})]})}),it.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6",children:[it.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3 sm:gap-0 mb-4",children:[it.jsx("h3",{className:"text-lg font-semibold text-charcoal",children:"Your Requests"}),it.jsxs("div",{className:"flex items-center gap-2",children:[it.jsx(re,{className:"w-4 h-4 text-charcoal/60 flex-shrink-0"}),it.jsxs("select",{value:x,onChange:e=>h(e.target.value),className:"flex-1 sm:flex-none px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-gold/50 min-w-0",children:[it.jsx("option",{value:"all",children:"All Status"}),it.jsx("option",{value:"pending",children:"Pending"}),it.jsx("option",{value:"approved",children:"Approved"}),it.jsx("option",{value:"rejected",children:"Rejected"})]})]})]}),it.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-1 md:grid-cols-3 gap-2 sm:gap-4 mb-6",children:[it.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-2 sm:p-4",children:it.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:gap-3 text-center sm:text-left",children:[it.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg mb-1 sm:mb-0",children:it.jsx(E,{className:"w-4 h-4 sm:w-5 sm:h-5 text-yellow-600"})}),it.jsxs("div",{className:"min-w-0",children:[it.jsx("p",{className:"text-xs sm:text-sm text-yellow-600 font-medium",children:"Pending"}),it.jsx("p",{className:"text-lg sm:text-xl font-bold text-yellow-700",children:a.filter(e=>"pending"===e.status).length})]})]})}),it.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-2 sm:p-4",children:it.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:gap-3 text-center sm:text-left",children:[it.jsx("div",{className:"p-2 bg-green-100 rounded-lg mb-1 sm:mb-0",children:it.jsx(C,{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-600"})}),it.jsxs("div",{className:"min-w-0",children:[it.jsx("p",{className:"text-xs sm:text-sm text-green-600 font-medium",children:"Approved"}),it.jsx("p",{className:"text-lg sm:text-xl font-bold text-green-700",children:a.filter(e=>"approved"===e.status).length})]})]})}),it.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-2 sm:p-4",children:it.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:gap-3 text-center sm:text-left",children:[it.jsx("div",{className:"p-2 bg-blue-100 rounded-lg mb-1 sm:mb-0",children:it.jsx(S,{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-600"})}),it.jsxs("div",{className:"min-w-0",children:[it.jsx("p",{className:"text-xs sm:text-sm text-blue-600 font-medium",children:"Total Days"}),it.jsx("p",{className:"text-lg sm:text-xl font-bold text-blue-700",children:a.filter(e=>"approved"===e.status).reduce((e,t)=>e+v(t.startDate,t.endDate),0)})]})]})})]})]}),it.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:0===j.length?it.jsxs("div",{className:"p-4 sm:p-8 text-center",children:[it.jsx(S,{className:"w-8 h-8 sm:w-12 sm:h-12 text-charcoal/30 mx-auto mb-4"}),it.jsx("h3",{className:"text-base sm:text-lg font-medium text-charcoal/70 mb-2",children:"No requests found"}),it.jsx("p",{className:"text-sm sm:text-base text-charcoal/50",children:"all"===x?"You haven't submitted any time off requests yet.":`No ${x} requests found.`})]}):it.jsxs(it.Fragment,{children:[it.jsx("div",{className:"hidden sm:block overflow-x-auto",children:it.jsxs("table",{className:"w-full min-w-full",children:[it.jsx("thead",{className:"bg-cream border-b border-gold/20",children:it.jsxs("tr",{children:[it.jsx("th",{className:"text-left py-4 px-4 lg:px-6 font-semibold text-charcoal text-sm",children:"Dates"}),it.jsx("th",{className:"text-left py-4 px-4 lg:px-6 font-semibold text-charcoal text-sm",children:"Type"}),it.jsx("th",{className:"text-left py-4 px-4 lg:px-6 font-semibold text-charcoal text-sm",children:"Reason"}),it.jsx("th",{className:"text-left py-4 px-4 lg:px-6 font-semibold text-charcoal text-sm",children:"Days"}),it.jsx("th",{className:"text-left py-4 px-4 lg:px-6 font-semibold text-charcoal text-sm",children:"Status"}),it.jsx("th",{className:"text-left py-4 px-4 lg:px-6 font-semibold text-charcoal text-sm",children:"Submitted"})]})}),it.jsx("tbody",{children:j.map((e,t)=>it.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors "+(t%2==0?"bg-white":"bg-gray-50/50"),children:[it.jsx("td",{className:"py-4 px-4 lg:px-6",children:it.jsxs("div",{className:"font-medium text-charcoal text-sm",children:[new Date(e.startDate).toLocaleDateString()," - ",new Date(e.endDate).toLocaleDateString()]})}),it.jsx("td",{className:"py-4 px-4 lg:px-6",children:it.jsx("span",{className:"capitalize text-charcoal/80 text-sm",children:e.type})}),it.jsx("td",{className:"py-4 px-4 lg:px-6",children:it.jsx("div",{className:"max-w-xs truncate text-charcoal/80 text-sm",title:e.reason,children:e.reason})}),it.jsx("td",{className:"py-4 px-4 lg:px-6",children:it.jsx("span",{className:"text-charcoal font-medium text-sm",children:v(e.startDate,e.endDate)})}),it.jsx("td",{className:"py-4 px-4 lg:px-6",children:it.jsxs("span",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-medium border ${f(e.status)}`,children:[y(e.status),e.status.charAt(0).toUpperCase()+e.status.slice(1)]})}),it.jsx("td",{className:"py-4 px-4 lg:px-6",children:it.jsx("span",{className:"text-charcoal/60 text-sm",children:new Date(e.submittedDate).toLocaleDateString()})})]},e.id))})]})}),it.jsx("div",{className:"block sm:hidden",children:it.jsx("div",{className:"p-3 space-y-3",children:j.map((e,t)=>it.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3 space-y-3",children:[it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium border ${f(e.status)}`,children:[y(e.status),e.status.charAt(0).toUpperCase()+e.status.slice(1)]}),it.jsx("span",{className:"text-xs text-charcoal/60 bg-gray-100 px-2 py-1 rounded-full capitalize font-medium",children:e.type})]}),it.jsxs("div",{className:"flex items-center gap-2",children:[it.jsx(S,{className:"w-4 h-4 text-charcoal/60 flex-shrink-0"}),it.jsxs("div",{children:[it.jsxs("p",{className:"text-sm font-medium text-charcoal",children:[new Date(e.startDate).toLocaleDateString()," - ",new Date(e.endDate).toLocaleDateString()]}),it.jsxs("p",{className:"text-xs text-charcoal/60",children:[v(e.startDate,e.endDate)," day",1!==v(e.startDate,e.endDate)?"s":""]})]})]}),it.jsxs("div",{className:"flex items-start gap-2",children:[it.jsx(p,{className:"w-4 h-4 text-charcoal/60 flex-shrink-0 mt-0.5"}),it.jsxs("div",{className:"flex-1 min-w-0",children:[it.jsx("p",{className:"text-sm font-medium text-charcoal/80 break-words",children:e.reason}),e.notes&&it.jsx("p",{className:"text-xs text-charcoal/60 mt-1 break-words",children:e.notes})]})]}),it.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-100",children:[it.jsx(E,{className:"w-4 h-4 text-charcoal/60 flex-shrink-0"}),it.jsxs("span",{className:"text-xs text-charcoal/60",children:["Submitted ",new Date(e.submittedDate).toLocaleDateString()]})]})]},e.id))})})]})})]})},Nl=({employeeData:e})=>it.jsxs("div",{className:"space-y-8",children:[it.jsx("div",{className:"bg-brand-navy rounded-xl shadow-lg overflow-hidden border border-gold/20",children:it.jsx("div",{className:"bg-gradient-to-r from-gold/10 to-transparent p-6",children:it.jsxs("div",{className:"flex items-start gap-4",children:[it.jsx("div",{className:"p-3 bg-gold/20 backdrop-blur-sm rounded-lg",children:it.jsx($e,{className:"w-6 h-6 text-gold"})}),it.jsxs("div",{className:"flex-1",children:[it.jsx("h3",{className:"text-xl font-bold text-gold mb-2",children:"Payslips & Earnings"}),it.jsx("p",{className:"text-cream/80 text-sm mb-4 leading-relaxed",children:"Access your pay stubs and earnings information"})]})]})})}),it.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-12",children:it.jsxs("div",{className:"max-w-md mx-auto text-center",children:[it.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-gold/20 to-gold/10 rounded-full mb-6",children:it.jsx(E,{className:"w-8 h-8 text-gold"})}),it.jsx("h2",{className:"text-2xl font-semibold text-charcoal mb-4",children:"Feature Under Development"}),it.jsx("p",{className:"text-gray-600 leading-relaxed",children:"We are currently developing the payslip management system. This feature will be available soon to provide you with convenient access to your pay stubs and earnings history."})]})})]}),wl=({employeeData:t})=>{const s=t?.id||t?.employee?.id,[a,r]=e.useState([]),[n,l]=e.useState([]),[o,i]=e.useState(!0),[c,d]=e.useState("ready"),[m,u]=e.useState(!1);e.useEffect(()=>{x();const e=setInterval(x,6e4);return()=>clearInterval(e)},[]);const x=async()=>{try{u(!0);const e=await zs.getAllOrders(),t=await zs.getAllMappings();r(e),l(t)}catch(e){console.error("Error loading employee orders:",e)}finally{i(!1),u(!1)}},h=async(e,t,a,r)=>{try{await zs.updateOrderStatus(e,t,r,a),"delivered"===t&&await zs.markDelivered(e,`Employee ${s}`,r,a),await x()}catch(n){console.error("Error updating order status:",n)}},g=n.map(e=>{const t=e.specific_order?.status||"pending";return{...e,orderNumber:e.order_number,orderStatus:t,orderTimestamp:e.specific_order?.created_at||e.created_at,mappingId:e.id}}),p=g.length,f=g.filter(e=>"ready"===e.orderStatus).length,y=g.filter(e=>"preparing"===e.orderStatus).length,j=g.filter(e=>"pending"===e.orderStatus).length,v=g.filter(e=>"delivered"===e.orderStatus).length,N=g.filter(e=>"completed"===e.orderStatus).length,S=g.filter(e=>"all"===c||("ready"===c?"ready"===e.orderStatus:"preparing"===c?"preparing"===e.orderStatus:"pending"===c?"pending"===e.orderStatus:"delivered"===c?"delivered"===e.orderStatus:"completed"!==c||"completed"===e.orderStatus)).sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt)),E=e=>{switch(e){case"pending":return"text-yellow-600 bg-yellow-100";case"preparing":return"text-blue-600 bg-blue-100";case"ready":return"text-purple-600 bg-purple-100";case"delivered":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}},A=e=>{switch(e){case"dining":return"text-purple-600 bg-purple-100";case"patio":return"text-green-600 bg-green-100";case"bar":return"text-orange-600 bg-orange-100";default:return"text-gray-600 bg-gray-100"}};return o?it.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:it.jsxs("div",{className:"flex items-center justify-center h-32",children:[it.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gold"}),it.jsx("span",{className:"ml-2 text-gray-600",children:"Loading orders..."})]})}):it.jsxs("div",{className:"bg-white rounded-lg shadow",children:[it.jsxs("div",{className:"p-4 sm:p-6 border-b border-gray-200 mobile-card-padding",children:[it.jsxs("div",{className:"mobile-header-container",children:[it.jsxs("div",{className:"w-full",children:[it.jsx("h3",{className:"text-base sm:text-lg font-semibold text-charcoal mobile-main-header",children:"Order Tracking"}),it.jsx("p",{className:"text-gray-600 text-sm mobile-subtitle",children:"Monitor and deliver customer orders"})]}),it.jsxs("button",{onClick:x,disabled:m,className:"flex items-center gap-2 px-3 py-2 bg-gold/10 text-gold rounded-md hover:bg-gold/20 transition-colors disabled:opacity-50 w-full sm:w-auto justify-center mobile-primary-button mt-3 sm:mt-0",children:[it.jsx(ge,{className:"w-4 h-4 "+(m?"animate-spin":"")}),"Refresh"]})]}),it.jsxs("div",{className:"grid grid-cols-3 gap-3 mt-4 role-assignment-stats-grid",children:[it.jsxs("div",{className:"bg-purple-50 p-3 rounded-lg text-center mobile-stat-content",children:[it.jsx("div",{className:"text-xl sm:text-2xl font-bold text-purple-600",children:f}),it.jsx("div",{className:"text-xs sm:text-sm text-purple-600",children:"Ready for Delivery"})]}),it.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg text-center mobile-stat-content",children:[it.jsx("div",{className:"text-xl sm:text-2xl font-bold text-blue-600",children:y}),it.jsx("div",{className:"text-xs sm:text-sm text-blue-600",children:"Being Prepared"})]}),it.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg text-center mobile-stat-content",children:[it.jsx("div",{className:"text-xl sm:text-2xl font-bold text-gray-600",children:p}),it.jsx("div",{className:"text-xs sm:text-sm text-gray-600",children:"Total Active"})]})]}),it.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:flex lg:flex-wrap gap-2 mt-4",children:[it.jsxs("button",{onClick:()=>d("pending"),className:"px-3 sm:px-4 py-2 rounded-md text-xs sm:text-sm font-medium transition-colors "+("pending"===c?"bg-yellow-100 text-yellow-700 border border-yellow-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:[it.jsx("span",{className:"hidden sm:inline",children:"Pending"}),it.jsx("span",{className:"sm:hidden",children:"Pend."}),it.jsxs("span",{className:"ml-1",children:["(",j,")"]})]}),it.jsxs("button",{onClick:()=>d("preparing"),className:"px-3 sm:px-4 py-2 rounded-md text-xs sm:text-sm font-medium transition-colors "+("preparing"===c?"bg-blue-100 text-blue-700 border border-blue-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:[it.jsx("span",{className:"hidden sm:inline",children:"Preparing"}),it.jsx("span",{className:"sm:hidden",children:"Prep."}),it.jsxs("span",{className:"ml-1",children:["(",y,")"]})]}),it.jsxs("button",{onClick:()=>d("ready"),className:"px-3 sm:px-4 py-2 rounded-md text-xs sm:text-sm font-medium transition-colors "+("ready"===c?"bg-purple-100 text-purple-700 border border-purple-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:["Ready (",f,")"]}),it.jsxs("button",{onClick:()=>d("delivered"),className:"px-3 sm:px-4 py-2 rounded-md text-xs sm:text-sm font-medium transition-colors "+("delivered"===c?"bg-green-100 text-green-700 border border-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:[it.jsx("span",{className:"hidden sm:inline",children:"Delivered"}),it.jsx("span",{className:"sm:hidden",children:"Deliv."}),it.jsxs("span",{className:"ml-1",children:["(",v,")"]})]}),it.jsxs("button",{onClick:()=>d("completed"),className:"px-3 sm:px-4 py-2 rounded-md text-xs sm:text-sm font-medium transition-colors "+("completed"===c?"bg-gray-100 text-gray-700 border border-gray-300":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:[it.jsx("span",{className:"hidden sm:inline",children:"Completed"}),it.jsx("span",{className:"sm:hidden",children:"Comp."}),it.jsxs("span",{className:"ml-1",children:["(",N,")"]})]}),it.jsxs("button",{onClick:()=>d("all"),className:"px-3 sm:px-4 py-2 rounded-md text-xs sm:text-sm font-medium transition-colors "+("all"===c?"bg-gray-200 text-gray-800 border border-gray-300":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:["All (",p,")"]})]})]}),it.jsx("div",{className:"p-4 sm:p-6",children:0===S.length?it.jsxs("div",{className:"text-center py-8",children:[it.jsx(pe,{className:"w-12 sm:w-16 h-12 sm:h-16 text-gray-300 mx-auto mb-4"}),it.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900 mb-2",children:"No orders found"}),it.jsxs("p",{className:"text-gray-500 text-sm",children:["ready"===c&&"No orders are ready for delivery right now.","preparing"===c&&"No orders are currently being prepared.","all"===c&&"No active orders at the moment."]})]}):it.jsx("div",{className:"space-y-3 sm:space-y-4",children:S.map(e=>{return it.jsxs("div",{className:"border-2 rounded-lg p-3 sm:p-4 transition-all "+("ready"===e.orderStatus?"border-purple-200 bg-purple-50":"border-gray-200 bg-white hover:border-gold/30"),children:[it.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[it.jsxs("div",{className:"flex items-start sm:items-center gap-3 sm:gap-4 flex-1",children:[it.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gold/20 rounded-full flex items-center justify-center flex-shrink-0 mobile-hide-hero-icon",children:it.jsx(pe,{className:"w-5 h-5 sm:w-6 sm:h-6 text-gold"})}),it.jsxs("div",{className:"flex-1",children:[it.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[it.jsxs("span",{className:"text-base sm:text-lg font-semibold text-charcoal",children:["Order #",e.orderNumber]}),it.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium ${E(e.orderStatus)}`,children:e.orderStatus})]}),it.jsx("div",{className:"flex items-center gap-2",children:it.jsxs("div",{className:"flex items-center gap-1 text-xs sm:text-sm text-gray-600",children:[it.jsx(k,{className:"w-3 h-3 sm:w-4 sm:h-4"}),it.jsxs("span",{children:["Table ",e.table_number||e.tableNumber]}),it.jsx("span",{className:`ml-2 px-2 py-0.5 rounded-full text-xs font-medium ${A(e.area)}`,children:e.area||"dining"})]})})]})]}),it.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:["preparing"===e.orderStatus&&it.jsxs("button",{onClick:()=>h(e.orderNumber,"ready",e.table_number||e.tableNumber,e.mappingId),className:"px-3 py-2 bg-purple-100 text-purple-700 rounded-md hover:bg-purple-200 transition-colors flex items-center gap-2 w-full sm:w-auto justify-center",title:"Mark as Ready",children:[it.jsx(w,{className:"w-4 h-4"}),it.jsx("span",{className:"hidden sm:inline",children:"Mark Ready"}),it.jsx("span",{className:"sm:hidden",children:"Ready"})]}),"ready"===e.orderStatus&&it.jsxs("button",{onClick:()=>h(e.orderNumber,"delivered",e.table_number||e.tableNumber,e.mappingId),className:"px-4 py-2 bg-green-100 text-green-700 rounded-md hover:bg-green-200 transition-colors flex items-center gap-2 font-medium w-full sm:w-auto justify-center",title:"Mark as Delivered",children:[it.jsx(ze,{className:"w-4 h-4"}),it.jsx("span",{children:"Deliver"})]}),"delivered"===e.orderStatus&&it.jsxs("div",{className:"flex items-center gap-2 text-green-600 justify-center sm:justify-start w-full sm:w-auto",children:[it.jsx(C,{className:"w-4 h-4 sm:w-5 sm:h-5"}),it.jsx("span",{className:"text-xs sm:text-sm font-medium",children:"Delivered"})]}),"pending"===e.orderStatus&&it.jsxs("div",{className:"flex items-center gap-2 text-yellow-600 justify-center sm:justify-end w-full sm:w-auto",children:[it.jsx(b,{className:"w-4 h-4 sm:w-5 sm:h-5"}),it.jsx("span",{className:"text-xs sm:text-sm",children:"Waiting..."})]}),"completed"===e.orderStatus&&it.jsxs("div",{className:"flex items-center gap-2 text-gray-600 justify-center sm:justify-start w-full sm:w-auto",children:[it.jsx(C,{className:"w-4 h-4 sm:w-5 sm:h-5"}),it.jsx("span",{className:"text-xs sm:text-sm font-medium",children:"Completed"})]})]})]}),it.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 flex flex-col sm:flex-row sm:items-center justify-between gap-1 sm:gap-0 text-xs sm:text-sm text-gray-500",children:[it.jsxs("span",{children:["Submitted: ",(t=e.createdAt,new Date(t).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))]}),e.updateCount>0&&it.jsxs("span",{className:"text-orange-600",children:["Updated ",e.updateCount," time(s)"]})]})]},`${e.mappingId||e.id}_${e.orderNumber}_${e.table_number||e.tableNumber}`);var t})})})]})},kl=({employeeData:t})=>{const[s,a]=e.useState([]),[r,n]=e.useState([]),[l,o]=e.useState(null),[i,c]=e.useState("overview"),[d,m]=e.useState(!1);e.useEffect(()=>{u()},[t]);const u=()=>{const e=localStorage.getItem("performanceReports");if(e){const s=JSON.parse(e).filter(e=>e.employeeId===t.id);a(s)}const s=localStorage.getItem("performanceInteractions");if(s){const e=JSON.parse(s).filter(e=>e.employeeId===t.id);n(e)}},x=0===s.length?null:s.sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt))[0],h=(()=>{if(s.length<2)return null;const e=s.sort((e,t)=>new Date(e.createdAt)-new Date(t.createdAt)),t=e[e.length-1],a=e[e.length-2],r=t.overallRating-a.overallRating;return{trend:r,isImproving:r>0,isDecreasing:r<0,isStable:0===r}})(),g=(()=>{if(0===s.length)return 0;return(s.reduce((e,t)=>e+t.overallRating,0)/s.length).toFixed(1)})(),p=[{key:"punctuality",label:"Punctuality & Attendance",icon:E},{key:"workQuality",label:"Work Quality & Accuracy",icon:De},{key:"teamwork",label:"Teamwork & Collaboration",icon:F},{key:"communication",label:"Communication Skills",icon:xe},{key:"customerService",label:"Customer Service",icon:Se},{key:"initiative",label:"Initiative & Problem Solving",icon:Ce}],f=(e,t="w-4 h-4")=>it.jsxs("div",{className:"flex items-center gap-1",children:[[1,2,3,4,5].map(s=>it.jsx(ue,{className:`${t} ${s<=e?"text-yellow-500 fill-current":"text-gray-300"}`},s)),it.jsx("span",{className:"text-sm font-medium text-charcoal ml-2",children:e})]});return it.jsxs("div",{className:"space-y-4 sm:space-y-8",children:[it.jsx("div",{className:"bg-brand-navy rounded-xl shadow-lg overflow-hidden border border-gold/20",children:it.jsx("div",{className:"bg-gradient-to-r from-gold/10 to-transparent p-4 sm:p-6",children:it.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[it.jsxs("div",{className:"flex items-start gap-3 sm:gap-4",children:[it.jsx("div",{className:"hidden xs:block p-2 sm:p-3 bg-gold/20 backdrop-blur-sm rounded-lg",children:it.jsx(Pe,{className:"w-5 h-5 sm:w-6 sm:h-6 text-gold"})}),it.jsxs("div",{className:"flex-1",children:[it.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gold mb-2",children:"Performance Dashboard"}),it.jsx("p",{className:"text-cream/80 text-xs sm:text-sm mb-4 leading-relaxed",children:"Track your performance reviews, ratings, and feedback from management. Use this information to understand your strengths and areas for growth."})]})]}),it.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 text-gold/90 text-xs sm:text-sm",children:[it.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[it.jsx(Se,{className:"w-3 h-3 sm:w-4 sm:h-4"}),it.jsxs("span",{children:[s.length," reviews"]})]}),it.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[it.jsx(xe,{className:"w-3 h-3 sm:w-4 sm:h-4"}),it.jsxs("span",{children:[r.length," interactions"]})]})]})]})})}),s.length>0?it.jsxs(it.Fragment,{children:[it.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 sm:gap-6",children:[it.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 border border-gray-100",children:[it.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[it.jsxs("div",{children:[it.jsx("p",{className:"text-xs sm:text-sm font-medium text-charcoal/70",children:"Current Rating"}),it.jsx("p",{className:"text-xl sm:text-2xl font-bold text-charcoal",children:x?.overallRating||"0.0"})]}),it.jsx("div",{className:"p-2 sm:p-3 bg-blue-100 rounded-xl",children:it.jsx(ue,{className:"w-5 h-5 sm:w-6 sm:h-6 text-blue-600"})})]}),it.jsx("div",{className:"flex items-center gap-1",children:f(x?.overallRating||0,"w-3 h-3")})]}),it.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 border border-gray-100",children:[it.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[it.jsxs("div",{children:[it.jsx("p",{className:"text-xs sm:text-sm font-medium text-charcoal/70",children:"Average Rating"}),it.jsx("p",{className:"text-xl sm:text-2xl font-bold text-charcoal",children:g})]}),it.jsx("div",{className:"p-2 sm:p-3 bg-green-100 rounded-xl",children:it.jsx(Ce,{className:"w-5 h-5 sm:w-6 sm:h-6 text-green-600"})})]}),it.jsxs("p",{className:"text-xs text-charcoal/60",children:["Across ",s.length," reviews"]})]}),it.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 border border-gray-100",children:[it.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[it.jsxs("div",{children:[it.jsx("p",{className:"text-xs sm:text-sm font-medium text-charcoal/70",children:"Trend"}),it.jsx("p",{className:"text-xl sm:text-2xl font-bold "+(h?.isImproving?"text-green-600":h?.isDecreasing?"text-red-600":"text-gray-600"),children:h?(h.isImproving?"+":"")+h.trend.toFixed(1):"N/A"})]}),it.jsx("div",{className:"p-2 sm:p-3 rounded-xl "+(h?.isImproving?"bg-green-100":h?.isDecreasing?"bg-red-100":"bg-gray-100"),children:it.jsx(Ce,{className:"w-5 h-5 sm:w-6 sm:h-6 "+(h?.isImproving?"text-green-600":h?.isDecreasing?"text-red-600":"text-gray-600")})})]}),it.jsx("p",{className:"text-xs text-charcoal/60",children:h?.isImproving?"Improving":h?.isDecreasing?"Needs attention":h?.isStable?"Stable performance":"Not enough data"})]}),it.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 border border-gray-100",children:[it.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[it.jsxs("div",{children:[it.jsx("p",{className:"text-xs sm:text-sm font-medium text-charcoal/70",children:"Last Review"}),it.jsx("p",{className:"text-xs sm:text-sm font-bold text-charcoal",children:x?new Date(x.createdAt).toLocaleDateString():"None"})]}),it.jsx("div",{className:"p-2 sm:p-3 bg-purple-100 rounded-xl",children:it.jsx(S,{className:"w-5 h-5 sm:w-6 sm:h-6 text-purple-600"})})]}),it.jsx("p",{className:"text-xs text-charcoal/60",children:x?x.type:"No reviews yet"})]})]}),it.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 border border-gray-100",children:[it.jsx("h3",{className:"text-base sm:text-lg font-semibold text-charcoal mb-4 sm:mb-6",children:"Performance by Category"}),it.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:p.map(e=>{const t=e.icon,a=(e=>0===s.length?0:(s.reduce((t,s)=>t+(s.ratings[e]||0),0)/s.length).toFixed(1))(e.key),r=x?.ratings[e.key]||0;return it.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 sm:p-4",children:[it.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-2 sm:mb-3",children:[it.jsx("div",{className:"p-1.5 sm:p-2 bg-white rounded-lg",children:it.jsx(t,{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-600"})}),it.jsxs("div",{className:"flex-1 min-w-0",children:[it.jsx("h4",{className:"font-medium text-charcoal text-xs sm:text-sm truncate",children:e.label}),it.jsxs("p",{className:"text-xs text-charcoal/60",children:["Average: ",a]})]})]}),it.jsxs("div",{className:"space-y-2",children:[it.jsxs("div",{className:"flex justify-between items-center text-xs",children:[it.jsx("span",{className:"text-charcoal/70",children:"Current"}),it.jsx("span",{className:"font-medium text-charcoal",children:r})]}),it.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:it.jsx("div",{className:"bg-gradient-to-r from-blue-400 to-blue-600 h-2 rounded-full transition-all duration-300",style:{width:r/5*100+"%"}})}),f(r,"w-3 h-3")]})]},e.key)})})]}),it.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-100 overflow-hidden",children:[it.jsxs("div",{className:"flex border-b border-gray-200",children:[it.jsx("button",{onClick:()=>c("reports"),className:"flex-1 px-3 sm:px-6 py-3 sm:py-4 text-xs sm:text-sm font-medium border-b-2 transition-colors "+("reports"===i?"border-gold text-gold bg-gold/5":"border-transparent text-charcoal/60 hover:text-charcoal hover:bg-gray-50"),children:it.jsxs("div",{className:"flex items-center justify-center gap-1 sm:gap-2",children:[it.jsx(Q,{className:"w-3 h-3 sm:w-4 sm:h-4"}),it.jsxs("span",{className:"hidden sm:inline",children:["Performance Reports (",s.length,")"]}),it.jsxs("span",{className:"sm:hidden",children:["Reports (",s.length,")"]})]})}),it.jsx("button",{onClick:()=>c("feedback"),className:"flex-1 px-3 sm:px-6 py-3 sm:py-4 text-xs sm:text-sm font-medium border-b-2 transition-colors "+("feedback"===i?"border-gold text-gold bg-gold/5":"border-transparent text-charcoal/60 hover:text-charcoal hover:bg-gray-50"),children:it.jsxs("div",{className:"flex items-center justify-center gap-1 sm:gap-2",children:[it.jsx(xe,{className:"w-3 h-3 sm:w-4 sm:h-4"}),it.jsxs("span",{className:"hidden sm:inline",children:["Feedback & Interactions (",r.length,")"]}),it.jsxs("span",{className:"sm:hidden",children:["Feedback (",r.length,")"]})]})})]}),it.jsxs("div",{className:"p-4 sm:p-6",children:["reports"===i&&it.jsx("div",{className:"space-y-6",children:0===s.length?it.jsxs("div",{className:"text-center py-12",children:[it.jsx(Q,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),it.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Performance Reports"}),it.jsx("p",{className:"text-gray-500",children:"Your performance reports will appear here once they are created by management."})]}):s.sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt)).map(e=>it.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[it.jsx("div",{className:"p-3 sm:p-4 bg-gray-50 cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>o(l===e.id?null:e.id),children:it.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-3",children:[it.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[it.jsxs("div",{className:"flex items-center gap-1",children:[it.jsx(ue,{className:"w-4 h-4 sm:w-5 sm:h-5 text-yellow-500 fill-current"}),it.jsx("span",{className:"font-bold text-charcoal text-base sm:text-lg",children:e.overallRating})]}),it.jsxs("div",{className:"min-w-0 flex-1",children:[it.jsx("h4",{className:"font-semibold text-charcoal text-sm sm:text-base truncate",children:e.type}),it.jsxs("p",{className:"text-xs sm:text-sm text-charcoal/60 truncate",children:[new Date(e.createdAt).toLocaleDateString(),"  by ",e.createdBy]})]})]}),it.jsxs("div",{className:"flex items-center gap-2",children:[it.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+(e.overallRating>=4.5?"bg-green-100 text-green-700":e.overallRating>=3.5?"bg-blue-100 text-blue-700":e.overallRating>=2.5?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"),children:e.overallRating>=4.5?"Excellent":e.overallRating>=3.5?"Good":e.overallRating>=2.5?"Satisfactory":"Needs Improvement"}),l===e.id?it.jsx(Ue,{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-400"}):it.jsx(R,{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-400"})]})]})}),l===e.id&&it.jsx("div",{className:"p-4 sm:p-6 bg-white border-t border-gray-200",children:it.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[it.jsxs("div",{children:[it.jsx("h5",{className:"font-semibold text-charcoal text-sm sm:text-base mb-3 sm:mb-4",children:"Individual Ratings"}),it.jsx("div",{className:"space-y-3",children:Object.entries(e.ratings).map(([e,t])=>{const s=p.find(t=>t.key===e);return s?it.jsxs("div",{className:"flex justify-between items-center",children:[it.jsx("span",{className:"text-xs sm:text-sm text-charcoal pr-2 truncate",children:s.label}),f(t,"w-3 h-3")]},e):null})})]}),it.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.strengths&&it.jsxs("div",{children:[it.jsx("h5",{className:"font-semibold text-charcoal text-sm mb-2",children:"Strengths & Achievements"}),it.jsx("p",{className:"text-xs sm:text-sm text-charcoal/80 bg-green-50 p-3 rounded border border-green-200",children:e.strengths})]}),e.areasForImprovement&&it.jsxs("div",{children:[it.jsx("h5",{className:"font-semibold text-charcoal text-sm mb-2",children:"Areas for Improvement"}),it.jsx("p",{className:"text-xs sm:text-sm text-charcoal/80 bg-yellow-50 p-3 rounded border border-yellow-200",children:e.areasForImprovement})]}),e.goals&&it.jsxs("div",{children:[it.jsx("h5",{className:"font-semibold text-charcoal text-sm mb-2",children:"Goals & Action Items"}),it.jsx("p",{className:"text-xs sm:text-sm text-charcoal/80 bg-blue-50 p-3 rounded border border-blue-200",children:e.goals})]}),e.notes&&it.jsxs("div",{children:[it.jsx("h5",{className:"font-semibold text-charcoal text-sm mb-2",children:"Additional Notes"}),it.jsx("p",{className:"text-xs sm:text-sm text-charcoal/80 bg-gray-50 p-3 rounded border border-gray-200",children:e.notes})]})]})]})})]},e.id))}),"feedback"===i&&it.jsx("div",{className:"space-y-4",children:0===r.length?it.jsxs("div",{className:"text-center py-12",children:[it.jsx(xe,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),it.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Feedback Yet"}),it.jsx("p",{className:"text-gray-500",children:"Feedback and interactions from your manager will appear here."})]}):it.jsxs(it.Fragment,{children:[r.sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt)).slice(0,d?r.length:3).map(e=>it.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 sm:p-4 border border-gray-200",children:[it.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-2 sm:gap-3 mb-3",children:[it.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[it.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("recognition"===e.type?"bg-green-100 text-green-700":"coaching"===e.type?"bg-blue-100 text-blue-700":"correction"===e.type?"bg-orange-100 text-orange-700":"development"===e.type?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-700"),children:e.type.charAt(0).toUpperCase()+e.type.slice(1)}),it.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("urgent"===e.priority?"bg-red-100 text-red-700":"high"===e.priority?"bg-orange-100 text-orange-700":"medium"===e.priority?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"),children:e.priority})]}),it.jsx("div",{className:"text-xs text-charcoal/60",children:new Date(e.createdAt).toLocaleDateString()})]}),it.jsx("h4",{className:"font-semibold text-charcoal text-sm sm:text-base mb-2",children:e.subject}),it.jsx("p",{className:"text-xs sm:text-sm text-charcoal/80 mb-3",children:e.message}),e.followUpRequired&&it.jsxs("div",{className:"flex items-center gap-2 text-xs text-orange-600",children:[it.jsx(E,{className:"w-3 h-3"}),it.jsxs("span",{children:["Follow-up required",e.followUpDate?` by ${new Date(e.followUpDate).toLocaleDateString()}`:""]})]})]},e.id)),r.length>3&&it.jsx("div",{className:"text-center",children:it.jsx("button",{onClick:()=>m(!d),className:"inline-flex items-center gap-2 px-4 py-2 bg-gold-gradient text-charcoal rounded-lg hover:shadow-lg transition-all text-sm font-medium",children:d?it.jsxs(it.Fragment,{children:[it.jsx(Ue,{className:"w-4 h-4"}),"Show Less"]}):it.jsxs(it.Fragment,{children:[it.jsx(R,{className:"w-4 h-4"}),"Show All (",r.length-3," more)"]})})})]})})]})]})]}):it.jsx("div",{className:"bg-white rounded-lg shadow-md p-12 text-center border border-gray-100",children:it.jsxs("div",{className:"max-w-md mx-auto",children:[it.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:it.jsx(Pe,{className:"w-8 h-8 text-gray-400"})}),it.jsx("h3",{className:"text-xl font-semibold text-charcoal mb-4",children:"No Performance Data Yet"}),it.jsx("p",{className:"text-charcoal/70 mb-6 leading-relaxed",children:"Your performance reports and feedback will appear here once your manager creates them. This section will help you track your progress and understand areas for growth."}),it.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[it.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"What you'll see here:"}),it.jsxs("ul",{className:"text-sm text-blue-700 text-left space-y-1",children:[it.jsx("li",{children:" Performance review ratings and feedback"}),it.jsx("li",{children:" Individual category breakdowns"}),it.jsx("li",{children:" Strengths and improvement areas"}),it.jsx("li",{children:" Goals and action items"}),it.jsx("li",{children:" Manager feedback and coaching"})]})]})]})})]})},Sl=({employeeData:t})=>{const[s,a]=e.useState([]),[r,n]=e.useState(!0),[l,o]=e.useState(null),[i,c]=e.useState(!1),[d,m]=e.useState(null),[u,x]=e.useState(!1),[h,g]=e.useState("all"),[f,b]=e.useState(""),y=[{id:"broken-equipment",label:"Broken Equipment",icon:be,color:"text-red-600",description:"Broken or malfunctioning restaurant equipment",examples:["Broken chairs/tables","Faulty lighting","Broken dishware","Damaged cleaning equipment"]},{id:"software-issue",label:"Software Issue",icon:ye,color:"text-blue-600",description:"Problems with software or digital systems",examples:["Login issues","System crashes","App not working","Website problems"]},{id:"pos-problem",label:"POS Problem",icon:je,color:"text-purple-600",description:"Issues with the Point of Sale system",examples:["POS not responding","Payment processing issues","Receipt printer problems","Card reader not working"]},{id:"kitchen-equipment",label:"Kitchen Equipment",icon:ve,color:"text-orange-600",description:"Kitchen appliances and equipment problems",examples:["Oven not heating","Refrigerator issues","Broken utensils","Dishwasher problems"]},{id:"facility-issue",label:"Facility Issue",icon:q,color:"text-yellow-600",description:"Building and facility maintenance issues",examples:["HVAC problems","Plumbing issues","Electrical problems","Structural damage"]},{id:"other",label:"Other",icon:Ne,color:"text-gray-600",description:"Any other issues not covered above",examples:["Safety concerns","Supply shortages","General maintenance","Other concerns"]}],j=[{id:"low",label:"Low",color:"bg-green-100 text-green-700",description:"Minor issue, can wait"},{id:"medium",label:"Medium",color:"bg-yellow-100 text-yellow-700",description:"Moderate issue, needs attention"},{id:"high",label:"High",color:"bg-orange-100 text-orange-700",description:"Important issue, affects operations"},{id:"urgent",label:"Urgent",color:"bg-red-100 text-red-700",description:"Critical issue, immediate attention needed"}],v=[{id:"open",label:"Open",color:"bg-blue-100 text-blue-700",icon:E},{id:"in-progress",label:"In Progress",color:"bg-yellow-100 text-yellow-700",icon:E},{id:"resolved",label:"Resolved",color:"bg-green-100 text-green-700",icon:C},{id:"closed",label:"Closed",color:"bg-gray-100 text-gray-700",icon:C}];e.useEffect(()=>{N()},[t]),e.useEffect(()=>{const e=setTimeout(()=>{N()},f?300:0);return()=>clearTimeout(e)},[h,f]);const N=async()=>{try{n(!0),o(null);const e={status:h};f&&f.trim()&&(e.search=f.trim());const t=await Tn.getEmployeeTickets(e);if(t?.success){const e=Tn.transformTicketsForFrontend(t.data.tickets||[]);a(e)}else o("Failed to load tickets")}catch(e){console.error("Error loading tickets:",e),o(Tn.handleApiError(e))}finally{n(!1)}},w=e=>y.find(t=>t.id===e)||y[y.length-1],k=()=>{let e=s.filter(e=>!e.archived);return f.trim()&&(e=e.filter(e=>{const t=(e.title||"").toLowerCase(),s=(e.description||"").toLowerCase(),a=w(e.category).label.toLowerCase();return t.includes(f.toLowerCase())||s.includes(f.toLowerCase())||a.includes(f.toLowerCase())})),"all"!==h&&(e=e.filter(e=>e.status===h)),e.sort((e,t)=>{const s={urgent:4,high:3,medium:2,low:1},a=(s[t.priority]||2)-(s[e.priority]||2);return 0!==a?a:new Date(t.createdAt)-new Date(e.createdAt)})},A=(()=>{const e=s.filter(e=>!e.archived);return{total:e.length,open:e.filter(e=>"open"===e.status).length,inProgress:e.filter(e=>"in-progress"===e.status).length,resolved:e.filter(e=>"resolved"===e.status).length,urgent:e.filter(e=>"urgent"===e.priority).length}})();return r?it.jsx("div",{className:"space-y-4 sm:space-y-8",children:it.jsxs("div",{className:"flex items-center justify-center py-12",children:[it.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gold"}),it.jsx("span",{className:"ml-3 text-charcoal",children:"Loading tickets..."})]})}):l?it.jsx("div",{className:"space-y-4 sm:space-y-8",children:it.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[it.jsxs("div",{className:"flex items-center",children:[it.jsx(q,{className:"w-5 h-5 text-red-600 mr-2"}),it.jsxs("span",{className:"text-red-800",children:["Error: ",l]})]}),it.jsx("button",{onClick:()=>{o(null),N()},className:"mt-3 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Retry"})]})}):it.jsxs("div",{className:"space-y-4 sm:space-y-8",children:[it.jsx("div",{className:"bg-brand-navy rounded-xl shadow-lg overflow-hidden border border-gold/20",children:it.jsx("div",{className:"bg-gradient-to-r from-gold/10 to-transparent p-4 sm:p-6",children:it.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[it.jsxs("div",{className:"flex items-start gap-3 sm:gap-4",children:[it.jsx("div",{className:"hidden xs:block p-2 sm:p-3 bg-gold/20 backdrop-blur-sm rounded-lg",children:it.jsx(fe,{className:"w-5 h-5 sm:w-6 sm:h-6 text-gold"})}),it.jsxs("div",{className:"flex-1",children:[it.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gold mb-2",children:"Support Tickets"}),it.jsx("p",{className:"text-cream/80 text-xs sm:text-sm mb-4 leading-relaxed",children:"Report broken equipment, software issues, POS problems, or any other concerns. Management will be notified and will work to resolve your issues quickly."})]})]}),it.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-4 text-gold/90 text-xs sm:text-sm",children:[it.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[it.jsx(fe,{className:"w-3 h-3 sm:w-4 sm:h-4"}),it.jsxs("span",{children:[A.total," tickets"]})]}),it.jsxs("button",{onClick:()=>c(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-gold text-brand-navy rounded-lg text-sm font-medium hover:bg-gold/90 transition-all duration-200 shadow-md hover:shadow-lg w-full sm:w-auto justify-center",children:[it.jsx(I,{className:"w-4 h-4"}),"New Ticket"]})]})]})})}),s.length>0&&it.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-3 sm:gap-4",children:[it.jsx("div",{className:"bg-white rounded-lg shadow-md p-3 sm:p-4 border border-gray-100",children:it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsxs("div",{children:[it.jsx("p",{className:"text-xs font-medium text-charcoal/70",children:"Total"}),it.jsx("p",{className:"text-lg sm:text-xl font-bold text-charcoal",children:A.total})]}),it.jsx("div",{className:"p-1.5 sm:p-2 bg-blue-100 rounded-lg",children:it.jsx(fe,{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-600"})})]})}),it.jsx("div",{className:"bg-white rounded-lg shadow-md p-3 sm:p-4 border border-gray-100",children:it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsxs("div",{children:[it.jsx("p",{className:"text-xs font-medium text-charcoal/70",children:"Open"}),it.jsx("p",{className:"text-lg sm:text-xl font-bold text-blue-600",children:A.open})]}),it.jsx("div",{className:"p-1.5 sm:p-2 bg-blue-100 rounded-lg",children:it.jsx(E,{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-600"})})]})}),it.jsx("div",{className:"bg-white rounded-lg shadow-md p-3 sm:p-4 border border-gray-100",children:it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsxs("div",{children:[it.jsx("p",{className:"text-xs font-medium text-charcoal/70",children:"In Progress"}),it.jsx("p",{className:"text-lg sm:text-xl font-bold text-yellow-600",children:A.inProgress})]}),it.jsx("div",{className:"p-1.5 sm:p-2 bg-yellow-100 rounded-lg",children:it.jsx(E,{className:"w-4 h-4 sm:w-5 sm:h-5 text-yellow-600"})})]})}),it.jsx("div",{className:"bg-white rounded-lg shadow-md p-3 sm:p-4 border border-gray-100",children:it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsxs("div",{children:[it.jsx("p",{className:"text-xs font-medium text-charcoal/70",children:"Resolved"}),it.jsx("p",{className:"text-lg sm:text-xl font-bold text-green-600",children:A.resolved})]}),it.jsx("div",{className:"p-1.5 sm:p-2 bg-green-100 rounded-lg",children:it.jsx(C,{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-600"})})]})}),it.jsx("div",{className:"bg-white rounded-lg shadow-md p-3 sm:p-4 border border-gray-100 col-span-2 sm:col-span-1",children:it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsxs("div",{children:[it.jsx("p",{className:"text-xs font-medium text-charcoal/70",children:"Urgent"}),it.jsx("p",{className:"text-lg sm:text-xl font-bold text-red-600",children:A.urgent})]}),it.jsx("div",{className:"p-1.5 sm:p-2 bg-red-100 rounded-lg",children:it.jsx(q,{className:"w-4 h-4 sm:w-5 sm:h-5 text-red-600"})})]})})]}),s.length>0&&it.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 border border-gray-100",children:it.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[it.jsx("div",{className:"flex-1",children:it.jsxs("div",{className:"relative",children:[it.jsx(K,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),it.jsx("input",{type:"text",placeholder:"Search tickets...",value:f,onChange:e=>b(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent"})]})}),it.jsx("div",{className:"flex gap-3",children:it.jsxs("select",{value:h,onChange:e=>g(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent bg-white text-sm",children:[it.jsx("option",{value:"all",children:"All Status"}),v.map(e=>it.jsx("option",{value:e.id,children:e.label},e.id))]})})]})}),it.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-100 overflow-hidden",children:[it.jsx("div",{className:"px-4 sm:px-6 py-3 sm:py-4 bg-gradient-to-r from-brand-navy to-brand-navy/90 border-b border-gold/20",children:it.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3",children:[it.jsxs("div",{children:[it.jsx("h3",{className:"text-base sm:text-lg font-semibold text-cream",children:"My Support Tickets"}),it.jsx("p",{className:"text-xs sm:text-sm text-cream/80",children:"Track and manage your submitted support requests"})]}),0===s.length&&it.jsxs("button",{onClick:()=>c(!0),className:"bg-gold text-brand-navy px-4 py-2 rounded-lg text-sm font-medium hover:bg-gold/90 transition-all flex items-center gap-2 w-full sm:w-auto justify-center",children:[it.jsx(I,{className:"w-4 h-4"}),"Submit First Ticket"]})]})}),0===s.length?it.jsxs("div",{className:"text-center py-12",children:[it.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:it.jsx(fe,{className:"w-8 h-8 text-gray-400"})}),it.jsx("h3",{className:"text-xl font-semibold text-charcoal mb-4",children:"No Tickets Yet"}),it.jsx("p",{className:"text-charcoal/70 mb-6 leading-relaxed max-w-md mx-auto",children:"When you encounter broken equipment, software issues, or other problems, submit a support ticket and management will help resolve it quickly."}),it.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-w-4xl mx-auto mb-8",children:y.slice(0,6).map(e=>{const t=e.icon;return it.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[it.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[it.jsx("div",{className:`p-2 rounded-lg bg-white ${e.color}`,children:it.jsx(t,{className:"w-5 h-5"})}),it.jsx("h4",{className:"font-semibold text-charcoal text-sm",children:e.label})]}),it.jsx("p",{className:"text-xs text-charcoal/70",children:e.description})]},e.id)})}),it.jsxs("button",{onClick:()=>c(!0),className:"inline-flex items-center gap-2 px-6 py-3 bg-gold-gradient text-charcoal rounded-lg font-medium hover:shadow-lg transition-all",children:[it.jsx(I,{className:"w-5 h-5"}),"Submit Your First Ticket"]})]}):it.jsxs("div",{className:"divide-y divide-gray-100",children:[k().map(e=>{const t=w(e.category),s=(a=e.priority,j.find(e=>e.id===a)||j[1]);var a;const r=(n=e.status,v.find(e=>e.id===n)||v[0]);var n;const l=t.icon;return it.jsx("div",{className:"p-4 sm:p-6 hover:bg-gold/5 transition-all duration-200",children:it.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3 sm:gap-4",children:[it.jsx("div",{className:`p-2 sm:p-3 rounded-lg bg-gray-100 ${t.color} flex-shrink-0 hidden sm:block`,children:it.jsx(l,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),it.jsxs("div",{className:"flex-1 min-w-0",children:[it.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2 sm:gap-0 mb-2",children:[it.jsxs("div",{className:"min-w-0 flex-1",children:[it.jsx("h4",{className:"font-semibold text-charcoal text-base sm:text-lg truncate",children:e.title}),it.jsxs("p",{className:"text-xs sm:text-sm text-charcoal/60 truncate",children:["Ticket #",e.id.slice(-8).toUpperCase(),"  ",t.label]})]}),it.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[it.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${s.color}`,children:s.label}),it.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${r.color}`,children:r.label})]})]}),it.jsx("p",{className:"text-charcoal/80 text-xs sm:text-sm mb-3 sm:mb-4 line-clamp-2",children:e.description}),it.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[it.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4 text-xs sm:text-sm text-charcoal/60",children:[it.jsxs("div",{className:"flex items-center gap-1",children:[it.jsx(S,{className:"w-3 h-3 sm:w-4 sm:h-4"}),it.jsx("span",{children:new Date(e.createdAt).toLocaleDateString()})]}),e.location&&it.jsxs("div",{className:"flex items-center gap-1",children:[it.jsx("span",{children:""}),it.jsx("span",{className:"truncate",children:e.location})]}),e.responses&&e.responses.length>0&&it.jsxs("div",{className:"flex items-center gap-1",children:[it.jsx(ne,{className:"w-3 h-3 sm:w-4 sm:h-4"}),it.jsxs("span",{children:[e.responses.filter(e=>!e.internal).length," responses"]})]})]}),it.jsxs("button",{onClick:()=>{m(e),x(!0)},className:"inline-flex items-center gap-2 px-3 py-1.5 bg-blue-100 text-blue-700 rounded-lg text-xs sm:text-sm font-medium hover:bg-blue-200 transition-all w-full sm:w-auto justify-center",children:[it.jsx(p,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"View Details"]})]})]})]})},e.id)}),0===k().length&&it.jsxs("div",{className:"text-center py-12",children:[it.jsx(K,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),it.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No tickets found"}),it.jsx("p",{className:"text-gray-500",children:"Try adjusting your search or filter criteria."})]})]})]}),i&&it.jsx(Cl,{categories:y,priorityLevels:j,employeeData:t,onClose:()=>c(!1),onSubmit:async e=>{try{o(null),n(!0);const t=await Tn.createTicket(e);if(t?.success){const e=Tn.transformTicketForFrontend(t.data);a(t=>[e,...t]),ft.notifyNewTicket(e),c(!1)}else o("Failed to create ticket")}catch(t){console.error("Error creating ticket:",t),o(Tn.handleApiError(t))}finally{n(!1)}}}),u&&d&&it.jsx(El,{ticket:d,categoryInfo:w(d.category),onClose:()=>{x(!1),m(null)}})]})},Cl=({categories:t,priorityLevels:s,employeeData:a,onClose:r,onSubmit:l})=>{const[o,i]=e.useState({category:"",priority:"medium",title:"",description:"",location:""}),[c,d]=e.useState(null);return n.createPortal(it.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",style:{zIndex:9999},onClick:e=>{e.target===e.currentTarget&&r()},children:it.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[95vh] flex flex-col overflow-hidden",children:[it.jsxs("div",{className:"flex justify-between items-start p-4 sm:p-6 border-b border-gray-200 flex-shrink-0",children:[it.jsxs("div",{children:[it.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-charcoal",children:"Submit Support Ticket"}),it.jsx("p",{className:"text-xs sm:text-sm text-charcoal/60 mt-1 hidden sm:block",children:"Fill out the form to report an issue"})]}),it.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 ml-2 flex-shrink-0",children:it.jsx(O,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]}),it.jsx("div",{className:"flex-1 p-4 sm:p-6 overflow-y-auto",children:it.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal/70 mb-2 sm:mb-3",children:"Issue Category *"}),it.jsx("div",{className:"grid grid-cols-1 gap-2 sm:gap-3",children:t.map(e=>{const s=e.icon,a=o.category===e.id;return it.jsxs("button",{onClick:()=>{return s=e.id,i({...o,category:s}),void d(t.find(e=>e.id===s));var s},className:"p-3 sm:p-4 rounded-lg border-2 text-left transition-all "+(a?"border-gold bg-gold/5":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"),children:[it.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-1 sm:mb-2",children:[it.jsx(s,{className:`w-4 h-4 sm:w-5 sm:h-5 ${e.color}`}),it.jsx("span",{className:"font-semibold text-charcoal text-sm sm:text-base",children:e.label})]}),it.jsx("p",{className:"text-xs text-charcoal/70",children:e.description})]},e.id)})}),c&&it.jsxs("div",{className:"mt-2 sm:mt-3 p-2 sm:p-3 bg-blue-50 rounded-lg border border-blue-200",children:[it.jsx("p",{className:"text-xs sm:text-sm font-medium text-blue-800 mb-1",children:"Common examples:"}),it.jsx("div",{className:"flex flex-wrap gap-1",children:c.examples.map((e,t)=>it.jsx("span",{className:"text-xs bg-white px-2 py-1 rounded text-blue-700 border border-blue-200",children:e},t))})]})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal/70 mb-2 sm:mb-3",children:"Priority Level"}),it.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3",children:s.map(e=>it.jsxs("button",{onClick:()=>i({...o,priority:e.id}),className:"p-2 sm:p-3 rounded-lg border-2 text-left transition-all "+(o.priority===e.id?"border-gold bg-gold/5":"border-gray-200 hover:border-gray-300"),children:[it.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium mb-1 sm:mb-2 ${e.color}`,children:e.label}),it.jsx("p",{className:"text-xs text-charcoal/70",children:e.description})]},e.id))})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal/70 mb-2",children:"Issue Title *"}),it.jsx("input",{type:"text",value:o.title,onChange:e=>i({...o,title:e.target.value}),placeholder:"Brief description of the issue",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent text-sm"})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal/70 mb-2",children:"Detailed Description *"}),it.jsx("textarea",{value:o.description,onChange:e=>i({...o,description:e.target.value}),placeholder:"Provide detailed information about the issue, including what happened, when it occurred, and any steps you've already taken...",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent text-sm resize-none"})]}),it.jsxs("div",{children:[it.jsx("label",{className:"block text-sm font-medium text-charcoal/70 mb-2",children:"Location (Optional)"}),it.jsx("input",{type:"text",value:o.location,onChange:e=>i({...o,location:e.target.value}),placeholder:"Specific location (e.g., 'Kitchen prep area', 'Front register #2')",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent text-sm"})]})]})}),it.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-end gap-2 sm:gap-3 p-4 sm:p-6 border-t border-gray-200 flex-shrink-0",children:[it.jsx("button",{onClick:r,className:"px-4 py-2 bg-gray-200 text-charcoal rounded-lg hover:bg-gray-300 transition-colors text-sm order-2 sm:order-1",children:"Cancel"}),it.jsxs("button",{onClick:()=>{o.category&&o.title.trim()&&o.description.trim()?l(o):alert("Please fill in all required fields")},className:"px-4 sm:px-6 py-2 bg-gold-gradient text-charcoal rounded-lg hover:shadow-lg transition-all flex items-center gap-2 justify-center text-sm font-medium order-1 sm:order-2",children:[it.jsx(fe,{className:"w-4 h-4"}),"Submit Ticket"]})]})]})}),document.body)},El=({ticket:e,categoryInfo:t,onClose:s})=>{const a=t.icon,r=(e=>{const t=[{id:"open",label:"Open",color:"bg-blue-100 text-blue-700"},{id:"in-progress",label:"In Progress",color:"bg-yellow-100 text-yellow-700"},{id:"resolved",label:"Resolved",color:"bg-green-100 text-green-700"},{id:"closed",label:"Closed",color:"bg-gray-100 text-gray-700"}];return t.find(t=>t.id===e)||t[0]})(e.status),l=(e=>{const t=[{id:"low",label:"Low",color:"bg-green-100 text-green-700"},{id:"medium",label:"Medium",color:"bg-yellow-100 text-yellow-700"},{id:"high",label:"High",color:"bg-orange-100 text-orange-700"},{id:"urgent",label:"Urgent",color:"bg-red-100 text-red-700"}];return t.find(t=>t.id===e)||t[1]})(e.priority);return n.createPortal(it.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",style:{zIndex:9999},onClick:e=>{e.target===e.currentTarget&&s()},children:it.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-3xl max-h-[95vh] flex flex-col overflow-hidden",children:[it.jsxs("div",{className:"flex justify-between items-start p-4 sm:p-6 border-b border-gray-200 flex-shrink-0",children:[it.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[it.jsx("div",{className:`p-2 rounded-lg bg-gray-100 ${t.color} flex-shrink-0 hidden sm:block`,children:it.jsx(a,{className:"w-6 h-6"})}),it.jsxs("div",{className:"min-w-0",children:[it.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-charcoal truncate",children:e.title}),it.jsxs("p",{className:"text-xs sm:text-sm text-charcoal/60",children:["Ticket #",e.id.slice(-8).toUpperCase()]})]})]}),it.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 ml-2 flex-shrink-0",children:it.jsx(O,{className:"w-6 h-6"})})]}),it.jsx("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:it.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[it.jsxs("div",{className:"bg-gray-50 p-3 sm:p-4 rounded-lg",children:[it.jsx("h4",{className:"font-semibold text-charcoal mb-3 text-sm sm:text-base",children:"Ticket Information"}),it.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[it.jsxs("div",{children:[it.jsx("span",{className:"text-xs sm:text-sm font-medium text-charcoal/70",children:"Category:"}),it.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[it.jsx(a,{className:`w-3 h-3 sm:w-4 sm:h-4 ${t.color} hidden sm:inline`}),it.jsx("span",{className:"text-xs sm:text-sm text-charcoal",children:t.label})]})]}),it.jsxs("div",{children:[it.jsx("span",{className:"text-xs sm:text-sm font-medium text-charcoal/70",children:"Priority:"}),it.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium mt-1 ${l.color}`,children:l.label})]}),it.jsxs("div",{children:[it.jsx("span",{className:"text-xs sm:text-sm font-medium text-charcoal/70",children:"Status:"}),it.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium mt-1 ${r.color}`,children:r.label})]}),it.jsxs("div",{children:[it.jsx("span",{className:"text-xs sm:text-sm font-medium text-charcoal/70",children:"Submitted:"}),it.jsx("p",{className:"text-xs sm:text-sm text-charcoal mt-1",children:new Date(e.createdAt).toLocaleDateString()})]}),e.location&&it.jsxs("div",{className:"col-span-1 sm:col-span-2",children:[it.jsx("span",{className:"text-xs sm:text-sm font-medium text-charcoal/70",children:"Location:"}),it.jsx("p",{className:"text-xs sm:text-sm text-charcoal mt-1",children:e.location})]}),e.updatedAt&&e.updatedAt!==e.createdAt&&it.jsxs("div",{className:"col-span-1 sm:col-span-2",children:[it.jsx("span",{className:"text-xs sm:text-sm font-medium text-charcoal/70",children:"Last Updated:"}),it.jsxs("p",{className:"text-xs sm:text-sm text-charcoal mt-1",children:[new Date(e.updatedAt).toLocaleDateString()," at ",new Date(e.updatedAt).toLocaleTimeString()]})]})]})]}),it.jsxs("div",{children:[it.jsx("h4",{className:"font-semibold text-charcoal mb-3 text-sm sm:text-base",children:"Description"}),it.jsx("p",{className:"text-charcoal/80 bg-gray-50 p-3 sm:p-4 rounded-lg text-xs sm:text-sm leading-relaxed",children:e.description})]}),("resolved"===e.status||"closed"===e.status)&&it.jsxs("div",{className:"bg-green-50 p-3 sm:p-4 rounded-lg border border-green-200",children:[it.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[it.jsx(C,{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-600"}),it.jsx("h4",{className:"font-semibold text-green-800 text-sm sm:text-base",children:"Ticket Resolved"})]}),it.jsx("p",{className:"text-xs sm:text-sm text-green-700",children:"This issue has been addressed by management. If you're still experiencing problems, please submit a new ticket."})]}),e.responses&&e.responses.length>0&&it.jsxs("div",{children:[it.jsx("h4",{className:"font-semibold text-charcoal mb-3 text-sm sm:text-base",children:"Management Responses"}),it.jsx("div",{className:"space-y-3",children:e.responses.filter(e=>!e.internal).map(e=>it.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 sm:p-4",children:[it.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-1 sm:gap-0 mb-2",children:[it.jsx("span",{className:"font-medium text-charcoal text-xs sm:text-sm",children:e.respondedBy}),it.jsx("span",{className:"text-xs text-charcoal/60",children:new Date(e.respondedAt).toLocaleString()})]}),it.jsx("p",{className:"text-charcoal/80 text-xs sm:text-sm leading-relaxed",children:e.message})]},e.id))})]})]})})]})}),document.body)},Al=()=>{const{user:t}=wt(),[s,a]=e.useState([]),[r,n]=e.useState([]),[l,o]=e.useState([]),[i,c]=e.useState({}),[d,m]=e.useState("overview");e.useEffect(()=>{u()},[t?.id]);const u=()=>{t?.id&&(a(On.getShoutoutsByEmployee(t.id)),n(On.getRewardsByEmployee(t.id)),o(On.getEmployeeBadges(t.id)),c(On.getEmployeePerformance(t.id)))},x=e=>{const t=new Date(e),s=(new Date-t)/36e5;return s<1?"Just now":s<24?`${Math.floor(s)}h ago`:s<168?`${Math.floor(s/24)}d ago`:t.toLocaleDateString()},h=e=>{const t=On.getShoutoutCategories().find(t=>t.id===e);return t?t.icon:""},g=e=>{const t=On.getShoutoutCategories().find(t=>t.id===e);return t?t.name:"Recognition"},p=({icon:e,title:t,value:s,subtitle:a,color:r="blue"})=>it.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6 hover:shadow-xl transition-all duration-300",children:[it.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[it.jsx("div",{className:`p-2 sm:p-3 rounded-full bg-${r}-100 flex-shrink-0`,children:it.jsx(e,{className:`w-6 h-6 sm:w-8 sm:h-8 text-${r}-600`})}),it.jsxs("div",{className:"text-right flex-1",children:[it.jsx("p",{className:"text-xl sm:text-3xl font-bold text-gray-900",children:s}),it.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:t})]})]}),a&&it.jsx("p",{className:"text-xs sm:text-sm text-gray-500 border-t pt-2 sm:pt-3 break-words",children:a})]}),f=({shoutout:e})=>it.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6 mb-4 hover:shadow-xl transition-all duration-300",children:[it.jsxs("div",{className:"flex items-start justify-between mb-4 gap-3",children:[it.jsxs("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[it.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:it.jsx(ne,{className:"w-5 h-5 sm:w-6 sm:h-6 text-blue-600"})}),it.jsxs("div",{className:"flex-1 min-w-0",children:[it.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[it.jsx("span",{className:"text-xl sm:text-2xl flex-shrink-0",children:h(e.category)}),it.jsx("h3",{className:"font-semibold text-gray-900 text-sm sm:text-base truncate",children:g(e.category)})]}),it.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 break-words",children:["Recognized by ",e.recognizedBy,"  ",x(e.createdAt)]})]})]}),e.likes>0&&it.jsxs("div",{className:"flex items-center gap-1 text-red-500 flex-shrink-0",children:[it.jsx(Ae,{className:"w-4 h-4 fill-current"}),it.jsx("span",{className:"text-sm font-medium",children:e.likes})]})]}),it.jsx("p",{className:"text-sm sm:text-base text-gray-700 leading-relaxed break-words",children:e.message})]}),b=({reward:e})=>it.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6 mb-4 hover:shadow-xl transition-all duration-300",children:[it.jsxs("div",{className:"flex items-start justify-between mb-4 gap-3",children:[it.jsxs("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[it.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:it.jsx(ke,{className:"w-5 h-5 sm:w-6 sm:h-6 text-green-600"})}),it.jsxs("div",{className:"flex-1 min-w-0",children:[it.jsx("h3",{className:"font-semibold text-gray-900 mb-1 text-sm sm:text-base break-words",children:e.name}),it.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 break-words",children:["Given by ",e.givenBy,"  ",x(e.createdAt)]})]})]}),it.jsx("div",{className:"flex items-start gap-2 flex-shrink-0",children:it.jsx("span",{className:"px-2 sm:px-3 py-1 rounded-full text-xs font-medium whitespace-nowrap "+("pending"===e.status?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:"pending"===e.status?"Available":"Redeemed"})})]}),it.jsx("div",{className:"bg-green-50 rounded-lg p-3 sm:p-4 mb-4",children:it.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[it.jsx("span",{className:"text-2xl sm:text-3xl flex-shrink-0",children:e.icon}),it.jsxs("div",{className:"flex-1 min-w-0",children:[it.jsx("p",{className:"font-medium text-green-800 text-sm sm:text-base break-words",children:e.name}),it.jsx("p",{className:"text-xs sm:text-sm text-green-600 break-words",children:e.description})]})]})}),it.jsx("p",{className:"text-sm sm:text-base text-gray-700 mb-4 break-words",children:e.reason}),"pending"===e.status&&it.jsx("button",{onClick:()=>{return s=e.id,On.redeemReward(s,t.id),void u();var s},className:"w-full bg-green-600 text-white py-2 sm:py-3 px-4 rounded-lg hover:bg-green-700 font-medium transition-colors text-sm sm:text-base",children:"Redeem Now"}),"redeemed"===e.status&&e.redeemedAt&&it.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:it.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[it.jsx(C,{className:"w-4 h-4 sm:w-5 sm:h-5"}),it.jsxs("span",{className:"font-medium text-xs sm:text-sm",children:["Redeemed on ",x(e.redeemedAt)]})]})})]}),y=({achievement:e})=>it.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6 mb-4 hover:shadow-xl transition-all duration-300",children:[it.jsx("div",{className:"flex items-start justify-between mb-4",children:it.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[it.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0",children:it.jsx(Se,{className:"w-5 h-5 sm:w-6 sm:h-6 text-purple-600"})}),it.jsxs("div",{className:"flex-1 min-w-0",children:[it.jsx("h3",{className:"font-semibold text-gray-900 mb-1 text-sm sm:text-base break-words",children:"Badge Earned!"}),it.jsxs("p",{className:"text-xs sm:text-sm text-gray-500",children:["Awarded by ",e.awardedBy,"  ",x(e.awardedAt)]})]})]})}),it.jsx("div",{className:`bg-${e.badge.color}-50 border-2 border-${e.badge.color}-200 rounded-lg p-3 sm:p-4 mb-4`,children:it.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[it.jsx("span",{className:"text-3xl sm:text-4xl flex-shrink-0",children:e.badge.icon}),it.jsxs("div",{className:"flex-1 min-w-0",children:[it.jsx("h4",{className:"font-bold text-gray-800 text-base sm:text-lg break-words",children:e.badge.name}),it.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-1 sm:mb-2 break-words",children:e.badge.description}),it.jsxs("p",{className:"text-xs text-gray-500 break-words",children:["Criteria: ",e.badge.criteria]})]})]})}),it.jsx("p",{className:"text-sm sm:text-base text-gray-700 break-words",children:e.reason})]}),j=r.filter(e=>"pending"===e.status);return it.jsxs("div",{className:"max-w-6xl mx-auto p-3 sm:p-6",children:[it.jsxs("div",{className:"mb-6 sm:mb-8",children:[it.jsx("h1",{className:"text-xl sm:text-3xl font-bold text-gray-900 mb-1 sm:mb-2",children:"My Recognition"}),it.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Your achievements, rewards, and performance highlights"})]}),it.jsx("div",{className:"flex flex-wrap gap-1 sm:gap-2 mb-6 sm:mb-8 border-b border-gray-200 overflow-x-auto",children:[{id:"overview",name:"Overview",icon:Ce},{id:"shoutouts",name:"Shout-outs",icon:ne},{id:"rewards",name:"Rewards",icon:ke},{id:"badges",name:"Badges",icon:Se}].map(e=>it.jsxs("button",{onClick:()=>m(e.id),className:"flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-2 sm:py-3 rounded-t-lg transition-colors text-xs sm:text-sm whitespace-nowrap "+(d===e.id?"border-b-2 border-blue-500 text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:[it.jsx(e.icon,{className:"hidden xs:block w-3 h-3 sm:w-5 sm:h-5"}),e.name]},e.id))}),"overview"===d&&it.jsxs("div",{className:"space-y-8",children:[it.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[it.jsx(p,{icon:ue,title:"Recognition Points",value:i.totalPoints||0,subtitle:"Earned from all achievements",color:"yellow"}),it.jsx(p,{icon:ne,title:"Shout-outs Received",value:i.totalShoutouts||0,subtitle:"Public recognition from managers",color:"blue"}),it.jsx(p,{icon:ke,title:"Rewards Earned",value:i.totalRewards||0,subtitle:`${j.length} available to redeem`,color:"green"}),it.jsx(p,{icon:Se,title:"Badges Earned",value:i.totalBadges||0,subtitle:"Special achievements unlocked",color:"purple"})]}),j.length>0&&it.jsx("div",{className:"bg-gradient-to-r from-green-50 to-green-100 border-l-4 border-green-500 rounded-xl p-4 sm:p-6",children:it.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[it.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0",children:it.jsx(ke,{className:"w-4 h-4 sm:w-6 sm:h-6 text-white"})}),it.jsxs("div",{className:"flex-1 min-w-0",children:[it.jsxs("h3",{className:"text-base sm:text-lg font-bold text-green-800 break-words",children:["You have ",j.length," reward",1!==j.length?"s":""," to redeem!"]}),it.jsx("p",{className:"text-sm sm:text-base text-green-700 break-words",children:"Click the Rewards tab to view and redeem your available rewards."})]})]})}),it.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-4 sm:p-6",children:[it.jsx("h2",{className:"text-lg sm:text-2xl font-bold text-gray-900 mb-4 sm:mb-6",children:"Recent Recognition"}),it.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[i.activities?.slice(0,5).map((e,t)=>it.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 p-3 sm:p-4 bg-gray-50 rounded-xl",children:[it.jsxs("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full flex items-center justify-center flex-shrink-0 "+("shoutout_received"===e.action?"bg-blue-100":"reward_received"===e.action?"bg-green-100":"badge_earned"===e.action?"bg-purple-100":"bg-gray-100"),children:["shoutout_received"===e.action&&it.jsx(ne,{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-600"}),"reward_received"===e.action&&it.jsx(ke,{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-600"}),"badge_earned"===e.action&&it.jsx(Se,{className:"w-4 h-4 sm:w-5 sm:h-5 text-purple-600"}),"reward_redeemed"===e.action&&it.jsx(C,{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-600"})]}),it.jsxs("div",{className:"flex-1 min-w-0",children:[it.jsxs("p",{className:"font-medium text-gray-900 text-sm sm:text-base break-words",children:["shoutout_received"===e.action&&`Received shout-out from ${e.data.recognizedBy}`,"reward_received"===e.action&&"Earned a new reward","badge_earned"===e.action&&`Earned badge: ${e.data.badgeName}`,"reward_redeemed"===e.action&&"Redeemed a reward"]}),it.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:x(e.timestamp)})]})]},e.id)),(!i.activities||0===i.activities.length)&&it.jsxs("div",{className:"text-center py-6 sm:py-8",children:[it.jsx(Ee,{className:"w-10 h-10 sm:w-12 sm:h-12 mx-auto text-gray-300 mb-3"}),it.jsx("p",{className:"text-sm sm:text-base text-gray-500",children:"No recent activity yet. Keep up the great work!"})]})]})]})]}),"shoutouts"===d&&it.jsx("div",{className:"space-y-6",children:s.length>0?it.jsx("div",{className:"space-y-4",children:s.sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt)).map(e=>it.jsx(f,{shoutout:e},e.id))}):it.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 sm:p-12 text-center",children:[it.jsx(ne,{className:"w-12 h-12 sm:w-16 sm:h-16 mx-auto text-gray-300 mb-4"}),it.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-600 mb-2",children:"No Shout-outs Yet"}),it.jsx("p",{className:"text-sm sm:text-base text-gray-500",children:"Keep up the excellent work and you'll receive recognition soon!"})]})}),"rewards"===d&&it.jsx("div",{className:"space-y-6",children:r.length>0?it.jsx("div",{className:"space-y-4",children:r.sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt)).map(e=>it.jsx(b,{reward:e},e.id))}):it.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 sm:p-12 text-center",children:[it.jsx(ke,{className:"w-12 h-12 sm:w-16 sm:h-16 mx-auto text-gray-300 mb-4"}),it.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-600 mb-2",children:"No Rewards Yet"}),it.jsx("p",{className:"text-sm sm:text-base text-gray-500",children:"Continue your outstanding performance to earn rewards!"})]})}),"badges"===d&&it.jsx("div",{className:"space-y-6",children:l.length>0?it.jsx("div",{className:"space-y-4",children:l.sort((e,t)=>new Date(t.awardedAt)-new Date(e.awardedAt)).map(e=>it.jsx(y,{achievement:e},e.id))}):it.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 sm:p-12 text-center",children:[it.jsx(Se,{className:"w-12 h-12 sm:w-16 sm:h-16 mx-auto text-gray-300 mb-4"}),it.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-600 mb-2",children:"No Badges Yet"}),it.jsx("p",{className:"text-sm sm:text-base text-gray-500",children:"Work towards earning your first achievement badge!"})]})})]})},Tl=({employeeData:t})=>{const[s,a]=e.useState([]);e.useEffect(()=>{a(Jt())},[]);const r=t?.assignments||{departments:[],roles:[],lastModified:null},n=r.departments.length>0,l=(()=>{if(!n)return[];const e=[];return r.departments.forEach(t=>{const a=s.find(e=>e.id===t);if(a){const s=Kt(t),n=r.roles.filter(e=>Kt(t).some(s=>Yt(t,s.id).some(t=>t.name===e)));e.push({department:a,areas:s.filter(e=>Yt(t,e.id).some(e=>r.roles.includes(e.name))),roles:n})}}),e})();return it.jsxs("div",{className:"space-y-6",children:[it.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[it.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[it.jsx("div",{className:"p-3 bg-gold/10 rounded-lg mobile-hide-hero-icon",children:it.jsx(J,{className:"w-6 h-6 text-gold"})}),it.jsxs("div",{children:[it.jsx("h2",{className:"text-xl font-bold font-display text-charcoal",children:"My Role Assignments"}),it.jsx("p",{className:"text-charcoal/60",children:"Your current departments, areas, and roles assigned by management"})]})]}),it.jsx("div",{className:"flex items-center gap-2 mb-4",children:n?it.jsxs(it.Fragment,{children:[it.jsx(C,{className:"w-5 h-5 text-green-600"}),it.jsx("span",{className:"text-green-700 font-medium",children:"Assignments Active"})]}):it.jsxs(it.Fragment,{children:[it.jsx(q,{className:"w-5 h-5 text-amber-600"}),it.jsx("span",{className:"text-amber-700 font-medium",children:"No Assignments Yet"})]})}),n&&r.lastModified&&it.jsx("div",{className:"text-right mb-4",children:it.jsxs("span",{className:"text-sm text-charcoal/60",children:["Last updated ",new Date(r.lastModified).toLocaleDateString()]})}),n&&(()=>{const e=l.reduce((e,t)=>e+t.areas.length,0);return it.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mt-6",children:[it.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded-lg border border-purple-200",children:[it.jsx("div",{className:"text-xl font-bold text-purple-700",children:r.departments.length}),it.jsxs("div",{className:"text-xs text-purple-600 font-medium",children:["Department",1!==r.departments.length?"s":""]})]}),it.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg border border-blue-200",children:[it.jsx("div",{className:"text-xl font-bold text-blue-700",children:e}),it.jsxs("div",{className:"text-xs text-blue-600 font-medium",children:["Area",1!==e?"s":""]})]}),it.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg border border-green-200",children:[it.jsx("div",{className:"text-xl font-bold text-green-700",children:r.roles.length}),it.jsxs("div",{className:"text-xs text-green-600 font-medium",children:["Role",1!==r.roles.length?"s":""]})]})]})})()]}),n?it.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:l.map((e,t)=>it.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[it.jsx("div",{className:"px-4 py-3 "+("FOH"===e.department.id?"bg-purple-50 border-b border-purple-200":"bg-orange-50 border-b border-orange-200"),children:it.jsxs("div",{className:"flex items-center gap-2",children:[it.jsx("div",{className:`p-1.5 rounded ${"FOH"===e.department.id?"bg-purple-100":"bg-orange-100"} mobile-hide-section-header-icon`,children:it.jsx(J,{className:"w-4 h-4 "+("FOH"===e.department.id?"text-purple-600":"text-orange-600")})}),it.jsx("div",{children:it.jsx("h3",{className:"text-sm font-semibold "+("FOH"===e.department.id?"text-purple-900":"text-orange-900"),children:e.department.name})})]})}),it.jsx("div",{className:"p-3",children:it.jsx("div",{className:"space-y-3",children:e.areas.map((t,s)=>{const a=Yt(e.department.id,t.id).filter(e=>r.roles.includes(e.name));return it.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[it.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[it.jsx(k,{className:"w-3 h-3 text-blue-600 flex-shrink-0"}),it.jsx("span",{className:"text-sm font-medium text-charcoal",children:t.name})]}),it.jsxs("div",{className:"space-y-1",children:[it.jsx("div",{className:"text-xs font-medium text-gray-600 mb-1",children:"Assigned Roles:"}),it.jsx("div",{className:"flex flex-wrap gap-1.5",children:a.map(e=>it.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded bg-green-50 text-green-700 border border-green-200",children:[it.jsx(Be,{className:"w-2 h-2"}),e.name]},e.id))})]})]},t.id)})})})]},t))}):it.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8 text-center",children:it.jsxs("div",{className:"max-w-md mx-auto",children:[it.jsx("div",{className:"p-4 bg-amber-50 rounded-full w-fit mx-auto mb-4",children:it.jsx($,{className:"w-8 h-8 text-amber-600"})}),it.jsx("h3",{className:"text-lg font-semibold text-charcoal mb-2",children:"No Role Assignments Yet"}),it.jsx("p",{className:"text-charcoal/60 mb-4",children:"Your manager hasn't assigned you to any departments or roles yet. Role assignments will appear here once they're made by management."}),it.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-left",children:[it.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"What happens when you get assigned?"}),it.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[it.jsx("li",{children:" You'll see your assigned departments (FOH/BOH)"}),it.jsx("li",{children:" Your specific work areas will be listed"}),it.jsx("li",{children:" All your job roles will be displayed"}),it.jsx("li",{children:" This will affect your scheduling eligibility"})]})]})]})})]})},_l=({employeeData:t,onClockAction:s})=>{const[a,r]=e.useState(null),[n,l]=e.useState(null),[o,i]=e.useState([]),[c,d]=e.useState(new Date);e.useEffect(()=>{const e=setInterval(()=>{d(new Date)},6e4);return()=>clearInterval(e)},[]),e.useEffect(()=>{if(!t)return;const e=()=>{const e=zn(t.id);if(r(e),e?.isCurrentlyClocked){const e=$n(t);l(e)}else l(null);const s=Ln(t);i(s)};e();const s=setInterval(e,3e4);return()=>clearInterval(s)},[t]);const m=e=>{const[t,s]=e.split(":"),a=parseInt(t);return`${0===a?12:a>12?a-12:a}:${s} ${a>=12?"PM":"AM"}`},u=(()=>{if(!n?.clockInTime)return null;const[e,t]=n.clockInTime.split(":").map(Number),s=new Date(c);s.setHours(e,t,0,0);const a=Math.floor((c-s)/6e4);return{hours:Math.floor(a/60),minutes:a%60,total:a}})(),x=(()=>{if(0===o.length)return null;const e=60*c.getHours()+c.getMinutes();for(const t of o){const[s,a]=t.startTime.split(":").map(Number);if(60*s+a>e)return t}return o[0]})();return t?it.jsxs("div",{className:"mb-6",children:[a?.isCurrentlyClocked?it.jsxs("div",{className:"bg-green-50 border-l-4 border-green-400 rounded-lg p-4 shadow-sm",children:[it.jsxs("div",{className:"flex flex-row items-start justify-between gap-4",children:[it.jsx("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:it.jsxs("div",{className:"flex-1 min-w-0",children:[it.jsx("div",{className:"flex items-baseline justify-start gap-2 mb-1",children:it.jsx("h3",{className:"text-lg font-semibold text-green-800 leading-none",children:"You're Clocked In"})}),it.jsxs("div",{className:"space-y-1 text-sm text-green-700",children:[it.jsxs("p",{className:"flex items-center gap-2",children:[it.jsx(E,{className:"w-4 h-4 flex-shrink-0"}),it.jsxs("span",{className:"truncate",children:["Started at ",n?m(n.clockInTime):"Unknown"]})]}),u&&it.jsxs("p",{className:"flex items-center gap-2",children:[it.jsx(qe,{className:"w-4 h-4 flex-shrink-0"}),it.jsxs("span",{children:["Working for ",u.hours,"h ",u.minutes,"m"]})]}),n?.scheduledShift&&it.jsxs("p",{className:"flex items-start gap-2",children:[it.jsx(S,{className:"w-4 h-4 flex-shrink-0 mt-0.5"}),it.jsxs("span",{className:"break-words",children:["Scheduled: ",m(n.scheduledShift.startTime)," - ",m(n.scheduledShift.endTime)]})]}),"PENDING_APPROVAL"===n?.status&&it.jsxs("div",{className:"flex items-start gap-2 mt-2 p-2 bg-yellow-100 rounded",children:[it.jsx(q,{className:"w-4 h-4 text-yellow-600 flex-shrink-0 mt-0.5"}),it.jsxs("span",{className:"text-yellow-800 text-xs break-words",children:["Waiting for manager approval due to ","EARLY_CLOCK_IN"===n.approvalReason?"early":"late"," clock-in"]})]})]})]})}),it.jsxs("div",{className:"text-right flex-shrink-0",children:[it.jsx("div",{className:"text-2xl font-bold text-green-800",children:c.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),it.jsx("div",{className:"text-xs text-green-600",children:c.toLocaleDateString([],{weekday:"short",month:"short",day:"numeric"})})]})]}),it.jsx("div",{className:"mt-3 pt-3 border-t border-green-200",children:it.jsxs("button",{onClick:()=>s?.("clock_out"),className:"bg-white border border-green-300 text-green-700 px-4 py-2 rounded-lg hover:bg-green-50 transition-colors text-sm font-medium flex items-center gap-2 w-auto justify-center",children:[it.jsx(Ve,{className:"w-4 h-4"}),"Clock Out"]})})]}):it.jsxs("div",{className:"bg-gray-50 border-l-4 border-gray-400 rounded-lg p-4 shadow-sm",children:[it.jsxs("div",{className:"flex flex-row items-start justify-between gap-4",children:[it.jsx("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:it.jsxs("div",{className:"flex-1 min-w-0",children:[it.jsx("div",{className:"flex items-baseline justify-start gap-2 mb-1",children:it.jsx("h3",{className:"text-lg font-semibold text-gray-800 leading-none",children:"You're Not Clocked In"})}),it.jsxs("div",{className:"space-y-1 text-sm text-gray-700",children:[x?it.jsxs(it.Fragment,{children:[it.jsxs("p",{className:"flex items-start gap-2",children:[it.jsx(S,{className:"w-4 h-4 flex-shrink-0 mt-0.5"}),it.jsxs("span",{className:"break-words",children:["Next shift: ",m(x.startTime)," - ",m(x.endTime)]})]}),it.jsxs("p",{className:"flex items-start gap-2 text-blue-600",children:[it.jsx(k,{className:"w-4 h-4 flex-shrink-0 mt-0.5"}),it.jsx("span",{className:"break-words",children:"manual_schedule"===x.source?"Manual Schedule":`${x.shiftType} shift`})]})]}):it.jsxs("p",{className:"text-yellow-700 flex items-start gap-2",children:[it.jsx(q,{className:"w-4 h-4 flex-shrink-0 mt-0.5"}),it.jsx("span",{children:"No shifts scheduled for today"})]}),a?.lastClockOut&&it.jsxs("p",{className:"flex items-start gap-2 text-gray-600",children:[it.jsx(Ve,{className:"w-4 h-4 flex-shrink-0 mt-0.5"}),it.jsxs("span",{className:"truncate",children:["Last clocked out at ",m(a.lastClockOut)]})]})]})]})}),it.jsxs("div",{className:"text-right flex-shrink-0",children:[it.jsx("div",{className:"text-2xl font-bold text-gray-800",children:c.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),it.jsx("div",{className:"text-xs text-gray-600",children:c.toLocaleDateString([],{weekday:"short",month:"short",day:"numeric"})})]})]}),x&&it.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:it.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:it.jsxs("div",{className:"flex items-start gap-2",children:[it.jsx(qe,{className:"w-4 h-4 text-blue-600 flex-shrink-0 mt-0.5"}),it.jsx("span",{className:"text-sm font-medium text-blue-800 break-words",children:"Use QR code to clock in for your shift"})]})})})]}),a?.isCurrentlyClocked&&n&&it.jsx("div",{className:"mt-4 bg-blue-50 border border-blue-200 rounded-lg p-3",children:it.jsxs("div",{className:"flex items-start gap-2",children:[it.jsx("div",{className:"w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:it.jsx("span",{className:"text-white text-xs font-bold",children:"!"})}),it.jsxs("div",{className:"flex-1 min-w-0",children:[it.jsx("h4",{className:"font-medium text-blue-800 text-sm mb-1",children:"Shift Tasks"}),it.jsx("p",{className:"text-blue-700 text-xs break-words",children:"Don't forget to complete your opening/closing checklists and any assigned tasks for this shift."}),it.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-xs underline mt-1 break-words",children:"View shift tasks "})]})]})})]}):null},Rl=({employeeData:t,onStatusChange:s})=>{const{user:a}=wt(),[r,n]=e.useState(null),[l,o]=e.useState(null),[i,c]=e.useState(!1),[d,m]=e.useState(null),[u,x]=e.useState(null);e.useEffect(()=>{if(t){const e=zn(t.id);if(n(e),e.isCurrentlyClocked){const e=$n(t);x(e)}}},[t]),e.useEffect(()=>{const e=()=>{const e=Dn();o(e)};e();const t=setInterval(e,3e4);return()=>clearInterval(t)},[]);const h=async e=>{if(!i){c(!0),m(null);try{let a;if(a="CLOCK_IN_RESTAURANT_GENERAL"===e?await qn(t,e):"CLOCK_OUT_RESTAURANT_GENERAL"===e?await Mn(t,e):{success:!1,error:"Invalid QR code. Please use the correct clock-in/out QR code.",errorType:"INVALID_QR"},m(a),a.success){const e=zn(t.id);if(n(e),e.isCurrentlyClocked){const e=$n(t);x(e)}else x(null);s&&s(e),setTimeout(()=>{m(null)},3e3)}}catch(a){m({success:!1,error:`Clock operation failed: ${a.message}`,errorType:"SYSTEM_ERROR"})}finally{c(!1)}}},g=l?.verified||!1,p=!!a&&!!t,f=p&&g;return it.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[it.jsxs("div",{className:"flex flex-row items-center justify-between gap-4 mb-6",children:[it.jsxs("div",{className:"flex items-center gap-3",children:[it.jsx("div",{className:"w-10 h-10 bg-brand-navy rounded-lg flex items-center justify-center",children:it.jsx(E,{className:"w-5 h-5 text-gold"})}),it.jsxs("div",{children:[it.jsx("h3",{className:"text-lg font-semibold text-charcoal",children:"Time Clock"}),it.jsx("p",{className:"text-sm text-charcoal/60",children:"Scan QR code to clock in/out"})]})]}),it.jsxs("div",{className:"flex items-center gap-2",children:[it.jsx("div",{className:"w-3 h-3 rounded-full "+(r?.isCurrentlyClocked?"bg-green-500":"bg-gray-300")}),it.jsx("span",{className:"text-sm font-medium text-charcoal",children:r?.isCurrentlyClocked?"Clocked In":"Not Clocked In"})]})]}),it.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[it.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-lg border "+(p?"bg-green-50 border-green-200":"bg-red-50 border-red-200"),children:[it.jsx("div",{className:"w-2 h-2 rounded-full "+(p?"bg-green-500":"bg-red-500")}),it.jsxs("div",{className:"flex-1 min-w-0",children:[it.jsx("p",{className:"text-sm font-medium text-charcoal",children:"Login Status"}),it.jsx("p",{className:`text-xs ${p?"text-green-700":"text-red-700"} truncate`,children:p?`Logged in as ${a.name}`:"Not logged in"})]})]}),it.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-lg border "+(g?"bg-green-50 border-green-200":"bg-red-50 border-red-200"),children:[it.jsx("div",{className:"w-2 h-2 rounded-full "+(g?"bg-green-500":"bg-red-500")}),it.jsxs("div",{className:"flex-1 min-w-0",children:[it.jsx("p",{className:"text-sm font-medium text-charcoal",children:"Network Status"}),it.jsx("p",{className:`text-xs ${g?"text-green-700":"text-red-700"} truncate`,children:g?`On-site: ${l?.locationName}`:"Not on restaurant network"})]}),it.jsx(He,{className:`w-4 h-4 ${g?"text-green-600":"text-red-600"} flex-shrink-0`})]})]}),r?.isCurrentlyClocked&&u&&it.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:it.jsxs("div",{className:"flex items-start gap-3",children:[it.jsx(C,{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0"}),it.jsxs("div",{className:"flex-1 min-w-0",children:[it.jsx("h4",{className:"font-medium text-green-800 mb-1 text-base",children:"Currently Clocked In"}),it.jsxs("div",{className:"text-sm text-green-700 space-y-1",children:[it.jsxs("p",{children:["Started at: ",u.clockInTime]}),u.scheduledShift&&it.jsxs("p",{className:"truncate",children:["Scheduled shift: ",u.scheduledShift.startTime," - ",u.scheduledShift.endTime]}),"PENDING_APPROVAL"===u.status&&it.jsxs("p",{className:"text-yellow-700 flex items-start gap-1",children:[it.jsx(q,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),it.jsx("span",{children:"Waiting for manager approval"})]})]})]})]})}),d&&it.jsx("div",{className:"border rounded-lg p-4 mb-6 "+(d.success?"bg-green-50 border-green-200":"bg-red-50 border-red-200"),children:it.jsxs("div",{className:"flex items-start gap-3",children:[d.success?it.jsx(C,{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0"}):it.jsx(q,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),it.jsxs("div",{className:"flex-1 min-w-0",children:[it.jsx("p",{className:"font-medium text-base "+(d.success?"text-green-800":"text-red-800"),children:d.message||d.error}),d.success&&d.requiresApproval&&it.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Manager approval required for early/late clock-in"}),d.success&&d.hoursWorked&&it.jsxs("p",{className:"text-sm text-green-700 mt-1",children:["Hours worked: ",d.hoursWorked]})]}),it.jsx("button",{onClick:()=>{m(null)},className:"text-gray-400 hover:text-gray-600 flex-shrink-0 text-lg leading-none",children:""})]})}),it.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[it.jsxs("div",{className:"text-center",children:[it.jsx("div",{className:"mb-4",children:it.jsxs("h4",{className:"font-semibold text-charcoal mb-2 flex items-center justify-center gap-2 text-base",children:[it.jsx(qe,{className:"w-4 h-4 text-green-600"}),"Clock In"]})}),it.jsx("div",{className:"bg-white p-4 rounded-lg border-2 inline-block "+(f&&!r?.isCurrentlyClocked?"border-green-200 hover:border-green-300 cursor-pointer":"border-gray-200 opacity-50"),onClick:()=>{!f||r?.isCurrentlyClocked||i||h("CLOCK_IN_RESTAURANT_GENERAL")},children:it.jsx(il,{value:`${window.location.origin}/qr/clock-in`,size:150,level:"M",includeMargin:!1})}),it.jsx("p",{className:"text-xs text-charcoal/60 mt-2",children:"Scan to start your shift"}),!f&&it.jsx("p",{className:"text-xs text-red-600 mt-1",children:p?"Must be on restaurant network":"Login required"}),r?.isCurrentlyClocked&&it.jsx("p",{className:"text-xs text-yellow-600 mt-1",children:"Already clocked in"})]}),it.jsxs("div",{className:"text-center",children:[it.jsx("div",{className:"mb-4",children:it.jsxs("h4",{className:"font-semibold text-charcoal mb-2 flex items-center justify-center gap-2 text-base",children:[it.jsx(Ve,{className:"w-4 h-4 text-red-600"}),"Clock Out"]})}),it.jsx("div",{className:"bg-white p-4 rounded-lg border-2 inline-block "+(f&&r?.isCurrentlyClocked?"border-red-200 hover:border-red-300 cursor-pointer":"border-gray-200 opacity-50"),onClick:()=>{f&&r?.isCurrentlyClocked&&!i&&h("CLOCK_OUT_RESTAURANT_GENERAL")},children:it.jsx(il,{value:`${window.location.origin}/qr/clock-out`,size:150,level:"M",includeMargin:!1})}),it.jsx("p",{className:"text-xs text-charcoal/60 mt-2",children:"Scan to end your shift"}),!f&&it.jsx("p",{className:"text-xs text-red-600 mt-1",children:p?"Must be on restaurant network":"Login required"}),!r?.isCurrentlyClocked&&it.jsx("p",{className:"text-xs text-yellow-600 mt-1",children:null===r?"Loading...":"Not clocked in"})]})]}),i&&it.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2 text-blue-600",children:[it.jsx(ge,{className:"w-4 h-4 animate-spin"}),it.jsx("span",{className:"text-sm",children:"Processing..."})]})]})};const Pl=new class{constructor(){this.employeeApiService=jt}async getDashboardData(){try{const e=await this.employeeApiService.getDashboard();if(e.success){return{success:!0,data:e.data?e.data:{employee:e.employee,dashboard_data:e.dashboard_data},message:e.message}}return{success:!1,error:e.message||"Failed to fetch dashboard data"}}catch(e){return console.error("Dashboard API Error:",e),{success:!1,error:e.message||"Network error while fetching dashboard data"}}}async getWorkStats(){try{const e=await this.getDashboardData();return e.success?{success:!0,data:e.data.dashboard_data?.work_stats||{hours_this_week:0,shifts_completed_this_month:0,hours_change_from_last_week:0}}:e}catch(e){return{success:!1,error:e.message}}}async getTrainingStats(){try{const e=await this.getDashboardData();return e.success?{success:!0,data:e.data.dashboard_data?.training_stats||{total_assigned:0,completed:0,overdue:0,completion_percentage:0}}:e}catch(e){return{success:!1,error:e.message}}}async getPerformanceStats(){try{const e=await this.getDashboardData();return e.success?{success:!0,data:e.data.dashboard_data?.performance_stats||{rating:0,rating_text:"No data available",last_review_date:null}}:e}catch(e){return{success:!1,error:e.message}}}async getUpcomingShifts(){try{const e=await this.getDashboardData();return e.success?{success:!0,data:e.data.dashboard_data?.upcoming_shifts||[]}:e}catch(e){return{success:!1,error:e.message}}}async getAnnouncements(){try{const e=await this.getDashboardData();return e.success?{success:!0,data:e.data.dashboard_data?.announcements||[]}:e}catch(e){return{success:!1,error:e.message}}}async getAnniversaryInfo(){try{const e=await this.getDashboardData();return e.success?{success:!0,data:e.data.dashboard_data?.anniversary_info||null}:e}catch(e){return{success:!1,error:e.message}}}async getOverdueTraining(){try{const e=await this.getDashboardData();return e.success?{success:!0,data:e.data.dashboard_data?.overdue_training||[]}:e}catch(e){return{success:!1,error:e.message}}}async checkDashboardEndpoint(){try{return(await this.getDashboardData()).success}catch(e){return!1}}},Ol=()=>{const{user:t,logout:s}=wt(),{employee:a}=Ql(),[r,n]=e.useState(null),[l,o]=e.useState(null),[i,c]=e.useState([]),[d,m]=e.useState("dashboard"),[u,x]=e.useState(!0),[h,g]=e.useState(!1),[p,f]=e.useState(!1),[b,y]=e.useState(72),[j,v]=e.useState("undefined"!=typeof window?window.innerWidth:1024),N=e.useRef(null),w=e.useRef(null),k=e.useRef(null),S=e.useRef(null),C=e.useRef(!1);e.useEffect(()=>{const e=()=>{C.current||(f(!1),C.current=!0),k.current&&y(k.current.offsetHeight),v(window.innerWidth)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e.useEffect(()=>{const e=()=>{k.current&&y(k.current.offsetHeight)};if(e(),k.current&&window.ResizeObserver){const t=new ResizeObserver(e);return t.observe(k.current),()=>{t.disconnect()}}},[p,d,h]);const A=e=>{m(e),f(!1),"onboarding"===e&&T()};e.useEffect(()=>{(async()=>{if(t)try{const t=await jt.getEmployeeProfile();if(t.success){console.log("Employee profile loaded:",t.data),n(t.data);try{const e=await jt.getOnboardingPages();if(e&&e.success&&e.data){const s=e.data.pages||[],a=e.data.progress||{},r=e.data.summary||{},l=e.data.personal_info_complete;c(s),o(a),t.success&&n(e=>({...e,onboarding_pages_progress:r,is_personal_info_complete:l}))}else console.error("API Error - Full response:",e),console.error("API Error - Error message:",e?.error||e?.message||"Unknown error"),c([]),o({})}catch(e){console.error("Critical API Error:",e),console.error("Error details:",e.message),c([]),o({})}}else console.error("Failed to load employee profile:",t.error)}catch(s){console.error("Error loading employee profile:",s)}x(!1)})()},[t]),e.useEffect(()=>{if(t&&r)return S.current=setInterval(()=>{T()},6e4),()=>{S.current&&clearInterval(S.current)}},[t,r]);const T=async()=>{if(t)try{const e=await jt.getOnboardingPages();if(e&&e.success&&e.data){const t=e.data.pages||[],s=e.data.progress||{},a=e.data.summary||{},r=e.data.personal_info_complete;c(t),o(s),n(e=>({...e,onboarding_pages_progress:a,is_personal_info_complete:r}))}}catch(e){console.log("Error refreshing onboarding data:",e)}};e.useEffect(()=>{const e=e=>{N.current&&!N.current.contains(e.target)&&g(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),e.useEffect(()=>{const e=e=>{if(w.current&&!w.current.contains(e.target)&&p){const t=document.querySelector('[aria-label="Open menu"], [aria-label="Close menu"]');t&&!t.contains(e.target)&&f(!1)}};if(p)return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[p]);const _=()=>{s()},P=()=>{if(!l)return{completed:0,total:i.length};return{completed:Object.values(l).filter(e=>"completed"===e).length,total:i.length}},I=(()=>{const e=(r?.status||r?.employee?.status||"").toLowerCase(),t=(r?.stage||r?.employee?.stage||"").toLowerCase();return!(!r?.can_access_dashboard&&!r?.employee?.can_access_dashboard)||"approved"===e||"active"===t})();return u?it.jsx("div",{className:"min-h-screen bg-cream flex items-center justify-center",children:it.jsxs("div",{className:"text-center",children:[it.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gold mx-auto mb-4"}),it.jsx("p",{className:"text-charcoal",children:"Loading..."})]})}):it.jsxs("div",{className:"h-screen bg-cream flex overflow-hidden",children:[p&&it.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 block md:hidden",onClick:()=>f(!1)}),it.jsxs("div",{ref:w,className:`w-64 bg-brand-navy text-cream shadow-2xl border-r border-gold border-opacity-20 flex flex-col h-full z-40 transition-transform duration-300 ease-in-out ${p?"translate-x-0":"-translate-x-full"} fixed`,style:{width:"256px",maxWidth:"256px",minWidth:"256px",left:0,top:0,bottom:0},children:[it.jsx("div",{className:"p-6 border-b border-gold border-opacity-20",children:it.jsxs("div",{className:"flex items-center gap-3",children:[it.jsx("div",{children:it.jsx(At,{size:"sm"})}),it.jsxs("div",{children:[it.jsx("h1",{className:"font-display text-xl font-bold text-gold",children:"Woodfire.food"}),it.jsx("p",{className:"text-cream text-opacity-80 text-sm font-medium tracking-wide",children:"Employee Portal"})]})]})}),it.jsx("nav",{className:"flex-1 px-4 py-6 overflow-y-auto",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:it.jsxs("div",{className:"space-y-2",children:[it.jsxs("button",{onClick:()=>A("dashboard"),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left transition-all "+("dashboard"===d?"bg-gold bg-opacity-20 text-gold border border-gold border-opacity-30":"text-cream text-opacity-80 hover:bg-cream hover:bg-opacity-10 hover:text-cream"),children:[it.jsx(Ce,{className:"w-5 h-5"}),it.jsx("span",{className:"font-medium",children:"Dashboard"})]}),it.jsxs("button",{onClick:()=>A("personal-info"),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left transition-all "+("personal-info"===d?"bg-gold bg-opacity-20 text-gold border border-gold border-opacity-30":"text-cream text-opacity-80 hover:bg-cream hover:bg-opacity-10 hover:text-cream"),children:[it.jsx(F,{className:"w-5 h-5"}),it.jsx("span",{className:"font-medium",children:"Personal Info"}),!(()=>{const e=r?.personal_info||r?.employee?.personal_info||r?.employee?.profile_data?.personal_info;if(!e)return!1;const{mailing_address:t,requested_hours:s}=e;return t&&s})()&&it.jsx(q,{className:"w-4 h-4 text-orange-400"})]}),it.jsxs("button",{onClick:()=>A("onboarding"),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left transition-all "+("onboarding"===d?"bg-gold bg-opacity-20 text-gold border border-gold border-opacity-30":"text-cream text-opacity-80 hover:bg-cream hover:bg-opacity-10 hover:text-cream"),children:[it.jsx(ee,{className:"w-5 h-5"}),it.jsx("span",{className:"font-medium",children:"Onboarding"}),P().completed<P().total&&it.jsx("div",{className:"ml-auto bg-blue-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:P().total-P().completed})]}),it.jsxs("button",{onClick:()=>A("training"),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left transition-all "+("training"===d?"bg-gold bg-opacity-20 text-gold border border-gold border-opacity-30":"text-cream text-opacity-80 hover:bg-cream hover:bg-opacity-10 hover:text-cream"),children:[it.jsx(V,{className:"w-5 h-5"}),it.jsx("span",{className:"font-medium",children:"Training"})]}),it.jsxs("button",{onClick:()=>A("communication"),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left transition-all "+("communication"===d?"bg-gold bg-opacity-20 text-gold border border-gold border-opacity-30":"text-cream text-opacity-80 hover:bg-cream hover:bg-opacity-10 hover:text-cream"),children:[it.jsx(ne,{className:"w-5 h-5"}),it.jsx("span",{className:"font-medium",children:"Communication"})]}),I&&it.jsxs("button",{onClick:()=>A("roles"),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left transition-all "+("roles"===d?"bg-gold bg-opacity-20 text-gold border border-gold border-opacity-30":"text-cream text-opacity-80 hover:bg-cream hover:bg-opacity-10 hover:text-cream"),children:[it.jsx($,{className:"w-5 h-5"}),it.jsx("span",{className:"font-medium",children:"Roles"}),(!r?.assignments||0===r?.assignments?.departments?.length)&&it.jsx(q,{className:"w-4 h-4 text-amber-400"})]}),I&&it.jsxs("button",{onClick:()=>A("clock"),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left transition-all "+("clock"===d?"bg-gold bg-opacity-20 text-gold border border-gold border-opacity-30":"text-cream text-opacity-80 hover:bg-cream hover:bg-opacity-10 hover:text-cream"),children:[it.jsx(E,{className:"w-5 h-5"}),it.jsx("span",{className:"font-medium",children:"Time Clock"})]}),it.jsxs("button",{onClick:()=>A("order-tracking"),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left transition-all "+("order-tracking"===d?"bg-gold bg-opacity-20 text-gold border border-gold border-opacity-30":"text-cream text-opacity-80 hover:bg-cream hover:bg-opacity-10 hover:text-cream"),children:[it.jsx(pe,{className:"w-5 h-5"}),it.jsx("span",{className:"font-medium",children:"Order Tracking"})]}),it.jsxs("button",{onClick:()=>A("time-off"),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left transition-all "+("time-off"===d?"bg-gold bg-opacity-20 text-gold border border-gold border-opacity-30":"text-cream text-opacity-80 hover:bg-cream hover:bg-opacity-10 hover:text-cream"),children:[it.jsx(We,{className:"w-5 h-5"}),it.jsx("span",{className:"font-medium",children:"Time Off"})]}),it.jsxs("button",{onClick:()=>A("payslips"),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left transition-all "+("payslips"===d?"bg-gold bg-opacity-20 text-gold border border-gold border-opacity-30":"text-cream text-opacity-80 hover:bg-cream hover:bg-opacity-10 hover:text-cream"),children:[it.jsx(je,{className:"w-5 h-5"}),it.jsx("span",{className:"font-medium",children:"Payslips"})]}),it.jsxs("button",{onClick:()=>A("performance"),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left transition-all "+("performance"===d?"bg-gold bg-opacity-20 text-gold border border-gold border-opacity-30":"text-cream text-opacity-80 hover:bg-cream hover:bg-opacity-10 hover:text-cream"),children:[it.jsx(Pe,{className:"w-5 h-5"}),it.jsx("span",{className:"font-medium",children:"Performance"})]}),it.jsxs("button",{onClick:()=>A("recognition"),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left transition-all "+("recognition"===d?"bg-gold bg-opacity-20 text-gold border border-gold border-opacity-30":"text-cream text-opacity-80 hover:bg-cream hover:bg-opacity-10 hover:text-cream"),children:[it.jsx(Ee,{className:"w-5 h-5"}),it.jsx("span",{className:"font-medium",children:"Recognition"})]}),it.jsxs("button",{onClick:()=>A("tickets"),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left transition-all "+("tickets"===d?"bg-gold bg-opacity-20 text-gold border border-gold border-opacity-30":"text-cream text-opacity-80 hover:bg-cream hover:bg-opacity-10 hover:text-cream"),children:[it.jsx(fe,{className:"w-5 h-5"}),it.jsx("span",{className:"font-medium",children:"Tickets"})]}),it.jsxs("button",{onClick:()=>A("faq"),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left transition-all "+("faq"===d?"bg-gold bg-opacity-20 text-gold border border-gold border-opacity-30":"text-cream text-opacity-80 hover:bg-cream hover:bg-opacity-10 hover:text-cream"),children:[it.jsx(ae,{className:"w-5 h-5"}),it.jsx("span",{className:"font-medium",children:"FAQ"})]})]})}),it.jsx("div",{className:"p-4 border-t border-gold border-opacity-20",children:it.jsxs("button",{onClick:_,className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left transition-all text-cream text-opacity-80 hover:bg-red-600 hover:bg-opacity-20 hover:text-red-300",children:[it.jsx(Re,{className:"w-5 h-5"}),it.jsx("span",{className:"font-medium",children:"Logout"})]})})]}),it.jsx(yl,{employeeData:r,onboardingProgress:l,onboardingPages:i,onNavigateToOnboarding:()=>m("onboarding"),onNavigateToPersonalInfo:()=>m("personal-info")}),it.jsxs("div",{className:"flex-1 flex flex-col",children:[it.jsx("div",{ref:k,className:"bg-brand-navy text-cream shadow-lg border-b border-gold border-opacity-20 fixed top-0 right-0 z-20",style:{left:j>=768&&p?256:0},children:it.jsx("div",{className:"px-4 sm:px-6 py-3 sm:py-4",children:it.jsxs("div",{className:"flex justify-between items-center",children:[it.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 flex-1 min-w-0",children:[it.jsx("button",{onClick:()=>f(!p),className:"p-2 rounded-lg text-cream hover:bg-gold hover:bg-opacity-20 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-gold focus:ring-opacity-30 block sm:hidden","aria-label":p?"Close menu":"Open menu",children:p?it.jsx(O,{className:"w-5 h-5"}):it.jsx(Qe,{className:"w-5 h-5"})}),it.jsx("div",{className:"block sm:hidden flex-1 min-w-0 hide-1024-down",children:it.jsxs("h1",{className:"text-lg font-bold text-gold truncate",children:["dashboard"===d&&"Dashboard","personal-info"===d&&"Profile","onboarding"===d&&"Onboarding","training"===d&&"Training","communication"===d&&"Chat","roles"===d&&"Roles","order-tracking"===d&&"Orders","performance"===d&&"Performance","recognition"===d&&"Recognition","tickets"===d&&"Support","faq"===d&&"FAQ","time-off"===d&&"Time Off","payslips"===d&&"Payslips"]})}),it.jsx("button",{onClick:()=>f(!p),className:"p-2 rounded-lg text-cream hover:bg-gold hover:bg-opacity-20 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-gold focus:ring-opacity-30 hidden sm:block md:block","aria-label":p?"Collapse sidebar":"Expand sidebar",children:p?it.jsx(_e,{className:"w-5 h-5"}):it.jsx(W,{className:"w-5 h-5"})}),it.jsxs("div",{className:"flex-1 min-w-0",children:[it.jsxs("h1",{className:"hide-mobile-540 hide-1024-down text-xl md:text-2xl font-bold text-gold",children:["dashboard"===d&&"Dashboard","personal-info"===d&&"Personal Information","onboarding"===d&&"Onboarding","training"===d&&"Training Center","communication"===d&&"Communication","roles"===d&&"Role Management","order-tracking"===d&&"Order Tracking","performance"===d&&"Performance Reports","recognition"===d&&"My Recognition","tickets"===d&&"Support Tickets","faq"===d&&"FAQ","time-off"===d&&"Time Off Requests","payslips"===d&&"Payslips & Earnings"]}),it.jsxs("p",{className:"hide-mobile-540 hide-1024-down text-sm md:text-base text-cream text-opacity-70",children:["dashboard"===d&&"Welcome to your employee portal","personal-info"===d&&"Manage your personal information","onboarding"===d&&"Complete your onboarding requirements","training"===d&&"Access your training materials","communication"===d&&"Connect with your team","roles"===d&&"View your role assignments and department information","order-tracking"===d&&"Monitor and deliver customer orders","performance"===d&&"View your performance evaluations and feedback","recognition"===d&&"View your achievements, shout-outs, rewards, and badges","tickets"===d&&"Submit and track your support requests","faq"===d&&"Find answers to common questions","time-off"===d&&"Submit and track your vacation requests","payslips"===d&&"View and download your pay stubs"]})]})]}),it.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[it.jsx("div",{className:"relative",children:it.jsx(ns,{children:it.jsx(jl,{employeeId:t?.id})})}),it.jsxs("div",{className:"relative",ref:N,children:[it.jsxs("button",{onClick:()=>g(!h),className:"flex items-center gap-2 sm:gap-3 px-2 sm:px-3 py-2 rounded-lg text-cream hover:bg-gold hover:bg-opacity-20 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-gold focus:ring-opacity-30",children:[it.jsx("div",{className:"w-8 h-8 bg-gold bg-opacity-20 rounded-full flex items-center justify-center border-2 border-gold border-opacity-30",children:it.jsx("span",{className:"text-sm font-bold text-gold",children:t?.name?.charAt(0)?.toUpperCase()||"E"})}),it.jsxs("div",{className:"hidden sm:block text-left",children:[it.jsx("p",{className:"text-sm font-medium text-cream whitespace-nowrap",children:t?.name||"Employee"}),it.jsx("p",{className:"text-xs text-cream text-opacity-60 whitespace-nowrap",children:a?.designation||"Team Member"})]}),it.jsx(R,{className:"w-4 h-4 text-cream text-opacity-70 transition-transform duration-200 "+(h?"rotate-180":"")})]}),h&&it.jsxs("div",{className:"absolute right-0 top-full mt-2 w-48 bg-white rounded-lg shadow-xl border border-gray-200 z-50 py-2 animate-fadeIn",children:[it.jsxs("button",{onClick:()=>{g(!1),A("personal-info")},className:"w-full flex items-center gap-3 px-4 py-2 text-left text-gray-700 hover:bg-gold hover:bg-opacity-10 hover:text-charcoal transition-colors duration-150",children:[it.jsx(F,{className:"w-4 h-4"}),it.jsx("span",{children:"Profile"})]}),it.jsxs("button",{onClick:()=>{g(!1),A("onboarding")},className:"w-full flex items-center gap-3 px-4 py-2 text-left text-gray-700 hover:bg-gold hover:bg-opacity-10 hover:text-charcoal transition-colors duration-150",children:[it.jsx(ee,{className:"w-4 h-4"}),it.jsx("span",{children:"Onboarding"}),P().completed<P().total&&it.jsx("div",{className:"ml-auto bg-blue-500 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center",children:P().total-P().completed})]}),it.jsx("div",{className:"border-t border-gray-100 my-1"}),it.jsxs("button",{onClick:()=>{g(!1),_()},className:"w-full flex items-center gap-3 px-4 py-2 text-left text-red-600 hover:bg-red-50 hover:text-red-700 transition-colors duration-150",children:[it.jsx(Re,{className:"w-4 h-4"}),it.jsx("span",{children:"Logout"})]})]})]})]})]})})}),it.jsxs("div",{className:"flex-1 p-4 sm:p-6 overflow-y-auto relative",style:{paddingTop:`${b+16}px`,...j>=768&&p?{paddingLeft:256}:{},contain:"layout style"},children:["dashboard"===d&&it.jsx(Il,{employeeData:r,setActiveSection:m}),"personal-info"===d&&it.jsx(nl,{employeeData:r,setEmployeeData:n}),"onboarding"===d&&it.jsx(ll,{employeeData:r,setEmployeeData:n,onboardingPages:i,onboardingProgress:l,refreshOnboardingData:T}),"training"===d&&it.jsx(dl,{employeeData:r,setEmployeeData:n}),"communication"===d&&it.jsx(hl,{user:t,employeeData:r}),"roles"===d&&it.jsx(Tl,{employeeData:r}),"clock"===d&&it.jsx(Rl,{employeeData:r,onStatusChange:async()=>{try{const e=await jt.getEmployeeProfile();e.success&&n(e.data)}catch(e){console.error("Error refreshing employee data:",e)}}}),"order-tracking"===d&&it.jsx(wl,{employeeData:r,setEmployeeData:n}),"time-off"===d&&it.jsx(vl,{employeeData:r,setEmployeeData:n}),"payslips"===d&&it.jsx(Nl,{employeeData:r}),"performance"===d&&it.jsx(kl,{employeeData:r}),"recognition"===d&&it.jsx(Al,{}),"tickets"===d&&it.jsx(Sl,{employeeData:r}),"faq"===d&&it.jsx(bl,{})]})]})]})},Il=({employeeData:t,setActiveSection:s})=>{const[a,r]=e.useState(null),[n,l]=e.useState(null),[o,i]=e.useState([]),[c,d]=e.useState([]),[m,u]=e.useState([]),[x,h]=e.useState({hours_this_week:0,shifts_completed_this_month:0,hours_change_from_last_week:0}),[g,p]=e.useState({rating:0,rating_text:"No data available",last_review_date:null}),[f,b]=e.useState({shifts:!0,announcements:!0,workStats:!0,performance:!0,training:!0,anniversary:!0}),y=async()=>{try{const e=await Pl.getTrainingStats();if(e.success)r(e.data);else{const e=Vt(t);r(e)}}catch(e){console.error("Error loading training stats:",e);const s=Vt(t);r(s)}finally{b(e=>({...e,training:!1}))}};return e.useEffect(()=>(window.refreshDashboardStats=()=>{console.log("Refreshing dashboard stats..."),t&&y()},()=>{delete window.refreshDashboardStats}),[t]),e.useEffect(()=>{if(t){const e=async()=>{try{const e=await Pl.getPerformanceStats();e.success&&p(e.data)}catch(e){console.error("Error loading performance stats:",e)}finally{b(e=>({...e,performance:!1}))}},s=async()=>{try{const e=await Pl.getUpcomingShifts();e.success&&d(e.data)}catch(e){console.error("Error loading upcoming shifts:",e)}finally{b(e=>({...e,shifts:!1}))}},a=async()=>{try{const e=await Pl.getAnnouncements();e.success&&u(e.data)}catch(e){console.error("Error loading announcements:",e)}finally{b(e=>({...e,announcements:!1}))}},r=async()=>{try{const e=await Pl.getAnniversaryInfo();if(e.success&&e.data)l(e.data);else if(t.hireDate){const e=Mt(t.hireDate),s=$t(e),a=Ut(t.hireDate),r=zt(t.hireDate);l({tenure:s,tenureDays:e,milestones:a,upcomingAnniversary:r,hireDate:t.hireDate})}}catch(e){if(console.error("Error loading anniversary info:",e),t.hireDate){const e=Mt(t.hireDate),s=$t(e),a=Ut(t.hireDate),r=zt(t.hireDate);l({tenure:s,tenureDays:e,milestones:a,upcomingAnniversary:r,hireDate:t.hireDate})}}finally{b(e=>({...e,anniversary:!1}))}},n=async()=>{try{const e=await Pl.getOverdueTraining();if(e.success)i(e.data);else{const e=Bt(t);i(e)}}catch(e){console.error("Error loading overdue training:",e);const s=Bt(t);i(s)}};(async()=>{try{const e=await Pl.getWorkStats();e.success&&h(e.data)}catch(e){console.error("Error loading work stats:",e)}finally{b(e=>({...e,workStats:!1}))}})(),y(),e(),s(),a(),r(),n()}},[t]),it.jsxs("div",{children:[(()=>{const e=(t?.status||"").toLowerCase(),s=(t?.stage||"").toLowerCase();return!!t?.can_access_dashboard||"approved"===e||"active"===s})()&&it.jsx(_l,{employeeData:t,onClockAction:()=>{s("clock")}}),it.jsxs("div",{className:"mb-8",children:[it.jsxs("h1",{className:"text-3xl font-bold font-display text-charcoal mb-2",children:["Welcome Back, ",t?.personal_info?.first_name||t?.employee?.personal_info?.first_name||"Team Member","!"]}),it.jsxs("div",{className:"flex flex-row gap-4 items-start",children:[it.jsx("p",{className:"text-lg text-charcoal text-opacity-70 font-body flex-1",children:"Here's your personalized dashboard with training progress, anniversaries, and important updates."}),n?.upcomingAnniversary&&it.jsxs("div",{className:"bg-gradient-to-r from-gold/10 to-gold/5 border border-gold/20 rounded-lg px-4 py-3 flex items-center gap-3",children:[it.jsx(ke,{className:"w-5 h-5 text-gold hide-md-down"}),it.jsxs("div",{children:[it.jsx("p",{className:"text-sm font-semibold text-charcoal",children:"Anniversary Coming Soon!"}),it.jsxs("p",{className:"text-xs text-gold",children:[n.tenure," of service"]})]})]})]})]}),(o.length>0||n?.upcomingAnniversary)&&it.jsx("div",{className:"mb-8",children:it.jsxs("div",{className:"grid-2-responsive",children:[o.length>0&&it.jsx("div",{className:"bg-gradient-to-r from-red-50 to-orange-50 border border-red-200 rounded-lg p-4",children:it.jsxs("div",{className:"flex items-start gap-3",children:[it.jsx(q,{className:"w-5 h-5 text-red-500 mt-0.5 hide-md-down"}),it.jsxs("div",{children:[it.jsx("h4",{className:"font-semibold text-red-800 mb-2",children:"Training Overdue"}),it.jsxs("div",{className:"space-y-1",children:[o.slice(0,2).map((e,t)=>it.jsxs("p",{className:"text-sm text-red-700",children:[" ",e.title," (Due: ",new Date(e.dueDate).toLocaleDateString(),")"]},t)),o.length>2&&it.jsxs("p",{className:"text-sm text-red-600 font-medium",children:["+",o.length-2," more overdue"]})]}),it.jsx("button",{onClick:()=>s("training"),className:"mt-2 text-red-600 hover:text-red-800 text-sm font-semibold",children:"Complete Training "})]})]})}),n&&it.jsx("div",{className:"bg-gradient-to-r from-gold/10 to-amber-50 border border-gold/30 rounded-lg p-4",children:it.jsxs("div",{className:"flex items-start gap-3",children:[it.jsx(ue,{className:"w-5 h-5 text-gold mt-0.5 hide-md-down"}),it.jsxs("div",{children:[it.jsx("h4",{className:"font-semibold text-amber-800 mb-2",children:"Service Milestone"}),it.jsxs("p",{className:"text-sm text-amber-700 mb-1",children:[it.jsx("strong",{children:n.tenure})," of dedicated service"]}),n.milestones.length>0&&it.jsxs("p",{className:"text-xs text-amber-600",children:["Achievements: ",n.milestones.join(", ")]})]})]})})]})}),it.jsx("div",{className:"grid-stats mb-8",children:[{key:"hours",title:"HOURS THIS WEEK",value:f.workStats?"...":x.hours_this_week?.toString()||"0",change:f.workStats?"Loading...":x.hours_change_from_last_week>0?`+${x.hours_change_from_last_week} from last week`:x.hours_change_from_last_week<0?`${x.hours_change_from_last_week} from last week`:"Same as last week",changeType:f.workStats?"neutral":x.hours_change_from_last_week>0?"positive":x.hours_change_from_last_week<0?"negative":"neutral",icon:E,bgClass:"bg-amber-50",iconClass:"text-amber-600",iconBgClass:"bg-gradient-to-br from-amber-400 to-gold"},{key:"shifts",title:"SHIFTS COMPLETED",value:f.workStats?"...":x.shifts_completed_this_month?.toString()||"0",change:f.workStats?"Loading...":"This month",changeType:"neutral",icon:S,bgClass:"bg-green-50",iconClass:"text-green-600",iconBgClass:"bg-gradient-to-br from-emerald-400 to-green-600"},{key:"training",title:"TRAINING PROGRESS",value:f.training?"...":a?`${Math.round(a.completion_percentage||0)}%`:"0%",change:f.training?"Loading...":a?.completion_percentage>=90?"Almost complete":a?.completion_percentage>=60?"Good progress":"Getting started",changeType:f.training?"neutral":a?.completion_percentage>=60?"positive":"neutral",icon:Ce,bgClass:"bg-blue-50",iconClass:"text-blue-600",iconBgClass:"bg-gradient-to-br from-blue-400 to-blue-600",showProgressBar:!0,progressValue:f.training?0:a?.completion_percentage||0},{key:"performance",title:"PERFORMANCE",value:f.performance?"...":`${g.rating} / 5`,change:f.performance?"Loading...":g.rating_text,changeType:f.performance?"neutral":g.rating>=4?"positive":g.rating>=3?"neutral":"negative",icon:Se,bgClass:"bg-purple-50",iconClass:"text-purple-600",iconBgClass:"bg-gradient-to-br from-purple-400 to-purple-600"}].map(e=>{const t=e.icon;return it.jsxs("div",{className:"bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 p-3 border border-gray-100 hover:border-gold-200",children:[it.jsxs("div",{className:"flex items-center justify-between mb-2",children:[it.jsx("div",{className:`p-2 rounded-lg ${e.bgClass} hide-md-down`,children:it.jsx(t,{className:`w-4 h-4 ${e.iconClass}`})}),it.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded-full ${e.bgClass} ${e.iconClass} border hide-md-down`,children:e.title.split(" ")[0]})]}),it.jsxs("div",{children:[it.jsx("p",{className:"text-xs font-bold text-charcoal text-opacity-70 uppercase tracking-wider mb-1",children:e.title}),it.jsx("p",{className:"text-xl font-bold font-display text-charcoal mb-1",children:e.value}),e.showProgressBar&&it.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 mb-1",children:it.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 h-1.5 rounded-full transition-all duration-300",style:{width:`${e.progressValue||0}%`}})}),it.jsx("p",{className:"text-xs font-medium "+("positive"===e.changeType?"text-green-600":"negative"===e.changeType?"text-red-600":"text-charcoal text-opacity-60"),children:e.change})]})]},e.key)})}),it.jsxs("div",{className:"grid-main gap-8",children:[it.jsx("div",{className:"col-span-2",children:it.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[it.jsx("div",{className:"bg-gradient-to-r from-gold-light to-gold bg-opacity-15 px-4 py-3 border-b border-gold border-opacity-40",children:it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsxs("h3",{className:"text-lg font-bold text-charcoal flex items-center gap-2",children:[it.jsx("div",{className:"p-1.5 bg-gold bg-opacity-30 rounded-lg hide-md-down",children:it.jsx(S,{className:"w-4 h-4 text-gold-dark"})}),"Upcoming Shifts"]}),it.jsx("button",{className:"text-gold-dark hover:text-gold text-xs font-semibold px-3 py-1.5 bg-white bg-opacity-80 rounded-lg hover:bg-opacity-100 transition-colors border border-gold border-opacity-30",children:"View All"})]})}),it.jsx("div",{className:"p-4 space-y-3",children:f.shifts?it.jsxs("div",{className:"text-center py-4",children:[it.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gold mx-auto mb-2"}),it.jsx("p",{className:"text-sm text-charcoal text-opacity-70",children:"Loading shifts..."})]}):0===c.length?it.jsx("div",{className:"text-center py-6",children:it.jsx("p",{className:"text-charcoal/60 text-sm",children:"No upcoming shifts scheduled"})}):c.map((e,t)=>it.jsx("div",{className:"group relative bg-gradient-to-r from-white to-gray-50 rounded-lg p-3 border border-gray-100 hover:shadow-md transition-all duration-300 hover:border-gold-200",children:it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsxs("div",{className:"flex items-center gap-3",children:[it.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-400 to-blue-600 rounded-lg shadow-md group-hover:scale-105 transition-transform",children:it.jsx(E,{className:"w-4 h-4 text-white"})}),it.jsxs("div",{children:[it.jsx("p",{className:"font-bold text-charcoal text-sm",children:e.date?new Date(e.date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}):"TBD"}),it.jsx("p",{className:"text-xs text-gray-600 font-medium",children:e.time||e.start_time&&e.end_time?`${e.start_time} - ${e.end_time}`:"Time TBD"}),it.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[it.jsx("div",{className:"w-1.5 h-1.5 rounded-full "+("confirmed"===(e.status||"pending")?"bg-green-500":"pending"===(e.status||"pending")?"bg-yellow-500":"bg-gray-500")}),it.jsx("span",{className:"text-xs font-semibold "+("confirmed"===(e.status||"pending")?"text-green-600":"pending"===(e.status||"pending")?"text-yellow-600":"text-gray-600"),children:(e.status||"pending").charAt(0).toUpperCase()+(e.status||"pending").slice(1)})]})]})]}),it.jsxs("div",{className:"text-right",children:[it.jsx("p",{className:"font-semibold text-charcoal text-sm",children:e.location||e.department||"Restaurant"}),it.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Location"}),it.jsxs("div",{className:"mt-1 px-2 py-0.5 bg-gold-50 text-gold rounded-full text-xs font-semibold",children:[e.duration||e.hours||"8"," hours"]})]})]})},t))})]})}),it.jsx("div",{children:it.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[it.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 px-4 py-3 border-b border-blue-100",children:it.jsxs("h3",{className:"text-lg font-bold text-charcoal flex items-center gap-2",children:[it.jsx("div",{className:"p-1.5 bg-blue-100 rounded-lg",children:it.jsx(Z,{className:"w-4 h-4 text-blue-600"})}),"Announcements"]})}),it.jsx("div",{className:"p-4 space-y-3",children:f.announcements?it.jsxs("div",{className:"text-center py-4",children:[it.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-300 mx-auto mb-2"}),it.jsx("p",{className:"text-sm text-charcoal text-opacity-70",children:"Loading announcements..."})]}):0===m.length?it.jsx("div",{className:"text-center py-6",children:it.jsx("p",{className:"text-charcoal/60 text-sm",children:"No recent announcements"})}):m.map((e,t)=>{const s={title:e.title||e.subject||"Announcement",type:e.type||e.category||"General",date:e.date||e.published_at||e.created_at,priority:e.priority||"medium",icon:e.icon||("Training"===(e.type||e.category)?"":"Meeting"===(e.type||e.category)?"":"Schedule"===(e.type||e.category)?"":"")};return it.jsx("div",{className:"group relative bg-gradient-to-r from-white to-gray-50 rounded-lg p-3 border border-gray-100 hover:shadow-md transition-all duration-300 hover:border-blue-200",children:it.jsxs("div",{className:"flex items-start gap-3",children:[it.jsx("div",{className:"text-lg",children:s.icon}),it.jsxs("div",{className:"flex-1",children:[it.jsxs("div",{className:"flex items-start justify-between mb-1",children:[it.jsx("h4",{className:"font-semibold text-charcoal text-sm group-hover:text-blue-700 transition-colors",children:s.title}),it.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full font-semibold "+("Training"===s.type?"bg-green-100 text-green-700":"Meeting"===s.type?"bg-blue-100 text-blue-700":"Schedule"===s.type?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-700"),children:s.type})]}),it.jsx("p",{className:"text-xs text-gray-600 font-medium",children:s.date?new Date(s.date).toLocaleDateString("en-US",{month:"long",day:"numeric"}):"No date"}),it.jsx("div",{className:"inline-block mt-1 w-1.5 h-1.5 rounded-full "+("high"===s.priority?"bg-red-500":"medium"===s.priority?"bg-yellow-500":"bg-green-500")})]})]})},t)})})]})})]}),it.jsx("div",{className:"mt-8",children:it.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[it.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 px-4 py-3 border-b border-purple-100",children:it.jsxs("h3",{className:"text-lg font-bold text-charcoal flex items-center gap-2",children:[it.jsx("div",{className:"p-1.5 bg-purple-100 rounded-lg",children:it.jsx(Q,{className:"w-4 h-4 text-purple-600"})}),"Quick Actions"]})}),it.jsx("div",{className:"p-6",children:it.jsxs("div",{className:"grid-quick-actions",children:[it.jsxs("button",{onClick:()=>s("personal-info"),className:"group relative bg-gradient-to-br from-white to-blue-50 rounded-2xl p-6 border border-blue-100 hover:shadow-xl hover:scale-105 transition-all duration-300 text-left overflow-hidden",children:[it.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-blue-200 to-blue-300 rounded-full -mr-10 -mt-10"}),it.jsxs("div",{className:"relative",children:[it.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[it.jsx("div",{className:"p-4 bg-gradient-to-br from-blue-400 to-blue-600 rounded-2xl shadow-lg group-hover:scale-110 transition-transform hide-md-down",children:it.jsx(F,{className:"w-6 h-6 text-white"})}),it.jsxs("div",{children:[it.jsx("p",{className:"font-bold text-charcoal text-lg group-hover:text-blue-700 transition-colors",children:"Update Profile"}),it.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Manage your information"})]})]}),it.jsxs("div",{className:"flex items-center text-blue-600 text-sm font-semibold",children:[it.jsx("span",{children:"Go to Profile"}),it.jsx("div",{className:"ml-2 group-hover:translate-x-1 transition-transform",children:""})]})]})]}),it.jsxs("button",{onClick:()=>s("time-off"),className:"group relative bg-gradient-to-br from-white to-green-50 rounded-2xl p-6 border border-green-100 hover:shadow-xl hover:scale-105 transition-all duration-300 text-left overflow-hidden",children:[it.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-green-200 to-green-300 rounded-full -mr-10 -mt-10"}),it.jsxs("div",{className:"relative",children:[it.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[it.jsx("div",{className:"p-4 bg-gradient-to-br from-green-400 to-green-600 rounded-2xl shadow-lg group-hover:scale-110 transition-transform hide-md-down",children:it.jsx(We,{className:"w-6 h-6 text-white"})}),it.jsxs("div",{children:[it.jsx("p",{className:"font-bold text-charcoal text-lg group-hover:text-green-700 transition-colors",children:"Request Time Off"}),it.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Submit vacation requests"})]})]}),it.jsxs("div",{className:"flex items-center text-green-600 text-sm font-semibold",children:[it.jsx("span",{children:"Make Request"}),it.jsx("div",{className:"ml-2 group-hover:translate-x-1 transition-transform",children:""})]})]})]}),it.jsxs("button",{onClick:()=>s("payslips"),className:"group relative bg-gradient-to-br from-white to-amber-50 rounded-2xl p-6 border border-amber-100 hover:shadow-xl hover:scale-105 transition-all duration-300 text-left overflow-hidden",children:[it.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-amber-200 to-amber-300 rounded-full -mr-10 -mt-10"}),it.jsxs("div",{className:"relative",children:[it.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[it.jsx("div",{className:"p-4 bg-gradient-to-br from-amber-400 to-gold rounded-2xl shadow-lg group-hover:scale-110 transition-transform hide-md-down",children:it.jsx(je,{className:"w-6 h-6 text-white"})}),it.jsxs("div",{children:[it.jsx("p",{className:"font-bold text-charcoal text-lg group-hover:text-amber-700 transition-colors",children:"View Payslips"}),it.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Access pay information"})]})]}),it.jsxs("div",{className:"flex items-center text-amber-600 text-sm font-semibold",children:[it.jsx("span",{children:"View Earnings"}),it.jsx("div",{className:"ml-2 group-hover:translate-x-1 transition-transform",children:""})]})]})]})]})})]})}),it.jsx("div",{className:"mt-8",children:it.jsxs("div",{className:"bg-gradient-to-br from-brand-navy to-slate-800 text-cream rounded-2xl shadow-2xl p-8 relative overflow-hidden",children:[it.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-gradient-to-br from-gold-100 to-amber-200 rounded-full -mr-20 -mt-20"}),it.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-gradient-to-br from-blue-100 to-blue-200 rounded-full -ml-16 -mb-16"}),it.jsxs("div",{className:"relative",children:[it.jsxs("h3",{className:"text-2xl font-bold text-gold mb-6 flex items-center gap-3",children:[it.jsx("div",{className:"p-3 bg-gold-100 rounded-xl hide-md-down",children:it.jsx(ae,{className:"w-6 h-6 text-gold"})}),"Need Help?"]}),it.jsxs("div",{className:"grid-quick-actions",children:[it.jsx("div",{className:"group bg-white bg-opacity-10 backdrop-blur-sm rounded-xl p-4 hover:bg-opacity-20 transition-all duration-300",children:it.jsxs("div",{className:"flex items-center gap-4",children:[it.jsx("div",{className:"p-3 bg-gradient-to-br from-green-400 to-green-600 rounded-xl shadow-lg hide-md-down",children:it.jsx(N,{className:"w-5 h-5 text-white"})}),it.jsxs("div",{children:[it.jsx("p",{className:"text-sm font-semibold text-cream",children:"HR Department"}),it.jsx("p",{className:"text-xs text-gold font-medium",children:"(918) 555-0123"})]})]})}),it.jsx("div",{className:"group bg-white bg-opacity-10 backdrop-blur-sm rounded-xl p-4 hover:bg-opacity-20 transition-all duration-300",children:it.jsxs("div",{className:"flex items-center gap-4",children:[it.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-400 to-blue-600 rounded-xl shadow-lg hide-md-down",children:it.jsx(v,{className:"w-5 h-5 text-white"})}),it.jsxs("div",{children:[it.jsx("p",{className:"text-sm font-semibold text-cream",children:"Email Support"}),it.jsx("p",{className:"text-xs text-gold font-medium break-all",children:"hr@309311restaurants.com"})]})]})}),it.jsx("div",{className:"group bg-white bg-opacity-10 backdrop-blur-sm rounded-xl p-4 hover:bg-opacity-20 transition-all duration-300",children:it.jsxs("div",{className:"flex items-center gap-4",children:[it.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-400 to-purple-600 rounded-xl shadow-lg hide-md-down",children:it.jsx(k,{className:"w-5 h-5 text-white"})}),it.jsxs("div",{children:[it.jsx("p",{className:"text-sm font-semibold text-cream",children:"Your Location"}),it.jsx("p",{className:"text-xs text-gold font-medium",children:"Bartlesville"})]})]})})]})]})]})})]})},Dl=()=>{const{user:s}=wt(),a=t(),[r,n]=e.useState("bartlesville"),[l,o]=e.useState(!1),i="admin"===s?.role,c=[{id:"bartlesville",name:"Bartlesville - Woodfire.food",address:"123 Main Street, Bartlesville, OK 74003",phone:"(918) 555-0123",email:"bartlesville@309311restaurants.com"},{id:"tulsa",name:"Tulsa - Woodfire.food",address:"456 Downtown Ave, Tulsa, OK 74101",phone:"(918) 555-0124",email:"tulsa@309311restaurants.com"}],d=c.find(e=>e.id===r),m=e=>`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(`${window.location.origin}/onboard/${e}`)}`;return it.jsx("div",{className:"min-h-screen bg-cream text-charcoal py-4 px-4",children:it.jsx("div",{className:"max-w-6xl mx-auto",children:it.jsx("div",{className:"max-w-3xl mx-auto my-8 mb-16",children:it.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl relative border border-gold/10",children:[it.jsxs("div",{className:"bg-brand-navy rounded-t-2xl p-6 text-center relative overflow-hidden",children:[it.jsxs("div",{className:"flex items-center justify-center gap-3 mb-3",children:[it.jsx("div",{className:"w-10 h-10 bg-gold-gradient rounded-lg flex items-center justify-center shadow-lg",children:it.jsx(T,{className:"w-6 h-6 text-charcoal"})}),it.jsx("h1",{className:"font-display text-2xl md:text-3xl font-bold text-cream",children:i?"QR Code Generator":"Welcome to 309+311!"})]}),it.jsx("p",{className:"text-cream/90",children:i?"Generate QR codes for restaurant locations to enable employee onboarding":"Select your location to begin the onboarding process"})]}),it.jsx("div",{className:"p-8",children:it.jsxs("div",{className:"grid md:grid-cols-2 gap-8 items-start",children:[it.jsxs("div",{className:"space-y-5",children:[it.jsxs("div",{children:[it.jsx("h3",{className:"font-display text-xl font-semibold text-charcoal mb-3",children:"Select Location"}),it.jsx("select",{value:r,onChange:e=>n(e.target.value),className:"w-full px-3 py-2.5 border border-charcoal/20 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent transition-all",children:c.map(e=>it.jsx("option",{value:e.id,children:e.name},e.id))})]}),d&&it.jsxs("div",{className:"bg-cream/50 rounded-lg p-4",children:[it.jsxs("h4",{className:"font-semibold text-charcoal mb-2",children:[d.name.split(" - ")[0]," Location"]}),it.jsxs("p",{className:"text-charcoal/70 text-sm mb-1",children:[" ",d.address]}),it.jsxs("p",{className:"text-charcoal/70 text-sm mb-1",children:[" ",d.phone]}),it.jsxs("p",{className:"text-charcoal/70 text-sm",children:[" ",d.email]})]}),it.jsxs("div",{className:"space-y-3",children:[i&&it.jsxs("button",{onClick:()=>{const e=document.createElement("a");e.href=m(r),e.download=`${d?.name.split(" - ")[0]}-QR-Code.png`,e.click()},className:"w-full bg-gold-gradient text-charcoal font-semibold px-4 py-2.5 rounded-lg hover:shadow-lg transition-all flex items-center justify-center gap-2",children:[it.jsx(_,{className:"w-4 h-4"}),"Download QR Code"]}),i?it.jsxs("div",{className:"relative",children:[it.jsxs("button",{onClick:()=>o(!l),className:"w-full bg-charcoal text-cream font-semibold px-4 py-2.5 rounded-lg hover:bg-charcoal/80 transition-all flex items-center justify-center gap-2",children:[it.jsx(k,{className:"w-4 h-4"}),"Test Onboarding"]}),l&&it.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 bg-white rounded-lg shadow-2xl border border-charcoal/10 overflow-hidden min-w-56 z-50",children:it.jsxs("div",{className:"p-2",children:[it.jsx("div",{className:"text-xs text-charcoal/60 px-2 py-1.5 font-medium",children:"Select a location to test:"}),c.map(e=>it.jsxs("button",{onClick:()=>{return t=e.id,void a(`/onboard/${t}`);var t},className:"w-full text-left px-2 py-1.5 hover:bg-gold/10 rounded transition-colors text-sm text-charcoal",children:[it.jsx("div",{className:"font-medium",children:e.name.split(" - ")[0]}),it.jsx("div",{className:"text-xs text-charcoal/60 truncate",children:e.address})]},e.id))]})})]}):it.jsxs("button",{onClick:()=>{a(`/onboard/${r}`)},className:"w-full bg-charcoal text-cream font-semibold px-4 py-2.5 rounded-lg hover:bg-charcoal/80 transition-all flex items-center justify-center gap-2",children:[it.jsx(k,{className:"w-4 h-4"}),"Continue to Onboarding"]})]})]}),it.jsxs("div",{className:"flex flex-col items-center justify-start",children:[it.jsx("div",{className:"bg-cream p-5 rounded-xl shadow-lg",children:it.jsx("img",{src:m(r),alt:`QR Code for ${d?.name.split(" - ")[0]} Location`,className:"w-48 h-48 rounded-lg"})}),it.jsxs("div",{className:"mt-3 text-center",children:[it.jsx("p",{className:"text-charcoal/70 text-sm",children:"Scan this QR code to start the onboarding process for"}),it.jsxs("p",{className:"font-semibold text-charcoal",children:[d?.name.split(" - ")[0]," Location"]})]})]})]})})]})})})})},Ll=({status:e})=>{const{user:t,logout:s}=wt(),a=(()=>{switch(e){case"PAUSED":return{icon:it.jsx(E,{className:"w-12 h-12 text-yellow-600"}),title:"Account Temporarily Paused",message:"Your account has been temporarily paused. This may be due to scheduling adjustments or administrative requirements.",bgColor:"bg-yellow-50",borderColor:"border-yellow-200",textColor:"text-yellow-800"};case"INACTIVE":return{icon:it.jsx(q,{className:"w-12 h-12 text-red-600"}),title:"Account Inactive",message:"Your account is currently inactive. Please contact HR to resolve any issues and reactivate your account.",bgColor:"bg-red-50",borderColor:"border-red-200",textColor:"text-red-800"};default:return{icon:it.jsx(q,{className:"w-12 h-12 text-gray-600"}),title:"Account Access Restricted",message:"Your account access is currently restricted. Please contact HR for assistance.",bgColor:"bg-gray-50",borderColor:"border-gray-200",textColor:"text-gray-800"}}})();return it.jsxs("div",{className:"min-h-screen bg-cream",children:[it.jsx("div",{className:"bg-brand-navy text-cream shadow-2xl border-b border-gold/20",children:it.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:it.jsxs("div",{className:"flex justify-between items-center py-5",children:[it.jsxs("div",{children:[it.jsx("h1",{className:"font-display text-2xl xs:text-xl md:text-2xl font-bold text-gold",children:"Woodfire.food"}),it.jsx("p",{className:"text-cream/80 text-base xs:text-sm font-medium",children:"Employee Portal"})]}),it.jsxs("div",{className:"flex items-center gap-4",children:[it.jsxs("div",{className:"text-right text-sm",children:[it.jsx("p",{className:"text-cream/90",children:t?.name}),it.jsxs("p",{className:"text-cream/60",children:["Status: ",e]})]}),it.jsx("button",{onClick:s,className:"bg-charcoal text-cream px-4 py-2 rounded-md hover:bg-charcoal/80 transition-colors",children:"Logout"})]})]})})}),it.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-12",children:[it.jsxs("div",{className:"text-center mb-8",children:[it.jsx("div",{className:`w-20 h-20 ${a.bgColor} rounded-full flex items-center justify-center mx-auto mb-6`,children:a.icon}),it.jsx("h2",{className:"text-2xl font-bold text-charcoal mb-4",children:a.title})]}),it.jsx("div",{className:`${a.bgColor} ${a.borderColor} border rounded-lg p-6 mb-8`,children:it.jsxs("div",{className:"flex items-start gap-4",children:[it.jsx(q,{className:`w-6 h-6 ${a.textColor} mt-1`}),it.jsxs("div",{children:[it.jsxs("h3",{className:`font-semibold ${a.textColor} mb-2`,children:["Account Status: ",e]}),it.jsx("p",{className:a.textColor,children:a.message})]})]})}),it.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[it.jsx("h3",{className:"text-lg font-semibold text-charcoal mb-4",children:"Contact HR Department"}),it.jsx("p",{className:"text-charcoal/70 mb-6",children:"Please reach out to our HR team for assistance with your account status:"}),it.jsxs("div",{className:"space-y-4",children:[it.jsxs("div",{className:"flex items-center gap-4 p-4 bg-cream/50 rounded-lg",children:[it.jsx("div",{className:"p-2 bg-gold/10 rounded-lg",children:it.jsx(N,{className:"w-5 h-5 text-gold"})}),it.jsxs("div",{children:[it.jsx("p",{className:"font-medium text-charcoal",children:"Phone"}),it.jsx("p",{className:"text-charcoal/70",children:"(918) 555-0123"}),it.jsx("p",{className:"text-sm text-charcoal/60",children:"Monday - Friday, 9:00 AM - 5:00 PM"})]})]}),it.jsxs("div",{className:"flex items-center gap-4 p-4 bg-cream/50 rounded-lg",children:[it.jsx("div",{className:"p-2 bg-gold/10 rounded-lg",children:it.jsx(v,{className:"w-5 h-5 text-gold"})}),it.jsxs("div",{children:[it.jsx("p",{className:"font-medium text-charcoal",children:"Email"}),it.jsx("p",{className:"text-charcoal/70",children:"hr@309311restaurants.com"}),it.jsx("p",{className:"text-sm text-charcoal/60",children:"Response within 24 hours"})]})]})]})]}),it.jsxs("div",{className:"bg-brand-navy text-cream rounded-lg shadow-md p-6",children:[it.jsx("h3",{className:"text-lg font-semibold text-gold mb-4",children:"What to Expect"}),it.jsxs("div",{className:"space-y-3 text-sm",children:[it.jsxs("div",{className:"flex items-start gap-3",children:[it.jsx("div",{className:"w-2 h-2 bg-gold rounded-full mt-2"}),it.jsx("p",{children:"HR will review your account status and any pending requirements"})]}),it.jsxs("div",{className:"flex items-start gap-3",children:[it.jsx("div",{className:"w-2 h-2 bg-gold rounded-full mt-2"}),it.jsx("p",{children:"You may be contacted for additional information or documentation"})]}),it.jsxs("div",{className:"flex items-start gap-3",children:[it.jsx("div",{className:"w-2 h-2 bg-gold rounded-full mt-2"}),it.jsx("p",{children:"Once resolved, you'll receive access to your employee dashboard"})]}),it.jsxs("div",{className:"flex items-start gap-3",children:[it.jsx("div",{className:"w-2 h-2 bg-gold rounded-full mt-2"}),it.jsx("p",{children:"Check your email regularly for updates on your status"})]})]})]}),t?.id&&it.jsxs("div",{className:"mt-6 text-center",children:[it.jsxs("p",{className:"text-sm text-charcoal/60",children:["Employee Reference ID: ",it.jsx("span",{className:"font-mono font-medium",children:t.id})]}),it.jsx("p",{className:"text-xs text-charcoal/50 mt-1",children:"Please reference this ID when contacting HR"})]})]})]})},Fl=()=>{const{action:s}=l();o();const a=t(),{user:r}=wt(),[n,i]=e.useState(!1),[c,d]=e.useState(null),[m,u]=e.useState(null),[x,h]=e.useState(null);e.useEffect(()=>{r&&h({id:r.id,name:r.name,email:r.email,role:r.role,status:r.status,location:r.location})},[r]),e.useEffect(()=>{const e=Dn();u(e)},[]),e.useEffect(()=>{x&&m&&!n&&!c&&g()},[x,m,s]);const g=async()=>{if(!n){i(!0);try{let e;e="clock-in"===s?await qn(x,"CLOCK_IN_RESTAURANT_GENERAL"):"clock-out"===s?await Mn(x,"CLOCK_OUT_RESTAURANT_GENERAL"):{success:!1,error:"Invalid QR code action. Please use a valid clock-in or clock-out QR code.",errorType:"INVALID_ACTION"},d(e)}catch(e){d({success:!1,error:`Clock operation failed: ${e.message}`,errorType:"SYSTEM_ERROR"})}finally{i(!1)}}},p=()=>"clock-in"===s?"Clock In":"Clock Out";return n?it.jsx("div",{className:"min-h-screen bg-cream flex items-center justify-center p-4",children:it.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8 max-w-md w-full text-center",children:[it.jsx("div",{className:"w-16 h-16 bg-brand-navy rounded-full flex items-center justify-center mx-auto mb-6",children:it.jsx(ge,{className:"w-8 h-8 text-gold animate-spin"})}),it.jsxs("h2",{className:"text-xl font-semibold text-charcoal mb-2",children:["Processing ",p()]}),it.jsx("p",{className:"text-charcoal/60",children:"Please wait while we process your request..."})]})}):it.jsx("div",{className:"min-h-screen bg-cream flex items-center justify-center p-4",children:it.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8 max-w-md w-full",children:[it.jsxs("div",{className:"text-center mb-6",children:[it.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 "+(c?.success?"bg-green-100":"bg-red-100"),children:c?.success?it.jsx(C,{className:"w-8 h-8 text-green-600"}):it.jsx(q,{className:"w-8 h-8 text-red-600"})}),it.jsxs("h2",{className:"text-xl font-semibold text-charcoal mb-2",children:[p()," ",c?.success?"Successful":"Failed"]})]}),it.jsxs("div",{className:"border rounded-lg p-4 mb-6 "+(c?.success?"bg-green-50 border-green-200":"bg-red-50 border-red-200"),children:[it.jsx("p",{className:"font-medium "+(c?.success?"text-green-800":"text-red-800"),children:c?.message||c?.error}),c?.success&&c?.requiresApproval&&c?.timeEntry&&it.jsx("div",{className:"mt-2",children:"LATE_CLOCK_IN"===c.timeEntry.approvalReason?it.jsxs("div",{className:"text-sm text-red-700 bg-red-50 p-2 rounded border border-red-200",children:[it.jsx("p",{className:"font-medium",children:"You're latenotify manager reason."}),it.jsx("p",{className:"text-xs mt-1",children:"Manager approval has been requested for your late clock-in."})]}):it.jsx("p",{className:"text-sm text-yellow-700",children:"Manager approval required for early clock-in"})}),c?.success&&c?.hoursWorked&&it.jsxs("p",{className:"text-sm text-green-700 mt-2",children:["Hours worked: ",c.hoursWorked]})]}),x&&it.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[it.jsx("h4",{className:"font-medium text-charcoal mb-2",children:"Employee Information"}),it.jsxs("div",{className:"text-sm text-charcoal/70 space-y-1",children:[it.jsxs("p",{children:["Name: ",x.name]}),it.jsxs("p",{children:["ID: ",x.id]}),it.jsxs("p",{children:["Time: ",(new Date).toLocaleString()]}),m?.verified&&it.jsxs("p",{children:["Location: ",m.locationName]})]})]}),m&&it.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg border mb-6 "+(m.verified?"bg-green-50 border-green-200":"bg-red-50 border-red-200"),children:[it.jsx("div",{className:"w-2 h-2 rounded-full "+(m.verified?"bg-green-500":"bg-red-500")}),it.jsxs("div",{className:"flex-1",children:[it.jsx("p",{className:"text-sm font-medium text-charcoal",children:"Network Status"}),it.jsx("p",{className:"text-xs "+(m.verified?"text-green-700":"text-red-700"),children:m.verified?`On-site: ${m.locationName}`:"Not on restaurant network"})]})]}),it.jsxs("div",{className:"space-y-3",children:[it.jsx("button",{onClick:()=>{a("/employee/dashboard")},className:"w-full bg-brand-navy text-white py-3 px-4 rounded-lg font-medium hover:bg-brand-navy/90 transition-colors",children:"Go to Dashboard"}),!c?.success&&it.jsx("button",{onClick:()=>{d(null),i(!1),setTimeout(()=>{g()},100)},className:"w-full bg-gray-100 text-charcoal py-3 px-4 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Try Again"})]}),!c?.success&&it.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[it.jsx("h5",{className:"font-medium text-blue-800 mb-2",children:"Troubleshooting:"}),it.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[!r&&it.jsx("li",{children:" Make sure you are logged in to the system"}),!m?.verified&&it.jsx("li",{children:" Ensure you are connected to the restaurant network"}),"ALREADY_CLOCKED_IN"===c?.errorType&&it.jsx("li",{children:" You are already clocked in. Use clock-out QR code instead."}),"NOT_CLOCKED_IN"===c?.errorType&&it.jsx("li",{children:" You are not currently clocked in. Use clock-in QR code first."}),"NO_SHIFT_SCHEDULED"===c?.errorType&&it.jsx("li",{children:" Contact your manager about today's schedule"})]})]})]})})},ql=()=>{const e=t();return it.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-cream via-cream to-gold/10 flex flex-col",children:[it.jsx("div",{className:"w-full bg-brand-navy/95 backdrop-blur-sm shadow-lg",children:it.jsx("div",{className:"max-w-4xl mx-auto px-6 py-5",children:it.jsxs("div",{className:"flex items-center justify-center gap-4",children:[it.jsx(At,{size:"sm"}),it.jsxs("div",{className:"text-center",children:[it.jsx("h1",{className:"font-display text-2xl xs:text-xl font-bold text-gold",children:"Woodfire.food"}),it.jsx("p",{className:"text-cream/80 text-base xs:text-sm",children:"Order Tracking & Seating"})]})]})})}),it.jsx("div",{className:"flex-1 flex items-center justify-center p-6",children:it.jsx("div",{className:"w-full max-w-lg space-y-8",children:it.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 space-y-6",children:[it.jsxs("div",{className:"text-center space-y-4",children:[it.jsx("h2",{className:"text-3xl font-bold text-charcoal font-display",children:"Welcome!"}),it.jsx("p",{className:"text-lg text-gray-700 leading-relaxed",children:"Thank you for visiting us today. How can we help you?"})]}),it.jsxs("div",{className:"space-y-4",children:[it.jsx("button",{onClick:()=>e("/seating"),className:"w-full bg-gold-gradient text-charcoal py-6 px-8 rounded-2xl hover:shadow-xl transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98] group mobile-landing-button",children:it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsxs("div",{className:"flex items-center gap-4",children:[it.jsx("div",{className:"w-14 h-14 bg-charcoal/10 rounded-xl flex items-center justify-center group-hover:bg-charcoal/20 transition-colors mobile-hide-landing-icons",children:it.jsx(k,{className:"w-7 h-7 text-charcoal"})}),it.jsxs("div",{className:"text-left",children:[it.jsx("h3",{className:"text-xl font-bold text-charcoal font-display",children:"Let us know where you are sitting"}),it.jsx("p",{className:"text-charcoal/70 text-sm mt-1",children:"Help us deliver your order to your table"})]})]}),it.jsx("div",{className:"text-charcoal/50",children:it.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:it.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})}),it.jsx("button",{onClick:()=>e("/customer/login"),className:"w-full bg-white border-2 border-gold/30 text-charcoal py-6 px-8 rounded-2xl hover:border-gold hover:shadow-lg transition-all duration-300 transform hover:scale-[1.01] active:scale-[0.99] group mobile-landing-button",children:it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsxs("div",{className:"flex items-center gap-4",children:[it.jsx("div",{className:"w-14 h-14 bg-gold/10 rounded-xl flex items-center justify-center group-hover:bg-gold/20 transition-colors mobile-hide-landing-icons",children:it.jsx(le,{className:"w-7 h-7 text-gold"})}),it.jsxs("div",{className:"text-left",children:[it.jsx("h3",{className:"text-xl font-bold text-charcoal font-display",children:"Customer Account"}),it.jsx("p",{className:"text-charcoal/70 text-sm mt-1",children:"Sign in or join rewards program"})]})]}),it.jsx("div",{className:"text-charcoal/50",children:it.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:it.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})})]})]})})}),it.jsx("div",{className:"w-full bg-charcoal/5 border-t border-gold/20",children:it.jsx("div",{className:"max-w-4xl mx-auto px-6 py-6",children:it.jsxs("div",{className:"text-center space-y-2",children:[it.jsx("p",{className:"text-sm text-charcoal/70",children:"Questions? Our team is here to help!"}),it.jsxs("div",{className:"flex items-center justify-center gap-6 text-xs text-gray-500",children:[it.jsx("span",{children:"Bartlesville  Tulsa"}),it.jsx("span",{children:""}),it.jsx("span",{children:"Woodfire.food"}),it.jsx("span",{children:""}),it.jsx("button",{onClick:()=>e("/admin/login"),className:"text-blue-600 hover:text-blue-700 transition-colors underline",children:"Employee Login"})]})]})})})]})},Ml=()=>{const s=t(),[a,r]=e.useState({tableNumber:"",orderNumber:""}),[n,l]=e.useState({}),[o,i]=e.useState(!1),c=(e,t)=>{r(s=>({...s,[e]:t})),n[e]&&l(t=>({...t,[e]:""}))};return it.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-cream via-cream to-gold/10 flex flex-col",children:[it.jsx("div",{className:"w-full bg-brand-navy/95 backdrop-blur-sm shadow-lg",children:it.jsx("div",{className:"max-w-4xl mx-auto px-6 py-4 mobile-content-padding",children:it.jsxs("div",{className:"flex items-center justify-center gap-3",children:[it.jsx(At,{size:"sm"}),it.jsx("div",{className:"text-center",children:it.jsx("h1",{className:"font-display text-xl font-bold text-gold mobile-main-header",children:"Seating Notification"})})]})})}),it.jsx("div",{className:"flex-1 flex items-center justify-center p-6 mobile-content-padding",children:it.jsx("div",{className:"w-full max-w-lg space-y-8",children:it.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 space-y-6 mobile-seating-form",children:[it.jsxs("div",{className:"text-center space-y-4",children:[it.jsxs("div",{className:"relative mobile-seating-header",children:[it.jsx("button",{onClick:()=>s("/"),className:"absolute left-0 top-1/2 transform -translate-y-1/2 text-gray-600 hover:text-charcoal transition-colors mobile-back-arrow",children:it.jsx(P,{className:"w-6 h-6"})}),it.jsx("h2",{className:"text-2xl font-bold text-charcoal font-display mobile-seating-title",children:"Let us know where you are sitting"})]}),it.jsx("p",{className:"text-gray-600 leading-relaxed mobile-subtitle",children:"We'll deliver your order directly to your table"})]}),it.jsxs("form",{onSubmit:async e=>{e.preventDefault();if(await zs.isValidTableNumber(a.tableNumber)){if((()=>{const e={};return a.tableNumber.trim()||(e.tableNumber="Table number is required"),a.orderNumber.trim()?zs.isValidOrderNumber(a.orderNumber)||(e.orderNumber="Please enter a valid order number (numbers only)"):e.orderNumber="Order number is required",l(e),0===Object.keys(e).length})()){i(!0);try{const e=a.tableNumber.toUpperCase(),t=a.orderNumber;console.log(" Starting order submission:",{tableNumber:e,orderNumber:t});const r=await zs.submitTableMapping(e,t,"customer"),n=r?.area||"dining";console.log(" Table mapping created:",{tableNumber:e,orderNumber:t,area:n}),console.log(" Notifications sent automatically by API"),console.log(" Order submission completed successfully!"),s("/success",{state:{tableNumber:e,orderNumber:t}})}catch(t){console.error(" Order submission error:",t),l({general:t.message||"Something went wrong. Please try again."})}finally{i(!1)}}}else l({tableNumber:"Invalid table number. Please check the number displayed at your table"})},className:"space-y-6",children:[n.general&&it.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 flex items-start gap-3",children:[it.jsx(b,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),it.jsxs("div",{children:[it.jsx("p",{className:"text-red-700 font-medium",children:"Unable to submit"}),it.jsx("p",{className:"text-red-600 text-sm",children:n.general})]})]}),it.jsxs("div",{className:"space-y-2",children:[it.jsx("label",{className:"block text-sm font-semibold text-charcoal mobile-form-label",children:"Table Number *"}),it.jsxs("div",{className:"relative",children:[it.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none mobile-input-icon",children:it.jsx($,{className:"w-5 h-5 text-gray-400"})}),it.jsx("input",{type:"text",value:a.tableNumber,onChange:e=>c("tableNumber",e.target.value.toUpperCase()),className:"w-full pl-12 pr-4 py-4 border-2 rounded-xl text-lg font-medium focus:outline-none focus:ring-2 focus:ring-gold/50 transition-colors mobile-form-input "+(n.tableNumber?"border-red-300 bg-red-50":"border-gray-200 bg-white hover:border-gold/30 focus:border-gold"),placeholder:"Table 12",disabled:o})]}),n.tableNumber&&it.jsxs("p",{className:"text-red-600 text-sm flex items-center gap-1",children:[it.jsx(b,{className:"w-4 h-4"}),n.tableNumber]}),it.jsx("p",{className:"text-xs text-gray-500",children:'Find this number displayed on your table (e.g., "12", "P3", "B1")'})]}),it.jsxs("div",{className:"space-y-2",children:[it.jsx("label",{className:"block text-sm font-semibold text-charcoal mobile-form-label",children:"Order Number *"}),it.jsxs("div",{className:"relative",children:[it.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none mobile-input-icon",children:it.jsx(pe,{className:"w-5 h-5 text-gray-400"})}),it.jsx("input",{type:"text",value:a.orderNumber,onChange:e=>c("orderNumber",e.target.value),className:"w-full pl-12 pr-4 py-4 border-2 rounded-xl text-lg font-medium focus:outline-none focus:ring-2 focus:ring-gold/50 transition-colors mobile-form-input "+(n.orderNumber?"border-red-300 bg-red-50":"border-gray-200 bg-white hover:border-gold/30 focus:border-gold"),placeholder:"4837",disabled:o})]}),n.orderNumber&&it.jsxs("p",{className:"text-red-600 text-sm flex items-center gap-1",children:[it.jsx(b,{className:"w-4 h-4"}),n.orderNumber]}),it.jsx("p",{className:"text-xs text-gray-500",children:'Found on your receipt from the counter (e.g., "#4837")'})]}),it.jsx("button",{type:"submit",disabled:o||!a.tableNumber||!a.orderNumber,className:"w-full bg-gold-gradient text-charcoal py-4 px-6 rounded-xl font-bold text-lg hover:shadow-lg transition-all duration-300 transform hover:scale-[1.01] active:scale-[0.99] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none disabled:hover:shadow-none mobile-submit-button",children:o?it.jsxs("div",{className:"flex items-center justify-center gap-2",children:[it.jsx("div",{className:"w-5 h-5 border-2 border-charcoal/30 border-t-charcoal rounded-full animate-spin"}),it.jsx("span",{children:"Submitting..."})]}):it.jsxs("div",{className:"flex items-center justify-center gap-2",children:[it.jsx(C,{className:"w-5 h-5"}),it.jsx("span",{children:"Submit"})]})})]}),it.jsx("div",{className:"text-center pt-4 border-t border-gray-200",children:it.jsx("p",{className:"text-xs text-gray-500",children:"No personal information required. We only use this to deliver your order."})})]})})}),it.jsx("div",{className:"w-full bg-charcoal/5 border-t border-gold/20",children:it.jsx("div",{className:"max-w-4xl mx-auto px-6 py-4 mobile-content-padding",children:it.jsx("div",{className:"text-center",children:it.jsx("p",{className:"text-xs text-gray-500 mobile-footer-text",children:"Woodfire.food  Secure Table Tracking"})})})})]})},$l=()=>{const e=t(),s=a(),{tableNumber:r="N/A",orderNumber:n="N/A"}=s.state||{},l=(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return it.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-cream to-gold/10 flex flex-col",children:[it.jsx("div",{className:"w-full bg-brand-navy/95 backdrop-blur-sm shadow-lg",children:it.jsx("div",{className:"max-w-4xl mx-auto px-6 py-4",children:it.jsxs("div",{className:"flex items-center justify-center gap-3",children:[it.jsx(At,{size:"sm"}),it.jsx("div",{className:"text-center",children:it.jsx("h1",{className:"font-display text-xl font-bold text-gold",children:"Order Confirmed!"})})]})})}),it.jsx("div",{className:"flex-1 flex items-center justify-center p-6",children:it.jsxs("div",{className:"w-full max-w-4xl space-y-8",children:[it.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 text-center",children:[it.jsx("h2",{className:"text-3xl font-bold text-green-700 font-display mb-4",children:"Perfect!"}),it.jsx("p",{className:"text-xl text-charcoal font-medium leading-relaxed",children:"Thanks for letting us know where you are. Your order will be delivered soon."})]}),it.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[it.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-200",children:[it.jsxs("h3",{className:"font-semibold text-charcoal mb-4 flex items-center justify-center gap-2",children:[it.jsx(k,{className:"w-5 h-5 text-gold"}),"Delivery Details"]}),it.jsxs("div",{className:"space-y-3",children:[it.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[it.jsx("span",{className:"text-gray-600",children:"Order Number"}),it.jsxs("span",{className:"font-bold text-charcoal",children:["#",n]})]}),it.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[it.jsx("span",{className:"text-gray-600",children:"Table"}),it.jsx("span",{className:"font-bold text-charcoal",children:r})]}),it.jsxs("div",{className:"flex justify-between items-center py-2",children:[it.jsx("span",{className:"text-gray-600",children:"Submitted"}),it.jsx("span",{className:"font-medium text-charcoal",children:l})]})]})]}),it.jsxs("div",{className:"bg-gradient-to-r from-gold/10 to-gold/5 rounded-2xl p-6 border-2 border-gold/30",children:[it.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[it.jsx("div",{className:"w-12 h-12 bg-gold/20 rounded-full flex items-center justify-center",children:it.jsx(ke,{className:"w-7 h-7 text-gold"})}),it.jsxs("div",{className:"text-left",children:[it.jsx("h3",{className:"text-xl font-bold text-charcoal font-display",children:"Want perks?"}),it.jsx("p",{className:"text-gold-dark text-sm",children:"Join our rewards program"})]})]}),it.jsx("button",{onClick:()=>e("/customer/signup"),className:"w-full bg-gold-gradient text-charcoal py-4 px-6 rounded-xl font-bold text-lg hover:shadow-lg transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98]",children:"Sign up for rewards"}),it.jsx("p",{className:"text-xs text-gray-600 mt-3",children:"Earn points, get exclusive offers, and track your order history"})]})]}),it.jsxs("div",{className:"space-y-3",children:[it.jsx("button",{onClick:()=>e("/"),className:"w-full bg-white border-2 border-gray-200 text-charcoal py-3 px-6 rounded-xl font-medium hover:border-gold/50 hover:shadow-md transition-all duration-300",children:it.jsxs("div",{className:"flex items-center justify-center gap-2",children:[it.jsx(le,{className:"w-5 h-5"}),it.jsx("span",{children:"Back to Home"})]})}),it.jsx("p",{className:"text-xs text-gray-500 text-center",children:"Need to update your table? Submit the form again with your new location"})]})]})}),it.jsx("div",{className:"w-full bg-charcoal/5 border-t border-gold/20",children:it.jsx("div",{className:"max-w-4xl mx-auto px-6 py-6",children:it.jsxs("div",{className:"text-center space-y-2",children:[it.jsx("p",{className:"text-sm text-charcoal/70",children:"Thank you for dining with us today!"}),it.jsxs("div",{className:"flex items-center justify-center gap-6 text-xs text-gray-500",children:[it.jsx("span",{children:"Order delivered to your table"}),it.jsx("span",{children:""}),it.jsx("span",{children:"Woodfire.food"})]})]})})})]})},zl=()=>{const[r,n]=e.useState({email:"",password:""}),[l,o]=e.useState({}),[i,c]=e.useState(!1),{customerLogin:d}=wt(),m=t(),u=a(),x=u.state?.from?.pathname||"/customer/dashboard",h=e=>{const{name:t,value:s}=e.target;n(e=>({...e,[t]:s})),l[t]&&o(e=>({...e,[t]:""}))};return it.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-cream via-cream to-gold/10 flex flex-col",children:[it.jsx("div",{className:"w-full bg-brand-navy/95 backdrop-blur-sm shadow-lg",children:it.jsx("div",{className:"max-w-4xl mx-auto px-6 py-4",children:it.jsxs("div",{className:"flex items-center justify-center gap-3",children:[it.jsx(At,{size:"sm"}),it.jsx("div",{className:"text-center",children:it.jsx("h1",{className:"font-display text-xl font-bold text-gold",children:"Customer Sign In"})})]})})}),it.jsx("div",{className:"flex-1 flex items-center justify-center px-4 py-12",children:it.jsx("div",{className:"max-w-md w-full",children:it.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!(()=>{const e={};return r.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)||(e.email="Please enter a valid email address"):e.email="Email is required",r.password||(e.password="Password is required"),o(e),0===Object.keys(e).length})())return;c(!0);const t=await d(r.email,r.password);t.success?m(x,{replace:!0}):o({general:t.error}),c(!1)},className:"bg-white rounded-2xl shadow-lg p-8 space-y-6",children:[it.jsxs("div",{className:"text-center mb-6",children:[it.jsxs("div",{className:"relative",children:[it.jsx("button",{type:"button",onClick:()=>m("/"),className:"absolute left-0 top-1/2 transform -translate-y-1/2 text-gray-600 hover:text-charcoal transition-colors",children:it.jsx(P,{className:"w-6 h-6"})}),it.jsx("h3",{className:"text-2xl font-bold text-charcoal mb-2",children:"Welcome Back!"})]}),it.jsx("p",{className:"text-charcoal/70 mb-2",children:"Sign in to your account to access rewards, order history, and exclusive offers"})]}),l.general&&it.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl text-sm",children:l.general}),it.jsxs("div",{className:"space-y-4",children:[it.jsx(St,{id:"email",name:"email",type:"email",label:"Email Address",value:r.email,onChange:h,error:l.email,required:!0}),it.jsx(St,{id:"password",name:"password",type:"password",label:"Password",value:r.password,onChange:h,error:l.password,required:!0})]}),it.jsx("button",{type:"submit",disabled:i,className:"w-full bg-gold-gradient text-charcoal py-4 px-6 rounded-xl hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-gold focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-bold text-lg",children:i?"Signing In...":"Sign In"}),it.jsx("div",{className:"text-center",children:it.jsxs("p",{className:"text-charcoal/70 text-sm",children:["Don't have an account?"," ",it.jsx(s,{to:"/customer/signup",className:"text-gold hover:text-gold-dark font-medium transition-colors duration-200",children:"Join now"})]})}),it.jsx("div",{className:"text-center pt-4 border-t border-gray-200",children:it.jsx("p",{className:"text-xs text-gray-500",children:it.jsx(s,{to:"/employee/login",className:"text-blue-600 hover:text-blue-700 transition-colors",children:"Employee Login"})})})]})})}),it.jsx("div",{className:"w-full bg-charcoal/5 border-t border-gold/20",children:it.jsx("div",{className:"max-w-4xl mx-auto px-6 py-4",children:it.jsx("div",{className:"text-center",children:it.jsx("p",{className:"text-xs text-gray-500",children:"Woodfire.food  Secure Customer Login"})})})})]})},Ul=()=>{const[a,r]=e.useState({name:"",phone:"",email:"",locations:[{name:"",isHome:!0}],password:"",confirmPassword:""}),[n,l]=e.useState({}),[o,i]=e.useState(!1),{customerSignup:c}=wt(),d=t(),m=e=>{const{name:t,value:s}=e.target;r(e=>({...e,[t]:s})),n[t]&&l(e=>({...e,[t]:""}))};return it.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-cream via-cream to-gold/10 flex flex-col",children:[it.jsx("div",{className:"w-full bg-brand-navy/95 backdrop-blur-sm shadow-lg",children:it.jsx("div",{className:"max-w-4xl mx-auto px-4 xs:px-6 py-3 xs:py-4",children:it.jsxs("div",{className:"flex items-center justify-center gap-2 xs:gap-3",children:[it.jsx(At,{size:"sm"}),it.jsx("div",{className:"text-center",children:it.jsx("h1",{className:"font-display text-lg xs:text-xl font-bold text-gold",children:"Join Our Community"})})]})})}),it.jsx("div",{className:"flex-1 flex items-center justify-center px-3 xs:px-4 py-6 xs:py-12",children:it.jsxs("div",{className:"max-w-lg w-full",children:[it.jsxs("div",{className:"text-center mb-4 xs:mb-6",children:[it.jsx("h2",{className:"text-xl xs:text-2xl font-bold text-charcoal font-display mb-3 xs:mb-4",children:"Join Our Community"}),it.jsx("p",{className:"text-sm xs:text-base text-gray-600 leading-relaxed mb-4 xs:mb-6 px-2 xs:px-0",children:"Create your account to earn rewards and enjoy exclusive benefits"})]}),it.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!(()=>{const e={};return a.name.trim()||(e.name="Name is required"),a.phone.trim()?/^[\+]?[1-9][\d]{0,14}$/.test(a.phone.replace(/[\s\-\(\)]/g,""))||(e.phone="Please enter a valid phone number"):e.phone="Phone number is required",a.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)||(e.email="Please enter a valid email address"):e.email="Email is required",a.locations.some(e=>e.name.trim())||(e.locations="At least one location is required"),a.password?a.password.length<6&&(e.password="Password must be at least 6 characters long"):e.password="Password is required",a.confirmPassword?a.password!==a.confirmPassword&&(e.confirmPassword="Passwords do not match"):e.confirmPassword="Please confirm your password",l(e),0===Object.keys(e).length})())return;i(!0);const t=await c({...a,password_confirmation:a.confirmPassword});t.success?d("/customer/dashboard"):l({general:t.error}),i(!1)},className:"bg-white rounded-2xl shadow-lg p-4 xs:p-8 space-y-4 xs:space-y-6",children:[it.jsxs("div",{className:"text-center mb-4 xs:mb-6",children:[it.jsxs("div",{className:"relative",children:[it.jsx("button",{type:"button",onClick:()=>d("/"),className:"absolute left-0 top-1/2 transform -translate-y-1/2 text-gray-600 hover:text-charcoal transition-colors",children:it.jsx(P,{className:"w-5 h-5 xs:w-6 xs:h-6"})}),it.jsx("h3",{className:"text-xl xs:text-2xl font-bold text-charcoal mb-1 xs:mb-2",children:"Create Your Account"})]}),it.jsx("p",{className:"text-charcoal/70 text-sm xs:text-base whitespace-nowrap",children:"Join thousands of satisfied customers"})]}),n.general&&it.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl text-sm",children:n.general}),it.jsxs("div",{className:"space-y-4",children:[it.jsx(St,{id:"name",name:"name",type:"text",label:"Full Name",value:a.name,onChange:m,error:n.name,required:!0}),it.jsx(St,{id:"phone",name:"phone",type:"tel",label:"Phone Number",value:a.phone,onChange:m,error:n.phone,required:!0}),it.jsx(St,{id:"email",name:"email",type:"email",label:"Email Address",value:a.email,onChange:m,error:n.email,required:!0}),it.jsxs("div",{className:"space-y-3",children:[it.jsx("label",{className:"block text-sm font-semibold text-charcoal",children:"Location(s) *"}),a.locations.map((e,t)=>it.jsxs("div",{className:"border-2 border-gray-200 rounded-xl p-3 xs:p-4 space-y-2 xs:space-y-3",children:[it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsxs("div",{className:"flex items-center gap-1 xs:gap-2",children:[it.jsx(k,{className:"w-3 h-3 xs:w-4 xs:h-4 text-gray-400"}),it.jsxs("span",{className:"text-xs xs:text-sm font-medium text-gray-700",children:["Location ",t+1,e.isHome&&it.jsxs("span",{className:"ml-1 xs:ml-2 inline-flex items-center gap-1 px-1.5 xs:px-2 py-0.5 xs:py-1 bg-gold/20 text-gold text-xs rounded-full",children:[it.jsx(le,{className:"w-2.5 h-2.5 xs:w-3 xs:h-3"}),"Home"]})]})]}),it.jsxs("div",{className:"flex items-center gap-1 xs:gap-2",children:[!e.isHome&&it.jsx("button",{type:"button",onClick:()=>(e=>{r(t=>({...t,locations:t.locations.map((t,s)=>({...t,isHome:s===e}))}))})(t),className:"text-xs text-gold hover:text-gold-dark transition-colors",children:"Set as Home"}),a.locations.length>1&&it.jsx("button",{type:"button",onClick:()=>(e=>{a.locations.length>1&&r(t=>({...t,locations:t.locations.filter((t,s)=>s!==e)}))})(t),className:"text-red-500 hover:text-red-700 transition-colors",children:it.jsx(O,{className:"w-3.5 h-3.5 xs:w-4 xs:h-4"})})]})]}),it.jsx("div",{className:"relative",children:it.jsx("input",{type:"text",value:e.name,onChange:e=>((e,t,s)=>{r(a=>({...a,locations:a.locations.map((a,r)=>r===e?{...a,[t]:s}:a)}))})(t,"name",e.target.value),className:"w-full px-3 xs:px-4 py-2.5 xs:py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-gold transition-colors text-sm xs:text-base",placeholder:"Enter location (e.g., Bartlesville, Tulsa)"})})]},t)),it.jsxs("button",{type:"button",onClick:()=>{r(e=>({...e,locations:[...e.locations,{name:"",isHome:!1}]}))},className:"w-full flex items-center justify-center gap-1 xs:gap-2 py-2.5 xs:py-3 border-2 border-dashed border-gray-300 rounded-xl text-gray-600 hover:border-gold hover:text-gold transition-colors text-sm xs:text-base",children:[it.jsx(I,{className:"w-3.5 h-3.5 xs:w-4 xs:h-4"}),"Add Another Location"]}),n.locations&&it.jsx("p",{className:"text-red-600 text-sm",children:n.locations})]}),it.jsx(St,{id:"password",name:"password",type:"password",label:"Password",value:a.password,onChange:m,error:n.password,required:!0}),it.jsx(St,{id:"confirmPassword",name:"confirmPassword",type:"password",label:"Confirm Password",value:a.confirmPassword,onChange:m,error:n.confirmPassword,required:!0})]}),it.jsx("button",{type:"submit",disabled:o,className:"w-full bg-gold-gradient text-charcoal py-3 xs:py-4 px-4 xs:px-6 rounded-xl hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-gold focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-bold text-base xs:text-lg",children:o?"Creating Account...":"Join Now"}),it.jsx("div",{className:"text-center",children:it.jsxs("p",{className:"text-charcoal/70 text-xs xs:text-sm",children:["Already have an account?"," ",it.jsx(s,{to:"/customer/login",className:"text-gold hover:text-gold-dark font-medium transition-colors duration-200",children:"Sign in here"})]})}),it.jsx("div",{className:"text-center pt-3 xs:pt-4 border-t border-gray-200",children:it.jsx("p",{className:"text-xs text-gray-500 px-2 xs:px-0",children:"By creating an account, you agree to our Terms of Service and Privacy Policy"})})]})]})}),it.jsx("div",{className:"w-full bg-charcoal/5 border-t border-gold/20",children:it.jsx("div",{className:"max-w-4xl mx-auto px-4 xs:px-6 py-3 xs:py-4",children:it.jsx("div",{className:"text-center",children:it.jsx("p",{className:"text-xs text-gray-500",children:"Woodfire.food  Secure Customer Registration"})})})})]})},Bl=({isOpen:t,onToggle:s})=>{const{user:a}=wt(),[r,n]=e.useState([]),[l,o]=e.useState(""),[i,c]=e.useState([]),[d,m]=e.useState(!1),[u,x]=e.useState(!1),h=e.useRef(null),g=e.useRef(null);e.useEffect(()=>{t&&p()},[t,a?.id]),e.useEffect(()=>{f()},[r]);const p=()=>{if(!a?.id)return;const e=JSON.parse(localStorage.getItem("customerMessages")||"[]").filter(e=>e.customerId===a.id||e.recipientId===a.id);n(e)},f=()=>{h.current?.scrollIntoView({behavior:"smooth"})},b=()=>{if(!l.trim()&&0===i.length)return;if(!a?.id)return;const e={id:Date.now().toString()+Math.random().toString(36).substr(2,9),customerId:a.id,customerName:a.name,senderId:a.id,senderName:a.name,senderRole:"Customer",recipientId:"admin",type:"customer_to_admin",content:l.trim(),attachments:i,timestamp:(new Date).toISOString(),read:!1},t=JSON.parse(localStorage.getItem("customerMessages")||"[]");t.push(e),localStorage.setItem("customerMessages",JSON.stringify(t));const s=JSON.parse(localStorage.getItem("employeeMessages")||"[]");s.push({...e,type:"customer_inquiry"}),localStorage.setItem("employeeMessages",JSON.stringify(s));const r=JSON.parse(localStorage.getItem("adminNotifications")||"[]"),n={id:Date.now().toString()+"_customer_msg",type:"CUSTOMER_MESSAGE",title:"New Customer Message",message:`${a.name}: ${e.content.substring(0,50)}${e.content.length>50?"...":""}`,timestamp:e.timestamp,read:!1,customerId:a.id,customerName:a.name};r.unshift(n),localStorage.setItem("adminNotifications",JSON.stringify(r)),o(""),c([]),p(),setTimeout(()=>x(!0),1e3),setTimeout(()=>{x(!1);const e={id:Date.now().toString()+Math.random().toString(36).substr(2,9),customerId:a.id,customerName:a.name,senderId:"admin",senderName:"Restaurant Support",senderRole:"Support",recipientId:a.id,type:"admin_to_customer",content:"Thank you for reaching out! We've received your message and our team will get back to you shortly. Our typical response time is 15-30 minutes during business hours.",attachments:[],timestamp:(new Date).toISOString(),read:!1},t=JSON.parse(localStorage.getItem("customerMessages")||"[]");t.push(e),localStorage.setItem("customerMessages",JSON.stringify(t)),p()},3e3)},y=e=>e.startsWith("image/")?it.jsx(ie,{className:"w-3 h-3"}):e.includes("pdf")?it.jsx(Q,{className:"w-3 h-3"}):it.jsx(Ke,{className:"w-3 h-3"}),j=e=>{const t=new Date(e),s=new Date-t,a=s/36e5;if(a<1){const e=Math.floor(s/6e4);return 0===e?"Just now":`${e}m ago`}return a<24?`${Math.floor(a)}h ago`:t.toLocaleDateString()};return t?it.jsxs("div",{className:`fixed bottom-3 xs:bottom-4 right-3 xs:right-4 bg-white rounded-xl shadow-2xl border border-gray-200 z-50 ${d?"w-72 xs:w-80 h-16":"w-72 xs:w-80 h-80 xs:h-96"} transition-all duration-300`,children:[it.jsxs("div",{className:"flex items-center justify-between p-3 xs:p-4 border-b border-gray-200 bg-gradient-to-r from-gold/10 to-gold/5 rounded-t-xl",children:[it.jsxs("div",{className:"flex items-center gap-2 xs:gap-3",children:[it.jsx("div",{className:"p-1.5 xs:p-2 bg-gold/20 rounded-lg",children:it.jsx(ne,{className:"w-3.5 h-3.5 xs:w-4 xs:h-4 text-gold"})}),it.jsxs("div",{children:[it.jsx("h3",{className:"font-semibold text-charcoal text-xs xs:text-sm",children:"Restaurant Support"}),it.jsx("p",{className:"text-xs text-gray-600",children:"We're here to help!"})]})]}),it.jsxs("div",{className:"flex items-center gap-1 xs:gap-2",children:[it.jsx("button",{onClick:()=>m(!d),className:"text-gray-400 hover:text-gray-600 transition-colors",children:d?it.jsx(Je,{className:"w-3.5 h-3.5 xs:w-4 xs:h-4"}):it.jsx(Ge,{className:"w-3.5 h-3.5 xs:w-4 xs:h-4"})}),it.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:it.jsx(O,{className:"w-3.5 h-3.5 xs:w-4 xs:h-4"})})]})]}),!d&&it.jsxs(it.Fragment,{children:[it.jsx("div",{className:"flex-1 p-3 xs:p-4 max-h-48 xs:max-h-64 overflow-y-auto bg-gray-50",children:0===r.length?it.jsxs("div",{className:"text-center py-6 xs:py-8",children:[it.jsx(ne,{className:"w-6 h-6 xs:w-8 xs:h-8 mx-auto mb-2 text-gray-300"}),it.jsx("p",{className:"text-xs xs:text-sm text-gray-500 mb-2",children:"Start a conversation"}),it.jsx("p",{className:"text-xs text-gray-400",children:"Ask us anything about your order, menu, or dining experience!"})]}):it.jsxs("div",{className:"space-y-3",children:[r.sort((e,t)=>new Date(e.timestamp)-new Date(t.timestamp)).map(e=>it.jsx("div",{className:"flex "+(e.senderId===a?.id?"justify-end":"justify-start"),children:it.jsxs("div",{className:"max-w-xs px-2.5 xs:px-3 py-1.5 xs:py-2 rounded-lg text-xs xs:text-sm "+(e.senderId===a?.id?"bg-gold text-charcoal":"bg-white text-gray-800 border border-gray-200"),children:[e.senderId!==a?.id&&it.jsx("div",{className:"mb-1",children:it.jsx("span",{className:"text-xs font-medium text-blue-600",children:e.senderName})}),e.content&&it.jsx("p",{children:e.content}),e.attachments&&e.attachments.length>0&&it.jsx("div",{className:"mt-2 space-y-1",children:e.attachments.map((e,t)=>it.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white/20 rounded text-xs",children:[y(e.type),it.jsx("span",{className:"truncate",children:e.name}),e.data&&it.jsx("button",{onClick:()=>{const t=document.createElement("a");t.href=e.data,t.download=e.name,t.click()},className:"hover:text-blue-300",children:it.jsx(_,{className:"w-3 h-3"})})]},t))}),it.jsx("div",{className:"mt-1 text-xs opacity-70",children:j(e.timestamp)})]})},e.id)),u&&it.jsx("div",{className:"flex justify-start",children:it.jsx("div",{className:"bg-white border border-gray-200 px-3 py-2 rounded-lg text-sm",children:it.jsxs("div",{className:"flex items-center gap-1",children:[it.jsxs("div",{className:"flex gap-1",children:[it.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),it.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),it.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),it.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"Support is typing..."})]})})}),it.jsx("div",{ref:h})]})}),it.jsxs("div",{className:"p-2 xs:p-3 border-t border-gray-200",children:[i.length>0&&it.jsx("div",{className:"mb-2",children:it.jsx("div",{className:"flex flex-wrap gap-1 xs:gap-2",children:i.map(e=>it.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 rounded px-1.5 xs:px-2 py-1 text-xs",children:[y(e.type),it.jsx("span",{className:"truncate max-w-16 xs:max-w-20",children:e.name}),it.jsx("button",{onClick:()=>{return t=e.id,void c(e=>e.filter(e=>e.id!==t));var t},className:"text-red-500 hover:text-red-700",children:it.jsx(O,{className:"w-2.5 h-2.5 xs:w-3 xs:h-3"})})]},e.id))})}),it.jsxs("div",{className:"flex gap-1 xs:gap-2",children:[it.jsx("input",{ref:g,type:"file",multiple:!0,onChange:e=>{const t=Array.from(e.target.files).map(e=>({id:Date.now().toString()+Math.random().toString(36).substr(2,9),name:e.name,size:e.size,type:e.type,data:URL.createObjectURL(e),file:e}));c(e=>[...e,...t]),e.target.value=""},className:"hidden",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.gif"}),it.jsx("button",{onClick:()=>g.current?.click(),className:"p-1.5 xs:p-2 text-gray-500 hover:text-gray-700 transition-colors",title:"Attach files",children:it.jsx(ce,{className:"w-3.5 h-3.5 xs:w-4 xs:h-4"})}),it.jsx("textarea",{value:l,onChange:e=>o(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),b())},placeholder:"Type your message...",className:"flex-1 px-2 xs:px-3 py-1.5 xs:py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent resize-none text-xs xs:text-sm",rows:1}),it.jsx("button",{onClick:b,disabled:!l.trim()&&0===i.length,className:"px-2 xs:px-3 py-1.5 xs:py-2 bg-gold-gradient text-charcoal rounded-lg hover:shadow-lg transition-all disabled:bg-gray-300 disabled:cursor-not-allowed",children:it.jsx(te,{className:"w-3.5 h-3.5 xs:w-4 xs:h-4"})})]})]})]})]}):null},Vl=()=>{const{user:s,logout:a}=wt(),r=t(),[n,l]=e.useState(null),[o,i]=e.useState([]),[c,d]=e.useState([]),[m,u]=e.useState([]),[x,h]=e.useState([]),[g,p]=e.useState(!0),[f,y]=e.useState(!1);e.useEffect(()=>{s&&yt.isAuthenticated()?(async()=>{try{const e=await yt.getCustomerDashboard();if(e.success){const t=e.dashboard,s=yt.transformCustomerData(t.customer);l(s);const a=t.announcements.map(e=>yt.transformAnnouncementData(e));i(a);const r=t.event_notifications.map(e=>yt.transformAnnouncementData(e));d(r),u(t.available_rewards||[]),h([])}else console.error("Failed to load customer dashboard:",e.error),l(null),i([]),d([])}catch(e){console.error("Error loading customer dashboard:",e),l(null),i([]),d([])}finally{p(!1)}})():p(!1)},[s]);const j=async e=>{try{const t=await yt.dismissAnnouncement(e);t.success?(i(t=>t.filter(t=>t.id!==e)),d(t=>t.filter(t=>t.id!==e))):console.error("Failed to dismiss announcement:",t.error)}catch(t){console.error("Error dismissing announcement:",t)}},v=e=>{switch(e){case"info":return it.jsx(Ye,{className:"w-5 h-5"});case"warning":return it.jsx(b,{className:"w-5 h-5"});case"success":return it.jsx(C,{className:"w-5 h-5"});case"event":return it.jsx(S,{className:"w-5 h-5"});default:return it.jsx(Z,{className:"w-5 h-5"})}},N=e=>{switch(e){case"info":return"bg-blue-50 border-blue-200 text-blue-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"success":return"bg-green-50 border-green-200 text-green-800";case"event":return"bg-purple-50 border-purple-200 text-purple-800";default:return"bg-gray-50 border-gray-200 text-gray-800"}},w=o.filter(e=>!x.includes(e.id));return g?it.jsx("div",{className:"min-h-screen bg-cream flex items-center justify-center",children:it.jsxs("div",{className:"text-center",children:[it.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gold mx-auto mb-4"}),it.jsx("p",{className:"text-charcoal",children:"Loading your dashboard..."})]})}):it.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-cream via-cream to-gold/10",children:[it.jsx("div",{className:"w-full bg-brand-navy/95 backdrop-blur-sm shadow-lg",children:it.jsx("div",{className:"max-w-6xl mx-auto px-4 py-3",children:it.jsxs("div",{className:"flex items-center justify-between",children:[it.jsxs("div",{className:"flex items-center gap-2",children:[it.jsx("div",{className:"show-540-up",children:it.jsx(At,{size:"sm"})}),it.jsxs("div",{children:[it.jsx("h1",{className:"font-display text-lg font-bold text-gold hide-1024-down",children:"Customer Dashboard"}),it.jsxs("p",{className:"text-cream/80 text-xs hide-1024-down",children:["Welcome back, ",n?.firstName,"!"]})]})]}),it.jsxs("button",{onClick:()=>{a(),r("/")},className:"flex items-center gap-1 text-cream/80 hover:text-cream transition-colors px-2 py-2 rounded-lg hover:bg-white/10",children:[it.jsx(Re,{className:"w-4 h-4"}),it.jsx("span",{className:"text-xs",children:"Sign Out"})]})]})})}),it.jsxs("div",{className:"max-w-6xl mx-auto px-3 py-4",children:[w.length>0&&it.jsx("div",{className:"mb-6 space-y-3",children:w.map(e=>it.jsx("div",{className:`rounded-xl shadow-lg border-2 p-4 ${N(e.type)}`,children:it.jsxs("div",{className:"flex items-start justify-between",children:[it.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[it.jsx("div",{className:"p-2 rounded-lg "+("info"===e.type?"bg-blue-100":"warning"===e.type?"bg-yellow-100":"success"===e.type?"bg-green-100":"event"===e.type?"bg-purple-100":"bg-gray-100"),children:v(e.type)}),it.jsxs("div",{className:"flex-1",children:[it.jsx("h3",{className:"text-lg font-bold mb-2",children:e.title}),it.jsx("p",{className:"text-sm leading-relaxed mb-3",children:e.message}),e.actionUrl&&it.jsx("a",{href:e.actionUrl,className:"inline-flex items-center gap-2 bg-white/80 hover:bg-white text-current px-4 py-2 rounded-lg font-medium text-sm transition-all hover:shadow-md",children:e.actionText||"Learn More"}),it.jsxs("div",{className:"mt-3 text-xs opacity-70",children:[e.priority&&it.jsxs("span",{className:"inline-block bg-white/20 px-2 py-1 rounded mr-2 capitalize",children:[e.priority," Priority"]}),"Posted: ",new Date(e.createdAt).toLocaleDateString()]})]})]}),e.dismissible&&it.jsx("button",{onClick:()=>j(e.id),className:"text-current hover:bg-white/20 p-1 rounded-full transition-colors ml-4",title:"Dismiss",children:it.jsx(O,{className:"w-4 h-4"})})]})},e.id))}),c.length>0&&it.jsx("div",{className:"mb-6",children:it.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-4",children:[it.jsxs("div",{className:"flex items-center justify-between mb-4",children:[it.jsxs("h3",{className:"text-lg font-bold text-charcoal font-display flex items-center gap-1",children:[it.jsx(S,{className:"w-5 h-5 text-purple-600"}),it.jsx("span",{className:"show-540-up",children:"Upcoming Events"}),it.jsx("span",{className:"hide-540-up",children:"Events"})]}),it.jsxs("span",{className:"text-xs text-purple-600 bg-purple-100 px-2 py-1 rounded-full",children:[c.length," event",1!==c.length?"s":""]})]}),it.jsx("div",{className:"grid-quick-actions",children:c.slice(0,3).map(e=>it.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-25 rounded-xl p-4 border-2 border-purple-200",children:[it.jsxs("div",{className:"flex items-start justify-between mb-3",children:[it.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:it.jsx(S,{className:"w-5 h-5 text-purple-600"})}),e.dismissible&&it.jsx("button",{onClick:()=>j(e.id),className:"text-purple-400 hover:text-purple-600 transition-colors",children:it.jsx(O,{className:"w-4 h-4"})})]}),it.jsx("h4",{className:"font-bold text-purple-800 mb-2 text-sm",children:e.title}),it.jsx("p",{className:"text-purple-700 text-xs leading-relaxed mb-3",children:e.message}),e.actionUrl&&it.jsx("a",{href:e.actionUrl,className:"inline-flex items-center gap-1 bg-purple-600 text-white px-3 py-2 rounded-lg font-medium text-xs transition-all hover:bg-purple-700 hover:shadow-md",children:e.actionText||"Learn More"}),it.jsxs("div",{className:"mt-3 text-xs text-purple-600",children:["high"===e.priority&&it.jsx("span",{className:"inline-block bg-purple-200 px-2 py-1 rounded mr-2",children:"High Priority"}),"Posted: ",new Date(e.createdAt).toLocaleDateString()]})]},e.id))}),c.length>3&&it.jsx("div",{className:"text-center mt-4",children:it.jsxs("button",{className:"text-purple-600 hover:text-purple-800 font-medium text-sm",children:["View All Events (",c.length,")"]})})]})}),it.jsxs("div",{className:"grid-main gap-4 mb-6",children:[it.jsx("div",{className:"col-span-2 bg-white rounded-2xl shadow-lg p-4",children:it.jsxs("div",{className:"flex items-start justify-between",children:[it.jsxs("div",{className:"flex-1",children:[it.jsxs("h2",{className:"text-xl font-bold text-charcoal font-display mb-2",children:["Hello, ",n?.name,"! "]}),it.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Thank you for being a valued customer. Here's what's new:"}),it.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[it.jsxs("div",{className:"text-center p-2 bg-gold/10 rounded-xl",children:[it.jsx("div",{className:"text-lg font-bold text-gold",children:n?.loyaltyPoints||0}),it.jsx("div",{className:"text-xs text-gray-600",children:"Loyalty Points"})]}),it.jsxs("div",{className:"text-center p-2 bg-blue-50 rounded-xl",children:[it.jsx("div",{className:"text-lg font-bold text-blue-600",children:n?.totalOrders||0}),it.jsx("div",{className:"text-xs text-gray-600",children:"Total Orders"})]}),it.jsxs("div",{className:"text-center p-2 bg-green-50 rounded-xl",children:[it.jsxs("div",{className:"text-lg font-bold text-green-600",children:["$",n?.totalSpent||0]}),it.jsx("div",{className:"text-xs text-gray-600",children:"Total Spent"})]})]})]}),it.jsx("div",{className:"text-right show-540-up",children:it.jsx("div",{className:"w-16 h-16 bg-gold/20 rounded-full flex items-center justify-center",children:it.jsx(F,{className:"w-8 h-8 text-gold"})})})]})}),it.jsx("div",{className:"bg-gradient-to-br from-gold/20 to-gold/10 rounded-2xl shadow-lg p-4 border-2 border-gold/30",children:it.jsxs("div",{className:"text-center",children:[it.jsx("div",{className:"w-12 h-12 bg-gold/30 rounded-full flex items-center justify-center mx-auto mb-3",children:it.jsx(Ee,{className:"w-6 h-6 text-gold"})}),it.jsx("h3",{className:"text-lg font-bold text-charcoal mb-2",children:"Gold Member"}),it.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"You're earning 2x points on all orders!"}),it.jsxs("div",{className:"bg-white/80 rounded-lg p-2",children:[it.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Next reward at 1,000 points"}),it.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:it.jsx("div",{className:"bg-gold h-2 rounded-full transition-all duration-500",style:{width:`${Math.min((n?.loyaltyPoints||0)/1e3*100,100)}%`}})}),it.jsxs("div",{className:"text-xs text-gold font-medium mt-1",children:[Math.max(1e3-(n?.loyaltyPoints||0),0)," points to go"]})]})]})})]}),it.jsxs("div",{className:"grid-stats gap-3 mb-6",children:[it.jsx("button",{onClick:()=>{r("/seating")},className:"bg-white rounded-xl shadow-lg p-4 hover:shadow-xl transition-all duration-300 transform hover:scale-[1.02] text-left group",children:it.jsxs("div",{className:"flex items-center gap-3",children:[it.jsx("div",{className:"w-10 h-10 bg-gold/20 rounded-xl flex items-center justify-center group-hover:bg-gold/30 transition-colors hide-md-down",children:it.jsx(k,{className:"w-5 h-5 text-gold"})}),it.jsxs("div",{children:[it.jsx("h3",{className:"font-semibold text-charcoal text-sm",children:"Table Seating"}),it.jsx("p",{className:"text-xs text-gray-600",children:"Let us know where you're sitting"})]})]})}),it.jsx("button",{className:"bg-white rounded-xl shadow-lg p-4 hover:shadow-xl transition-all duration-300 transform hover:scale-[1.02] text-left group",children:it.jsxs("div",{className:"flex items-center gap-3",children:[it.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center group-hover:bg-blue-200 transition-colors hide-md-down",children:it.jsx(he,{className:"w-5 h-5 text-blue-600"})}),it.jsxs("div",{children:[it.jsx("h3",{className:"font-semibold text-charcoal text-sm",children:"Order Online"}),it.jsx("p",{className:"text-xs text-gray-600",children:"Browse menu & place order"})]})]})}),it.jsx("button",{className:"bg-white rounded-xl shadow-lg p-4 hover:shadow-xl transition-all duration-300 transform hover:scale-[1.02] text-left group",children:it.jsxs("div",{className:"flex items-center gap-3",children:[it.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-xl flex items-center justify-center group-hover:bg-purple-200 transition-colors hide-md-down",children:it.jsx(ke,{className:"w-5 h-5 text-purple-600"})}),it.jsxs("div",{children:[it.jsx("h3",{className:"font-semibold text-charcoal text-sm",children:"Rewards"}),it.jsx("p",{className:"text-xs text-gray-600",children:"View available rewards"})]})]})}),it.jsx("button",{className:"bg-white rounded-xl shadow-lg p-4 hover:shadow-xl transition-all duration-300 transform hover:scale-[1.02] text-left group",children:it.jsxs("div",{className:"flex items-center gap-3",children:[it.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-xl flex items-center justify-center group-hover:bg-green-200 transition-colors hide-md-down",children:it.jsx(X,{className:"w-5 h-5 text-green-600"})}),it.jsxs("div",{children:[it.jsx("h3",{className:"font-semibold text-charcoal text-sm",children:"Settings"}),it.jsx("p",{className:"text-xs text-gray-600",children:"Manage your account"})]})]})})]}),it.jsxs("div",{className:"grid-2-responsive gap-6",children:[it.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-4",children:[it.jsxs("div",{className:"flex items-center justify-between mb-4",children:[it.jsx("h3",{className:"text-lg font-bold text-charcoal font-display",children:"Recent Orders"}),it.jsx(E,{className:"w-5 h-5 text-gray-400"})]}),n?.recentOrders?.length>0?it.jsx("div",{className:"space-y-3",children:n.recentOrders.slice(0,3).map((e,t)=>it.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl",children:[it.jsxs("div",{children:[it.jsxs("div",{className:"font-medium text-charcoal text-sm",children:["Order #",e.number]}),it.jsxs("div",{className:"text-xs text-gray-600",children:[e.items," items  ",e.date]})]}),it.jsxs("div",{className:"text-right",children:[it.jsxs("div",{className:"font-bold text-charcoal text-sm",children:["$",e.total]}),it.jsxs("div",{className:"text-xs text-green-600",children:["+",e.points," points"]})]})]},t))}):it.jsxs("div",{className:"text-center py-6",children:[it.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3",children:it.jsx(he,{className:"w-6 h-6 text-gray-400"})}),it.jsx("p",{className:"text-gray-500 mb-3 text-sm",children:"No recent orders yet"}),it.jsx("button",{className:"bg-gold-gradient text-charcoal px-4 py-2 rounded-lg font-medium hover:shadow-lg transition-all text-sm",children:"Place Your First Order"})]})]}),it.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-4",children:[it.jsxs("div",{className:"flex items-center justify-between mb-4",children:[it.jsx("h3",{className:"text-lg font-bold text-charcoal font-display",children:"Favorite Items"}),it.jsx(Ae,{className:"w-5 h-5 text-red-400"})]}),n?.favoriteItems?.length>0?it.jsx("div",{className:"space-y-3",children:n.favoriteItems.slice(0,3).map((e,t)=>it.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-xl",children:[it.jsx("div",{className:"w-10 h-10 bg-gold/20 rounded-lg flex items-center justify-center",children:it.jsx("span",{className:"text-base",children:e.emoji})}),it.jsxs("div",{className:"flex-1",children:[it.jsx("div",{className:"font-medium text-charcoal text-sm xs:text-base",children:e.name}),it.jsx("div",{className:"text-xs xs:text-sm text-gray-600",children:e.description})]}),it.jsxs("div",{className:"text-right",children:[it.jsxs("div",{className:"font-bold text-charcoal text-sm xs:text-base",children:["$",e.price]}),it.jsxs("div",{className:"flex items-center gap-1",children:[it.jsx(ue,{className:"w-3 h-3 xs:w-4 xs:h-4 text-yellow-400 fill-current"}),it.jsx("span",{className:"text-xs text-gray-600",children:e.rating})]})]})]},t))}):it.jsxs("div",{className:"text-center py-6 xs:py-8",children:[it.jsx("div",{className:"w-12 h-12 xs:w-16 xs:h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3 xs:mb-4",children:it.jsx(Ae,{className:"w-6 h-6 xs:w-8 xs:h-8 text-gray-400"})}),it.jsx("p",{className:"text-gray-500 mb-3 xs:mb-4 text-sm xs:text-base",children:"No favorite items yet"}),it.jsx("button",{className:"bg-gold-gradient text-charcoal px-4 xs:px-6 py-2 rounded-lg font-medium hover:shadow-lg transition-all text-sm xs:text-base",children:"Explore Menu"})]})]})]}),it.jsxs("div",{className:"mt-6 xs:mt-8 bg-white rounded-2xl shadow-lg p-4 xs:p-6",children:[it.jsxs("div",{className:"flex items-center justify-between mb-4 xs:mb-6",children:[it.jsx("h3",{className:"text-lg xs:text-xl font-bold text-charcoal font-display",children:"Available Rewards"}),it.jsx(Se,{className:"w-5 h-5 text-gold"})]}),it.jsx("div",{className:"grid grid-cols-1 xs:grid-cols-2 lg:grid-cols-3 gap-3 xs:gap-4",children:m.length>0?m.map((e,t)=>it.jsx("div",{className:`bg-gradient-to-br ${"food"===e.type?"from-gold/10 to-gold/5 border-gold/30":"discount"===e.type?"from-blue-50 to-blue-25 border-blue-200":"from-purple-50 to-purple-25 border-purple-200"} rounded-xl p-4 border-2`,children:it.jsxs("div",{className:"text-center",children:[it.jsx("div",{className:"w-12 h-12 bg-opacity-30 rounded-full flex items-center justify-center mx-auto mb-3",children:"food"===e.type?it.jsx(ke,{className:"w-6 h-6 text-gold"}):"discount"===e.type?it.jsx(je,{className:"w-6 h-6 text-blue-600"}):it.jsx(ue,{className:"w-6 h-6 text-purple-600"})}),it.jsx("h4",{className:"font-semibold text-charcoal mb-1",children:e.name}),it.jsx("p",{className:"text-xs text-gray-600 mb-2",children:e.description}),it.jsxs("p",{className:"text-xs text-gray-600 mb-3",children:[e.points_required," points required"]}),it.jsx("button",{onClick:()=>(async e=>{try{const t=await yt.redeemReward(e);if(t.success){l(e=>({...e,loyaltyPoints:t.remaining_points}));const e=await yt.getCustomerDashboard();e.success&&u(e.dashboard.available_rewards||[]),alert(`Reward redeemed successfully! ${t.message}`)}else alert(`Failed to redeem reward: ${t.error}`)}catch(t){console.error("Error redeeming reward:",t),alert("Failed to redeem reward. Please try again.")}})(e.id),disabled:!e.available,className:`w-full ${"food"===e.type?"bg-gold-gradient text-charcoal":"discount"===e.type?"bg-blue-gradient text-white":"bg-purple-gradient text-white"} py-2 px-4 rounded-lg font-medium text-sm hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed`,children:e.available?"Redeem Now":"Need More Points"})]})},e.id)):it.jsxs("div",{className:"col-span-full text-center py-8",children:[it.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:it.jsx(Se,{className:"w-8 h-8 text-gray-400"})}),it.jsx("p",{className:"text-gray-500 mb-4",children:"No rewards available at the moment"}),it.jsx("p",{className:"text-sm text-gray-400",children:"Keep earning points to unlock exclusive rewards!"})]})})]})]}),it.jsx("div",{className:"w-full bg-charcoal/5 border-t border-gold/20 mt-8 xs:mt-12",children:it.jsx("div",{className:"max-w-6xl mx-auto px-4 xs:px-6 py-4 xs:py-6",children:it.jsxs("div",{className:"text-center space-y-2",children:[it.jsx("p",{className:"text-xs xs:text-sm text-charcoal/70",children:"Thank you for being a valued customer!"}),it.jsxs("div",{className:"flex items-center justify-center gap-3 xs:gap-6 text-xs text-gray-500",children:[it.jsxs("span",{children:["Member since ",n&&new Date(n.createdAt).toLocaleDateString()]}),it.jsx("span",{children:""}),it.jsx("span",{className:"text-center",children:"Woodfire.food"})]})]})})}),!f&&it.jsx("button",{onClick:()=>y(!0),className:"fixed bottom-3 xs:bottom-4 right-3 xs:right-4 w-12 h-12 xs:w-14 xs:h-14 bg-gold-gradient text-charcoal rounded-full shadow-lg hover:shadow-xl transition-all duration-300 z-40 flex items-center justify-center group",title:"Chat with support",children:it.jsx(ne,{className:"w-5 h-5 xs:w-6 xs:h-6 group-hover:scale-110 transition-transform"})}),it.jsx(Bl,{isOpen:f,onToggle:()=>y(!f)})]})},Hl=()=>{const[r,n]=e.useState({email:"",password:"",role:""}),[l,o]=e.useState({}),[i,c]=e.useState(!1),{adminLogin:d}=wt(),m=t();a().state;const u=e=>{const{name:t,value:s}=e.target;n(e=>({...e,[t]:s})),l[t]&&o(e=>({...e,[t]:""}))};return it.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-cream via-cream to-gold/10 flex flex-col",children:[it.jsx("div",{className:"w-full bg-brand-navy/95 backdrop-blur-sm shadow-lg",children:it.jsx("div",{className:"max-w-4xl mx-auto px-6 py-4",children:it.jsxs("div",{className:"flex items-center justify-center gap-3",children:[it.jsx(At,{size:"sm"}),it.jsx("div",{className:"text-center",children:it.jsx("h1",{className:"font-display text-xl font-bold text-gold",children:"Admin Portal"})})]})})}),it.jsx("div",{className:"flex-1 flex items-center justify-center px-4 py-12",children:it.jsx("div",{className:"max-w-md w-full",children:it.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!(()=>{const e={};return r.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)||(e.email="Please enter a valid email address"):e.email="Email is required",r.password||(e.password="Password is required"),r.role||(e.role="Role selection is required"),o(e),0===Object.keys(e).length})())return;c(!0);const t=await d(r.email,r.password,r.role);if(t.success){const e=t.user?.role||r.role;if(e!==r.role)return o({general:`Role mismatch. Your account role is '${e}', but you selected '${r.role}'.`}),void c(!1);m("/admin/dashboard",{replace:!0})}else o({general:t.error});c(!1)},className:"bg-white rounded-2xl shadow-lg p-8 space-y-6",children:[it.jsxs("div",{className:"text-center mb-6",children:[it.jsxs("div",{className:"relative",children:[it.jsx("button",{type:"button",onClick:()=>m("/"),className:"absolute left-0 top-1/2 transform -translate-y-1/2 text-gray-600 hover:text-charcoal transition-colors",children:it.jsx(P,{className:"w-6 h-6"})}),it.jsx("h3",{className:"text-2xl font-bold text-charcoal mb-2",children:"Admin Login"})]}),it.jsx("p",{className:"text-charcoal/70 mb-2",children:"Secure access for restaurant management team"})]}),l.general&&it.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl text-sm",children:l.general}),it.jsxs("div",{className:"space-y-4",children:[it.jsxs("div",{children:[it.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-charcoal mb-2",children:"Select Your Role"}),it.jsxs("select",{id:"role",name:"role",value:r.role,onChange:u,className:"w-full px-3 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent bg-white text-charcoal",required:!0,children:[it.jsx("option",{value:"",children:"Choose your role"}),it.jsx("option",{value:"owner",children:"Owner"}),it.jsx("option",{value:"manager",children:"Manager"}),it.jsx("option",{value:"hiring_manager",children:"Hiring Manager"}),it.jsx("option",{value:"expo",children:"Expo"})]}),l.role&&it.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.role})]}),it.jsx(St,{id:"email",name:"email",type:"email",label:"Admin Email Address",value:r.email,onChange:u,error:l.email,required:!0}),it.jsx(St,{id:"password",name:"password",type:"password",label:"Password",value:r.password,onChange:u,error:l.password,required:!0})]}),it.jsx("button",{type:"submit",disabled:i,className:"w-full bg-gold-gradient text-charcoal py-4 px-6 rounded-xl hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-gold focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-bold text-lg",children:i?"Signing In...":"Admin Sign In"}),it.jsxs("div",{className:"text-center pt-4 border-t border-gray-200",children:[it.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:[it.jsx(s,{to:"/employee/login",className:"text-blue-600 hover:text-blue-700 transition-colors",children:"Employee Login"}),"  ",it.jsx(s,{to:"/customer/login",className:"text-blue-600 hover:text-blue-700 transition-colors",children:"Customer Login"})]}),it.jsx("p",{className:"text-xs text-gray-400",children:"Admin access is restricted to authorized personnel only"})]})]})})}),it.jsx("div",{className:"w-full bg-charcoal/5 border-t border-gold/20",children:it.jsx("div",{className:"max-w-4xl mx-auto px-6 py-4",children:it.jsx("div",{className:"text-center",children:it.jsx("p",{className:"text-xs text-gray-500",children:"Woodfire.food  Secure Admin Portal"})})})})]})},Wl=e.createContext(),Ql=()=>{const t=e.useContext(Wl);if(!t)throw new Error("useEmployee must be used within an EmployeeProvider");return t},Jl=({children:e})=>{const{user:t,loading:s}=wt();if(s)return it.jsx("div",{className:"min-h-screen bg-cream flex items-center justify-center",children:it.jsxs("div",{className:"text-center",children:[it.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gold mx-auto mb-4"}),it.jsx("p",{className:"text-charcoal",children:"Loading..."})]})});if(!t)return it.jsx(m,{to:"/admin-login",replace:!0});return["owner","admin","manager","hiring_manager","expo"].includes(t.role)?e:it.jsx(m,{to:"/employee/dashboard",replace:!0})},Gl=({children:e})=>{const{user:t,loading:s}=wt();if(s)return it.jsx("div",{className:"min-h-screen bg-cream flex items-center justify-center",children:it.jsxs("div",{className:"text-center",children:[it.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gold mx-auto mb-4"}),it.jsx("p",{className:"text-charcoal",children:"Loading..."})]})});if(!t)return it.jsx(m,{to:"/employee/login",replace:!0});if(["owner","admin","manager","hiring_manager","expo"].includes(t.role))return it.jsx(m,{to:"/admin/dashboard",replace:!0});if("employee"===t.role){if(t.can_access_dashboard)return e;switch(t.stage){case"interview":default:return it.jsx(m,{to:"/employee/qr-scan",replace:!0});case"location_selected":return it.jsx(m,{to:"/employee/questionnaire",replace:!0});case"questionnaire_completed":return it.jsx(m,{to:"/confirmation",replace:!0})}}return"INTERVIEW"===t.status?it.jsx(m,{to:"/confirmation",replace:!0}):"PAUSED"===t.status||"INACTIVE"===t.status?it.jsx(Ll,{status:t.status}):(t.status,e)},Kl=({children:e})=>{const{user:t,loading:s}=wt();return s?it.jsx("div",{className:"min-h-screen bg-cream flex items-center justify-center",children:it.jsxs("div",{className:"text-center",children:[it.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gold mx-auto mb-4"}),it.jsx("p",{className:"text-charcoal",children:"Loading..."})]})}):t?"customer"!==t.role?it.jsx(m,{to:"/employee/login",replace:!0}):e:it.jsx(m,{to:"/customer/login",replace:!0})},Yl=({children:e})=>{const{user:t,loading:s}=wt();if(s)return it.jsx("div",{className:"min-h-screen bg-cream flex items-center justify-center",children:it.jsxs("div",{className:"text-center",children:[it.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gold mx-auto mb-4"}),it.jsx("p",{className:"text-charcoal",children:"Loading..."})]})});if(t){if(["owner","admin","manager","hiring_manager","expo"].includes(t.role))return it.jsx(m,{to:"/admin/dashboard",replace:!0});if("customer"===t.role)return it.jsx(m,{to:"/customer/dashboard",replace:!0});if("employee"!==t.role)return"ACTIVE"===t.status?it.jsx(m,{to:"/employee/dashboard",replace:!0}):"INTERVIEW"===t.status?it.jsx(m,{to:"/confirmation",replace:!0}):it.jsx(m,{to:"/employee/qr-scan",replace:!0});if(t.can_access_dashboard)return it.jsx(m,{to:"/employee/dashboard",replace:!0});switch(t.stage){case"interview":default:return it.jsx(m,{to:"/employee/qr-scan",replace:!0});case"location_selected":return it.jsx(m,{to:"/employee/questionnaire",replace:!0});case"questionnaire_completed":return it.jsx(m,{to:"/confirmation",replace:!0})}}return e},Xl=({children:e})=>{const{employee:t}=Ql();return it.jsxs("div",{className:"min-h-screen bg-cream font-body text-charcoal flex flex-col",children:[it.jsx(Tt,{showContactInfo:!0,location:t.location,showLogout:!0}),it.jsx("main",{className:"flex-1",children:e}),it.jsx(_t,{location:t.location})]})},Zl=({children:e})=>{const{employee:t}=Ql();return it.jsxs("div",{className:"min-h-screen bg-cream font-body text-charcoal flex flex-col",children:[it.jsx(Tt,{showContactInfo:!0,location:t.location,showLogout:!1}),it.jsx("main",{className:"flex-1",children:e}),it.jsx(_t,{location:t.location})]})};function eo(){const[t,s]=e.useState({id:null,status:null,location:null,designation:null,personalInfo:{},interviewInfo:{}}),a=e.useCallback(e=>{s(t=>({...t,...e}))},[]);return e.useEffect(()=>{(()=>{try{return console.log("Onboarding pages existence check - should use API"),!0}catch(e){return console.error("Failed to check onboarding pages:",e),!1}})()},[]),it.jsx(kt,{children:it.jsx(Wl.Provider,{value:{employee:t,updateEmployee:a},children:it.jsx(i,{children:it.jsxs(c,{children:[it.jsx(d,{path:"/",element:it.jsx(ql,{})}),it.jsx(d,{path:"/seating",element:it.jsx(Ml,{})}),it.jsx(d,{path:"/success",element:it.jsx($l,{})}),it.jsx(d,{path:"/customer/login",element:it.jsx(Yl,{children:it.jsx(zl,{})})}),it.jsx(d,{path:"/customer/signup",element:it.jsx(Yl,{children:it.jsx(Ul,{})})}),it.jsx(d,{path:"/customer/dashboard",element:it.jsx(Kl,{children:it.jsx(Vl,{})})}),it.jsx(d,{path:"/admin-login",element:it.jsx(Yl,{children:it.jsx(Hl,{})})}),it.jsx(d,{path:"/employee/login",element:it.jsx(Yl,{children:it.jsx(Zl,{children:it.jsx(Ot,{})})})}),it.jsx(d,{path:"/admin/login",element:it.jsx(Yl,{children:it.jsx(Zl,{children:it.jsx(Ot,{})})})}),it.jsx(d,{path:"/admin/signup",element:it.jsx(Yl,{children:it.jsx(Zl,{children:it.jsx(It,{})})})}),it.jsx(d,{path:"/login",element:it.jsx(m,{to:"/employee/login",replace:!0})}),it.jsx(d,{path:"/signup",element:it.jsx(m,{to:"/admin/signup",replace:!0})}),it.jsx(d,{path:"/admin/dashboard",element:it.jsx(Jl,{children:it.jsx(sl,{})})}),it.jsx(d,{path:"/admin/qr-generator",element:it.jsx(Xl,{children:it.jsx(Pt,{})})}),it.jsx(d,{path:"/employee/dashboard",element:it.jsx(Gl,{children:it.jsx(Ol,{})})}),it.jsx(d,{path:"/employee/qr-scan",element:it.jsx(Xl,{children:it.jsx(Dl,{})})}),it.jsx(d,{path:"/employee/questionnaire",element:it.jsx(Xl,{children:it.jsx(Ct,{})})}),it.jsx(d,{path:"/qr/:action",element:it.jsx(Fl,{})}),it.jsx(d,{path:"/onboard/:locationId",element:it.jsx(Xl,{children:it.jsx(Ct,{})})}),it.jsx(d,{path:"/confirmation",element:it.jsx(Xl,{children:it.jsx(Et,{})})}),it.jsx(d,{path:"*",element:it.jsx(m,{to:"/",replace:!0})})]})})})})}gt.createRoot(document.getElementById("root")).render(it.jsx(e.StrictMode,{children:it.jsx(eo,{})}));
